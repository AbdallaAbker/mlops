(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[3472],{10744:(e,t,n)=>{"use strict";n.r(t);n.d(t,{DEFAULT_CONTEXT_ITEM_RANK:()=>y,default:()=>F});var i=n(44906);var s=n(90848);var o=n(22873);var r=n(28291);var a=n(51997);var l=n(9682);var d=n(88478);var c=n(36168);var h=n(52435);var u=n(58740);var p=n(5596);var m=n(6682);var g=n(26512);var f=n(85448);var v=n(28416);const _="TopBar";const b={id:"@jupyterlab/application-extension:top-bar",description:"Adds a toolbar to the top area (next to the main menu bar).",autoStart:true,requires:[a.ISettingRegistry,s.IToolbarWidgetRegistry],optional:[c.ITranslator],activate:(e,t,n,i)=>{const o=new h.Toolbar;o.id="jp-top-bar";(0,s.setToolbar)(o,(0,s.createToolbarFactory)(n,t,_,b.id,i!==null&&i!==void 0?i:c.nullTranslator),o);e.shell.add(o,"top",{rank:900})}};const y=100;var w;(function(e){e.activateNextTab="application:activate-next-tab";e.activatePreviousTab="application:activate-previous-tab";e.activateNextTabBar="application:activate-next-tab-bar";e.activatePreviousTabBar="application:activate-previous-tab-bar";e.close="application:close";e.closeOtherTabs="application:close-other-tabs";e.closeRightTabs="application:close-right-tabs";e.closeAll="application:close-all";e.setMode="application:set-mode";e.showPropertyPanel="property-inspector:show-panel";e.resetLayout="application:reset-layout";e.toggleHeader="application:toggle-header";e.toggleMode="application:toggle-mode";e.toggleLeftArea="application:toggle-left-area";e.toggleRightArea="application:toggle-right-area";e.toggleSideTabBar="application:toggle-side-tabbar";e.togglePresentationMode="application:toggle-presentation-mode";e.tree="router:tree";e.switchSidebar="sidebar:switch"})(w||(w={}));const C={id:"@jupyterlab/application-extension:commands",description:"Adds commands related to the shell.",autoStart:true,requires:[c.ITranslator],optional:[i.ILabShell,s.ICommandPalette],activate:(e,t,n,s)=>{const{commands:r,shell:a}=e;const l=t.load("jupyterlab");const d=l.__("Main Area");r.addCommand(i.JupyterFrontEndContextMenu.contextMenu,{label:l.__("Shift+Right Click for Browser Menu"),isEnabled:()=>false,execute:()=>void 0});const c=()=>{const t=e=>!!e.dataset.id;const n=e.contextMenuHitTest(t);if(!n){return a.currentWidget}return(0,u.find)(a.widgets("main"),(e=>e.id===n.dataset.id))||a.currentWidget};const h=e=>{e.forEach((e=>e.close()))};const p=(e,t)=>{if(e.type==="tab-area"){return e.widgets.includes(t)?e:null}if(e.type==="split-area"){for(const n of e.children){const e=p(n,t);if(e){return e}}}return null};const m=e=>{var t;const i=n===null||n===void 0?void 0:n.saveLayout();const s=i===null||i===void 0?void 0:i.mainArea;if(!s||o.PageConfig.getOption("mode")!=="multiple-document"){return null}const r=(t=s.dock)===null||t===void 0?void 0:t.main;return r?p(r,e):null};const g=e=>{const{id:t}=e;const n=m(e);const i=n?n.widgets||[]:[];const s=i.findIndex((e=>e.id===t));if(s<0){return[]}return i.slice(s+1)};r.addCommand(w.close,{label:()=>l.__("Close Tab"),isEnabled:()=>{const e=c();return!!e&&e.title.closable},execute:()=>{const e=c();if(e){e.close()}}});r.addCommand(w.closeOtherTabs,{label:()=>l.__("Close All Other Tabs"),isEnabled:()=>(0,u.some)(a.widgets("main"),((e,t)=>t===1)),execute:()=>{const e=c();if(!e){return}const{id:t}=e;for(const n of a.widgets("main")){if(n.id!==t){n.close()}}}});r.addCommand(w.closeRightTabs,{label:()=>l.__("Close Tabs to Right"),isEnabled:()=>!!c()&&g(c()).length>0,execute:()=>{const e=c();if(!e){return}h(g(e))}});if(n){r.addCommand(w.activateNextTab,{label:l.__("Activate Next Tab"),execute:()=>{n.activateNextTab()}});r.addCommand(w.activatePreviousTab,{label:l.__("Activate Previous Tab"),execute:()=>{n.activatePreviousTab()}});r.addCommand(w.activateNextTabBar,{label:l.__("Activate Next Tab Bar"),execute:()=>{n.activateNextTabBar()}});r.addCommand(w.activatePreviousTabBar,{label:l.__("Activate Previous Tab Bar"),execute:()=>{n.activatePreviousTabBar()}});r.addCommand(w.closeAll,{label:l.__("Close All Tabs"),execute:()=>{n.closeAll()}});r.addCommand(w.toggleHeader,{label:l.__("Show Header"),execute:()=>{if(n.mode==="single-document"){n.toggleTopInSimpleModeVisibility()}},isToggled:()=>n.isTopInSimpleModeVisible(),isVisible:()=>n.mode==="single-document"});r.addCommand(w.toggleLeftArea,{label:l.__("Show Left Sidebar"),execute:()=>{if(n.leftCollapsed){n.expandLeft()}else{n.collapseLeft();if(n.currentWidget){n.activateById(n.currentWidget.id)}}},isToggled:()=>!n.leftCollapsed,isEnabled:()=>!n.isEmpty("left")});r.addCommand(w.toggleRightArea,{label:l.__("Show Right Sidebar"),execute:()=>{if(n.rightCollapsed){n.expandRight()}else{n.collapseRight();if(n.currentWidget){n.activateById(n.currentWidget.id)}}},isToggled:()=>!n.rightCollapsed,isEnabled:()=>!n.isEmpty("right")});r.addCommand(w.toggleSideTabBar,{label:e=>e.side==="right"?l.__("Show Right Activity Bar"):l.__("Show Left Activity Bar"),execute:e=>{if(e.side==="right"){n.toggleSideTabBarVisibility("right")}else{n.toggleSideTabBarVisibility("left")}},isToggled:e=>e.side==="right"?n.isSideTabBarVisible("right"):n.isSideTabBarVisible("left"),isEnabled:e=>e.side==="right"?!n.isEmpty("right"):!n.isEmpty("left")});r.addCommand(w.togglePresentationMode,{label:()=>l.__("Presentation Mode"),execute:()=>{n.presentationMode=!n.presentationMode},isToggled:()=>n.presentationMode,isVisible:()=>true});r.addCommand(w.setMode,{label:e=>e["mode"]?l.__("Set %1 mode.",e["mode"]):l.__("Set the layout `mode`."),caption:l.__('The layout `mode` can be "single-document" or "multiple-document".'),isVisible:e=>{const t=e["mode"];return t==="single-document"||t==="multiple-document"},execute:e=>{const t=e["mode"];if(t==="single-document"||t==="multiple-document"){n.mode=t;return}throw new Error(`Unsupported application shell mode: ${t}`)}});r.addCommand(w.toggleMode,{label:l.__("Simple Interface"),isToggled:()=>n.mode==="single-document",execute:()=>{const e=n.mode==="multiple-document"?{mode:"single-document"}:{mode:"multiple-document"};return r.execute(w.setMode,e)}});r.addCommand(w.resetLayout,{label:l.__("Reset Default Layout"),execute:()=>{if(n.presentationMode){r.execute(w.togglePresentationMode).catch((e=>{console.error("Failed to undo presentation mode.",e)}))}if(n.mode==="single-document"&&!n.isTopInSimpleModeVisible()){r.execute(w.toggleHeader).catch((e=>{console.error("Failed to display title header.",e)}))}["left","right"].forEach((e=>{if(!n.isSideTabBarVisible(e)&&!n.isEmpty(e)){r.execute(w.toggleSideTabBar,{side:e}).catch((t=>{console.error(`Failed to show ${e} activity bar.`,t)}))}}))}})}if(s){[w.activateNextTab,w.activatePreviousTab,w.activateNextTabBar,w.activatePreviousTabBar,w.close,w.closeAll,w.closeOtherTabs,w.closeRightTabs,w.toggleHeader,w.toggleLeftArea,w.toggleRightArea,w.togglePresentationMode,w.toggleMode,w.resetLayout].forEach((e=>s.addItem({command:e,category:d})));["right","left"].forEach((e=>{s.addItem({command:w.toggleSideTabBar,category:d,args:{side:e}})}))}}};const x={id:"@jupyterlab/application-extension:main",description:"Initializes the application and provides the URL tree path handler.",requires:[i.IRouter,s.IWindowResolver,c.ITranslator,i.JupyterFrontEnd.ITreeResolver],optional:[i.IConnectionLost],provides:i.ITreePathUpdater,activate:(e,t,n,r,a,l)=>{const d=r.load("jupyterlab");if(!(e instanceof i.JupyterLab)){throw new Error(`${x.id} must be activated in JupyterLab.`)}let c="";let h="";function u(e){void a.paths.then((()=>{h=e;if(!c){const n=o.PageConfig.getUrl({treePath:e});const i=o.URLExt.parse(n).pathname;t.navigate(i,{skipRouting:true});o.PageConfig.setOption("treePath",e)}}))}const p=n.name;console.debug(`Starting application in workspace: "${p}"`);if(e.registerPluginErrors.length!==0){const t=v.createElement("pre",null,e.registerPluginErrors.map((e=>e.message)).join("\n"));void(0,s.showErrorMessage)(d.__("Error Registering Plugins"),{message:t})}e.shell.layoutModified.connect((()=>{e.commands.notifyCommandChanged()}));e.shell.modeChanged.connect(((e,n)=>{const i=o.PageConfig.getUrl({mode:n});const s=o.URLExt.parse(i).pathname;t.navigate(s,{skipRouting:true});o.PageConfig.setOption("mode",n)}));void a.paths.then((()=>{e.shell.currentPathChanged.connect(((e,n)=>{const i=n.newValue;const s=i||h;const r=o.PageConfig.getUrl({treePath:s});const a=o.URLExt.parse(r).pathname;t.navigate(a,{skipRouting:true});o.PageConfig.setOption("treePath",s);c=i}))}));l=l||i.ConnectionLost;e.serviceManager.connectionFailure.connect(((e,t)=>l(e,t,r)));const m=e.serviceManager.builder;const g=()=>m.build().then((()=>(0,s.showDialog)({title:d.__("Build Complete"),body:v.createElement("div",null,d.__("Build successfully completed, reload page?"),v.createElement("br",null),d.__("You will lose any unsaved changes.")),buttons:[s.Dialog.cancelButton({label:d.__("Reload Without Saving"),actions:["reload"]}),s.Dialog.okButton({label:d.__("Save and Reload")})],hasClose:true}))).then((({button:{accept:n,actions:i}})=>{if(n){void e.commands.execute("docmanager:save").then((()=>{t.reload()})).catch((e=>{void(0,s.showErrorMessage)(d.__("Save Failed"),{message:v.createElement("pre",null,e.message)})}))}else if(i.includes("reload")){t.reload()}})).catch((e=>{void(0,s.showErrorMessage)(d.__("Build Failed"),{message:v.createElement("pre",null,e.message)})}));if(m.isAvailable&&m.shouldCheck){void m.getStatus().then((e=>{if(e.status==="building"){return g()}if(e.status!=="needed"){return}const t=v.createElement("div",null,d.__("JupyterLab build is suggested:"),v.createElement("br",null),v.createElement("pre",null,e.message));void(0,s.showDialog)({title:d.__("Build Recommended"),body:t,buttons:[s.Dialog.cancelButton(),s.Dialog.okButton({label:d.__("Build")})]}).then((e=>e.button.accept?g():undefined))}))}return u},autoStart:true};const S={id:"@jupyterlab/application-extension:context-menu",description:"Populates the context menu.",autoStart:true,requires:[a.ISettingRegistry,c.ITranslator],activate:(e,t,n)=>{const i=n.load("jupyterlab");function s(t){const n=new h.RankedMenu({...t,commands:e.commands});if(t.label){n.title.label=i.__(t.label)}return n}e.started.then((()=>z.loadSettingsContextMenu(e.contextMenu,t,s,n))).catch((e=>{console.error("Failed to load context menu items from settings registry.",e)}))}};const k={id:"@jupyterlab/application-extension:dirty",description:"Adds safeguard dialog when closing the browser tab with unsaved modifications.",autoStart:true,requires:[c.ITranslator],activate:(e,t)=>{if(!(e instanceof i.JupyterLab)){throw new Error(`${k.id} must be activated in JupyterLab.`)}const n=t.load("jupyterlab");const s=n.__("Are you sure you want to exit JupyterLab?\n\nAny unsaved changes will be lost.");window.addEventListener("beforeunload",(t=>{if(e.status.isDirty){return t.returnValue=s}}))}};const j={id:"@jupyterlab/application-extension:layout",description:"Provides the shell layout restorer.",requires:[l.IStateDB,i.ILabShell,a.ISettingRegistry],optional:[c.ITranslator],activate:(e,t,n,r,a)=>{const l=(a!==null&&a!==void 0?a:c.nullTranslator).load("jupyterlab");const d=e.started;const h=e.commands;const u=o.PageConfig.getOption("mode");const m=new i.LayoutRestorer({connector:t,first:d,registry:h,mode:u});r.load(D.id).then((t=>{var i,s;const o=t.composite["layout"];void n.restoreLayout(u,m,{"multiple-document":(i=o.multiple)!==null&&i!==void 0?i:{},"single-document":(s=o.single)!==null&&s!==void 0?s:{}}).then((()=>{n.layoutModified.connect((()=>{void m.save(n.saveLayout())}));t.changed.connect(g);z.activateSidebarSwitcher(e,n,t,l)}))})).catch((e=>{console.error("Fail to load settings for the layout restorer.");console.error(e)}));return m;async function g(e){if(!p.JSONExt.deepEqual(e.composite["layout"],{single:n.userLayout["single-document"],multiple:n.userLayout["multiple-document"]})){const e=await(0,s.showDialog)({title:l.__("Information"),body:l.__("User layout customization has changed. You may need to reload JupyterLab to see the changes."),buttons:[s.Dialog.cancelButton(),s.Dialog.okButton({label:l.__("Reload")})]});if(e.button.accept){location.reload()}}}},autoStart:true,provides:i.ILayoutRestorer};const M={id:"@jupyterlab/application-extension:router",description:"Provides the URL router",requires:[i.JupyterFrontEnd.IPaths],activate:(e,t)=>{const{commands:n}=e;const s=t.urls.base;const o=new i.Router({base:s,commands:n});void e.started.then((()=>{void o.route();window.addEventListener("popstate",(()=>{void o.route()}))}));return o},autoStart:true,provides:i.IRouter};const E={id:"@jupyterlab/application-extension:tree-resolver",description:"Provides the tree route resolver",autoStart:true,requires:[i.IRouter],provides:i.JupyterFrontEnd.ITreeResolver,activate:(e,t)=>{const{commands:n}=e;const i=new g.DisposableSet;const s=new p.PromiseDelegate;const r=new RegExp("/(lab|doc)(/workspaces/[a-zA-Z0-9-_]+)?(/tree/.*)?");i.add(n.addCommand(w.tree,{execute:async e=>{var t;if(i.isDisposed){return}const n=o.URLExt.queryStringToObject((t=e.search)!==null&&t!==void 0?t:"");const r=n["file-browser-path"]||"";delete n["file-browser-path"];i.dispose();s.resolve({browser:r,file:o.PageConfig.getOption("treePath")})}}));i.add(t.register({command:w.tree,pattern:r}));const a=()=>{if(i.isDisposed){return}i.dispose();s.resolve(null)};t.routed.connect(a);i.add(new g.DisposableDelegate((()=>{t.routed.disconnect(a)})));return{paths:s.promise}}};const I={id:"@jupyterlab/application-extension:notfound",description:"Defines the behavior for not found URL (aka route).",requires:[i.JupyterFrontEnd.IPaths,i.IRouter,c.ITranslator],activate:(e,t,n,i)=>{const o=i.load("jupyterlab");const r=t.urls.notFound;if(!r){return}const a=n.base;const l=o.__("The path: %1 was not found. JupyterLab redirected to: %2",r,a);n.navigate("");void(0,s.showErrorMessage)(o.__("Path Not Found"),{message:l})},autoStart:true};const T={id:"@jupyterlab/application-extension:faviconbusy",description:"Handles the favicon depending on the application status.",requires:[i.ILabStatus],activate:async(e,t)=>{t.busySignal.connect(((e,t)=>{const n=document.querySelector(`link[rel="icon"]${t?".idle.favicon":".busy.favicon"}`);if(!n){return}const i=document.querySelector(`link${t?".busy.favicon":".idle.favicon"}`);if(!i){return}if(n!==i){n.rel="";i.rel="icon";i.parentNode.replaceChild(i,i)}}))},autoStart:true};const D={id:"@jupyterlab/application-extension:shell",description:"Provides the JupyterLab shell. It has an extended API compared to `app.shell`.",optional:[a.ISettingRegistry],activate:(e,t)=>{if(!(e.shell instanceof i.LabShell)){throw new Error(`${D.id} did not find a LabShell instance.`)}if(t){void t.load(D.id).then((t=>{e.shell.updateConfig(t.composite);t.changed.connect((()=>{e.shell.updateConfig(t.composite)}))}))}return e.shell},autoStart:true,provides:i.ILabShell};const L={id:"@jupyterlab/application-extension:status",description:"Provides the application status.",activate:e=>{if(!(e instanceof i.JupyterLab)){throw new Error(`${L.id} must be activated in JupyterLab.`)}return e.status},autoStart:true,provides:i.ILabStatus};const P={id:"@jupyterlab/application-extension:info",description:"Provides the application information.",activate:e=>{if(!(e instanceof i.JupyterLab)){throw new Error(`${P.id} must be activated in JupyterLab.`)}return e.info},autoStart:true,provides:i.JupyterLab.IInfo};const A={id:"@jupyterlab/application-extension:paths",description:"Provides the application paths.",activate:e=>{if(!(e instanceof i.JupyterLab)){throw new Error(`${A.id} must be activated in JupyterLab.`)}return e.paths},autoStart:true,provides:i.JupyterFrontEnd.IPaths};const R={id:"@jupyterlab/application-extension:property-inspector",description:"Provides the property inspector.",autoStart:true,requires:[i.ILabShell,c.ITranslator],optional:[i.ILayoutRestorer],provides:r.IPropertyInspectorProvider,activate:(e,t,n,i)=>{const s=n.load("jupyterlab");const o=new r.SideBarPropertyInspectorProvider({shell:t,translator:n});o.title.icon=h.buildIcon;o.title.caption=s.__("Property Inspector");o.id="jp-property-inspector";t.add(o,"right",{rank:100,type:"Property Inspector"});e.commands.addCommand(w.showPropertyPanel,{label:s.__("Property Inspector"),execute:()=>{t.activateById(o.id)}});if(i){i.add(o,"jp-property-inspector")}return o}};const N={id:"@jupyterlab/application-extension:logo",description:"Sets the application logo.",autoStart:true,requires:[i.ILabShell],activate:(e,t)=>{const n=new f.Widget;h.jupyterIcon.element({container:n.node,elementPosition:"center",margin:"2px 2px 2px 8px",height:"auto",width:"16px"});n.id="jp-MainLogo";t.add(n,"top",{rank:0})}};const O={id:"@jupyterlab/application-extension:mode-switch",description:"Adds the interface mode switch",requires:[i.ILabShell,c.ITranslator],optional:[d.IStatusBar,a.ISettingRegistry],activate:(e,t,n,i,s)=>{if(i===null){return}const o=n.load("jupyterlab");const r=new h.Switch;r.id="jp-single-document-mode";r.valueChanged.connect(((e,n)=>{t.mode=n.newValue?"single-document":"multiple-document"}));t.modeChanged.connect(((e,t)=>{r.value=t==="single-document"}));if(s){const n=s.load(D.id);const i=e=>{const n=e.get("startMode").composite;if(n){t.mode=n==="single"?"single-document":"multiple-document"}};Promise.all([n,e.restored]).then((([e])=>{i(e)})).catch((e=>{console.error(e.message)}))}const a=()=>{const t=e.commands.keyBindings.find((e=>e.command==="application:toggle-mode"));if(t){const e=t.keys.map(m.CommandRegistry.formatKeystroke).join(", ");r.caption=o.__("Simple Interface (%1)",e)}else{r.caption=o.__("Simple Interface")}};a();e.commands.keyBindingChanged.connect((()=>{a()}));r.label=o.__("Simple");i.registerStatusItem(O.id,{item:r,align:"left",rank:-1})},autoStart:true};const B=[S,k,x,C,j,M,E,I,T,D,L,P,O,A,R,N,b];const F=B;var z;(function(e){async function t(e){const t=await(0,s.showDialog)({title:e.__("Information"),body:e.__("Context menu customization has changed. You will need to reload JupyterLab to see the changes."),buttons:[s.Dialog.cancelButton(),s.Dialog.okButton({label:e.__("Reload")})]});if(t.button.accept){location.reload()}}async function n(e,n,i,o){var r;const l=o.load("jupyterlab");const d=S.id;let c=null;let h={};function u(e){var t,i;h={};const s=Object.keys(n.plugins).map((e=>{var t,i;const s=(i=(t=n.plugins[e].schema["jupyter.lab.menus"])===null||t===void 0?void 0:t.context)!==null&&i!==void 0?i:[];h[e]=s;return s})).concat([(i=(t=e["jupyter.lab.menus"])===null||t===void 0?void 0:t.context)!==null&&i!==void 0?i:[]]).reduceRight(((e,t)=>a.SettingRegistry.reconcileItems(e,t,true)),[]);e.properties.contextMenu.default=a.SettingRegistry.reconcileItems(s,e.properties.contextMenu.default,true).sort(((e,t)=>{var n,i;return((n=e.rank)!==null&&n!==void 0?n:Infinity)-((i=t.rank)!==null&&i!==void 0?i:Infinity)}))}n.transform(d,{compose:e=>{var t,n,i,s;if(!c){c=p.JSONExt.deepCopy(e.schema);u(c)}const o=(i=(n=(t=c.properties)===null||t===void 0?void 0:t.contextMenu)===null||n===void 0?void 0:n.default)!==null&&i!==void 0?i:[];const r={...e.data.user,contextMenu:(s=e.data.user.contextMenu)!==null&&s!==void 0?s:[]};const l={...e.data.composite,contextMenu:a.SettingRegistry.reconcileItems(o,r.contextMenu,false)};e.data={composite:l,user:r};return e},fetch:e=>{if(!c){c=p.JSONExt.deepCopy(e.schema);u(c)}return{data:e.data,id:e.id,raw:e.raw,schema:c,version:e.version}}});const m=await n.load(d);const g=(r=m.composite.contextMenu)!==null&&r!==void 0?r:[];a.SettingRegistry.filterDisabledItems(g).forEach((t=>{s.MenuFactory.addContextItem({rank:y,...t},e,i)}));m.changed.connect((()=>{var e;const n=(e=m.composite.contextMenu)!==null&&e!==void 0?e:[];if(!p.JSONExt.deepEqual(g,n)){void t(l)}}));n.pluginChanged.connect((async(o,r)=>{var c,u,m,f;if(r!==d){const o=(c=h[r])!==null&&c!==void 0?c:[];const d=(m=(u=n.plugins[r].schema["jupyter.lab.menus"])===null||u===void 0?void 0:u.context)!==null&&m!==void 0?m:[];if(!p.JSONExt.deepEqual(o,d)){if(h[r]){await t(l)}else{h[r]=p.JSONExt.deepCopy(d);const t=(f=a.SettingRegistry.reconcileItems(d,g,false,false))!==null&&f!==void 0?f:[];a.SettingRegistry.filterDisabledItems(t).forEach((t=>{s.MenuFactory.addContextItem({rank:y,...t},e,i)}))}}}}))}e.loadSettingsContextMenu=n;function i(e,t,n,i){e.commands.addCommand(w.switchSidebar,{label:i.__("Switch Sidebar Side"),execute:()=>{const i=e.contextMenuHitTest((e=>!!e.dataset.id));if(!i){return}const s=i.dataset["id"];const o=document.getElementById("jp-left-stack");const r=document.getElementById(s);let a=null;if(o&&r&&o.contains(r)){const e=(0,u.find)(t.widgets("left"),(e=>e.id===s));if(e){a=t.move(e,"right");t.activateById(e.id)}}else{const e=(0,u.find)(t.widgets("right"),(e=>e.id===s));if(e){a=t.move(e,"left");t.activateById(e.id)}}if(a){n.set("layout",{single:a["single-document"],multiple:a["multiple-document"]}).catch((e=>{console.error("Failed to save user layout customization.",e)}))}}});e.commands.commandExecuted.connect(((e,t)=>{if(t.id===w.resetLayout){n.remove("layout").catch((e=>{console.error("Failed to remove user layout customization.",e)}))}}))}e.activateSidebarSwitcher=i})(z||(z={}))},95171:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(98328);var r=n(90516);var a=n(9469);var l=n(93379);var d=n.n(l);var c=n(7795);var h=n.n(c);var u=n(90569);var p=n.n(u);var m=n(3565);var g=n.n(m);var f=n(19216);var v=n.n(f);var _=n(44589);var b=n.n(_);var y=n(38994);var w={};w.styleTagTransform=b();w.setAttributes=g();w.insert=p().bind(null,"head");w.domAPI=h();w.insertStyleElement=v();var C=d()(y.Z,w);const x=y.Z&&y.Z.locals?y.Z.locals:undefined},69760:(e,t,n)=>{"use strict";n.r(t);n.d(t,{ConnectionLost:()=>o,IConnectionLost:()=>V,ILabShell:()=>N,ILabStatus:()=>U,ILayoutRestorer:()=>_,IMimeDocumentTracker:()=>C,IRouter:()=>$,ITreePathUpdater:()=>q,JupyterFrontEnd:()=>u,JupyterFrontEndContextMenu:()=>m,JupyterLab:()=>H,LabShell:()=>O,LayoutRestorer:()=>y,Router:()=>W,createRendermimePlugin:()=>S,createRendermimePlugins:()=>x,createSemanticCommand:()=>K});var i=n(90848);var s=n(36168);const o=async function(e,t,n){n=n||s.nullTranslator;const o=n.load("jupyterlab");const r=o.__("Server Connection Error");const a=o.__("A connection to the Jupyter server could not be established.\n"+"JupyterLab will continue trying to reconnect.\n"+"Check your network connection or Jupyter server configuration.\n");return(0,i.showErrorMessage)(r,{message:a})};var r=n(35788);var a=n(74513);var l=n(52435);var d=n(5097);var c=n(5596);var h=n(71372);class u extends d.Application{constructor(e){super(e);this._formatChanged=new h.Signal(this);this.contextMenu=new l.ContextMenuSvg({commands:this.commands,renderer:e.contextMenuRenderer,groupByTarget:false,sortBySelector:false});const t=new Promise((e=>{requestAnimationFrame((()=>{e()}))}));this.commandLinker=e.commandLinker||new i.CommandLinker({commands:this.commands});this.docRegistry=e.docRegistry||new r.DocumentRegistry;this.restored=e.restored||this.started.then((()=>t)).catch((()=>t));this.serviceManager=e.serviceManager||new a.ServiceManager}get format(){return this._format}set format(e){if(this._format!==e){this._format=e;document.body.dataset["format"]=e;this._formatChanged.emit(e)}}get formatChanged(){return this._formatChanged}contextMenuHitTest(e){if(!this._contextMenuEvent||!(this._contextMenuEvent.target instanceof Node)){return undefined}let t=this._contextMenuEvent.target;do{if(t instanceof HTMLElement&&e(t)){return t}t=t.parentNode}while(t&&t.parentNode&&t!==t.parentNode);return undefined}evtContextMenu(e){this._contextMenuEvent=e;if(e.shiftKey||p.suppressContextMenu(e.target)){return}const t=this.contextMenu.open(e);if(t){const t=this.contextMenu.menu.items;if(t.length===1&&t[0].command===m.contextMenu){this.contextMenu.menu.close();return}e.preventDefault();e.stopPropagation()}}}(function(e){function t(e,t){const n=new RegExp(`^${t.urls.doc}`);const i=e.match(n);if(i){return true}else{return false}}e.inDocMode=t;e.IPaths=new c.Token("@jupyterlab/application:IPaths",`A service providing information about various\n  URLs and server paths for the current application. Use this service if you want to\n  assemble URLs to use the JupyterLab REST API.`);e.ITreeResolver=new c.Token("@jupyterlab/application:ITreeResolver","A service to resolve the tree path.")})(u||(u={}));var p;(function(e){function t(e){return e.closest("[data-jp-suppress-context-menu]")!==null}e.suppressContextMenu=t})(p||(p={}));var m;(function(e){e.contextMenu="__internal:context-menu-info"})(m||(m={}));var g=n(22873);var f=n(33112);var v=n(75379);const _=new c.Token("@jupyterlab/application:ILayoutRestorer","A service providing application layout restoration functionality. Use this to have your activities restored across page loads.");const b="layout-restorer:data";class y{constructor(e){this._deferred=new Array;this._deferredMainArea=null;this._firstDone=false;this._promisesDone=false;this._promises=[];this._restored=new c.PromiseDelegate;this._trackers=new Set;this._widgets=new Map;this._mode="multiple-document";this._connector=e.connector;this._first=e.first;this._registry=e.registry;if(e.mode){this._mode=e.mode}void this._first.then((()=>{this._firstDone=true})).then((()=>Promise.all(this._promises))).then((()=>{this._promisesDone=true;this._trackers.clear()})).then((()=>{this._restored.resolve(void 0)}))}get isDeferred(){return this._deferred.length>0}get restored(){return this._restored.promise}add(e,t){w.nameProperty.set(e,t);this._widgets.set(t,e);e.disposed.connect(this._onWidgetDisposed,this)}async fetch(){var e;const t={fresh:true,mainArea:null,downArea:null,leftArea:null,rightArea:null,topArea:null,relativeSizes:null};const n=this._connector.fetch(b);try{const[i]=await Promise.all([n,this.restored]);if(!i){return t}const{main:s,down:o,left:r,right:a,relativeSizes:l,top:d}=i;const c=false;let h=null;if(this._mode==="multiple-document"){h=this._rehydrateMainArea(s)}else{this._deferredMainArea=s}const u=this._rehydrateDownArea(o);const p=this._rehydrateSideArea(r);const m=this._rehydrateSideArea(a);return{fresh:c,mainArea:h,downArea:u,leftArea:p,rightArea:m,relativeSizes:l||null,topArea:(e=d)!==null&&e!==void 0?e:null}}catch(i){return t}}async restore(e,t){if(this._firstDone){throw new Error("restore() must be called before `first` has resolved.")}const{namespace:n}=e;if(this._trackers.has(n)){throw new Error(`The tracker "${n}" is already restored.`)}const{args:i,command:s,name:o,when:r}=t;this._trackers.add(n);e.widgetAdded.connect(((e,t)=>{const i=o(t);if(i){this.add(t,`${n}:${i}`)}}),this);e.widgetUpdated.connect(((e,t)=>{const i=o(t);if(i){const e=`${n}:${i}`;w.nameProperty.set(t,e);this._widgets.set(e,t)}}));const a=this._first;if(this._mode=="multiple-document"){const t=e.restore({args:i||(()=>c.JSONExt.emptyObject),command:s,connector:this._connector,name:o,registry:this._registry,when:r?[a].concat(r):a}).catch((e=>{console.error(e)}));this._promises.push(t);return t}e.defer({args:i||(()=>c.JSONExt.emptyObject),command:s,connector:this._connector,name:o,registry:this._registry,when:r?[a].concat(r):a});this._deferred.push(e)}async restoreDeferred(){if(!this.isDeferred){return null}const e=Promise.resolve();const t=this._deferred.map((t=>e.then((()=>t.restore()))));this._deferred.length=0;await Promise.all(t);return this._rehydrateMainArea(this._deferredMainArea)}save(e){if(!this._promisesDone){const e="save() was called prematurely.";console.warn(e);return Promise.reject(e)}const t={};t.main=this.isDeferred?this._deferredMainArea:this._dehydrateMainArea(e.mainArea);t.down=this._dehydrateDownArea(e.downArea);t.left=this._dehydrateSideArea(e.leftArea);t.right=this._dehydrateSideArea(e.rightArea);t.relativeSizes=e.relativeSizes;t.top={...e.topArea};return this._connector.save(b,t)}_dehydrateMainArea(e){if(!e){return null}return w.serializeMain(e)}_rehydrateMainArea(e){if(!e){return null}return w.deserializeMain(e,this._widgets)}_dehydrateDownArea(e){if(!e){return null}const t={size:e.size};if(e.currentWidget){const n=w.nameProperty.get(e.currentWidget);if(n){t.current=n}}if(e.widgets){t.widgets=e.widgets.map((e=>w.nameProperty.get(e))).filter((e=>!!e))}return t}_rehydrateDownArea(e){var t;if(!e){return{currentWidget:null,size:0,widgets:null}}const n=this._widgets;const i=e.current&&n.has(`${e.current}`)?n.get(`${e.current}`):null;const s=!Array.isArray(e.widgets)?null:e.widgets.map((e=>n.has(`${e}`)?n.get(`${e}`):null)).filter((e=>!!e));return{currentWidget:i,size:(t=e.size)!==null&&t!==void 0?t:0,widgets:s}}_dehydrateSideArea(e){if(!e){return null}const t={collapsed:e.collapsed,visible:e.visible};if(e.currentWidget){const n=w.nameProperty.get(e.currentWidget);if(n){t.current=n}}if(e.widgets){t.widgets=e.widgets.map((e=>w.nameProperty.get(e))).filter((e=>!!e))}return t}_rehydrateSideArea(e){var t,n;if(!e){return{collapsed:true,currentWidget:null,visible:true,widgets:null}}const i=this._widgets;const s=(t=e.collapsed)!==null&&t!==void 0?t:false;const o=e.current&&i.has(`${e.current}`)?i.get(`${e.current}`):null;const r=!Array.isArray(e.widgets)?null:e.widgets.map((e=>i.has(`${e}`)?i.get(`${e}`):null)).filter((e=>!!e));return{collapsed:s,currentWidget:o,widgets:r,visible:(n=e.visible)!==null&&n!==void 0?n:true}}_onWidgetDisposed(e){const t=w.nameProperty.get(e);this._widgets.delete(t)}}var w;(function(e){e.nameProperty=new v.AttachedProperty({name:"name",create:e=>""});function t(n){if(!n||!n.type){return null}if(n.type==="tab-area"){return{type:"tab-area",currentIndex:n.currentIndex,widgets:n.widgets.map((t=>e.nameProperty.get(t))).filter((e=>!!e))}}return{type:"split-area",orientation:n.orientation,sizes:n.sizes,children:n.children.map(t).filter((e=>!!e))}}function n(n){const i={dock:n&&n.dock&&t(n.dock.main)||null};if(n){if(n.currentWidget){const t=e.nameProperty.get(n.currentWidget);if(t){i.current=t}}}return i}e.serializeMain=n;function i(e,t){if(!e){return null}const n=e.type||"unknown";if(n==="unknown"||n!=="tab-area"&&n!=="split-area"){console.warn(`Attempted to deserialize unknown type: ${n}`);return null}if(n==="tab-area"){const{currentIndex:n,widgets:i}=e;const s={type:"tab-area",currentIndex:n||0,widgets:i&&i.map((e=>t.get(e))).filter((e=>!!e))||[]};if(s.currentIndex>s.widgets.length-1){s.currentIndex=0}return s}const{orientation:s,sizes:o,children:r}=e;const a={type:"split-area",orientation:s,sizes:o||[],children:r&&r.map((e=>i(e,t))).filter((e=>!!e))||[]};return a}function s(e,t){if(!e){return null}const n=e.current||null;const s=e.dock||null;return{currentWidget:n&&t.has(n)&&t.get(n)||null,dock:s?{main:i(s,t)}:null}}e.deserializeMain=s})(w||(w={}));const C=new c.Token("@jupyterlab/application:IMimeDocumentTracker","A widget tracker for documents rendered using a mime renderer extension. Use this if you want to list and interact with documents rendered by such extensions.");function x(e){const t=[];const n="application-mimedocuments";const s=new i.WidgetTracker({namespace:n});e.forEach((e=>{let n=e.default;if(!e.hasOwnProperty("__esModule")){n=e}if(!Array.isArray(n)){n=[n]}n.forEach((e=>{t.push(S(s,e))}))}));t.push({id:"@jupyterlab/application:mimedocument",description:"Provides a mime document widget tracker.",optional:[_],provides:C,autoStart:true,activate:(e,t)=>{if(t){void t.restore(s,{command:"docmanager:open",args:e=>({path:e.context.path,factory:k.factoryNameProperty.get(e)}),name:e=>`${e.context.path}:${k.factoryNameProperty.get(e)}`})}return s}});return t}function S(e,t){return{id:t.id,description:t.description,requires:[f.IRenderMimeRegistry,s.ITranslator],autoStart:true,activate:(n,i,s)=>{if(t.rank!==undefined){i.addFactory(t.rendererFactory,t.rank)}else{i.addFactory(t.rendererFactory)}if(!t.documentWidgetFactoryOptions){return}const o=n.docRegistry;let a=[];if(Array.isArray(t.documentWidgetFactoryOptions)){a=t.documentWidgetFactoryOptions}else{a=[t.documentWidgetFactoryOptions]}if(t.fileTypes){t.fileTypes.forEach((e=>{if(e.icon){e={...e,icon:l.LabIcon.resolve({icon:e.icon})}}n.docRegistry.addFileType(e)}))}a.forEach((n=>{const a=n.toolbarFactory?e=>n.toolbarFactory(e.content.renderer):undefined;const l=new r.MimeDocumentFactory({renderTimeout:t.renderTimeout,dataType:t.dataType,rendermime:i,modelName:n.modelName,name:n.name,primaryFileType:o.getFileType(n.primaryFileType),fileTypes:n.fileTypes,defaultFor:n.defaultFor,defaultRendered:n.defaultRendered,toolbarFactory:a,translator:s,factory:t.rendererFactory});o.addWidgetFactory(l);l.widgetCreated.connect(((t,n)=>{k.factoryNameProperty.set(n,l.name);n.context.pathChanged.connect((()=>{void e.save(n)}));void e.add(n)}))}))}}}var k;(function(e){e.factoryNameProperty=new v.AttachedProperty({name:"factoryName",create:()=>undefined})})(k||(k={}));var j=n(58740);var M=n(28821);var E=n(95905);var I=n(85448);const T="jp-LabShell";const D="jp-SideBar";const L="jp-mod-current";const P="jp-mod-active";const A=900;const R="jp-Activity";const N=new c.Token("@jupyterlab/application:ILabShell","A service for interacting with the JupyterLab shell. The top-level ``application`` object also has a reference to the shell, but it has a restricted interface in order to be agnostic to different shell implementations on the application. Use this to get more detailed information about currently active widgets and layout state.");class O extends I.Widget{constructor(e){super();this._dockChildHook=(e,t)=>{switch(t.type){case"child-added":t.child.addClass(R);this._tracker.add(t.child);break;case"child-removed":t.child.removeClass(R);this._tracker.remove(t.child);break;default:break}return true};this._activeChanged=new h.Signal(this);this._cachedLayout=null;this._currentChanged=new h.Signal(this);this._currentPath="";this._currentPathChanged=new h.Signal(this);this._modeChanged=new h.Signal(this);this._isRestored=false;this._layoutModified=new h.Signal(this);this._layoutDebouncer=new E.Debouncer((()=>{this._layoutModified.emit(undefined)}),0);this._restored=new c.PromiseDelegate;this._tracker=new I.FocusTracker;this._topHandlerHiddenByUser=false;this._idTypeMap=new Map;this._mainOptionsCache=new Map;this._sideOptionsCache=new Map;this._delayedWidget=new Array;this.addClass(T);this.id="main";if((e===null||e===void 0?void 0:e.waitForRestore)===false){this._userLayout={"multiple-document":{},"single-document":{}}}const t=this._skipLinkWidget=new B.SkipLinkWidget(this);this._skipLinkWidget.show();const n=new I.Panel;n.addClass("jp-skiplink-wrapper");n.addWidget(t);const i=this._headerPanel=new I.BoxPanel;const o=this._menuHandler=new B.PanelHandler;o.panel.node.setAttribute("role","navigation");const a=this._topHandler=new B.PanelHandler;a.panel.node.setAttribute("role","banner");const d=this._bottomPanel=new I.BoxPanel;d.node.setAttribute("role","contentinfo");const u=new I.BoxPanel;const p=this._vsplitPanel=new B.RestorableSplitPanel;const m=this._dockPanel=new l.DockPanelSvg({hiddenMode:I.Widget.HiddenMode.Display});M.MessageLoop.installMessageHook(m,this._dockChildHook);const g=this._hsplitPanel=new B.RestorableSplitPanel;const f=this._downPanel=new l.TabPanelSvg({tabsMovable:true});const v=this._leftHandler=new B.SideBarHandler;const _=this._rightHandler=new B.SideBarHandler;const b=new I.BoxLayout;i.id="jp-header-panel";o.panel.id="jp-menu-panel";a.panel.id="jp-top-panel";d.id="jp-bottom-panel";u.id="jp-main-content-panel";p.id="jp-main-vsplit-panel";m.id="jp-main-dock-panel";g.id="jp-main-split-panel";f.id="jp-down-stack";v.sideBar.addClass(D);v.sideBar.addClass("jp-mod-left");v.sideBar.node.setAttribute("role","complementary");v.stackedPanel.id="jp-left-stack";_.sideBar.addClass(D);_.sideBar.addClass("jp-mod-right");_.sideBar.node.setAttribute("role","complementary");_.stackedPanel.id="jp-right-stack";m.node.setAttribute("role","main");u.spacing=0;p.spacing=1;m.spacing=5;g.spacing=1;i.direction="top-to-bottom";p.orientation="vertical";u.direction="left-to-right";g.orientation="horizontal";d.direction="bottom-to-top";I.SplitPanel.setStretch(v.stackedPanel,0);I.SplitPanel.setStretch(f,0);I.SplitPanel.setStretch(m,1);I.SplitPanel.setStretch(_.stackedPanel,0);I.BoxPanel.setStretch(v.sideBar,0);I.BoxPanel.setStretch(g,1);I.BoxPanel.setStretch(_.sideBar,0);I.SplitPanel.setStretch(p,1);g.addWidget(v.stackedPanel);g.addWidget(m);g.addWidget(_.stackedPanel);p.addWidget(g);p.addWidget(f);u.addWidget(v.sideBar);u.addWidget(p);u.addWidget(_.sideBar);b.direction="top-to-bottom";b.spacing=0;p.setRelativeSizes([3,1]);g.setRelativeSizes([1,2.5,1]);I.BoxLayout.setStretch(i,0);I.BoxLayout.setStretch(o.panel,0);I.BoxLayout.setStretch(a.panel,0);I.BoxLayout.setStretch(u,1);I.BoxLayout.setStretch(d,0);b.addWidget(n);b.addWidget(i);b.addWidget(a.panel);b.addWidget(u);b.addWidget(d);this._headerPanel.hide();this._bottomPanel.hide();this._downPanel.hide();this.layout=b;this._tracker.currentChanged.connect(this._onCurrentChanged,this);this._tracker.activeChanged.connect(this._onActiveChanged,this);this._dockPanel.layoutModified.connect(this._onLayoutModified,this);this._vsplitPanel.updated.connect(this._onLayoutModified,this);this._downPanel.currentChanged.connect(this._onLayoutModified,this);this._downPanel.tabBar.tabMoved.connect(this._onTabPanelChanged,this);this._downPanel.stackedPanel.widgetRemoved.connect(this._onTabPanelChanged,this);this._leftHandler.updated.connect(this._onLayoutModified,this);this._rightHandler.updated.connect(this._onLayoutModified,this);this._hsplitPanel.updated.connect(this._onLayoutModified,this);const y=this._titleHandler=new B.TitleHandler(this);this.add(y,"top",{rank:100});if(this._dockPanel.mode==="multiple-document"){this._topHandler.addWidget(this._menuHandler.panel,100);y.hide()}else{b.insertWidget(3,this._menuHandler.panel)}this.translator=s.nullTranslator;this.currentChanged.connect(((e,t)=>{let n=t.newValue;let i=t.oldValue;if(i){i.title.changed.disconnect(this._updateTitlePanelTitle,this);if(i instanceof r.DocumentWidget){i.context.pathChanged.disconnect(this._updateCurrentPath,this)}}if(n){n.title.changed.connect(this._updateTitlePanelTitle,this);this._updateTitlePanelTitle();if(n instanceof r.DocumentWidget){n.context.pathChanged.connect(this._updateCurrentPath,this)}}this._updateCurrentPath()}))}get activeChanged(){return this._activeChanged}get activeWidget(){return this._tracker.activeWidget}get addButtonEnabled(){return this._dockPanel.addButtonEnabled}set addButtonEnabled(e){this._dockPanel.addButtonEnabled=e}get addRequested(){return this._dockPanel.addRequested}get currentChanged(){return this._currentChanged}get currentPath(){return this._currentPath}get currentPathChanged(){return this._currentPathChanged}get currentWidget(){return this._tracker.currentWidget}get layoutModified(){return this._layoutModified}get leftCollapsed(){return!this._leftHandler.sideBar.currentTitle}get rightCollapsed(){return!this._rightHandler.sideBar.currentTitle}get presentationMode(){return this.hasClass("jp-mod-presentationMode")}set presentationMode(e){this.toggleClass("jp-mod-presentationMode",e)}get mode(){return this._dockPanel.mode}set mode(e){const t=this._dockPanel;if(e===t.mode){return}const n=this.currentWidget;if(e==="single-document"){this._cachedLayout=t.saveLayout();t.mode=e;if(this.currentWidget){t.activateWidget(this.currentWidget)}this.layout.insertWidget(3,this._menuHandler.panel);this._titleHandler.show();this._updateTitlePanelTitle();if(this._topHandlerHiddenByUser){this._topHandler.panel.hide()}}else{const i=Array.from(t.widgets());t.mode=e;if(this._cachedLayout){B.normalizeAreaConfig(t,this._cachedLayout.main);t.restoreLayout(this._cachedLayout);this._cachedLayout=null}if(this._layoutRestorer.isDeferred){this._layoutRestorer.restoreDeferred().then((e=>{if(e){const{currentWidget:t,dock:n}=e;if(n){this._dockPanel.restoreLayout(n)}if(t){this.activateById(t.id)}}})).catch((e=>{console.error("Failed to restore the deferred layout.");console.error(e)}))}i.forEach((e=>{if(!e.parent){this._addToMainArea(e,{...this._mainOptionsCache.get(e),activate:false})}}));this._mainOptionsCache.clear();if(n){t.activateWidget(n)}this.add(this._menuHandler.panel,"top",{rank:100});this._titleHandler.hide()}this.node.dataset.shellMode=e;this._downPanel.fit();this._modeChanged.emit(e)}get modeChanged(){return this._modeChanged}get restored(){return this._restored.promise}get translator(){var e;return(e=this._translator)!==null&&e!==void 0?e:s.nullTranslator}set translator(e){if(e!==this._translator){this._translator=e;l.TabBarSvg.translator=e;const t=e.load("jupyterlab");this._menuHandler.panel.node.setAttribute("aria-label",t.__("main"));this._leftHandler.sideBar.node.setAttribute("aria-label",t.__("main sidebar"));this._leftHandler.sideBar.contentNode.setAttribute("aria-label",t.__("main sidebar"));this._rightHandler.sideBar.node.setAttribute("aria-label",t.__("alternate sidebar"));this._rightHandler.sideBar.contentNode.setAttribute("aria-label",t.__("alternate sidebar"))}}get userLayout(){return c.JSONExt.deepCopy(this._userLayout)}activateById(e){if(this._leftHandler.has(e)){this._leftHandler.activate(e);return}if(this._rightHandler.has(e)){this._rightHandler.activate(e);return}const t=this._downPanel.tabBar.titles.findIndex((t=>t.owner.id===e));if(t>=0){this._downPanel.currentIndex=t;return}const n=this._dockPanel;const i=(0,j.find)(n.widgets(),(t=>t.id===e));if(i){n.activateWidget(i)}}activateNextTab(){const e=this._currentTabBar();if(!e){return}const t=e.currentIndex;if(t===-1){return}if(t<e.titles.length-1){e.currentIndex+=1;if(e.currentTitle){e.currentTitle.owner.activate()}return}if(t===e.titles.length-1){const e=this._adjacentBar("next");if(e){e.currentIndex=0;if(e.currentTitle){e.currentTitle.owner.activate()}}}}activatePreviousTab(){const e=this._currentTabBar();if(!e){return}const t=e.currentIndex;if(t===-1){return}if(t>0){e.currentIndex-=1;if(e.currentTitle){e.currentTitle.owner.activate()}return}if(t===0){const e=this._adjacentBar("previous");if(e){const t=e.titles.length;e.currentIndex=t-1;if(e.currentTitle){e.currentTitle.owner.activate()}}}}activateNextTabBar(){const e=this._adjacentBar("next");if(e){if(e.currentTitle){e.currentTitle.owner.activate()}}}activatePreviousTabBar(){const e=this._adjacentBar("previous");if(e){if(e.currentTitle){e.currentTitle.owner.activate()}}}add(e,t="main",n){var i;if(!this._userLayout){this._delayedWidget.push({widget:e,area:t,options:n});return}let s;if((n===null||n===void 0?void 0:n.type)&&this._userLayout[this.mode][n.type]){s=this._userLayout[this.mode][n.type];this._idTypeMap.set(e.id,n.type)}else{s=this._userLayout[this.mode][e.id]}if(n===null||n===void 0?void 0:n.type){this._idTypeMap.set(e.id,n.type);e.disposed.connect((()=>{this._idTypeMap.delete(e.id)}))}t=(i=s===null||s===void 0?void 0:s.area)!==null&&i!==void 0?i:t;n=n||(s===null||s===void 0?void 0:s.options)?{...n,...s===null||s===void 0?void 0:s.options}:undefined;switch(t||"main"){case"bottom":return this._addToBottomArea(e,n);case"down":return this._addToDownArea(e,n);case"header":return this._addToHeaderArea(e,n);case"left":return this._addToLeftArea(e,n);case"main":return this._addToMainArea(e,n);case"menu":return this._addToMenuArea(e,n);case"right":return this._addToRightArea(e,n);case"top":return this._addToTopArea(e,n);default:throw new Error(`Invalid area: ${t}`)}}move(e,t,n){var i;const s=(i=this._idTypeMap.get(e.id))!==null&&i!==void 0?i:e.id;for(const o of["single-document","multiple-document"].filter((e=>!n||e===n))){this._userLayout[o][s]={...this._userLayout[o][s],area:t}}this.add(e,t);return this._userLayout}collapseLeft(){this._leftHandler.collapse();this._onLayoutModified()}collapseRight(){this._rightHandler.collapse();this._onLayoutModified()}dispose(){if(this.isDisposed){return}this._layoutDebouncer.dispose();super.dispose()}expandLeft(){this._leftHandler.expand();this._onLayoutModified()}expandRight(){this._rightHandler.expand();this._onLayoutModified()}closeAll(){Array.from(this._dockPanel.widgets()).forEach((e=>e.close()));this._downPanel.stackedPanel.widgets.forEach((e=>e.close()))}isSideTabBarVisible(e){switch(e){case"left":return this._leftHandler.isVisible;case"right":return this._rightHandler.isVisible}}isTopInSimpleModeVisible(){return!this._topHandlerHiddenByUser}isEmpty(e){switch(e){case"bottom":return this._bottomPanel.widgets.length===0;case"down":return this._downPanel.stackedPanel.widgets.length===0;case"header":return this._headerPanel.widgets.length===0;case"left":return this._leftHandler.stackedPanel.widgets.length===0;case"main":return this._dockPanel.isEmpty;case"menu":return this._menuHandler.panel.widgets.length===0;case"right":return this._rightHandler.stackedPanel.widgets.length===0;case"top":return this._topHandler.panel.widgets.length===0;default:return true}}async restoreLayout(e,t,n={}){var i,s,o,r;this._userLayout={"single-document":(i=n["single-document"])!==null&&i!==void 0?i:{},"multiple-document":(s=n["multiple-document"])!==null&&s!==void 0?s:{}};this._delayedWidget.forEach((({widget:e,area:t,options:n})=>{this.add(e,t,n)}));this._delayedWidget.length=0;this._layoutRestorer=t;const a=await t.fetch();const{mainArea:l,downArea:d,leftArea:c,rightArea:h,topArea:u,relativeSizes:p}=a;if(l){const{currentWidget:t,dock:n}=l;if(n&&e==="multiple-document"){this._dockPanel.restoreLayout(n)}if(e){this.mode=e}if(t){this.activateById(t.id)}}else{if(e){this.mode=e}}if((u===null||u===void 0?void 0:u.simpleVisibility)!==undefined){this._topHandlerHiddenByUser=!u.simpleVisibility;if(this.mode==="single-document"){this._topHandler.panel.setHidden(this._topHandlerHiddenByUser)}}if(d){const{currentWidget:e,widgets:t,size:n}=d;const i=(o=t===null||t===void 0?void 0:t.map((e=>e.id)))!==null&&o!==void 0?o:[];this._downPanel.tabBar.titles.filter((e=>!i.includes(e.owner.id))).map((e=>e.owner.close()));const s=this._downPanel.tabBar.titles.map((e=>e.owner.id));t===null||t===void 0?void 0:t.filter((e=>!s.includes(e.id))).map((e=>this._downPanel.addWidget(e)));while(!j.ArrayExt.shallowEqual(i,this._downPanel.tabBar.titles.map((e=>e.owner.id)))){this._downPanel.tabBar.titles.forEach(((e,t)=>{const n=i.findIndex((t=>e.owner.id==t));if(n>=0&&n!=t){this._downPanel.tabBar.insertTab(n,e)}}))}if(e){const t=this._downPanel.stackedPanel.widgets.findIndex((t=>t.id===e.id));if(t){this._downPanel.currentIndex=t;(r=this._downPanel.currentWidget)===null||r===void 0?void 0:r.activate()}}if(n&&n>0){this._vsplitPanel.setRelativeSizes([1-n,n])}else{this._downPanel.stackedPanel.widgets.forEach((e=>e.close()));this._downPanel.hide()}}if(c){this._leftHandler.rehydrate(c)}else{if(e==="single-document"){this.collapseLeft()}}if(h){this._rightHandler.rehydrate(h)}else{if(e==="single-document"){this.collapseRight()}}if(p){this._hsplitPanel.setRelativeSizes(p)}if(!this._isRestored){M.MessageLoop.flush();this._restored.resolve(a)}}saveLayout(){const e={mainArea:{currentWidget:this._tracker.currentWidget,dock:this.mode==="single-document"?this._cachedLayout||this._dockPanel.saveLayout():this._dockPanel.saveLayout()},downArea:{currentWidget:this._downPanel.currentWidget,widgets:Array.from(this._downPanel.stackedPanel.widgets),size:this._vsplitPanel.relativeSizes()[1]},leftArea:this._leftHandler.dehydrate(),rightArea:this._rightHandler.dehydrate(),topArea:{simpleVisibility:!this._topHandlerHiddenByUser},relativeSizes:this._hsplitPanel.relativeSizes()};return e}toggleTopInSimpleModeVisibility(){if(this.mode==="single-document"){if(this._topHandler.panel.isVisible){this._topHandlerHiddenByUser=true;this._topHandler.panel.hide()}else{this._topHandlerHiddenByUser=false;this._topHandler.panel.show();this._updateTitlePanelTitle()}this._onLayoutModified()}}toggleSideTabBarVisibility(e){if(e==="right"){if(this._rightHandler.isVisible){this._rightHandler.hide()}else{this._rightHandler.show()}}else{if(this._leftHandler.isVisible){this._leftHandler.hide()}else{this._leftHandler.show()}}}updateConfig(e){if(e.hiddenMode){switch(e.hiddenMode){case"display":this._dockPanel.hiddenMode=I.Widget.HiddenMode.Display;break;case"scale":this._dockPanel.hiddenMode=I.Widget.HiddenMode.Scale;break;case"contentVisibility":this._dockPanel.hiddenMode=I.Widget.HiddenMode.ContentVisibility;break}}}widgets(e){switch(e!==null&&e!==void 0?e:"main"){case"main":return this._dockPanel.widgets();case"left":return(0,j.map)(this._leftHandler.sideBar.titles,(e=>e.owner));case"right":return(0,j.map)(this._rightHandler.sideBar.titles,(e=>e.owner));case"header":return this._headerPanel.children();case"top":return this._topHandler.panel.children();case"menu":return this._menuHandler.panel.children();case"bottom":return this._bottomPanel.children();default:throw new Error(`Invalid area: ${e}`)}}onAfterAttach(e){this.node.dataset.shellMode=this.mode}_updateTitlePanelTitle(){let e=this.currentWidget;const t=this._titleHandler.inputElement;t.value=e?e.title.label:"";t.title=e?e.title.caption:""}_updateCurrentPath(){let e=this.currentWidget;let t="";if(e&&e instanceof r.DocumentWidget){t=e.context.path}this._currentPathChanged.emit({newValue:t,oldValue:this._currentPath});this._currentPath=t}_addToLeftArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||this._sideOptionsCache.get(e)||{};this._sideOptionsCache.set(e,t);const n="rank"in t?t.rank:A;this._leftHandler.addWidget(e,n);this._onLayoutModified()}_addToMainArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const n=this._dockPanel;const i=t.mode||"tab-after";let s=this.currentWidget;if(t.ref){s=(0,j.find)(n.widgets(),(e=>e.id===t.ref))||null}const{title:o}=e;o.dataset={...o.dataset,id:e.id};if(o.icon instanceof l.LabIcon){o.icon=o.icon.bindprops({stylesheet:"mainAreaTab"})}else if(typeof o.icon==="string"||!o.icon){o.iconClass=(0,l.classes)(o.iconClass,"jp-Icon")}n.addWidget(e,{mode:i,ref:s});if(n.mode==="single-document"){this._mainOptionsCache.set(e,t)}if(t.activate!==false){n.activateWidget(e)}}_addToRightArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||this._sideOptionsCache.get(e)||{};const n="rank"in t?t.rank:A;this._sideOptionsCache.set(e,t);this._rightHandler.addWidget(e,n);this._onLayoutModified()}_addToTopArea(e,t){var n;if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const i=(n=t.rank)!==null&&n!==void 0?n:A;this._topHandler.addWidget(e,i);this._onLayoutModified();if(this._topHandler.panel.isHidden){this._topHandler.panel.show()}}_addToMenuArea(e,t){var n;if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const i=(n=t.rank)!==null&&n!==void 0?n:A;this._menuHandler.addWidget(e,i);this._onLayoutModified();if(this._menuHandler.panel.isHidden){this._menuHandler.panel.show()}}_addToHeaderArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}this._headerPanel.addWidget(e);this._onLayoutModified();if(this._headerPanel.isHidden){this._headerPanel.show()}}_addToBottomArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}this._bottomPanel.addWidget(e);this._onLayoutModified();if(this._bottomPanel.isHidden){this._bottomPanel.show()}}_addToDownArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const{title:n}=e;n.dataset={...n.dataset,id:e.id};if(n.icon instanceof l.LabIcon){n.icon=n.icon.bindprops({stylesheet:"mainAreaTab"})}else if(typeof n.icon==="string"||!n.icon){n.iconClass=(0,l.classes)(n.iconClass,"jp-Icon")}this._downPanel.addWidget(e);this._onLayoutModified();if(this._downPanel.isHidden){this._downPanel.show()}}_adjacentBar(e){const t=this._currentTabBar();if(!t){return null}const n=Array.from(this._dockPanel.tabBars());const i=n.length;const s=n.indexOf(t);if(e==="previous"){return s>0?n[s-1]:s===0?n[i-1]:null}return s<i-1?n[s+1]:s===i-1?n[0]:null}_currentTabBar(){const e=this._tracker.currentWidget;if(!e){return null}const t=e.title;const n=this._dockPanel.tabBars();return(0,j.find)(n,(e=>e.titles.indexOf(t)>-1))||null}_onActiveChanged(e,t){if(t.newValue){t.newValue.title.className+=` ${P}`}if(t.oldValue){t.oldValue.title.className=t.oldValue.title.className.replace(P,"")}this._activeChanged.emit(t)}_onCurrentChanged(e,t){if(t.newValue){t.newValue.title.className+=` ${L}`}if(t.oldValue){t.oldValue.title.className=t.oldValue.title.className.replace(L,"")}this._currentChanged.emit(t);this._onLayoutModified()}_onTabPanelChanged(){if(this._downPanel.stackedPanel.widgets.length===0){this._downPanel.hide()}this._onLayoutModified()}_onLayoutModified(){void this._layoutDebouncer.invoke()}}var B;(function(e){function t(e,t){return e.rank-t.rank}e.itemCmp=t;function n(e,t){if(!t){return}if(t.type==="tab-area"){t.widgets=t.widgets.filter((t=>!t.isDisposed&&t.parent===e));return}t.children.forEach((t=>{n(e,t)}))}e.normalizeAreaConfig=n;class i{constructor(){this._panelChildHook=(e,t)=>{switch(t.type){case"child-added":{const e=t.child;if(this._items.find((t=>t.widget===e))){break}const n=this._items[this._items.length-1].rank;this._items.push({widget:e,rank:n})}break;case"child-removed":{const e=t.child;j.ArrayExt.removeFirstWhere(this._items,(t=>t.widget===e))}break;default:break}return true};this._items=new Array;this._panel=new I.Panel;M.MessageLoop.installMessageHook(this._panel,this._panelChildHook)}get panel(){return this._panel}addWidget(t,n){t.parent=null;const i={widget:t,rank:n};const s=j.ArrayExt.upperBound(this._items,i,e.itemCmp);j.ArrayExt.insert(this._items,s,i);this._panel.insertWidget(s,t)}}e.PanelHandler=i;class s{constructor(){this._isHiddenByUser=false;this._items=new Array;this._updated=new h.Signal(this);this._sideBar=new I.TabBar({insertBehavior:"none",removeBehavior:"none",allowDeselect:true,orientation:"vertical"});this._stackedPanel=new I.StackedPanel;this._sideBar.hide();this._stackedPanel.hide();this._lastCurrent=null;this._sideBar.currentChanged.connect(this._onCurrentChanged,this);this._sideBar.tabActivateRequested.connect(this._onTabActivateRequested,this);this._stackedPanel.widgetRemoved.connect(this._onWidgetRemoved,this)}get isVisible(){return this._sideBar.isVisible}get sideBar(){return this._sideBar}get stackedPanel(){return this._stackedPanel}get updated(){return this._updated}expand(){const e=this._lastCurrent||this._items.length>0&&this._items[0].widget;if(e){this.activate(e.id)}}activate(e){const t=this._findWidgetByID(e);if(t){this._sideBar.currentTitle=t.title;t.activate()}}has(e){return this._findWidgetByID(e)!==null}collapse(){this._sideBar.currentTitle=null}addWidget(e,t){e.parent=null;e.hide();const n={widget:e,rank:t};const i=this._findInsertIndex(n);j.ArrayExt.insert(this._items,i,n);this._stackedPanel.insertWidget(i,e);const s=this._sideBar.insertTab(i,e.title);s.dataset={id:e.id};if(s.icon instanceof l.LabIcon){s.icon=s.icon.bindprops({stylesheet:"sideBar"})}else if(typeof s.icon==="string"&&s.icon!=""){s.iconClass=(0,l.classes)(s.iconClass,"jp-Icon","jp-Icon-20")}else if(!s.icon&&!s.label){s.icon=l.tabIcon.bindprops({stylesheet:"sideBar"})}this._refreshVisibility()}dehydrate(){const e=this._sideBar.currentTitle===null;const t=Array.from(this._stackedPanel.widgets);const n=t[this._sideBar.currentIndex];return{collapsed:e,currentWidget:n,visible:!this._isHiddenByUser,widgets:t}}rehydrate(e){if(e.currentWidget){this.activate(e.currentWidget.id)}if(e.collapsed){this.collapse()}if(!e.visible){this.hide()}}hide(){this._isHiddenByUser=true;this._refreshVisibility()}show(){this._isHiddenByUser=false;this._refreshVisibility()}_findInsertIndex(t){return j.ArrayExt.upperBound(this._items,t,e.itemCmp)}_findWidgetIndex(e){return j.ArrayExt.findFirstIndex(this._items,(t=>t.widget===e))}_findWidgetByTitle(e){const t=(0,j.find)(this._items,(t=>t.widget.title===e));return t?t.widget:null}_findWidgetByID(e){const t=(0,j.find)(this._items,(t=>t.widget.id===e));return t?t.widget:null}_refreshVisibility(){this._stackedPanel.setHidden(this._sideBar.currentTitle===null);this._sideBar.setHidden(this._isHiddenByUser||this._sideBar.titles.length===0);this._updated.emit()}_onCurrentChanged(e,t){const n=t.previousTitle?this._findWidgetByTitle(t.previousTitle):null;const i=t.currentTitle?this._findWidgetByTitle(t.currentTitle):null;if(n){n.hide()}if(i){i.show()}this._lastCurrent=i||n;this._refreshVisibility()}_onTabActivateRequested(e,t){t.title.owner.activate()}_onWidgetRemoved(e,t){if(t===this._lastCurrent){this._lastCurrent=null}j.ArrayExt.removeAt(this._items,this._findWidgetIndex(t));this._sideBar.removeTab(t.title);this._refreshVisibility()}}e.SideBarHandler=s;class o extends I.Widget{constructor(e){super();this.addClass("jp-skiplink");this.id="jp-skiplink";this._shell=e;this._createSkipLink("Skip to left side bar")}handleEvent(e){switch(e.type){case"click":this._focusLeftSideBar();break}}onAfterAttach(e){super.onAfterAttach(e);this.node.addEventListener("click",this)}onBeforeDetach(e){this.node.removeEventListener("click",this);super.onBeforeDetach(e)}_focusLeftSideBar(){this._shell.expandLeft()}_createSkipLink(e){const t=document.createElement("a");t.href="#";t.tabIndex=1;t.text=e;t.className="skip-link";this.node.appendChild(t)}}e.SkipLinkWidget=o;class r extends I.Widget{constructor(e){super();this._selected=false;const t=document.createElement("input");t.type="text";this.node.appendChild(t);this._shell=e;this.id="jp-title-panel-title"}onAfterAttach(e){super.onAfterAttach(e);this.inputElement.addEventListener("keyup",this);this.inputElement.addEventListener("click",this);this.inputElement.addEventListener("blur",this)}onBeforeDetach(e){super.onBeforeDetach(e);this.inputElement.removeEventListener("keyup",this);this.inputElement.removeEventListener("click",this);this.inputElement.removeEventListener("blur",this)}handleEvent(e){switch(e.type){case"keyup":void this._evtKeyUp(e);break;case"click":this._evtClick(e);break;case"blur":this._selected=false;break}}async _evtKeyUp(e){if(e.key=="Enter"){const e=this._shell.currentWidget;if(e==null){return}const t=e.title.label;const n=this.inputElement;const i=n.value;n.blur();if(i!==t){e.title.label=i}else{n.value=t}}}_evtClick(e){if(e.button!==0||this._selected){return}const t=this.inputElement;e.preventDefault();e.stopPropagation();this._selected=true;const n=t.value.indexOf(".");if(n===-1){t.select()}else{t.setSelectionRange(0,n)}}get inputElement(){return this.node.children[0]}}e.TitleHandler=r;class a extends I.SplitPanel{constructor(e={}){super(e);this.updated=new h.Signal(this)}onUpdateRequest(e){super.onUpdateRequest(e);this.updated.emit()}}e.RestorableSplitPanel=a})(B||(B={}));var F=n(26512);class z{constructor(e){this._busyCount=0;this._dirtyCount=0;this._busySignal=new h.Signal(e);this._dirtySignal=new h.Signal(e)}get busySignal(){return this._busySignal}get dirtySignal(){return this._dirtySignal}get isBusy(){return this._busyCount>0}get isDirty(){return this._dirtyCount>0}setDirty(){const e=this.isDirty;this._dirtyCount++;if(this.isDirty!==e){this._dirtySignal.emit(this.isDirty)}return new F.DisposableDelegate((()=>{const e=this.isDirty;this._dirtyCount=Math.max(0,this._dirtyCount-1);if(this.isDirty!==e){this._dirtySignal.emit(this.isDirty)}}))}setBusy(){const e=this.isBusy;this._busyCount++;if(this.isBusy!==e){this._busySignal.emit(this.isBusy)}return new F.DisposableDelegate((()=>{const e=this.isBusy;this._busyCount--;if(this.isBusy!==e){this._busySignal.emit(this.isBusy)}}))}}class H extends u{constructor(e={shell:new O}){super({...e,shell:e.shell||new O,serviceManager:e.serviceManager||new a.ServiceManager({standby:()=>!this._info.isConnected||"when-hidden"})});this.name=g.PageConfig.getOption("appName")||"JupyterLab";this.namespace=g.PageConfig.getOption("appNamespace")||this.name;this.registerPluginErrors=[];this.status=new z(this);this.version=g.PageConfig.getOption("appVersion")||"unknown";this._info=H.defaultInfo;this.restored=this.shell.restored.then((()=>undefined)).catch((()=>undefined));const t=Object.keys(H.defaultInfo).reduce(((t,n)=>{if(n in e){t[n]=JSON.parse(JSON.stringify(e[n]))}return t}),{});this._info={...H.defaultInfo,...t};const n=H.defaultPaths.urls;const i=H.defaultPaths.directories;const s=e.paths&&e.paths.urls||{};const o=e.paths&&e.paths.directories||{};this._paths={urls:Object.keys(n).reduce(((e,t)=>{if(t in s){const n=s[t];e[t]=n}else{e[t]=n[t]}return e}),{}),directories:Object.keys(H.defaultPaths.directories).reduce(((e,t)=>{if(t in o){const n=o[t];e[t]=n}else{e[t]=i[t]}return e}),{})};if(this._info.devMode){this.shell.addClass("jp-mod-devMode")}this.docRegistry.addModelFactory(new r.Base64ModelFactory);if(e.mimeExtensions){for(const t of x(e.mimeExtensions)){this.registerPlugin(t)}}}get info(){return this._info}get paths(){return this._paths}registerPluginModule(e){let t=e.default;if(!e.hasOwnProperty("__esModule")){t=e}if(!Array.isArray(t)){t=[t]}t.forEach((e=>{try{this.registerPlugin(e)}catch(t){this.registerPluginErrors.push(t)}}))}registerPluginModules(e){e.forEach((e=>{this.registerPluginModule(e)}))}}(function(e){e.IInfo=new c.Token("@jupyterlab/application:IInfo","A service providing metadata about the current application, including disabled extensions and whether dev mode is enabled.");e.defaultInfo={devMode:g.PageConfig.getOption("devMode").toLowerCase()==="true",deferred:{patterns:[],matches:[]},disabled:{patterns:[],matches:[]},mimeExtensions:[],filesCached:g.PageConfig.getOption("cacheFiles").toLowerCase()==="true",isConnected:true};e.defaultPaths={urls:{base:g.PageConfig.getOption("baseUrl"),notFound:g.PageConfig.getOption("notFoundUrl"),app:g.PageConfig.getOption("appUrl"),doc:g.PageConfig.getOption("docUrl"),static:g.PageConfig.getOption("staticUrl"),settings:g.PageConfig.getOption("settingsUrl"),themes:g.PageConfig.getOption("themesUrl"),translations:g.PageConfig.getOption("translationsApiUrl"),hubHost:g.PageConfig.getOption("hubHost")||undefined,hubPrefix:g.PageConfig.getOption("hubPrefix")||undefined,hubUser:g.PageConfig.getOption("hubUser")||undefined,hubServerName:g.PageConfig.getOption("hubServerName")||undefined},directories:{appSettings:g.PageConfig.getOption("appSettingsDir"),schemas:g.PageConfig.getOption("schemasDir"),static:g.PageConfig.getOption("staticDir"),templates:g.PageConfig.getOption("templatesDir"),themes:g.PageConfig.getOption("themesDir"),userSettings:g.PageConfig.getOption("userSettingsDir"),serverRoot:g.PageConfig.getOption("serverRoot"),workspaces:g.PageConfig.getOption("workspacesDir")}}})(H||(H={}));class W{constructor(e){this.stop=new c.Token("@jupyterlab/application:Router#stop");this._routed=new h.Signal(this);this._rules=new Map;this.base=e.base;this.commands=e.commands}get current(){var e,t;const{base:n}=this;const i=g.URLExt.parse(window.location.href);const{search:s,hash:o}=i;const r=(t=(e=i.pathname)===null||e===void 0?void 0:e.replace(n,"/"))!==null&&t!==void 0?t:"";const a=r+s+o;return{hash:o,path:r,request:a,search:s}}get routed(){return this._routed}navigate(e,t={}){const{base:n}=this;const{history:i}=window;const{hard:s}=t;const o=document.location.href;const r=e&&e.indexOf(n)===0?e:g.URLExt.join(n,e);if(r===o){return s?this.reload():undefined}i.pushState({},"",r);if(s){return this.reload()}if(!t.skipRouting){requestAnimationFrame((()=>{void this.route()}))}}register(e){var t;const{command:n,pattern:i}=e;const s=(t=e.rank)!==null&&t!==void 0?t:100;const o=this._rules;o.set(i,{command:n,rank:s});return new F.DisposableDelegate((()=>{o.delete(i)}))}reload(){window.location.reload()}route(){const{commands:e,current:t,stop:n}=this;const{request:i}=t;const s=this._routed;const o=this._rules;const r=[];o.forEach(((e,t)=>{if(i===null||i===void 0?void 0:i.match(t)){r.push(e)}}));const a=r.sort(((e,t)=>t.rank-e.rank));const l=new c.PromiseDelegate;const d=async()=>{if(!a.length){s.emit(t);l.resolve(undefined);return}const{command:o}=a.pop();try{const i=this.current.request;const s=await e.execute(o,t);if(s===n){a.length=0;console.debug(`Routing ${i} was short-circuited by ${o}`)}}catch(r){console.warn(`Routing ${i} to ${o} failed`,r)}void d()};void d();return l.promise}}const V=new c.Token("@jupyterlab/application:IConnectionLost",`A service for invoking the dialog shown\n  when JupyterLab has lost its connection to the server. Use this if, for some reason,\n  you want to bring up the "connection lost" dialog under new circumstances.`);const U=new c.Token("@jupyterlab/application:ILabStatus",`A service for interacting with the application busy/dirty\n  status. Use this if you want to set the application "busy" favicon, or to set\n  the application "dirty" status, which asks the user for confirmation before leaving the application page.`);const $=new c.Token("@jupyterlab/application:IRouter","The URL router used by the application. Use this to add custom URL-routing for your extension (e.g., to invoke a command if the user navigates to a sub-path).");const q=new c.Token("@jupyterlab/application:ITreePathUpdater","A service to update the tree path.");function K(e,t,n,i){const{commands:s,shell:o}=e;const r=Array.isArray(t)?t:[t];return{label:l("label"),caption:l("caption"),isEnabled:()=>{var e;const t=a("isEnabled");return t.length>0&&!t.some((e=>e===false))||((e=n.isEnabled)!==null&&e!==void 0?e:false)},isToggled:()=>{var e;const t=a("isToggled");return t.some((e=>e===true))||((e=n.isToggled)!==null&&e!==void 0?e:false)},isVisible:()=>{var e;const t=a("isVisible");return t.length>0&&!t.some((e=>e===false))||((e=n.isVisible)!==null&&e!==void 0?e:true)},execute:async()=>{const e=o.currentWidget;const t=r.map((t=>e!==null?t.getActiveCommandId(e):null));const i=t.filter((e=>e!==null&&s.isEnabled(e)));let a=null;if(i.length>0){for(const e of i){a=await s.execute(e);if(typeof a==="boolean"&&a===false){break}}}else if(n.execute){a=await s.execute(n.execute)}return a}};function a(e){const t=o.currentWidget;const n=r.map((e=>t!==null?e.getActiveCommandId(t):null));const i=n.filter((e=>e!==null)).map((t=>s[e](t)));return i}function l(e){return()=>{var t;const s=a(e).map(((t,n)=>e=="caption"&&n>0?t.toLocaleLowerCase():t));switch(s.length){case 0:return(t=n[e])!==null&&t!==void 0?t:"";case 1:return s[0];default:{const e=s.some((e=>/$/.test(e)));const t=s.slice(undefined,-1).map((e=>e.replace(/$/,""))).join(", ");const n=s.slice(-1)[0].replace(/$/,"")+(e?"":"");return i.__("%1 and %2",t,n)}}}}}},90516:(e,t,n)=>{"use strict";var i=n(81802);var s=n(76126);var o=n(32902);var r=n(34849);var a=n(79536);var l=n(94683);var d=n(93379);var c=n.n(d);var h=n(7795);var u=n.n(h);var p=n(90569);var m=n.n(p);var g=n(3565);var f=n.n(g);var v=n(19216);var _=n.n(v);var b=n(44589);var y=n.n(b);var w=n(14362);var C={};C.styleTagTransform=y();C.setAttributes=f();C.insert=m().bind(null,"head");C.domAPI=u();C.insertStyleElement=_();var x=c()(w.Z,C);const S=w.Z&&w.Z.locals?w.Z.locals:undefined},76523:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>je,toggleHeader:()=>be});var i=n(44906);var s=n(90848);var o=n(22873);var r=n(51997);var a=n(9682);var l=n(36168);var d=n(52435);var c=n(5596);var h=n(26512);var u=n(95905);var p=n(74513);const m="help:open";const g="/lab/api/news";const f="/lab/api/update";const v="https://jupyterlab.readthedocs.io/en/stable/privacy_policies.html";async function _(e,t={}){const n=p.ServerConnection.makeSettings();const i=o.URLExt.join(n.baseUrl,e);let s;try{s=await p.ServerConnection.makeRequest(i,t,n)}catch(a){throw new p.ServerConnection.NetworkError(a)}const r=await s.json();if(!s.ok){throw new p.ServerConnection.ResponseError(s,r.message)}return r}const b={id:"@jupyterlab/apputils-extension:announcements",description:"Add the announcement feature. It will fetch news on the internet and check for application updates.",autoStart:true,optional:[r.ISettingRegistry,l.ITranslator],activate:(e,t,n)=>{var i;const o=b.id.replace(/[^\w]/g,"");void Promise.all([e.restored,(i=t===null||t===void 0?void 0:t.load("@jupyterlab/apputils-extension:notification"))!==null&&i!==void 0?i:Promise.resolve(null),p.ConfigSection.create({name:o})]).then((async([t,i,o])=>{const r=(n!==null&&n!==void 0?n:l.nullTranslator).load("jupyterlab");s.Notification.manager.changed.connect(((e,t)=>{var n;if(t.type!=="removed"){return}const{id:i,tags:s}=(n=t.notification.options.data)!==null&&n!==void 0?n:{};if((s!==null&&s!==void 0?s:[]).some((e=>["news","update"].includes(e)))&&i){const e={};e[i]={seen:true,dismissed:true};o.update(e).catch((e=>{console.error(`Failed to update the announcements config:\n${e}`)}))}}));const a=i===null||i===void 0?void 0:i.get("fetchNews").composite;if(a==="none"){const t=s.Notification.emit(r.__("Would you like to receive official Jupyter news?\nPlease read the privacy policy."),"default",{autoClose:false,actions:[{label:r.__("Open privacy policy"),caption:v,callback:t=>{t.preventDefault();if(e.commands.hasCommand(m)){void e.commands.execute(m,{text:r.__("Privacy policies"),url:v})}else{window.open(v,"_blank","noreferrer")}},displayType:"link"},{label:r.__("Yes"),callback:()=>{s.Notification.dismiss(t);o.update({}).then((()=>d())).catch((e=>{console.error(`Failed to get the news:\n${e}`)}));i===null||i===void 0?void 0:i.set("fetchNews","true").catch((e=>{console.error(`Failed to save setting 'fetchNews':\n${e}`)}))}},{label:r.__("No"),callback:()=>{s.Notification.dismiss(t);i===null||i===void 0?void 0:i.set("fetchNews","false").catch((e=>{console.error(`Failed to save setting 'fetchNews':\n${e}`)}))}}]})}else{await d()}async function d(){var e,t,n,a;if(((e=i===null||i===void 0?void 0:i.get("fetchNews").composite)!==null&&e!==void 0?e:"false")==="true"){try{const e=await _(g);for(const{link:n,message:i,type:a,options:l}of e.news){const e=l.data["id"];const d=(t=o.data[e])!==null&&t!==void 0?t:{seen:false,dismissed:false};if(!d.dismissed){l.actions=[{label:r.__("Hide"),caption:r.__("Never show this notification again."),callback:()=>{const t={};t[e]={seen:true,dismissed:true};o.update(t).catch((e=>{console.error(`Failed to update the announcements config:\n${e}`)}))}}];if((n===null||n===void 0?void 0:n.length)===2){l.actions.push({label:n[0],caption:n[1],callback:()=>{window.open(n[1],"_blank","noreferrer")},displayType:"link"})}if(!d.seen){l.autoClose=5e3;const t={};t[e]={seen:true};o.update(t).catch((e=>{console.error(`Failed to update the announcements config:\n${e}`)}))}s.Notification.emit(i,a,l)}}}catch(l){console.log("Failed to get the announcements.",l)}}if((n=i===null||i===void 0?void 0:i.get("checkForUpdates").composite)!==null&&n!==void 0?n:true){const e=await _(f);if(e.notification){const{link:t,message:n,type:l,options:d}=e.notification;const c=d.data["id"];const h=(a=o.data[c])!==null&&a!==void 0?a:{seen:false,dismissed:false};if(!h.dismissed){let e;d.actions=[{label:r.__("Do not check for updates"),caption:r.__("If pressed, you will not be prompted if a new JupyterLab version is found."),callback:()=>{i===null||i===void 0?void 0:i.set("checkForUpdates",false).then((()=>{s.Notification.dismiss(e)})).catch((e=>{console.error("Failed to set the `checkForUpdates` setting.",e)}))}}];if((t===null||t===void 0?void 0:t.length)===2){d.actions.push({label:t[0],caption:t[1],callback:()=>{window.open(t[1],"_blank","noreferrer")},displayType:"link"})}if(!h.seen){d.autoClose=5e3;const e={};e[c]={seen:true};o.update(e).catch((e=>{console.error(`Failed to update the announcements config:\n${e}`)}))}e=s.Notification.emit(n,l,d)}}}}}))}};var y=n(88478);var w=n(28416);var C=n(20745);const x="jp-Notification-Toast-Close";const S="jp-Notification-Toast-Close-Margin";const k=140;var j;(function(e){e.dismiss="apputils:dismiss-notification";e.display="apputils:display-notifications";e.notify="apputils:notify";e.update="apputils:update-notification"})(j||(j={}));const M=4;function E(e){const{manager:t,onClose:n,trans:i}=e;const[s,o]=w.useState([]);const[r,a]=w.useState(null);w.useEffect((()=>{async function e(){o(await Promise.all(t.notifications.map((async e=>Object.freeze({...e})))))}if(s.length!==t.count){void e()}t.changed.connect(e);return()=>{t.changed.disconnect(e)}}),[t]);w.useEffect((()=>{L.getIcons().then((e=>{a(e)})).catch((e=>{console.error(`Failed to get react-toastify icons:\n${e}`)}))}),[]);return w.createElement(d.UseSignal,{signal:t.changed},(()=>w.createElement(w.Fragment,null,w.createElement("h2",{className:"jp-Notification-Header jp-Toolbar"},w.createElement("span",{className:"jp-Toolbar-item"},t.count>0?i._n("%1 notification","%1 notifications",t.count):i.__("No notifications")),w.createElement("span",{className:"jp-Toolbar-item jp-Toolbar-spacer"}),w.createElement(d.ToolbarButtonComponent,{actualOnClick:true,onClick:()=>{t.dismiss()},icon:d.deleteIcon,tooltip:i.__("Dismiss all notifications"),enabled:t.count>0}),w.createElement(d.ToolbarButtonComponent,{actualOnClick:true,onClick:n,icon:d.closeIcon,tooltip:i.__("Hide notifications")})),w.createElement("ol",{className:"jp-Notification-List"},s.map((e=>{var n;const{id:s,message:o,type:a,options:l}=e;const c=a==="in-progress"?"default":a;const h=()=>{t.dismiss(s)};const u=a==="default"?null:a==="in-progress"?(n=r===null||r===void 0?void 0:r.spinner)!==null&&n!==void 0?n:null:r&&r[a];return w.createElement("li",{className:"jp-Notification-List-Item",key:e.id,onClick:e=>{e.stopPropagation()}},w.createElement("div",{className:`Toastify__toast Toastify__toast-theme--light Toastify__toast--${c} jp-Notification-Toast-${c}`},w.createElement("div",{className:"Toastify__toast-body"},u&&w.createElement("div",{className:"Toastify__toast-icon"},u({theme:"light",type:c})),w.createElement("div",null,L.createContent(o,h,l.actions))),w.createElement(L.CloseButton,{close:h,closeIcon:d.deleteIcon.react,title:i.__("Dismiss notification"),closeIconMargin:true})))}))))))}class I extends d.VDomModel{constructor(e){super();this.manager=e;this._highlight=false;this._listOpened=false;this._doNotDisturbMode=false;this._count=e.count;this.manager.changed.connect(this.onNotificationChanged,this)}get count(){return this._count}get doNotDisturbMode(){return this._doNotDisturbMode}set doNotDisturbMode(e){this._doNotDisturbMode=e}get highlight(){return this._highlight}get listOpened(){return this._listOpened}set listOpened(e){this._listOpened=e;if(this._listOpened||this._highlight){this._highlight=false}this.stateChanged.emit()}onNotificationChanged(e,t){this._count=this.manager.count;const{autoClose:n}=t.notification.options;const i=this.doNotDisturbMode||typeof n==="number"&&n<=0;if(!this._listOpened&&t.type!=="removed"&&i){this._highlight=true}this.stateChanged.emit()}}function T(e){return w.createElement(y.GroupItem,{spacing:M,onClick:()=>{e.onClick()},title:e.count>0?e.trans._n("%1 notification","%1 notifications",e.count):e.trans.__("No notifications")},w.createElement(y.TextItem,{className:"jp-Notification-Status-Text",source:`${e.count}`}),w.createElement(d.bellIcon.react,{top:"2px",stylesheet:"statusBar"}))}const D={id:"@jupyterlab/apputils-extension:notification",description:"Add the notification center and its status indicator.",autoStart:true,optional:[y.IStatusBar,r.ISettingRegistry,l.ITranslator],activate:(e,t,n,i)=>{L.translator=i!==null&&i!==void 0?i:l.nullTranslator;const o=L.translator.load("jupyterlab");const r=new I(s.Notification.manager);r.doNotDisturbMode=false;if(n){void Promise.all([n.load(D.id),e.restored]).then((([e])=>{const t=()=>{r.doNotDisturbMode=e.get("doNotDisturbMode").composite};t();e.changed.connect(t)}))}e.commands.addCommand(j.notify,{label:o.__("Emit a notification"),caption:o.__("Notification is described by {message: string, type?: string, options?: {autoClose?: number | false, actions: {label: string, commandId: string, args?: ReadOnlyJSONObject, caption?: string, className?: string}[], data?: ReadOnlyJSONValue}}."),execute:t=>{var n;const{message:i,type:o}=t;const r=(n=t.options)!==null&&n!==void 0?n:{};return s.Notification.manager.notify(i,o!==null&&o!==void 0?o:"default",{...r,actions:r.actions?r.actions.map((t=>({...t,callback:()=>{e.commands.execute(t.commandId,t.args).catch((e=>{console.error(`Failed to executed '${t.commandId}':\n${e}`)}))}}))):null})}});e.commands.addCommand(j.update,{label:o.__("Update a notification"),caption:o.__("Notification is described by {id: string, message: string, type?: string, options?: {autoClose?: number | false, actions: {label: string, commandId: string, args?: ReadOnlyJSONObject, caption?: string, className?: string}[], data?: ReadOnlyJSONValue}}."),execute:t=>{const{id:n,message:i,type:o,...r}=t;return s.Notification.manager.update({id:n,message:i,type:o!==null&&o!==void 0?o:"default",...r,actions:r.actions?r.actions.map((t=>({...t,callback:()=>{e.commands.execute(t.commandId,t.args).catch((e=>{console.error(`Failed to executed '${t.commandId}':\n${e}`)}))}}))):null})}});e.commands.addCommand(j.dismiss,{label:o.__("Dismiss a notification"),execute:e=>{const{id:t}=e;s.Notification.manager.dismiss(t)}});let a=null;r.listOpened=false;const c=s.ReactWidget.create(w.createElement(E,{manager:s.Notification.manager,onClose:()=>{a===null||a===void 0?void 0:a.dispose()},trans:o}));c.addClass("jp-Notification-Center");async function h(e,t){var n;if(r.doNotDisturbMode||a!==null&&!a.isDisposed){return}const{message:i,type:s,options:o,id:l}=t.notification;if(typeof o.autoClose==="number"&&o.autoClose<=0){return}switch(t.type){case"added":await L.createToast(l,i,s,o);break;case"updated":{const t=await L.toast();const r=o.actions;const a=(n=o.autoClose)!==null&&n!==void 0?n:r&&r.length>0?false:null;if(t.isActive(l)){const n=()=>{t.dismiss(l);e.dismiss(l)};t.update(l,{type:s==="in-progress"?null:s,isLoading:s==="in-progress",autoClose:a,render:L.createContent(i,n,o.actions)})}else{await L.createToast(l,i,s,o)}}break;case"removed":await L.toast().then((e=>{e.dismiss(l)}));break}}s.Notification.manager.changed.connect(h);const u=()=>{if(a){a.dispose();a=null}else{a=(0,y.showPopup)({body:c,anchor:p,align:"right",hasDynamicSize:true,startHidden:true});L.toast().then((e=>{e.dismiss()})).catch((e=>{console.error(`Failed to dismiss all toasts:\n${e}`)})).finally((()=>{a===null||a===void 0?void 0:a.launch();c.node.focus();a===null||a===void 0?void 0:a.disposed.connect((()=>{r.listOpened=false;a=null}))}))}r.listOpened=a!==null};e.commands.addCommand(j.display,{label:o.__("Show Notifications"),execute:u});const p=s.ReactWidget.create(w.createElement(d.UseSignal,{signal:r.stateChanged},(()=>{if(r.highlight||a&&!a.isDisposed){p.addClass("jp-mod-selected")}else{p.removeClass("jp-mod-selected")}return w.createElement(T,{count:r.count,highlight:r.highlight,trans:o,onClick:u})})));p.addClass("jp-Notification-Status");if(t){t.registerStatusItem(D.id,{item:p,align:"right",rank:-1})}}};var L;(function(e){e.translator=l.nullTranslator;let t=null;function i(e){var t;return w.createElement("button",{className:`jp-Button jp-mod-minimal ${x}${e.closeIconMargin?` ${S}`:""}`,title:(t=e.title)!==null&&t!==void 0?t:"",onClick:e.close},w.createElement(e.closeIcon,{className:"jp-icon-hover",tag:"span"}))}e.CloseButton=i;function o(t){const n=e.translator.load("jupyterlab");return w.createElement(i,{close:t.closeToast,closeIcon:d.closeIcon.react,title:n.__("Hide notification")})}let r=null;async function a(){if(r===null){r=new c.PromiseDelegate}else{await r.promise}if(t===null){t=await n.e(4307).then(n.t.bind(n,6867,23));const e=document.body.appendChild(document.createElement("div"));e.id="react-toastify-container";const i=(0,C.s)(e);i.render(w.createElement(t.ToastContainer,{draggable:false,closeOnClick:false,hideProgressBar:true,newestOnTop:true,pauseOnFocusLoss:true,pauseOnHover:true,position:"bottom-right",className:"jp-toastContainer",transition:t.Slide,closeButton:o}));r.resolve()}return t.toast}e.toast=a;async function h(){if(t===null){await a()}return t.Icons}e.getIcons=h;const u={accent:"jp-mod-accept",link:"jp-mod-link",warn:"jp-mod-warn",default:""};function p({action:e,closeToast:t}){var n,i;const s=n=>{e.callback(n);if(!n.defaultPrevented){t()}};const o=["jp-toast-button",u[(n=e.displayType)!==null&&n!==void 0?n:"default"]].join(" ");return w.createElement(d.Button,{title:(i=e.caption)!==null&&i!==void 0?i:e.label,className:o,onClick:s,small:true},e.label)}function m(e,t,n){var i;const s=e.length>k?e.slice(0,k)+"":e;return w.createElement(w.Fragment,null,w.createElement("div",{className:"jp-toast-message"},s.split("\n").map(((e,t)=>w.createElement(w.Fragment,{key:`part-${t}`},t>0?w.createElement("br",null):null,e)))),((i=n===null||n===void 0?void 0:n.length)!==null&&i!==void 0?i:0)>0&&w.createElement("div",{className:"jp-toast-buttonBar"},w.createElement("div",{className:"jp-toast-spacer"}),n.map(((e,n)=>w.createElement(p,{key:"button-"+n,action:e,closeToast:t})))))}e.createContent=m;async function g(e,t,n,i={}){const{actions:o,autoClose:r,data:l}=i;const d=await a();const c={autoClose:r!==null&&r!==void 0?r:o&&o.length>0?false:undefined,data:l,className:`jp-Notification-Toast-${n}`,toastId:e,type:n==="in-progress"?null:n,isLoading:n==="in-progress"};return d((({closeToast:n})=>m(t,(()=>{if(n)n();s.Notification.manager.dismiss(e)}),o)),c)}e.createToast=g})(L||(L={}));var P=n(58740);var A=n(6682);var R=n(85448);var N;(function(e){e.activate="apputils:activate-command-palette"})(N||(N={}));const O="@jupyterlab/apputils-extension:palette";class B{constructor(e,t){this.translator=t||l.nullTranslator;const n=this.translator.load("jupyterlab");this._palette=e;this._palette.title.label="";this._palette.title.caption=n.__("Command Palette")}set placeholder(e){this._palette.inputNode.placeholder=e}get placeholder(){return this._palette.inputNode.placeholder}activate(){this._palette.activate()}addItem(e){const t=this._palette.addItem(e);return new h.DisposableDelegate((()=>{this._palette.removeItem(t)}))}}(function(e){function t(t,n,i){const{commands:o,shell:r}=t;const a=n.load("jupyterlab");const l=F.createPalette(t,n);const d=new s.ModalCommandPalette({commandPalette:l});let c=false;l.node.setAttribute("role","region");l.node.setAttribute("aria-label",a.__("Command Palette Section"));r.add(l,"left",{rank:300,type:"Command Palette"});if(i){const e=i.load(O);const n=e=>{const t=e.get("modal").composite;if(c&&!t){l.parent=null;d.detach();r.add(l,"left",{rank:300,type:"Command Palette"})}else if(!c&&t){l.parent=null;d.palette=l;l.show();d.attach()}c=t};Promise.all([e,t.restored]).then((([e])=>{n(e);e.changed.connect((e=>{n(e)}))})).catch((e=>{console.error(e.message)}))}const h=()=>{const e=(0,P.find)(t.commands.keyBindings,(e=>e.command===N.activate));if(e){const t=e.keys.map(A.CommandRegistry.formatKeystroke).join(", ");l.title.caption=a.__("Commands (%1)",t)}else{l.title.caption=a.__("Commands")}};h();t.commands.keyBindingChanged.connect((()=>{h()}));o.addCommand(N.activate,{execute:()=>{if(c){d.activate()}else{r.activateById(l.id)}},label:a.__("Activate Command Palette")});l.inputNode.placeholder=a.__("SEARCH");return new e(l,n)}e.activate=t;function n(e,t,n){const i=F.createPalette(e,n);t.add(i,"command-palette")}e.restore=n})(B||(B={}));var F;(function(e){let t;function n(e,n){if(!t){t=new R.CommandPalette({commands:e.commands,renderer:d.CommandPaletteSvg.defaultRenderer});t.id="command-palette";t.title.icon=d.paletteIcon;const i=n.load("jupyterlab");t.title.label=i.__("Commands")}return t}e.createPalette=n})(F||(F={}));class z extends a.DataConnector{constructor(e){super();this._throttlers=Object.create(null);this._connector=e}fetch(e){const t=this._throttlers;if(!(e in t)){t[e]=new u.Throttler((()=>this._connector.fetch(e)),100)}return t[e].invoke()}async list(e="all"){const{isDeferred:t,isDisabled:n}=o.PageConfig.Extension;const{ids:i,values:s}=await this._connector.list(e==="ids"?"ids":undefined);if(e==="all"){return{ids:i,values:s}}if(e==="ids"){return{ids:i}}return{ids:i.filter((e=>!t(e)&&!n(e))),values:s.filter((({id:e})=>!t(e)&&!n(e)))}}async save(e,t){await this._connector.save(e,t)}}const H={id:"@jupyterlab/apputils-extension:settings",description:"Provides the setting registry.",activate:async e=>{const{isDisabled:t}=o.PageConfig.Extension;const n=new z(e.serviceManager.settings);const i=new r.SettingRegistry({connector:n,plugins:(await n.list("active")).values.filter((t=>e.hasPlugin(t.id)))});void e.restored.then((async()=>{const s=await n.list("ids");s.ids.forEach((async n=>{if(!e.hasPlugin(n)||t(n)||n in i.plugins){return}try{await i.load(n)}catch(s){console.warn(`Settings failed to load for (${n})`,s);if(!e.isPluginActivated(n)){console.warn(`If 'jupyter.lab.transform=true' in the plugin schema, this `+`may happen if {autoStart: false} in (${n}) or if it is `+`one of the deferredExtensions in page config.`)}}}))}));return i},autoStart:true,provides:r.ISettingRegistry};const W={id:"@jupyterlab/apputils-extension:kernel-status",description:"Provides the kernel status indicator model.",autoStart:true,requires:[y.IStatusBar],provides:s.IKernelStatusModel,optional:[s.ISessionContextDialogs,l.ITranslator,i.ILabShell],activate:(e,t,n,i,o)=>{const r=i!==null&&i!==void 0?i:l.nullTranslator;const a=n!==null&&n!==void 0?n:new s.SessionContextDialogs({translator:r});const d=async()=>{if(!c.model.sessionContext){return}await a.selectKernel(c.model.sessionContext)};const c=new s.KernelStatus({onClick:d},r);const h=new Set;const u=t=>{h.add(t);if(e.shell.currentWidget){p(e.shell,{newValue:e.shell.currentWidget,oldValue:null})}};function p(e,t){var n;const{oldValue:i,newValue:s}=t;if(i){i.title.changed.disconnect(m)}c.model.sessionContext=(n=[...h].map((e=>e(t.newValue))).filter((e=>e!==null))[0])!==null&&n!==void 0?n:null;if(s&&c.model.sessionContext){m(s.title);s.title.changed.connect(m)}}const m=e=>{c.model.activityName=e.label};if(o){o.currentChanged.connect(p)}t.registerStatusItem(W.id,{item:c,align:"left",rank:1,isActive:()=>c.model.sessionContext!==null});return{addSessionProvider:u}}};const V={id:"@jupyterlab/apputils-extension:running-sessions-status",description:"Add the running sessions and terminals status bar item.",autoStart:true,requires:[y.IStatusBar,l.ITranslator],activate:(e,t,n)=>{const i=new s.RunningSessions({onClick:()=>e.shell.activateById("jp-running-sessions"),serviceManager:e.serviceManager,translator:n});i.model.sessions=Array.from(e.serviceManager.sessions.running()).length;i.model.terminals=Array.from(e.serviceManager.terminals.running()).length;t.registerStatusItem(V.id,{item:i,align:"left",rank:0})}};var U=n(46054);const $="/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*\n * Webkit scrollbar styling.\n * Separate file which is dynamically loaded based on user/theme settings.\n */\n\n/* use standard opaque scrollbars for most nodes */\n\n::-webkit-scrollbar,\n::-webkit-scrollbar-corner {\n  background: var(--jp-scrollbar-background-color);\n}\n\n::-webkit-scrollbar-thumb {\n  background: rgb(var(--jp-scrollbar-thumb-color));\n  border: var(--jp-scrollbar-thumb-margin) solid transparent;\n  background-clip: content-box;\n  border-radius: var(--jp-scrollbar-thumb-radius);\n}\n\n::-webkit-scrollbar-track:horizontal {\n  border-left: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n  border-right: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n}\n\n::-webkit-scrollbar-track:vertical {\n  border-top: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n  border-bottom: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n}\n\n/* for code nodes, use a transparent style of scrollbar */\n\n.CodeMirror-hscrollbar::-webkit-scrollbar,\n.CodeMirror-vscrollbar::-webkit-scrollbar,\n.CodeMirror-hscrollbar::-webkit-scrollbar-corner,\n.CodeMirror-vscrollbar::-webkit-scrollbar-corner {\n  background-color: transparent;\n}\n\n.CodeMirror-hscrollbar::-webkit-scrollbar-thumb,\n.CodeMirror-vscrollbar::-webkit-scrollbar-thumb {\n  background: rgba(var(--jp-scrollbar-thumb-color), 0.5);\n  border: var(--jp-scrollbar-thumb-margin) solid transparent;\n  background-clip: content-box;\n  border-radius: var(--jp-scrollbar-thumb-radius);\n}\n\n.CodeMirror-hscrollbar::-webkit-scrollbar-track:horizontal {\n  border-left: var(--jp-scrollbar-endpad) solid transparent;\n  border-right: var(--jp-scrollbar-endpad) solid transparent;\n}\n\n.CodeMirror-vscrollbar::-webkit-scrollbar-track:vertical {\n  border-top: var(--jp-scrollbar-endpad) solid transparent;\n  border-bottom: var(--jp-scrollbar-endpad) solid transparent;\n}\n";var q;(function(e){e.changeTheme="apputils:change-theme";e.themeScrollbars="apputils:theme-scrollbars";e.changeFont="apputils:change-font";e.incrFontSize="apputils:incr-font-size";e.decrFontSize="apputils:decr-font-size"})(q||(q={}));function K(e){const t=document.createElement("style");t.setAttribute("type","text/css");t.appendChild(document.createTextNode(e));return t}const J={id:"@jupyterlab/apputils-extension:themes",description:"Provides the theme manager.",requires:[r.ISettingRegistry,i.JupyterFrontEnd.IPaths,l.ITranslator],optional:[s.ISplashScreen],activate:(e,t,n,i,r)=>{const a=i.load("jupyterlab");const l=e.shell;const d=e.commands;const c=o.URLExt.join(o.PageConfig.getBaseUrl(),n.urls.themes);const h=J.id;const u=new s.ThemeManager({key:h,host:l,settings:t,splash:r!==null&&r!==void 0?r:undefined,url:c});let p=null;let m;u.themeChanged.connect(((e,t)=>{m=t.newValue;document.body.dataset.jpThemeLight=String(u.isLight(m));document.body.dataset.jpThemeName=m;if(document.body.dataset.jpThemeScrollbars!==String(u.themeScrollbars(m))){document.body.dataset.jpThemeScrollbars=String(u.themeScrollbars(m));if(u.themeScrollbars(m)){if(!p){p=K($)}if(!p.parentElement){document.body.appendChild(p)}}else{if(p&&p.parentElement){p.parentElement.removeChild(p)}}}d.notifyCommandChanged(q.changeTheme)}));d.addCommand(q.changeTheme,{label:e=>{if(e.theme===undefined){return a.__("Switch to the provided `theme`.")}const t=e["theme"];const n=u.getDisplayName(t);return e["isPalette"]?a.__("Use Theme: %1",n):n},isToggled:e=>e["theme"]===m,execute:e=>{const t=e["theme"];if(t===u.theme){return}return u.setTheme(t)}});d.addCommand(q.themeScrollbars,{label:a.__("Theme Scrollbars"),isToggled:()=>u.isToggledThemeScrollbars(),execute:()=>u.toggleThemeScrollbars()});d.addCommand(q.changeFont,{label:e=>e["enabled"]?`${e["font"]}`:a.__("waiting for fonts"),isEnabled:e=>e["enabled"],isToggled:e=>u.getCSS(e["key"])===e["font"],execute:e=>u.setCSSOverride(e["key"],e["font"])});d.addCommand(q.incrFontSize,{label:e=>{switch(e.key){case"code-font-size":return a.__("Increase Code Font Size");case"content-font-size1":return a.__("Increase Content Font Size");case"ui-font-size1":return a.__("Increase UI Font Size");default:return a.__("Increase Font Size")}},execute:e=>u.incrFontSize(e["key"])});d.addCommand(q.decrFontSize,{label:e=>{switch(e.key){case"code-font-size":return a.__("Decrease Code Font Size");case"content-font-size1":return a.__("Decrease Content Font Size");case"ui-font-size1":return a.__("Decrease UI Font Size");default:return a.__("Decrease Font Size")}},execute:e=>u.decrFontSize(e["key"])});return u},autoStart:true,provides:s.IThemeManager};const Z={id:"@jupyterlab/apputils-extension:themes-palette-menu",description:"Adds theme commands to the menu and the command palette.",requires:[s.IThemeManager,l.ITranslator],optional:[s.ICommandPalette,U.IMainMenu],activate:(e,t,n,i,s)=>{const o=n.load("jupyterlab");if(s){void e.restored.then((()=>{var e;const n=false;const i=(e=s.settingsMenu.items.find((e=>{var t;return e.type==="submenu"&&((t=e.submenu)===null||t===void 0?void 0:t.id)==="jp-mainmenu-settings-apputilstheme"})))===null||e===void 0?void 0:e.submenu;if(i){t.themes.forEach(((e,t)=>{i.insertItem(t,{command:q.changeTheme,args:{isPalette:n,theme:e}})}))}}))}if(i){void e.restored.then((()=>{const e=o.__("Theme");const n=q.changeTheme;const s=true;t.themes.forEach((t=>{i.addItem({command:n,args:{isPalette:s,theme:t},category:e})}));i.addItem({command:q.themeScrollbars,category:e});i.addItem({command:q.incrFontSize,args:{key:"code-font-size"},category:e});i.addItem({command:q.decrFontSize,args:{key:"code-font-size"},category:e});i.addItem({command:q.incrFontSize,args:{key:"content-font-size1"},category:e});i.addItem({command:q.decrFontSize,args:{key:"content-font-size1"},category:e});i.addItem({command:q.incrFontSize,args:{key:"ui-font-size1"},category:e});i.addItem({command:q.decrFontSize,args:{key:"ui-font-size1"},category:e})}))}},autoStart:true};const G={id:"@jupyterlab/apputils-extension:toolbar-registry",description:"Provides toolbar items registry.",autoStart:true,provides:s.IToolbarWidgetRegistry,activate:e=>{const t=new s.ToolbarWidgetRegistry({defaultFactory:(0,s.createDefaultFactory)(e.commands)});return t}};var Y=n(35788);var X=n(30796);var Q;(function(e){e.saveWorkspace="workspace-ui:save";e.saveWorkspaceAs="workspace-ui:save-as"})(Q||(Q={}));const ee="jupyterlab-workspace";const te="."+ee;const ne="workspace-ui:lastSave";const ie="jp-JupyterIcon";const se={id:"@jupyterlab/apputils-extension:workspaces",description:"Add workspace file type and commands.",autoStart:true,requires:[X.IDefaultFileBrowser,s.IWindowResolver,a.IStateDB,l.ITranslator,i.JupyterFrontEnd.IPaths],optional:[i.IRouter],activate:(e,t,n,i,s,o,r)=>{const a=new oe.WorkspaceFactory({workspaces:e.serviceManager.workspaces,router:r,state:i,translator:s,paths:o});const l=s.load("jupyterlab");e.docRegistry.addFileType({name:ee,contentType:"file",fileFormat:"text",displayName:l.__("JupyterLab workspace File"),extensions:[te],mimeTypes:["text/json"],iconClass:ie});e.docRegistry.addWidgetFactory(a);e.commands.addCommand(Q.saveWorkspaceAs,{label:l.__("Save Current Workspace As"),execute:async()=>{const o=e.serviceManager.workspaces.fetch(n.name);await oe.saveAs(t,e.serviceManager.contents,o,i,s)}});e.commands.addCommand(Q.saveWorkspace,{label:l.__("Save Current Workspace"),execute:async()=>{const{contents:o}=e.serviceManager;const r=e.serviceManager.workspaces.fetch(n.name);const a=await i.fetch(ne);if(a===undefined){await oe.saveAs(t,o,r,i,s)}else{await oe.save(a,o,r,i)}}})}};var oe;(function(e){async function t(e,t,n,i){let s=e.split("/").pop();if(s!==undefined&&s.includes(".")){s=s.split(".")[0]}else{e=e+te}await i.save(ne,e);const o=await n;o.metadata.id=`${s}`;await t.save(e,{type:"file",format:"text",content:JSON.stringify(o)})}e.save=t;async function n(e,n,i,s,o){var r;o=o||l.nullTranslator;const d=await s.fetch(ne);let c;if(d===undefined){c="new-workspace"}else{c=(r=d.split("/").pop())===null||r===void 0?void 0:r.split(".")[0]}const h=e.model.path+"/"+c+te;const u=await a(h,o);if(u){await t(u,n,i,s)}}e.saveAs=n;class i extends Y.ABCWidgetFactory{constructor(e){const t=(e.translator||l.nullTranslator).load("jupyterlab");super({name:"Workspace loader",label:t.__("Workspace loader"),fileTypes:[ee],defaultFor:[ee],readOnly:true});this._application=e.paths.urls.app;this._router=e.router;this._state=e.state;this._workspaces=e.workspaces}createNewWidget(e){void e.ready.then((async()=>{const t=e.model;const n=t.toJSON();const i=e.path;const s=n.metadata.id;await this._workspaces.save(s,n);await this._state.save(ne,i);const r=o.URLExt.join(this._application,"workspaces",s);if(this._router){this._router.navigate(r,{hard:true})}else{document.location.href=r}}));return r(e)}}e.WorkspaceFactory=i;function r(e){const t=new Y.DocumentWidget({content:new R.Widget,context:e});t.content.dispose();return t}async function a(e,t){t=t||l.nullTranslator;const n=t.load("jupyterlab");const i=s.Dialog.okButton({label:n.__("Save"),ariaLabel:n.__("Save Current Workspace")});const o=await(0,s.showDialog)({title:n.__("Save Current Workspace As"),body:new d(e),buttons:[s.Dialog.cancelButton(),i]});if(o.button.label===n.__("Save")){return o.value}else{return null}}class d extends R.Widget{constructor(e){super({node:c(e)})}getValue(){return this.node.value}}function c(e){const t=document.createElement("input");t.value=e;return t}})(oe||(oe={}));var re=n(36044);const ae="jp-ContextualShortcut-TableRow";const le="jp-ContextualShortcut-TableLastRow";const de="jp-ContextualShortcut-TableItem";const ce="jp-ContextualShortcut-Key";function he(e){const{commands:t,trans:n,activeElement:i}=e;const o=i!==null&&i!==void 0?i:document.activeElement;function r(e){const t=[];e.forEach(((e,n)=>{const i=[];e.split(" ").forEach(((e,t)=>{i.push(w.createElement("span",{className:ce,key:`ch-${t}`},w.createElement("kbd",null,e)),w.createElement(w.Fragment,{key:`fragment-${t}`}," + "))}));t.push(w.createElement("span",{key:`key-${n}`},i.slice(0,-1)),w.createElement(w.Fragment,{key:`fragment-${n}`}," + "))}));return w.createElement("span",null,t.slice(0,-1))}function a(e){const t=e.charAt(0).toUpperCase()+e.slice(1);return t}function l(e){const n=t.label(e.command);const i=e.command.split(":")[1];const s=i.split("-");let o="";for(let t=0;t<s.length;t++){const e=a(s[t]);o=o+" "+e}if(n.length>0){return n}else{return o}}function d(e,t){let n=t;for(let i=0;n!==null&&n!==n.parentElement;n=n.parentElement,++i){if(n.hasAttribute("data-lm-suppress-shortcuts")){return-1}if(n.matches(e)){return i}}return-1}const c=new Map;for(let s=0;s<t.keyBindings.length;s++){const e=t.keyBindings[s];let n=d(e.selector,o);if(n<0){continue}let i=A.CommandRegistry.formatKeystroke(e.keys);if(c.has(i)){let t=c.get(i);if(t[0]<n||t[0]===n&&re.Selector.calculateSpecificity(t[1].selector)>re.Selector.calculateSpecificity(e.selector)){continue}}c.set(i,[n,e])}let h=-1;const u=new Map;for(let[s,g]of c.values()){h=Math.max(s,h);if(!u.has(s)){u.set(s,[])}u.get(s).push(g)}const p=[];for(let s=0;s<=h;s++){if(u.has(s)){p.push(u.get(s).map((e=>w.createElement("tr",{className:ae,key:`${e.command}-${e.keys.join("-").replace(" ","_")}`},w.createElement("td",{className:de},l(e)),w.createElement("td",{className:de},r([...e.keys]))))));p.push(w.createElement("tr",{className:le,key:`group-${s}-last`}))}}const m=w.createElement("table",null,w.createElement("tbody",null,p));return(0,s.showDialog)({title:n.__("Keyboard Shortcuts"),body:m,buttons:[s.Dialog.cancelButton({label:n.__("Close")})]})}const ue=12e3;var pe;(function(e){e.loadState="apputils:load-statedb";e.print="apputils:print";e.reset="apputils:reset";e.resetOnLoad="apputils:reset-on-load";e.runFirstEnabled="apputils:run-first-enabled";e.runAllEnabled="apputils:run-all-enabled";e.toggleHeader="apputils:toggle-header";e.displayShortcuts="apputils:display-shortcuts"})(pe||(pe={}));const me={id:"@jupyterlab/apputils-extension:palette",description:"Provides the command palette.",autoStart:true,requires:[l.ITranslator],provides:s.ICommandPalette,optional:[r.ISettingRegistry],activate:(e,t,n)=>B.activate(e,t,n)};const ge={id:"@jupyterlab/apputils-extension:palette-restorer",description:"Restores the command palette.",autoStart:true,requires:[i.ILayoutRestorer,l.ITranslator],activate:(e,t,n)=>{B.restore(e,t,n)}};const fe={id:"@jupyterlab/apputils-extension:resolver",description:"Provides the window name resolver.",autoStart:true,provides:s.IWindowResolver,requires:[i.JupyterFrontEnd.IPaths,i.IRouter],activate:async(e,t,n)=>{const{hash:i,search:r}=n.current;const a=o.URLExt.queryStringToObject(r||"");const l=new s.WindowResolver;const d=o.PageConfig.getOption("workspace");const c=o.PageConfig.getOption("treePath");const h=o.PageConfig.getOption("mode")==="multiple-document"?"lab":"doc";const u=d?d:o.PageConfig.defaultWorkspace;const p=c?o.URLExt.join("tree",c):"";try{await l.resolve(u);return l}catch(m){return new Promise((()=>{const{base:e}=t.urls;const s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";const r=s[Math.floor(Math.random()*s.length)];let l=o.URLExt.join(e,h,"workspaces",`auto-${r}`);l=p?o.URLExt.join(l,o.URLExt.encodeParts(p)):l;a["reset"]="";const d=l+o.URLExt.objectToQueryString(a)+(i||"");n.navigate(d,{hard:true})}))}}};const ve={id:"@jupyterlab/apputils-extension:splash",description:"Provides the splash screen.",autoStart:true,requires:[l.ITranslator],provides:s.ISplashScreen,activate:(e,t)=>{const n=t.load("jupyterlab");const{commands:i,restored:o}=e;const r=document.createElement("div");const a=document.createElement("div");const l=document.createElement("div");r.id="jupyterlab-splash";a.id="galaxy";l.id="main-logo";d.jupyterFaviconIcon.element({container:l,stylesheet:"splash"});a.appendChild(l);["1","2","3"].forEach((e=>{const t=document.createElement("div");const n=document.createElement("div");t.id=`moon${e}`;t.className="moon orbit";n.id=`planet${e}`;n.className="planet";t.appendChild(n);a.appendChild(t)}));r.appendChild(a);let c;const p=new u.Throttler((async()=>{if(c){return}c=new s.Dialog({title:n.__("Loading"),body:n.__(`The loading screen is taking a long time.\nWould you like to clear the workspace or keep waiting?`),buttons:[s.Dialog.cancelButton({label:n.__("Keep Waiting")}),s.Dialog.warnButton({label:n.__("Clear Workspace")})]});try{const e=await c.launch();c.dispose();c=null;if(e.button.accept&&i.hasCommand(pe.reset)){return i.execute(pe.reset)}requestAnimationFrame((()=>{void p.invoke().catch((e=>undefined))}))}catch(e){}}),{limit:ue,edge:"trailing"});let m=0;return{show:(e=true)=>{r.classList.remove("splash-fade");r.classList.toggle("light",e);r.classList.toggle("dark",!e);m++;document.body.appendChild(r);void p.invoke().catch((e=>undefined));return new h.DisposableDelegate((async()=>{await o;if(--m===0){void p.stop();if(c){c.dispose();c=null}r.classList.add("splash-fade");window.setTimeout((()=>{document.body.removeChild(r)}),200)}}))}}}};const _e={id:"@jupyterlab/apputils-extension:print",description:"Add the print capability",autoStart:true,requires:[l.ITranslator],activate:(e,t)=>{const n=t.load("jupyterlab");e.commands.addCommand(pe.print,{label:n.__("Print"),isEnabled:()=>{const t=e.shell.currentWidget;return s.Printing.getPrintFunction(t)!==null},execute:async()=>{const t=e.shell.currentWidget;const n=s.Printing.getPrintFunction(t);if(n){await n()}}})}};const be={id:"@jupyterlab/apputils-extension:toggle-header",description:"Adds a command to display the main area widget content header.",autoStart:true,requires:[l.ITranslator],optional:[s.ICommandPalette],activate:(e,t,n)=>{const i=t.load("jupyterlab");const o=i.__("Main Area");e.commands.addCommand(pe.toggleHeader,{label:i.__("Show Header Above Content"),isEnabled:()=>e.shell.currentWidget instanceof s.MainAreaWidget&&!e.shell.currentWidget.contentHeader.isDisposed&&e.shell.currentWidget.contentHeader.widgets.length>0,isToggled:()=>{const t=e.shell.currentWidget;return t instanceof s.MainAreaWidget?!t.contentHeader.isHidden:false},execute:async()=>{const t=e.shell.currentWidget;if(t instanceof s.MainAreaWidget){t.contentHeader.setHidden(!t.contentHeader.isHidden)}}});if(n){n.addItem({command:pe.toggleHeader,category:o})}}};async function ye(e,t,n){var i,s;const r=await t.toJSON();let a=(s=(i=r["layout-restorer:data"])===null||i===void 0?void 0:i.main)===null||s===void 0?void 0:s.current;if(a===undefined){document.title=`${o.PageConfig.getOption("appName")||"JupyterLab"}${e.startsWith("auto-")?` (${e})`:``}`}else{let t=o.PathExt.basename(decodeURIComponent(window.location.href));t=t.length>15?t.slice(0,12).concat(``):t;const i=Object.keys(r).filter((e=>e.startsWith("notebook")||e.startsWith("editor"))).length;if(e.startsWith("auto-")){document.title=`${t} (${e}${i>1?` : ${i}`:``}) - ${n}`}else{document.title=`${t}${i>1?` (${i})`:``} - ${n}`}}}const we={id:"@jupyterlab/apputils-extension:state",description:"Provides the application state. It is stored per workspaces.",autoStart:true,provides:a.IStateDB,requires:[i.JupyterFrontEnd.IPaths,i.IRouter,l.ITranslator],optional:[s.IWindowResolver],activate:(e,t,n,i,s)=>{const r=i.load("jupyterlab");if(s===null){return new a.StateDB}let l=false;const{commands:d,name:h,serviceManager:p}=e;const{workspaces:m}=p;const g=s.name;const f=new c.PromiseDelegate;const v=new a.StateDB({transform:f.promise});const _=new u.Debouncer((async()=>{const e=g;const t={id:e};const n=await v.toJSON();await m.save(e,{data:n,metadata:t})}));v.changed.connect((()=>void _.invoke()),v);v.changed.connect((()=>ye(g,v,h)));d.addCommand(pe.loadState,{label:r.__("Load state for the current workspace."),execute:async e=>{if(l){return}const{hash:t,path:i,search:s}=e;const r=o.URLExt.queryStringToObject(s||"");const a=typeof r["clone"]==="string"?r["clone"]===""?o.PageConfig.defaultWorkspace:r["clone"]:null;const d=a||g||null;if(d===null){console.error(`${pe.loadState} cannot load null workspace.`);return}try{const e=await m.fetch(d);if(!l){l=true;f.resolve({type:"overwrite",contents:e.data})}}catch({message:c}){console.warn(`Fetching workspace "${g}" failed.`,c);if(!l){l=true;f.resolve({type:"cancel",contents:null})}}if(d===a){delete r["clone"];const e=i+o.URLExt.objectToQueryString(r)+t;const s=_.invoke().then((()=>n.stop));void s.then((()=>{n.navigate(e)}));return s}await _.invoke()}});d.addCommand(pe.reset,{label:r.__("Reset Application State"),execute:async({reload:e})=>{await v.clear();await _.invoke();if(e){n.reload()}}});d.addCommand(pe.resetOnLoad,{label:r.__("Reset state when loading for the workspace."),execute:e=>{const{hash:t,path:i,search:s}=e;const r=o.URLExt.queryStringToObject(s||"");const a="reset"in r;const d="clone"in r;if(!a){return}if(l){return n.reload()}l=true;f.resolve({type:"clear",contents:null});delete r["reset"];const c=i+o.URLExt.objectToQueryString(r)+t;const h=v.clear().then((()=>_.invoke()));if(d){void h.then((()=>{n.navigate(c,{hard:true})}))}else{void h.then((()=>{n.navigate(c)}))}return h}});n.register({command:pe.loadState,pattern:/.?/,rank:30});n.register({command:pe.resetOnLoad,pattern:/(\?reset|\&reset)($|&)/,rank:20});return v}};const Ce={id:"@jupyterlab/apputils-extension:sessionDialogs",description:"Provides the session context dialogs.",provides:s.ISessionContextDialogs,optional:[l.ITranslator],autoStart:true,activate:async(e,t)=>new s.SessionContextDialogs({translator:t!==null&&t!==void 0?t:l.nullTranslator})};const xe={id:"@jupyterlab/apputils-extension:utilityCommands",description:"Adds meta commands to run set of other commands.",requires:[l.ITranslator],optional:[s.ICommandPalette],autoStart:true,activate:(e,t,n)=>{const i=t.load("jupyterlab");const{commands:s}=e;s.addCommand(pe.runFirstEnabled,{label:i.__("Run First Enabled Command"),execute:t=>{const n=t.commands;const i=t.args;const s=Array.isArray(t);for(let o=0;o<n.length;o++){const t=n[o];const r=s?i[o]:i;if(e.commands.isEnabled(t,r)){return e.commands.execute(t,r)}}}});s.addCommand(pe.runAllEnabled,{label:i.__("Run All Enabled Commands Passed as Args"),execute:async t=>{const n=t.commands;const i=t.args;const s=Array.isArray(t);const o=t.errorIfNotEnabled;for(let r=0;r<n.length;r++){const t=n[r];const a=s?i[r]:i;if(e.commands.isEnabled(t,a)){await e.commands.execute(t,a)}else{if(o){console.error(`${t} is not enabled.`)}}}}});s.addCommand(pe.displayShortcuts,{label:i.__("Show Keyboard Shortcuts"),caption:i.__("Show relevant keyboard shortcuts for the current active widget"),execute:t=>{var n,o,r,a;const l=(n=e.shell.currentWidget)===null||n===void 0?void 0:n.node.contains(document.activeElement);if(!l){const t=(r=(o=e.shell.currentWidget)===null||o===void 0?void 0:o.content.node)!==null&&r!==void 0?r:(a=e.shell.currentWidget)===null||a===void 0?void 0:a.node;t===null||t===void 0?void 0:t.focus()}const d={commands:s,trans:i};return he(d)}});if(n){const e=i.__("Help");n.addItem({command:pe.displayShortcuts,category:e})}}};const Se={id:"@jupyterlab/apputils-extension:sanitizer",description:"Provides the HTML sanitizer.",autoStart:true,provides:s.ISanitizer,requires:[r.ISettingRegistry],activate:(e,t)=>{const n=new s.Sanitizer;const i=e=>{const t=e.get("allowedSchemes").composite;const i=e.get("autolink").composite;if(t){n.setAllowedSchemes(t)}n.setAutolink(i)};t.load("@jupyterlab/apputils-extension:sanitizer").then((e=>{i(e);e.changed.connect(i)})).catch((e=>{console.error(`Failed to load sanitizer settings:`,e)}));return n}};const ke=[b,W,D,me,ge,_e,fe,V,Se,H,we,ve,Ce,J,Z,be,G,xe,se];const je=ke},48435:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(98328);var r=n(79536);var a=n(94683);var l=n(90516);var d=n(59240);var c=n(74518);var h=n(93379);var u=n.n(h);var p=n(7795);var m=n.n(p);var g=n(90569);var f=n.n(g);var v=n(3565);var _=n.n(v);var b=n(19216);var y=n.n(b);var w=n(44589);var C=n.n(w);var x=n(70785);var S={};S.styleTagTransform=C();S.setAttributes=_();S.insert=f().bind(null,"head");S.domAPI=m();S.insertStyleElement=y();var k=u()(x.Z,S);const j=x.Z&&x.Z.locals?x.Z.locals:undefined},37342:(e,t,n)=>{"use strict";n.r(t);n.d(t,{Clipboard:()=>T,Collapse:()=>i.Collapser,CommandLinker:()=>A,CommandToolbarButton:()=>i.CommandToolbarButton,CommandToolbarButtonComponent:()=>i.CommandToolbarButtonComponent,DOMUtils:()=>B,Dialog:()=>v,HoverBox:()=>i.HoverBox,ICommandPalette:()=>ge,IFrame:()=>i.IFrame,IKernelStatusModel:()=>fe,ISanitizer:()=>be,ISessionContextDialogs:()=>ve,ISplashScreen:()=>ye,IThemeManager:()=>_e,IToolbarWidgetRegistry:()=>Ce,IWindowResolver:()=>we,InputDialog:()=>H,KernelStatus:()=>k,MainAreaWidget:()=>X,MenuFactory:()=>Q,ModalCommandPalette:()=>N,Notification:()=>te,NotificationManager:()=>ee,Printing:()=>G,ReactWidget:()=>i.ReactWidget,RunningSessions:()=>se,Sanitizer:()=>le,SemanticCommand:()=>de,SessionContext:()=>b,SessionContextDialogs:()=>y,Spinner:()=>i.Spinner,Styling:()=>i.Styling,ThemeManager:()=>pe,Toolbar:()=>Re,ToolbarButton:()=>i.ToolbarButton,ToolbarButtonComponent:()=>i.ToolbarButtonComponent,ToolbarWidgetRegistry:()=>xe,UseSignal:()=>i.UseSignal,VDomModel:()=>i.VDomModel,VDomRenderer:()=>i.VDomRenderer,WidgetTracker:()=>m,WindowResolver:()=>Pe,addCommandToolbarButtonClass:()=>i.addCommandToolbarButtonClass,addToolbarButtonClass:()=>i.addToolbarButtonClass,createDefaultFactory:()=>Se,createToolbarFactory:()=>De,setToolbar:()=>Le,showDialog:()=>g,showErrorMessage:()=>f,translateKernelStatuses:()=>x});var i=n(52435);var s=n(36168);var o=n(85448);var r=n(28416);var a=n.n(r);var l=n(22873);var d=n(58740);var c=n(5596);var h=n(71372);var u=n(28821);var p=n(9682);class m{constructor(e){this._currentChanged=new h.Signal(this);this._deferred=null;this._isDisposed=false;this._widgetAdded=new h.Signal(this);this._widgetUpdated=new h.Signal(this);const t=this._focusTracker=new o.FocusTracker;const n=this._pool=new p.RestorablePool(e);this.namespace=e.namespace;t.currentChanged.connect(((e,t)=>{if(t.newValue!==this.currentWidget){n.current=t.newValue}}),this);n.added.connect(((e,t)=>{this._widgetAdded.emit(t)}),this);n.currentChanged.connect(((e,i)=>{if(i===null&&t.currentWidget){n.current=t.currentWidget;return}this.onCurrentChanged(i);this._currentChanged.emit(i)}),this);n.updated.connect(((e,t)=>{this._widgetUpdated.emit(t)}),this)}get currentChanged(){return this._currentChanged}get currentWidget(){return this._pool.current||null}get restored(){if(this._deferred){return Promise.resolve()}else{return this._pool.restored}}get size(){return this._pool.size}get widgetAdded(){return this._widgetAdded}get widgetUpdated(){return this._widgetUpdated}async add(e){this._focusTracker.add(e);await this._pool.add(e);if(!this._focusTracker.activeWidget){this._pool.current=e}}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this._pool.dispose();this._focusTracker.dispose();h.Signal.clearData(this)}find(e){return this._pool.find(e)}forEach(e){return this._pool.forEach(e)}filter(e){return this._pool.filter(e)}inject(e){return this._pool.inject(e)}has(e){return this._pool.has(e)}async restore(e){const t=this._deferred;if(t){this._deferred=null;return this._pool.restore(t)}if(e){return this._pool.restore(e)}console.warn("No options provided to restore the tracker.")}defer(e){this._deferred=e}async save(e){return this._pool.save(e)}onCurrentChanged(e){}}function g(e={}){const t=new v(e);return t.launch()}function f(e,t,n){const i=v.translator.load("jupyterlab");n=n!==null&&n!==void 0?n:[v.okButton({label:i.__("Dismiss")})];console.warn("Showing error:",t);const s=typeof t==="string"?t:t.message;const o=e+"----"+s;const r=_.errorMessagePromiseCache.get(o);if(r){return r}else{const t=g({title:e,body:s,buttons:n}).then((()=>{_.errorMessagePromiseCache.delete(o)}),(e=>{_.errorMessagePromiseCache.delete(o);throw e}));_.errorMessagePromiseCache.set(o,t);return t}}class v extends o.Widget{constructor(e={}){const t=document.createElement("dialog");t.ariaModal="true";super({node:t});this._ready=new c.PromiseDelegate;this._focusNodeSelector="";this.addClass("jp-Dialog");const n=_.handleOptions(e);const i=n.renderer;this._host=n.host;this._defaultButton=n.defaultButton;this._buttons=n.buttons;this._hasClose=n.hasClose;this._buttonNodes=this._buttons.map((e=>i.createButtonNode(e)));this._checkboxNode=null;this._lastMouseDownInDialog=false;if(n.checkbox){const{label:e="",caption:t="",checked:s=false,className:o=""}=n.checkbox;this._checkboxNode=i.createCheckboxNode({label:e,caption:t!==null&&t!==void 0?t:e,checked:s,className:o})}const s=this.layout=new o.PanelLayout;const r=new o.Panel;r.addClass("jp-Dialog-content");if(typeof e.body==="string"){r.addClass("jp-Dialog-content-small");t.ariaLabel=[n.title,e.body].join(" ")}s.addWidget(r);this._body=n.body;const a=i.createHeader(n.title,(()=>this.reject()),e);const l=i.createBody(n.body);const d=i.createFooter(this._buttonNodes,this._checkboxNode);r.addWidget(a);r.addWidget(l);r.addWidget(d);this._bodyWidget=l;this._primary=this._buttonNodes[this._defaultButton];this._focusNodeSelector=e.focusNodeSelector;void v.tracker.add(this)}get ready(){return this._ready.promise}dispose(){const e=this._promise;if(e){this._promise=null;e.reject(void 0);d.ArrayExt.removeFirstOf(_.launchQueue,e.promise)}super.dispose()}launch(){if(this._promise){return this._promise.promise}const e=this._promise=new c.PromiseDelegate;const t=Promise.all(_.launchQueue);_.launchQueue.push(this._promise.promise);return t.then((()=>{if(!this._promise){return Promise.resolve({button:v.cancelButton(),isChecked:null,value:null})}o.Widget.attach(this,this._host);return e.promise}))}resolve(e){if(!this._promise){return}if(e===undefined){e=this._defaultButton}this._resolve(this._buttons[e])}reject(){if(!this._promise){return}this._resolve(v.cancelButton())}handleEvent(e){switch(e.type){case"keydown":this._evtKeydown(e);break;case"mousedown":this._evtMouseDown(e);break;case"click":this._evtClick(e);break;case"focus":this._evtFocus(e);break;case"contextmenu":e.preventDefault();e.stopPropagation();break;default:break}}onAfterAttach(e){const t=this.node;t.addEventListener("keydown",this,true);t.addEventListener("contextmenu",this,true);t.addEventListener("click",this,true);document.addEventListener("mousedown",this,true);document.addEventListener("focus",this,true);this._first=_.findFirstFocusable(this.node);this._original=document.activeElement;const n=()=>{var e;if(this._focusNodeSelector){const e=this.node.querySelector(".jp-Dialog-body");const t=e===null||e===void 0?void 0:e.querySelector(this._focusNodeSelector);if(t){this._primary=t}}(e=this._primary)===null||e===void 0?void 0:e.focus();this._ready.resolve()};if(this._bodyWidget instanceof i.ReactWidget&&this._bodyWidget.renderPromise!==undefined){this._bodyWidget.renderPromise.then((()=>{n()})).catch((()=>{console.error("Error while loading Dialog's body")}))}else{n()}}onAfterDetach(e){const t=this.node;t.removeEventListener("keydown",this,true);t.removeEventListener("contextmenu",this,true);t.removeEventListener("click",this,true);document.removeEventListener("focus",this,true);document.removeEventListener("mousedown",this,true);this._original.focus()}onCloseRequest(e){if(this._promise){this.reject()}super.onCloseRequest(e)}_evtClick(e){const t=this.node.getElementsByClassName("jp-Dialog-content")[0];if(!t.contains(e.target)){e.stopPropagation();e.preventDefault();if(this._hasClose&&!this._lastMouseDownInDialog){this.reject()}return}for(const n of this._buttonNodes){if(n.contains(e.target)){const e=this._buttonNodes.indexOf(n);this.resolve(e)}}}_evtKeydown(e){switch(e.keyCode){case 27:e.stopPropagation();e.preventDefault();if(this._hasClose){this.reject()}break;case 37:{const t=document.activeElement;if(t instanceof HTMLButtonElement){let n=this._buttonNodes.indexOf(t)-1;if(n<0){n=this._buttonNodes.length-1}const i=this._buttonNodes[n];e.stopPropagation();e.preventDefault();i.focus()}break}case 39:{const t=document.activeElement;if(t instanceof HTMLButtonElement){let n=this._buttonNodes.indexOf(t)+1;if(n==this._buttons.length){n=0}const i=this._buttonNodes[n];e.stopPropagation();e.preventDefault();i.focus()}break}case 9:{const t=this._buttonNodes[this._buttons.length-1];if(document.activeElement===t&&!e.shiftKey){e.stopPropagation();e.preventDefault();this._first.focus()}break}case 13:{e.stopPropagation();e.preventDefault();const t=document.activeElement;let n;if(t instanceof HTMLButtonElement){n=this._buttonNodes.indexOf(t)}this.resolve(n);break}default:break}}_evtFocus(e){var t;const n=e.target;if(!this.node.contains(n)){e.stopPropagation();(t=this._buttonNodes[this._defaultButton])===null||t===void 0?void 0:t.focus()}}_evtMouseDown(e){const t=this.node.getElementsByClassName("jp-Dialog-content")[0];const n=e.target;this._lastMouseDownInDialog=t.contains(n)}_resolve(e){var t,n,i;const s=this._promise;if(!s){this.dispose();return}this._promise=null;d.ArrayExt.removeFirstOf(_.launchQueue,s.promise);const r=this._body;let a=null;if(e.accept&&r instanceof o.Widget&&typeof r.getValue==="function"){a=r.getValue()}this.dispose();s.resolve({button:e,isChecked:(i=(n=(t=this._checkboxNode)===null||t===void 0?void 0:t.querySelector("input"))===null||n===void 0?void 0:n.checked)!==null&&i!==void 0?i:null,value:a})}}(function(e){e.translator=s.nullTranslator;function t(t){t.accept=t.accept!==false;const n=e.translator.load("jupyterlab");const i=t.accept?n.__("Ok"):n.__("Cancel");return{ariaLabel:t.ariaLabel||t.label||i,label:t.label||i,iconClass:t.iconClass||"",iconLabel:t.iconLabel||"",caption:t.caption||"",className:t.className||"",accept:t.accept,actions:t.actions||[],displayType:t.displayType||"default"}}e.createButton=t;function n(e={}){e.accept=false;return t(e)}e.cancelButton=n;function a(e={}){e.accept=true;return t(e)}e.okButton=a;function l(e={}){e.displayType="warn";return t(e)}e.warnButton=l;function d(){e.tracker.forEach((e=>{e.dispose()}))}e.flush=d;class c{createHeader(t,n=(()=>{}),s={}){let o;const a=e=>{if(e.button===0){e.preventDefault();n()}};const l=e=>{const{key:t}=e;if(t==="Enter"||t===" "){n()}};if(typeof t==="string"){const n=e.translator.load("jupyterlab");o=i.ReactWidget.create(r.createElement(r.Fragment,null,t,s.hasClose&&r.createElement(i.Button,{className:"jp-Dialog-close-button",onMouseDown:a,onKeyDown:l,title:n.__("Cancel"),minimal:true},r.createElement(i.LabIcon.resolveReact,{icon:i.closeIcon,iconClass:"jp-Icon",className:"jp-ToolbarButtonComponent-icon",tag:"span"}))))}else{o=i.ReactWidget.create(t)}o.addClass("jp-Dialog-header");i.Styling.styleNode(o.node);return o}createBody(e){const t=e=>{if(e.renderPromise!==undefined){e.renderPromise.then((()=>{i.Styling.styleNode(e.node)})).catch((()=>{console.error("Error while loading Dialog's body")}))}else{i.Styling.styleNode(e.node)}};let n;if(typeof e==="string"){n=new o.Widget({node:document.createElement("span")});n.node.textContent=e}else if(e instanceof o.Widget){n=e;if(n instanceof i.ReactWidget){t(n)}else{i.Styling.styleNode(n.node)}}else{n=i.ReactWidget.create(e);u.MessageLoop.sendMessage(n,o.Widget.Msg.UpdateRequest);t(n)}n.addClass("jp-Dialog-body");return n}createFooter(e,t){const n=new o.Widget;n.addClass("jp-Dialog-footer");if(t){n.node.appendChild(t);n.node.insertAdjacentHTML("beforeend",'<div class="jp-Dialog-spacer"></div>')}for(const i of e){n.node.appendChild(i)}i.Styling.styleNode(n.node);return n}createButtonNode(e){const t=document.createElement("button");t.className=this.createItemClass(e);t.appendChild(this.renderIcon(e));t.appendChild(this.renderLabel(e));return t}createCheckboxNode(e){const t=document.createElement("label");t.className="jp-Dialog-checkbox";if(e.className){t.classList.add(e.className)}t.title=e.caption;t.textContent=e.label;const n=document.createElement("input");n.type="checkbox";n.checked=!!e.checked;t.insertAdjacentElement("afterbegin",n);return t}createItemClass(e){let t="jp-Dialog-button";if(e.accept){t+=" jp-mod-accept"}else{t+=" jp-mod-reject"}if(e.displayType==="warn"){t+=" jp-mod-warn"}const n=e.className;if(n){t+=` ${n}`}return t}renderIcon(e){const t=document.createElement("div");t.className=this.createIconClass(e);t.appendChild(document.createTextNode(e.iconLabel));return t}createIconClass(e){const t="jp-Dialog-buttonIcon";const n=e.iconClass;return n?`${t} ${n}`:t}renderLabel(e){const t=document.createElement("div");t.className="jp-Dialog-buttonLabel";t.title=e.caption;t.ariaLabel=e.ariaLabel;t.appendChild(document.createTextNode(e.label));return t}}e.Renderer=c;e.defaultRenderer=new c;e.tracker=new m({namespace:"@jupyterlab/apputils:Dialog"})})(v||(v={}));var _;(function(e){e.launchQueue=[];e.errorMessagePromiseCache=new Map;function t(e={}){var t,n,i,s,o,r,a,l,d;const c=(t=e.buttons)!==null&&t!==void 0?t:[v.cancelButton(),v.okButton()];return{title:(n=e.title)!==null&&n!==void 0?n:"",body:(i=e.body)!==null&&i!==void 0?i:"",host:(s=e.host)!==null&&s!==void 0?s:document.body,checkbox:(o=e.checkbox)!==null&&o!==void 0?o:null,buttons:c,defaultButton:(r=e.defaultButton)!==null&&r!==void 0?r:c.length-1,renderer:(a=e.renderer)!==null&&a!==void 0?a:v.defaultRenderer,focusNodeSelector:(l=e.focusNodeSelector)!==null&&l!==void 0?l:"",hasClose:(d=e.hasClose)!==null&&d!==void 0?d:true}}e.handleOptions=t;function n(e){const t=["input","select","a[href]","textarea","button","[tabindex]"].join(",");return e.querySelectorAll(t)[0]}e.findFirstFocusable=n})(_||(_={}));class b{constructor(e){var t,n,i,o;this._path="";this._name="";this._type="";this._prevKernelName="";this._isDisposed=false;this._disposed=new h.Signal(this);this._session=null;this._ready=new c.PromiseDelegate;this._initializing=false;this._initStarted=new c.PromiseDelegate;this._initPromise=new c.PromiseDelegate;this._isReady=false;this._isTerminating=false;this._isRestarting=false;this._kernelChanged=new h.Signal(this);this._preferenceChanged=new h.Signal(this);this._sessionChanged=new h.Signal(this);this._statusChanged=new h.Signal(this);this._connectionStatusChanged=new h.Signal(this);this._pendingInput=false;this._iopubMessage=new h.Signal(this);this._unhandledMessage=new h.Signal(this);this._propertyChanged=new h.Signal(this);this._dialog=null;this._busyDisposable=null;this._pendingKernelName="";this._pendingSessionRequest="";this.sessionManager=e.sessionManager;this.specsManager=e.specsManager;this.translator=e.translator||s.nullTranslator;this._trans=this.translator.load("jupyterlab");this._path=(t=e.path)!==null&&t!==void 0?t:c.UUID.uuid4();this._type=(n=e.type)!==null&&n!==void 0?n:"";this._name=(i=e.name)!==null&&i!==void 0?i:"";this._setBusy=e.setBusy;this._kernelPreference=(o=e.kernelPreference)!==null&&o!==void 0?o:{}}get session(){var e;return(e=this._session)!==null&&e!==void 0?e:null}get path(){return this._path}get type(){return this._type}get name(){return this._name}get kernelChanged(){return this._kernelChanged}get sessionChanged(){return this._sessionChanged}get statusChanged(){return this._statusChanged}get pendingInput(){return this._pendingInput}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get propertyChanged(){return this._propertyChanged}get kernelPreference(){return this._kernelPreference}set kernelPreference(e){if(!c.JSONExt.deepEqual(e,this._kernelPreference)){const t=this._kernelPreference;this._kernelPreference=e;this._preferenceChanged.emit({name:"kernelPreference",oldValue:t,newValue:c.JSONExt.deepCopy(e)})}}get kernelPreferenceChanged(){return this._preferenceChanged}get isReady(){return this._isReady}get ready(){return this._ready.promise}get isTerminating(){return this._isTerminating}get isRestarting(){return this._isRestarting}get hasNoKernel(){return this.kernelDisplayName===this.noKernelName}get kernelDisplayName(){var e,t,n,i,s,o,r;const a=(e=this.session)===null||e===void 0?void 0:e.kernel;if(this._pendingKernelName===this.noKernelName){return this.noKernelName}if(this._pendingKernelName){return(i=(n=(t=this.specsManager.specs)===null||t===void 0?void 0:t.kernelspecs[this._pendingKernelName])===null||n===void 0?void 0:n.display_name)!==null&&i!==void 0?i:this._pendingKernelName}if(!a){return this.noKernelName}return(r=(o=(s=this.specsManager.specs)===null||s===void 0?void 0:s.kernelspecs[a.name])===null||o===void 0?void 0:o.display_name)!==null&&r!==void 0?r:a.name}get kernelDisplayStatus(){var e,t;const n=(e=this.session)===null||e===void 0?void 0:e.kernel;if(this._isTerminating){return"terminating"}if(this._isRestarting){return"restarting"}if(this._pendingKernelName===this.noKernelName){return"unknown"}if(!n&&this._pendingKernelName){return"initializing"}if(!n&&!this.isReady&&this.kernelPreference.canStart!==false&&this.kernelPreference.shouldStart!==false){return"initializing"}return(t=(n===null||n===void 0?void 0:n.connectionStatus)==="connected"?n===null||n===void 0?void 0:n.status:n===null||n===void 0?void 0:n.connectionStatus)!==null&&t!==void 0?t:"unknown"}get prevKernelName(){return this._prevKernelName}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}get noKernelName(){return this._trans.__("No Kernel")}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._disposed.emit();if(this._session){if(this.kernelPreference.shutdownOnDispose){this.sessionManager.shutdown(this._session.id).catch((e=>{console.error(`Kernel not shut down ${e}`)}))}this._session.dispose();this._session=null}if(this._dialog){this._dialog.dispose()}if(this._busyDisposable){this._busyDisposable.dispose();this._busyDisposable=null}h.Signal.clearData(this)}async startKernel(){const e=this.kernelPreference;if(!e.autoStartDefault&&e.shouldStart===false){return true}let t;if(e.id){t={id:e.id}}else{const n=w.getDefaultKernel({specs:this.specsManager.specs,sessions:this.sessionManager.running(),preference:e});if(n){t={name:n}}}if(t){try{await this._changeKernel(t);return false}catch(n){}}return true}async restartKernel(){var e,t,n,i,s,o;const r=((e=this.session)===null||e===void 0?void 0:e.kernel)||null;if(this._isRestarting){return}this._isRestarting=true;this._isReady=false;this._statusChanged.emit("restarting");try{await((n=(t=this.session)===null||t===void 0?void 0:t.kernel)===null||n===void 0?void 0:n.restart());this._isReady=true}catch(a){console.error(a)}this._isRestarting=false;this._statusChanged.emit(((s=(i=this.session)===null||i===void 0?void 0:i.kernel)===null||s===void 0?void 0:s.status)||"unknown");this._kernelChanged.emit({name:"kernel",oldValue:r,newValue:((o=this.session)===null||o===void 0?void 0:o.kernel)||null})}async changeKernel(e={}){if(this.isDisposed){throw new Error("Disposed")}await this._initStarted.promise;return this._changeKernel(e)}async shutdown(){if(this.isDisposed||!this._initializing){return}await this._initStarted.promise;this._pendingSessionRequest="";this._pendingKernelName=this.noKernelName;return this._shutdownSession()}async initialize(){if(this._initializing){return this._initPromise.promise}this._initializing=true;const e=await this._initialize();if(!e){this._isReady=true;this._ready.resolve(undefined)}if(!this._pendingSessionRequest){this._initStarted.resolve(void 0)}this._initPromise.resolve(e);return e}async _initialize(){const e=this.sessionManager;await e.ready;await e.refreshRunning();const t=(0,d.find)(e.running(),(e=>e.path===this._path));if(t){try{const n=e.connectTo({model:t});this._handleNewSession(n)}catch(n){void this._handleSessionError(n);return Promise.reject(n)}}return await this._startIfNecessary()}async _shutdownSession(){var e;const t=this._session;const n=this._isTerminating;const i=this._isReady;this._isTerminating=true;this._isReady=false;this._statusChanged.emit("terminating");try{await(t===null||t===void 0?void 0:t.shutdown());this._isTerminating=false;t===null||t===void 0?void 0:t.dispose();this._session=null;const e=(t===null||t===void 0?void 0:t.kernel)||null;this._statusChanged.emit("unknown");this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:null});this._sessionChanged.emit({name:"session",oldValue:t,newValue:null})}catch(s){this._isTerminating=n;this._isReady=i;const o=(e=t===null||t===void 0?void 0:t.kernel)===null||e===void 0?void 0:e.status;if(o===undefined){this._statusChanged.emit("unknown")}else{this._statusChanged.emit(o)}throw s}return}async _startIfNecessary(){var e;const t=this.kernelPreference;if(this.isDisposed||((e=this.session)===null||e===void 0?void 0:e.kernel)||t.shouldStart===false||t.canStart===false){return false}return this.startKernel()}async _changeKernel(e={}){if(e.name){this._pendingKernelName=e.name}if(!this._session){this._kernelChanged.emit({name:"kernel",oldValue:null,newValue:null})}if(!this._pendingSessionRequest){this._initStarted.resolve(void 0)}if(this._session&&!this._isTerminating){try{await this._session.changeKernel(e);return this._session.kernel}catch(i){void this._handleSessionError(i);throw i}}const t=l.PathExt.dirname(this._path);const n=this._pendingSessionRequest=l.PathExt.join(t,c.UUID.uuid4());try{this._statusChanged.emit("starting");const t=await this.sessionManager.startNew({path:n,type:this._type,name:this._name,kernel:e});if(this._pendingSessionRequest!==t.path){await t.shutdown();t.dispose();return null}await t.setPath(this._path);await t.setName(this._name);if(this._session&&!this._isTerminating){await this._shutdownSession()}return this._handleNewSession(t)}catch(i){void this._handleSessionError(i);throw i}}_handleNewSession(e){var t,n,i;if(this.isDisposed){throw Error("Disposed")}if(!this._isReady){this._isReady=true;this._ready.resolve(undefined)}if(this._session){this._session.dispose()}this._session=e;this._pendingKernelName="";if(e){this._prevKernelName=(n=(t=e.kernel)===null||t===void 0?void 0:t.name)!==null&&n!==void 0?n:"";e.disposed.connect(this._onSessionDisposed,this);e.propertyChanged.connect(this._onPropertyChanged,this);e.kernelChanged.connect(this._onKernelChanged,this);e.statusChanged.connect(this._onStatusChanged,this);e.connectionStatusChanged.connect(this._onConnectionStatusChanged,this);e.pendingInput.connect(this._onPendingInput,this);e.iopubMessage.connect(this._onIopubMessage,this);e.unhandledMessage.connect(this._onUnhandledMessage,this);if(e.path!==this._path){this._onPropertyChanged(e,"path")}if(e.name!==this._name){this._onPropertyChanged(e,"name")}if(e.type!==this._type){this._onPropertyChanged(e,"type")}}this._sessionChanged.emit({name:"session",oldValue:null,newValue:e});this._kernelChanged.emit({oldValue:null,newValue:(e===null||e===void 0?void 0:e.kernel)||null,name:"kernel"});this._statusChanged.emit(((i=e===null||e===void 0?void 0:e.kernel)===null||i===void 0?void 0:i.status)||"unknown");return(e===null||e===void 0?void 0:e.kernel)||null}async _handleSessionError(e){this._handleNewSession(null);let t="";let n="";try{t=e.traceback;n=e.message}catch(e){}await this._displayKernelError(n,t)}async _displayKernelError(e,t){const n=r.createElement("div",null,e&&r.createElement("pre",null,e),t&&r.createElement("details",{className:"jp-mod-wide"},r.createElement("pre",null,t)));const i=this._dialog=new v({title:this._trans.__("Error Starting Kernel"),body:n,buttons:[v.okButton()]});await i.launch();this._dialog=null}_onSessionDisposed(){if(this._session){const e=this._session;this._session=null;const t=this._session;this._sessionChanged.emit({name:"session",oldValue:e,newValue:t})}}_onPropertyChanged(e,t){switch(t){case"path":this._path=e.path;break;case"name":this._name=e.name;break;case"type":this._type=e.type;break;default:throw new Error(`unrecognized property ${t}`)}this._propertyChanged.emit(t)}_onKernelChanged(e,t){this._kernelChanged.emit(t)}_onStatusChanged(e,t){var n;if(t==="dead"){const t=(n=e.kernel)===null||n===void 0?void 0:n.model;if(t===null||t===void 0?void 0:t.reason){const e=t.traceback||"";void this._displayKernelError(t.reason,e)}}if(this._setBusy){if(t==="busy"){if(!this._busyDisposable){this._busyDisposable=this._setBusy()}}else{if(this._busyDisposable){this._busyDisposable.dispose();this._busyDisposable=null}}}this._statusChanged.emit(t)}_onConnectionStatusChanged(e,t){this._connectionStatusChanged.emit(t)}_onPendingInput(e,t){this._pendingInput=t}_onIopubMessage(e,t){if(t.header.msg_type==="shutdown_reply"){this.session.kernel.removeInputGuard()}this._iopubMessage.emit(t)}_onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}}(function(e){function t(e){const{preference:t}=e;const{shouldStart:n}=t;if(n===false){return null}return w.getDefaultKernel(e)}e.getDefaultKernel=t})(b||(b={}));class y{constructor(e={}){var t;this._translator=(t=e.translator)!==null&&t!==void 0?t:s.nullTranslator}async selectKernel(e){if(e.isDisposed){return Promise.resolve()}const t=this._translator.load("jupyterlab");let n=t.__("Cancel");if(e.hasNoKernel){n=e.kernelDisplayName}const i=[v.cancelButton({label:n}),v.okButton({label:t.__("Select"),ariaLabel:t.__("Select Kernel")})];const s=e.kernelPreference.autoStartDefault;const o=typeof s==="boolean";const r=new v({title:t.__("Select Kernel"),body:new w.KernelSelector(e,this._translator),buttons:i,checkbox:o?{label:t.__("Always start the preferred kernel"),caption:t.__("Remember my choice and always start the preferred kernel"),checked:s}:null});const a=await r.launch();if(e.isDisposed||!a.button.accept){return}if(o&&a.isChecked!==null){e.kernelPreference={...e.kernelPreference,autoStartDefault:a.isChecked}}const l=a.value;if(l===null&&!e.hasNoKernel){return e.shutdown()}if(l){await e.changeKernel(l)}}async restart(e){var t;const n=this._translator.load("jupyterlab");await e.initialize();if(e.isDisposed){throw new Error("session already disposed")}const i=(t=e.session)===null||t===void 0?void 0:t.kernel;if(!i&&e.prevKernelName){await e.changeKernel({name:e.prevKernelName});return true}if(!i){throw new Error("No kernel to restart")}const s=v.warnButton({label:n.__("Restart"),ariaLabel:n.__("Confirm Kernel Restart")});const o=await g({title:n.__("Restart Kernel?"),body:n.__("Do you want to restart the kernel of %1? All variables will be lost.",e.name),buttons:[v.cancelButton({ariaLabel:n.__("Cancel Kernel Restart")}),s]});if(i.isDisposed){return false}if(o.button.accept){await e.restartKernel();return true}return false}}var w;(function(e){class t extends o.Widget{constructor(e,t){super({node:n(e,t)})}getValue(){const e=this.node.querySelector("select");return JSON.parse(e.value)}}e.KernelSelector=t;function n(e,t){t=t||s.nullTranslator;const n=t.load("jupyterlab");const i=document.createElement("div");const o=document.createElement("label");o.textContent=`${n.__("Select kernel for:")} "${e.name}"`;i.appendChild(o);const l=a(e);const d=document.createElement("select");r(d,l,t,!e.hasNoKernel?e.kernelDisplayName:null);i.appendChild(d);return i}function i(e){var t;const{specs:n,preference:i}=e;const{name:s,language:o,canStart:r,autoStartDefault:a}=i;if(!n||r===false){return null}const l=a?n.default:null;if(!s&&!o){return l}for(const c in n.kernelspecs){if(c===s){return s}}if(!o){return l}const d=[];for(const c in n.kernelspecs){const e=(t=n.kernelspecs[c])===null||t===void 0?void 0:t.language;if(o===e){d.push(c)}}if(d.length===1){const e=d[0];console.warn("No exact match found for "+e+", using kernel "+e+" that matches "+"language="+o);return e}return l}e.getDefaultKernel=i;function r(e,t,n,i=null){var o;while(e.firstChild){e.removeChild(e.firstChild)}const{preference:r,sessions:a,specs:l}=t;const{name:u,id:p,language:m,canStart:g,shouldStart:f}=r;n=n||s.nullTranslator;const v=n.load("jupyterlab");if(!l||g===false){e.appendChild(c(n));e.value="null";e.disabled=true;return}e.disabled=false;const _=Object.create(null);const b=Object.create(null);for(const s in l.kernelspecs){const e=l.kernelspecs[s];_[s]=e.display_name;b[s]=e.language}const y=[];if(u&&u in l.kernelspecs){y.push(u)}if(u&&y.length>0&&m){for(const e in l.kernelspecs){if(u!==e&&b[e]===m){y.push(e)}}}if(!y.length){y.push(l.default)}const w=document.createElement("optgroup");w.label=v.__("Start Preferred Kernel");y.sort(((e,t)=>_[e].localeCompare(_[t])));for(const s of y){w.appendChild(d(s,_[s]))}if(w.firstChild){e.appendChild(w)}e.appendChild(c(n));const C=document.createElement("optgroup");C.label=v.__("Start Other Kernel");const x=[];for(const s in l.kernelspecs){if(y.indexOf(s)!==-1){continue}x.push(s)}x.sort(((e,t)=>_[e].localeCompare(_[t])));for(const s of x){C.appendChild(d(s,_[s]))}if(x.length){e.appendChild(C)}if(f===false){e.value="null"}else{let t=0;if(i){t=[...e.options].findIndex((e=>e.text===i));t=Math.max(t,0)}e.selectedIndex=t}if(!a){return}const S=[];const k=[];for(const s of a){if(m&&s.kernel&&b[s.kernel.name]===m&&s.kernel.id!==p){S.push(s)}else if(((o=s.kernel)===null||o===void 0?void 0:o.id)!==p){k.push(s)}}const j=document.createElement("optgroup");j.label=v.__("Use Kernel from Preferred Session");e.appendChild(j);if(S.length){S.sort(((e,t)=>e.path.localeCompare(t.path)));for(const e of S){const t=e.kernel?_[e.kernel.name]:"";j.appendChild(h(e,t,n))}}const M=document.createElement("optgroup");M.label=v.__("Use Kernel from Other Session");e.appendChild(M);if(k.length){k.sort(((e,t)=>e.path.localeCompare(t.path)));for(const e of k){const t=e.kernel?_[e.kernel.name]||e.kernel.name:"";M.appendChild(h(e,t,n))}}}e.populateKernelSelect=r;function a(e){return{specs:e.specsManager.specs,sessions:e.sessionManager.running(),preference:e.kernelPreference}}function d(e,t){const n=document.createElement("option");n.text=t;n.value=JSON.stringify({name:e});return n}function c(e){e=e||s.nullTranslator;const t=e.load("jupyterlab");const n=document.createElement("optgroup");n.label=t.__("Use No Kernel");const i=document.createElement("option");i.text=t.__("No Kernel");i.value="null";n.appendChild(i);return n}function h(e,t,n){var i,o;n=n||s.nullTranslator;const r=n.load("jupyterlab");const a=document.createElement("option");const d=e.name||l.PathExt.basename(e.path);a.text=d;a.value=JSON.stringify({id:(i=e.kernel)===null||i===void 0?void 0:i.id});a.title=`${r.__("Path:")} ${e.path}\n`+`${r.__("Name:")} ${d}\n`+`${r.__("Kernel Name:")} ${t}\n`+`${r.__("Kernel Id:")} ${(o=e.kernel)===null||o===void 0?void 0:o.id}`;return a}})(w||(w={}));var C=n(88478);function x(e){e=e||s.nullTranslator;const t=e.load("jupyterlab");const n={unknown:t.__("Unknown"),starting:t.__("Starting"),idle:t.__("Idle"),busy:t.__("Busy"),terminating:t.__("Terminating"),restarting:t.__("Restarting"),autorestarting:t.__("Autorestarting"),dead:t.__("Dead"),connected:t.__("Connected"),connecting:t.__("Connecting"),disconnected:t.__("Disconnected"),initializing:t.__("Initializing"),"":""};return n}function S(e){const t=e.translator||s.nullTranslator;const n=t.load("jupyterlab");let i="";if(e.status){i=` | ${e.status}`}return a().createElement(C.TextItem,{onClick:e.handleClick,source:`${e.kernelName}${i}`,title:n.__("Change kernel for %1",e.activityName)})}class k extends i.VDomRenderer{constructor(e,t){super(new k.Model(t));this.translator=t||s.nullTranslator;this._handleClick=e.onClick;this.addClass("jp-mod-highlighted")}render(){if(this.model===null){return null}else{return a().createElement(S,{status:this.model.status,kernelName:this.model.kernelName,activityName:this.model.activityName,handleClick:this._handleClick,translator:this.translator})}}}(function(e){class t extends i.VDomModel{constructor(e){super();this._activityName="";this._kernelName="";this._kernelStatus="";this._sessionContext=null;e=e!==null&&e!==void 0?e:s.nullTranslator;this._trans=e.load("jupyterlab");this._statusNames=x(e)}get kernelName(){return this._kernelName}get status(){return this._kernelStatus?this._statusNames[this._kernelStatus]:undefined}get activityName(){return this._activityName}set activityName(e){const t=this._activityName;if(t===e){return}this._activityName=e;this.stateChanged.emit()}get sessionContext(){return this._sessionContext}set sessionContext(e){var t,n,i,s;(t=this._sessionContext)===null||t===void 0?void 0:t.statusChanged.disconnect(this._onKernelStatusChanged,this);(n=this._sessionContext)===null||n===void 0?void 0:n.connectionStatusChanged.disconnect(this._onKernelStatusChanged,this);(i=this._sessionContext)===null||i===void 0?void 0:i.kernelChanged.disconnect(this._onKernelChanged,this);const o=this._getAllState();this._sessionContext=e;this._kernelStatus=e===null||e===void 0?void 0:e.kernelDisplayStatus;this._kernelName=(s=e===null||e===void 0?void 0:e.kernelDisplayName)!==null&&s!==void 0?s:this._trans.__("No Kernel");e===null||e===void 0?void 0:e.statusChanged.connect(this._onKernelStatusChanged,this);e===null||e===void 0?void 0:e.connectionStatusChanged.connect(this._onKernelStatusChanged,this);e===null||e===void 0?void 0:e.kernelChanged.connect(this._onKernelChanged,this);this._triggerChange(o,this._getAllState())}_onKernelStatusChanged(){var e;this._kernelStatus=(e=this._sessionContext)===null||e===void 0?void 0:e.kernelDisplayStatus;this.stateChanged.emit(void 0)}_onKernelChanged(e,t){var n;const i=this._getAllState();this._kernelStatus=(n=this._sessionContext)===null||n===void 0?void 0:n.kernelDisplayStatus;this._kernelName=e.kernelDisplayName;this._triggerChange(i,this._getAllState())}_getAllState(){return[this._kernelName,this._kernelStatus,this._activityName]}_triggerChange(e,t){if(c.JSONExt.deepEqual(e,t)){this.stateChanged.emit(void 0)}}}e.Model=t})(k||(k={}));const j="jp-Toolbar-kernelName";const M="jp-Toolbar-kernelStatus";var E;(function(e){function t(e,t){t=t||s.nullTranslator;const n=t.load("jupyterlab");return new i.ToolbarButton({icon:i.stopIcon,onClick:()=>{var t,n;void((n=(t=e.session)===null||t===void 0?void 0:t.kernel)===null||n===void 0?void 0:n.interrupt())},tooltip:n.__("Interrupt the kernel")})}e.createInterruptButton=t;function n(e,t,n){n=n!==null&&n!==void 0?n:s.nullTranslator;const o=n.load("jupyterlab");return new i.ToolbarButton({icon:i.refreshIcon,onClick:()=>{void(t!==null&&t!==void 0?t:new y({translator:n})).restart(e)},tooltip:o.__("Restart the kernel")})}e.createRestartButton=n;function o(e,t,n){const s=i.ReactWidget.create(r.createElement(I.KernelNameComponent,{sessionContext:e,dialogs:t!==null&&t!==void 0?t:new y({translator:n}),translator:n}));s.addClass("jp-KernelName");return s}e.createKernelNameItem=o;function a(e,t){return new I.KernelStatus(e,t)}e.createKernelStatusItem=a})(E||(E={}));var I;(function(e){function t(e){const t=e.translator||s.nullTranslator;const n=t.load("jupyterlab");const o=()=>{void e.dialogs.selectKernel(e.sessionContext)};return r.createElement(i.UseSignal,{signal:e.sessionContext.kernelChanged,initialSender:e.sessionContext},(e=>r.createElement(i.ToolbarButtonComponent,{className:j,onClick:o,tooltip:n.__("Switch kernel"),label:e===null||e===void 0?void 0:e.kernelDisplayName})))}e.KernelNameComponent=t;class n extends o.Widget{constructor(e,t){super();this.translator=t||s.nullTranslator;this._trans=this.translator.load("jupyterlab");this.addClass(M);this._statusNames=x(this.translator);this._onStatusChanged(e);e.statusChanged.connect(this._onStatusChanged,this);e.connectionStatusChanged.connect(this._onStatusChanged,this)}_onStatusChanged(e){if(this.isDisposed){return}const t=e.kernelDisplayStatus;const n={container:this.node,title:this._trans.__("Kernel %1",this._statusNames[t]||t),stylesheet:"toolbarButton",alignSelf:"normal",height:"24px"};i.LabIcon.remove(this.node);if(t==="busy"||t==="starting"||t==="terminating"||t==="restarting"||t==="initializing"){i.circleIcon.element(n)}else if(t==="connecting"||t==="disconnected"||t==="unknown"){i.offlineBoltIcon.element(n)}else{i.circleEmptyIcon.element(n)}}}e.KernelStatus=n})(I||(I={}));var T;(function(e){function t(){return D.instance}e.getInstance=t;function n(e){D.instance=e}e.setInstance=n;function i(e){const t=document.body;const n=i=>{const s=i.clipboardData||window.clipboardData;if(typeof e==="string"){s.setData("text",e)}else{e.types().map((t=>{s.setData(t,e.getData(t))}))}i.preventDefault();t.removeEventListener("copy",n)};t.addEventListener("copy",n);s(t)}e.copyToSystem=i;function s(e,t="copy"){let n=window.getSelection();const i=[];for(let o=0,r=(n===null||n===void 0?void 0:n.rangeCount)||0;o<r;++o){i[o]=n.getRangeAt(o).cloneRange()}const s=document.createRange();s.selectNodeContents(e);if(n){n.removeAllRanges();n.addRange(s)}document.execCommand(t);n=window.getSelection();if(n){n.removeAllRanges();for(let e=0,t=i.length;e<t;++e){n.addRange(i[e])}}}e.generateEvent=s})(T||(T={}));var D;(function(e){e.instance=new c.MimeData})(D||(D={}));const L="commandlinker-command";const P="commandlinker-args";class A{constructor(e){this._isDisposed=false;this._commands=e.commands;document.body.addEventListener("click",this)}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;document.body.removeEventListener("click",this)}connectNode(e,t,n){e.setAttribute(`data-${L}`,t);if(n!==void 0){e.setAttribute(`data-${P}`,JSON.stringify(n))}return e}disconnectNode(e){e.removeAttribute(`data-${L}`);e.removeAttribute(`data-${P}`);return e}handleEvent(e){switch(e.type){case"click":this._evtClick(e);break;default:return}}populateVNodeDataset(e,t){let n;if(t!==void 0){n={[P]:JSON.stringify(t),[L]:e}}else{n={[L]:e}}return n}_evtClick(e){let t=e.target;while(t&&t.parentElement){if(t.hasAttribute(`data-${L}`)){e.preventDefault();const n=t.getAttribute(`data-${L}`);if(!n){return}const i=t.getAttribute(`data-${P}`);let s=c.JSONExt.emptyObject;if(i){s=JSON.parse(i)}void this._commands.execute(n,s);return}t=t.parentElement}}}const R="jp-SearchIconGroup";class N extends o.Panel{constructor(e){super();this.addClass("jp-ModalCommandPalette");this.id="modal-command-palette";this.palette=e.commandPalette;this._commandPalette.commands.commandExecuted.connect((()=>{if(this.isAttached&&this.isVisible){this.hideAndReset()}}));this.node.tabIndex=0}get palette(){return this._commandPalette}set palette(e){this._commandPalette=e;if(!this.searchIconGroup){this._commandPalette.inputNode.insertAdjacentElement("afterend",this.createSearchIconGroup())}this.addWidget(e);this.hideAndReset()}attach(){o.Widget.attach(this,document.body)}detach(){o.Widget.detach(this)}hideAndReset(){this.hide();this._commandPalette.inputNode.value="";this._commandPalette.refresh()}handleEvent(e){switch(e.type){case"keydown":this._evtKeydown(e);break;case"blur":{if(this.node.contains(e.target)&&!this.node.contains(e.relatedTarget)){e.stopPropagation();this.hideAndReset()}break}case"contextmenu":e.preventDefault();e.stopPropagation();break;default:break}}get searchIconGroup(){return this._commandPalette.node.getElementsByClassName(R)[0]}createSearchIconGroup(){const e=document.createElement("div");e.classList.add(R);i.searchIcon.render(e);return e}onAfterAttach(e){this.node.addEventListener("keydown",this,true);this.node.addEventListener("contextmenu",this,true)}onAfterDetach(e){this.node.removeEventListener("keydown",this,true);this.node.removeEventListener("contextmenu",this,true)}onBeforeHide(e){document.removeEventListener("blur",this,true)}onAfterShow(e){document.addEventListener("blur",this,true)}onActivateRequest(e){if(this.isAttached){this.show();this._commandPalette.activate()}}_evtKeydown(e){switch(e.keyCode){case 27:e.stopPropagation();e.preventDefault();this.hideAndReset();break;default:break}}}var O=n(36044);var B;(function(e){function t(e,t,n){return d.ArrayExt.findFirstIndex(e,(e=>O.ElementExt.hitTest(e,t,n)))}e.hitTestNodes=t;function n(e,t){return e.querySelector(`.${t}`)}e.findElement=n;function i(e,t){return e.getElementsByClassName(t)}e.findElements=i;function s(){return`id-${c.UUID.uuid4()}`}e.createDomID=s})(B||(B={}));const F="jp-Input-Dialog";const z="jp-Input-Boolean-Dialog";var H;(function(e){function t(e){return g({...e,body:new V(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})],focusNodeSelector:"input"})}e.getBoolean=t;function n(e){return g({...e,body:new U(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})],focusNodeSelector:"input"})}e.getNumber=n;function i(e){return g({...e,body:new K(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})],focusNodeSelector:e.editable?"input":"select"})}e.getItem=i;function s(e){return g({...e,body:new J(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})]})}e.getMultipleItems=s;function o(e){return g({...e,body:new $(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})],focusNodeSelector:"input"})}e.getText=o;function r(e){return g({...e,body:new q(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})],focusNodeSelector:"input"})}e.getPassword=r})(H||(H={}));class W extends o.Widget{constructor(e){super();this.addClass(F);this._input=document.createElement("input");this._input.classList.add("jp-mod-styled");this._input.id="jp-dialog-input-id";if(e!==undefined){const t=document.createElement("label");t.textContent=e;t.htmlFor=this._input.id;this.node.appendChild(t)}this.node.appendChild(this._input)}}class V extends W{constructor(e){super(e.label);this.addClass(z);this._input.type="checkbox";this._input.checked=e.value?true:false}getValue(){return this._input.checked}}class U extends W{constructor(e){super(e.label);this._input.type="number";this._input.value=e.value?e.value.toString():"0"}getValue(){if(this._input.value){return Number(this._input.value)}else{return Number.NaN}}}class $ extends W{constructor(e){var t;super(e.label);this._input.type="text";this._input.value=e.text?e.text:"";if(e.placeholder){this._input.placeholder=e.placeholder}this._initialSelectionRange=Math.min(this._input.value.length,Math.max(0,(t=e.selectionRange)!==null&&t!==void 0?t:this._input.value.length))}onAfterAttach(e){super.onAfterAttach(e);if(this._initialSelectionRange>0&&this._input.value){this._input.setSelectionRange(0,this._initialSelectionRange)}}getValue(){return this._input.value}}class q extends W{constructor(e){super(e.label);this._input.type="password";this._input.value=e.text?e.text:"";if(e.placeholder){this._input.placeholder=e.placeholder}}onAfterAttach(e){super.onAfterAttach(e);if(this._input.value){this._input.select()}}getValue(){return this._input.value}}class K extends W{constructor(e){super(e.label);this._editable=e.editable||false;let t=e.current||0;let n;if(typeof t==="number"){n=Math.max(0,Math.min(t,e.items.length-1));t=""}this._list=document.createElement("select");e.items.forEach(((e,i)=>{const s=document.createElement("option");if(i===n){s.selected=true;t=e}s.value=e;s.textContent=e;this._list.appendChild(s)}));if(e.editable){const n=document.createElement("datalist");n.id="input-dialog-items";n.appendChild(this._list);this._input.type="list";this._input.value=t;this._input.setAttribute("list",n.id);if(e.placeholder){this._input.placeholder=e.placeholder}this.node.appendChild(n)}else{this._input.remove();this.node.appendChild(this._list)}}getValue(){if(this._editable){return this._input.value}else{return this._list.value}}}class J extends W{constructor(e){super(e.label);let t=e.defaults||[];this._list=document.createElement("select");this._list.setAttribute("multiple","");e.items.forEach((e=>{const t=document.createElement("option");t.value=e;t.textContent=e;this._list.appendChild(t)}));this._input.remove();this.node.appendChild(this._list);const n=this._list.options;for(let i=0;i<n.length;i++){const e=n[i];if(t.includes(e.value)){e.selected=true}else{e.selected=false}}}getValue(){let e=[];for(let t of this._list.options){if(t.selected&&!t.classList.contains("hidden")){e.push(t.value||t.text)}}return e}}var Z=n(74513);var G;(function(e){e.symbol=Symbol("printable");function t(t){if(typeof t!=="object"||!t){return false}return e.symbol in t}e.isPrintable=t;function n(n){if(t(n)){return n[e.symbol]()}return null}e.getPrintFunction=n;function i(e){return o(e.node)}e.printWidget=i;async function s(e){const t=Z.ServerConnection.makeSettings();const n=await(await Z.ServerConnection.makeRequest(e,{},t)).text();return o(n)}e.printURL=s;async function o(e){const t=typeof e==="string";const n=r();const i=window.document.body;i.appendChild(n);if(t){n.srcdoc=e;await l(n)}else{n.src="about:blank";await l(n);a(n,e)}const s=d();c(n.contentWindow);await s;i.removeChild(n)}function r(){const e=window.document.createElement("iframe");e.setAttribute("sandbox","allow-modals allow-same-origin");const t="visibility:hidden;width:0;height:0;position:absolute;z-index:-9999;bottom:0;";e.setAttribute("style",t);e.setAttribute("width","0");e.setAttribute("height","0");return e}function a(e,t){e.contentDocument.body.appendChild(t.cloneNode(true));e.contentDocument.close()}function l(e){return new Promise((t=>{e.onload=()=>t()}))}function d(){return new Promise((e=>{const t=()=>{document.removeEventListener("mousemove",t,true);document.removeEventListener("mousedown",t,true);document.removeEventListener("keydown",t,true);e()};document.addEventListener("mousemove",t,true);document.addEventListener("mousedown",t,true);document.addEventListener("keydown",t,true)}))}function c(e){const t=e.document.execCommand("print",false);if(!t){e.print()}}})(G||(G={}));const Y=true;class X extends o.Widget{constructor(e){super(e);this._changeGuard=false;this._spinner=new i.Spinner;this._isRevealed=false;this._evtMouseDown=()=>{if(!this.node.contains(document.activeElement)){this._focusContent()}};this.addClass("jp-MainAreaWidget");this.addClass("jp-MainAreaWidget-ContainStrict");this.id=B.createDomID();const t=(e.translator||s.nullTranslator).load("jupyterlab");const n=this._content=e.content;n.node.setAttribute("role","region");n.node.setAttribute("aria-label",t.__("notebook content"));const r=this._toolbar=e.toolbar||new i.ReactiveToolbar;r.node.setAttribute("role","navigation");r.node.setAttribute("aria-label",t.__("notebook actions"));const a=this._contentHeader=e.contentHeader||new o.BoxPanel({direction:"top-to-bottom",spacing:0});const l=this.layout=new o.BoxLayout({spacing:0});l.direction="top-to-bottom";o.BoxLayout.setStretch(r,0);o.BoxLayout.setStretch(a,0);o.BoxLayout.setStretch(n,1);l.addWidget(r);l.addWidget(a);l.addWidget(n);if(!n.id){n.id=B.createDomID()}n.node.tabIndex=-1;this._updateTitle();n.title.changed.connect(this._updateTitle,this);this.title.closable=true;this.title.changed.connect(this._updateContentTitle,this);if(e.reveal){this.node.appendChild(this._spinner.node);this._revealed=e.reveal.then((()=>{if(n.isDisposed){this.dispose();return}n.disposed.connect((()=>this.dispose()));const e=document.activeElement===this._spinner.node;this._disposeSpinner();this._isRevealed=true;if(e){this._focusContent()}})).catch((e=>{const t=new o.Widget;t.addClass("jp-MainAreaWidget-error");const i=document.createElement("pre");i.textContent=String(e);t.node.appendChild(i);o.BoxLayout.setStretch(t,1);this._disposeSpinner();n.dispose();this._content=null;r.dispose();this._toolbar=null;l.addWidget(t);this._isRevealed=true;throw t}))}else{this._spinner.dispose();this.removeClass("jp-MainAreaWidget-ContainStrict");n.disposed.connect((()=>this.dispose()));this._isRevealed=true;this._revealed=Promise.resolve(undefined)}}[G.symbol](){if(!this._content){return null}return G.getPrintFunction(this._content)}get content(){return this._content}get toolbar(){return this._toolbar}get contentHeader(){return this._contentHeader}get isRevealed(){return this._isRevealed}get revealed(){return this._revealed}onActivateRequest(e){if(this._isRevealed){this._focusContent()}else{this._spinner.node.focus()}}onAfterAttach(e){super.onAfterAttach(e);this.node.addEventListener("mousedown",this._evtMouseDown,Y)}onBeforeDetach(e){this.node.removeEventListener("mousedown",this._evtMouseDown,Y);super.onBeforeDetach(e)}onCloseRequest(e){this.dispose()}onUpdateRequest(e){if(this._content){u.MessageLoop.sendMessage(this._content,e)}}_disposeSpinner(){this.node.removeChild(this._spinner.node);this._spinner.dispose();this.removeClass("jp-MainAreaWidget-ContainStrict")}_updateTitle(){if(this._changeGuard||!this.content){return}this._changeGuard=true;const e=this.content;this.title.label=e.title.label;this.title.mnemonic=e.title.mnemonic;this.title.icon=e.title.icon;this.title.iconClass=e.title.iconClass;this.title.iconLabel=e.title.iconLabel;this.title.caption=e.title.caption;this.title.className=e.title.className;this.title.dataset=e.title.dataset;this._changeGuard=false}_updateContentTitle(){if(this._changeGuard||!this.content){return}this._changeGuard=true;const e=this.content;e.title.label=this.title.label;e.title.mnemonic=this.title.mnemonic;e.title.icon=this.title.icon;e.title.iconClass=this.title.iconClass;e.title.iconLabel=this.title.iconLabel;e.title.caption=this.title.caption;e.title.className=this.title.className;e.title.dataset=this.title.dataset;this._changeGuard=false}_focusContent(){if(!this.content){return}if(!this.content.node.contains(document.activeElement)){this.content.node.focus()}this.content.activate()}}var Q;(function(e){function t(e,t){return e.filter((e=>!e.disabled)).sort(((e,t)=>{var n,i;return((n=e.rank)!==null&&n!==void 0?n:Infinity)-((i=t.rank)!==null&&i!==void 0?i:Infinity)})).map((e=>n(e,t)))}e.createMenus=t;function n(e,t){var n,s;const r=t(e);r.id=e.id;if(!r.title.label){r.title.label=(n=e.label)!==null&&n!==void 0?n:l.Text.titleCase(r.id.trim())}if(e.icon){r.title.icon=i.LabIcon.resolve({icon:e.icon})}if(e.mnemonic!==undefined){r.title.mnemonic=e.mnemonic}(s=e.items)===null||s===void 0?void 0:s.filter((e=>!e.disabled)).sort(((e,t)=>{var n,i;return((n=e.rank)!==null&&n!==void 0?n:Infinity)-((i=t.rank)!==null&&i!==void 0?i:Infinity)})).map((e=>{o(e,r,t)}));return r}function s(e,t,i){const{submenu:s,...o}=e;t.addItem({...o,submenu:s?n(s,i):null})}e.addContextItem=s;function o(e,t,i){const{submenu:s,...o}=e;t.addItem({...o,submenu:s?n(s,i):null})}function r(e,t,i){const s=[];t.forEach((t=>{const o=e.find((e=>e.id===t.id));if(o){a(t,o,i)}else{if(!t.disabled){s.push(n(t,i))}}}));e.push(...s);return s}e.updateMenus=r;function a(e,t,n){var i;if(e.disabled){t.dispose()}else{(i=e.items)===null||i===void 0?void 0:i.forEach((e=>{var i,s;const r=t===null||t===void 0?void 0:t.items.find(((t,n)=>{var i,s,o;return t.type===e.type&&t.command===((i=e.command)!==null&&i!==void 0?i:"")&&((s=t.submenu)===null||s===void 0?void 0:s.id)===((o=e.submenu)===null||o===void 0?void 0:o.id)}));if(r&&e.type!=="separator"){if(e.disabled){t.removeItem(r)}else{switch((i=e.type)!==null&&i!==void 0?i:"command"){case"command":if(e.command){if(!c.JSONExt.deepEqual(r.args,(s=e.args)!==null&&s!==void 0?s:{})){o(e,t,n)}}break;case"submenu":if(e.submenu){a(e.submenu,r.submenu,n)}}}}else{o(e,t,n)}}))}}})(Q||(Q={}));class ee{constructor(){this._isDisposed=false;this._queue=[];this._changed=new h.Signal(this)}get changed(){return this._changed}get count(){return this._queue.length}get isDisposed(){return this._isDisposed}get notifications(){return this._queue.slice()}dismiss(e){if(typeof e==="undefined"){const e=this._queue.slice();this._queue.length=0;for(const t of e){this._changed.emit({type:"removed",notification:t})}}else{const t=this._queue.findIndex((t=>t.id===e));if(t>-1){const e=this._queue.splice(t,1)[0];this._changed.emit({type:"removed",notification:e})}}}dispose(){if(this._isDisposed){return}this._isDisposed=true;h.Signal.clearData(this)}has(e){return this._queue.findIndex((t=>t.id===e))>-1}notify(e,t,n){const i=Date.now();const{progress:s,...o}=n;const r=Object.freeze({id:c.UUID.uuid4(),createdAt:i,modifiedAt:i,message:e,type:t,options:{autoClose:0,progress:typeof s==="number"?Math.min(Math.max(0,s),1):s,...o}});this._queue.unshift(r);this._changed.emit({type:"added",notification:r});return r.id}update(e){const{id:t,message:n,actions:i,autoClose:s,data:o,progress:r,type:a}=e;const l=typeof r==="number"?Math.min(Math.max(0,r),1):r;const d=this._queue.findIndex((e=>e.id===t));if(d>-1){const e=this._queue[d];const t=Object.freeze({...e,message:n!==null&&n!==void 0?n:e.message,type:a!==null&&a!==void 0?a:e.type,options:{actions:i!==null&&i!==void 0?i:e.options.actions,autoClose:s!==null&&s!==void 0?s:e.options.autoClose,data:o!==null&&o!==void 0?o:e.options.data,progress:l!==null&&l!==void 0?l:e.options.progress},modifiedAt:Date.now()});this._queue.splice(d,1);this._queue.unshift(t);this._changed.emit({type:"updated",notification:t});return true}return false}}var te;(function(e){e.manager=new ee;function t(t){e.manager.dismiss(t)}e.dismiss=t;function n(t,n="default",i={}){return e.manager.notify(t,n,i)}e.emit=n;function i(t,n={}){return e.manager.notify(t,"error",n)}e.error=i;function s(t,n={}){return e.manager.notify(t,"info",n)}e.info=s;function o(t,n){var i;const{pending:s,error:o,success:r}=n;const a=e.manager.notify(s.message,"in-progress",(i=s.options)!==null&&i!==void 0?i:{});t.then((t=>{var n,i,s;e.manager.update({id:a,message:r.message(t,(n=r.options)===null||n===void 0?void 0:n.data),type:"success",...r.options,data:(s=(i=r.options)===null||i===void 0?void 0:i.data)!==null&&s!==void 0?s:t})})).catch((t=>{var n,i,s;e.manager.update({id:a,message:o.message(t,(n=o.options)===null||n===void 0?void 0:n.data),type:"error",...o.options,data:(s=(i=o.options)===null||i===void 0?void 0:i.data)!==null&&s!==void 0?s:t})}));return a}e.promise=o;function r(t,n={}){return e.manager.notify(t,"success",n)}e.success=r;function a(t){return e.manager.update(t)}e.update=a;function l(t,n={}){return e.manager.notify(t,"warning",n)}e.warning=l})(te||(te={}));const ne=4;function ie(e){return a().createElement(C.GroupItem,{spacing:ne,onClick:e.handleClick},a().createElement(C.GroupItem,{spacing:ne},a().createElement(C.TextItem,{source:e.terminals}),a().createElement(i.terminalIcon.react,{left:"1px",top:"3px",stylesheet:"statusBar"})),a().createElement(C.GroupItem,{spacing:ne},a().createElement(C.TextItem,{source:e.sessions}),a().createElement(i.kernelIcon.react,{top:"2px",stylesheet:"statusBar"})))}class se extends i.VDomRenderer{constructor(e){super(new se.Model);this._serviceManager=e.serviceManager;this._handleClick=e.onClick;this.translator=e.translator||s.nullTranslator;this._trans=this.translator.load("jupyterlab");this._serviceManager.sessions.runningChanged.connect(this._onSessionsRunningChanged,this);this._serviceManager.terminals.runningChanged.connect(this._onTerminalsRunningChanged,this);this.addClass("jp-mod-highlighted")}render(){if(!this.model){return null}this.title.caption=this._trans.__("%1 Terminals, %2 Kernel sessions",this.model.terminals,this.model.sessions);return a().createElement(ie,{sessions:this.model.sessions,terminals:this.model.terminals,handleClick:this._handleClick})}dispose(){super.dispose();this._serviceManager.sessions.runningChanged.disconnect(this._onSessionsRunningChanged,this);this._serviceManager.terminals.runningChanged.disconnect(this._onTerminalsRunningChanged,this)}_onSessionsRunningChanged(e,t){this.model.sessions=t.length}_onTerminalsRunningChanged(e,t){this.model.terminals=t.length}}(function(e){class t extends i.VDomModel{constructor(){super(...arguments);this._terminals=0;this._sessions=0}get sessions(){return this._sessions}set sessions(e){const t=this._sessions;this._sessions=e;if(t!==this._sessions){this.stateChanged.emit(void 0)}}get terminals(){return this._terminals}set terminals(e){const t=this._terminals;this._terminals=e;if(t!==this._terminals){this.stateChanged.emit(void 0)}}}e.Model=t})(se||(se={}));var oe=n(91036);var re=n.n(oe);class ae{static reg(e){return new RegExp("^"+e+"$","i")}}ae.N={integer:`[+-]?[0-9]+`,integer_pos:`[+]?[0-9]+`,integer_zero_ff:`([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])`,number:`[+-]?([0-9]*[.])?[0-9]+(e-?[0-9]*)?`,number_pos:`[+]?([0-9]*[.])?[0-9]+(e-?[0-9]*)?`,number_zero_hundred:`[+]?(([0-9]|[1-9][0-9])([.][0-9]+)?|100)`,number_zero_one:`[+]?(1([.][0]+)?|0?([.][0-9]+)?)`};ae.B={angle:`(${ae.N.number}(deg|rad|grad|turn)|0)`,frequency:`${ae.N.number}(Hz|kHz)`,ident:String.raw`-?([_a-z]|[\xA0-\xFF]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\xA0-\xFF]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*`,len_or_perc:`(0|${ae.N.number}(px|em|rem|ex|in|cm|mm|pt|pc|%))`,length:`(${ae.N.number}(px|em|rem|ex|in|cm|mm|pt|pc)|0)`,length_pos:`(${ae.N.number_pos}(px|em|rem|ex|in|cm|mm|pt|pc)|0)`,percentage:`${ae.N.number}%`,percentage_pos:`${ae.N.number_pos}%`,percentage_zero_hundred:`${ae.N.number_zero_hundred}%`,string:String.raw`(\"([^\n\r\f\\"]|\\\n|\r\n|\r|\f|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*\")|(\'([^\n\r\f\\']|\\\n|\r\n|\r|\f|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*\')`,time:`${ae.N.number}(s|ms)`,url:`url\\(.*?\\)`,z_index:`[+-]?[0-9]{1,7}`};ae.A={absolute_size:`xx-small|x-small|small|medium|large|x-large|xx-large`,attachment:`scroll|fixed|local`,bg_origin:`border-box|padding-box|content-box`,border_style:`none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset`,box:`border-box|padding-box|content-box`,display_inside:`auto|block|table|flex|grid`,display_outside:`block-level|inline-level|none|table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption`,ending_shape:`circle|ellipse`,generic_family:`serif|sans-serif|cursive|fantasy|monospace`,generic_voice:`male|female|child`,relative_size:`smaller|larger`,repeat_style:`repeat-x|repeat-y|((?:repeat|space|round|no-repeat)(?:\\s*(?:repeat|space|round|no-repeat))?)`,side_or_corner:`(left|right)?\\s*(top|bottom)?`,single_animation_direction:`normal|reverse|alternate|alternate-reverse`,single_animation_fill_mode:`none|forwards|backwards|both`,single_animation_play_state:`running|paused`};ae._COLOR={hex:`\\#(0x)?[0-9a-f]+`,name:`aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|transparent|violet|wheat|white|whitesmoke|yellow|yellowgreen`,rgb:String.raw`rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)`,rgba:String.raw`rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(${ae.N.integer_zero_ff}|${ae.N.number_zero_one}|${ae.B.percentage_zero_hundred})\s*\)`};ae._C={alpha:`${ae.N.integer_zero_ff}|${ae.N.number_zero_one}|${ae.B.percentage_zero_hundred}`,alphavalue:ae.N.number_zero_one,bg_position:`((${ae.B.len_or_perc}|left|center|right|top|bottom)\\s*){1,4}`,bg_size:`(${ae.B.length_pos}|${ae.B.percentage}|auto){1,2}|cover|contain`,border_width:`thin|medium|thick|${ae.B.length}`,bottom:`${ae.B.length}|auto`,color:`${ae._COLOR.hex}|${ae._COLOR.rgb}|${ae._COLOR.rgba}|${ae._COLOR.name}`,color_stop_length:`(${ae.B.len_or_perc}\\s*){1,2}`,linear_color_hint:`${ae.B.len_or_perc}`,family_name:`${ae.B.string}|(${ae.B.ident}\\s*)+`,image_decl:ae.B.url,left:`${ae.B.length}|auto`,loose_quotable_words:`(${ae.B.ident})+`,margin_width:`${ae.B.len_or_perc}|auto`,padding_width:`${ae.B.length_pos}|${ae.B.percentage_pos}`,page_url:ae.B.url,position:`((${ae.B.len_or_perc}|left|center|right|top|bottom)\\s*){1,4}`,right:`${ae.B.length}|auto`,shadow:"",size:`closest-side|farthest-side|closest-corner|farthest-corner|${ae.B.length}|(${ae.B.len_or_perc})\\s+(${ae.B.len_or_perc})`,top:`${ae.B.length}|auto`};ae._C1={image_list:`image\\(\\s*(${ae.B.url})*\\s*(${ae.B.url}|${ae._C.color})\\s*\\)`,linear_color_stop:`(${ae._C.color})(\\s*${ae._C.color_stop_length})?`,shadow:`((${ae._C.color})\\s+((${ae.B.length})\\s*){2,4}(s+inset)?)|((inset\\s+)?((${ae.B.length})\\s*){2,4}\\s*(${ae._C.color})?)`};ae._C2={color_stop_list:`((${ae._C1.linear_color_stop})(\\s*(${ae._C.linear_color_hint}))?\\s*,\\s*)+(${ae._C1.linear_color_stop})`,shape:`rect\\(\\s*(${ae._C.top})\\s*,\\s*(${ae._C.right})\\s*,\\s*(${ae._C.bottom})\\s*,\\s*(${ae._C.left})\\s*\\)`};ae._C3={linear_gradient:`linear-gradient\\((((${ae.B.angle})|to\\s+(${ae.A.side_or_corner}))\\s*,\\s*)?\\s*(${ae._C2.color_stop_list})\\s*\\)`,radial_gradient:`radial-gradient\\(((((${ae.A.ending_shape})|(${ae._C.size}))\\s*)*\\s*(at\\s+${ae._C.position})?\\s*,\\s*)?\\s*(${ae._C2.color_stop_list})\\s*\\)`};ae._C4={image:`${ae.B.url}|${ae._C3.linear_gradient}|${ae._C3.radial_gradient}|${ae._C1.image_list}`,bg_image:`(${ae.B.url}|${ae._C3.linear_gradient}|${ae._C3.radial_gradient}|${ae._C1.image_list})|none`};ae.C={...ae._C,...ae._C1,...ae._C2,...ae._C3,...ae._C4};ae.AP={border_collapse:`collapse|separate`,box:`normal|none|contents`,box_sizing:`content-box|padding-box|border-box`,caption_side:`top|bottom`,clear:`none|left|right|both`,direction:`ltr|rtl`,empty_cells:`show|hide`,float:`left|right|none`,font_stretch:`normal|wider|narrower|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded`,font_style:`normal|italic|oblique`,font_variant:`normal|small-caps`,font_weight:`normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900`,list_style_position:`inside|outside`,list_style_type:`disc|circle|square|decimal|decimal-leading-zero|lower-roman|upper-roman|lower-greek|lower-latin|upper-latin|armenian|georgian|lower-alpha|upper-alpha|none`,overflow:`visible|hidden|scroll|auto`,overflow_wrap:`normal|break-word`,overflow_x:`visible|hidden|scroll|auto|no-display|no-content`,page_break_after:`auto|always|avoid|left|right`,page_break_before:`auto|always|avoid|left|right`,page_break_inside:`avoid|auto`,position:`static|relative|absolute`,resize:`none|both|horizontal|vertical`,speak:`normal|none|spell-out`,speak_header:`once|always`,speak_numeral:`digits|continuous`,speak_punctuation:`code|none`,table_layout:`auto|fixed`,text_align:`left|right|center|justify`,text_decoration:`none|((underline|overline|line-through|blink)\\s*)+`,text_transform:`capitalize|uppercase|lowercase|none`,text_wrap:`normal|unrestricted|none|suppress`,unicode_bidi:`normal|embed|bidi-override`,visibility:`visible|hidden|collapse`,white_space:`normal|pre|nowrap|pre-wrap|pre-line`,word_break:`normal|keep-all|break-all`};ae._CP={background_attachment:`${ae.A.attachment}(,\\s*${ae.A.attachment})*`,background_color:ae.C.color,background_origin:`${ae.A.box}(,\\s*${ae.A.box})*`,background_repeat:`${ae.A.repeat_style}(,\\s*${ae.A.repeat_style})*`,border:`((${ae.C.border_width}|${ae.A.border_style}|${ae.C.color})\\s*){1,3}`,border_radius:`((${ae.B.len_or_perc})\\s*){1,4}(\\/\\s*((${ae.B.len_or_perc})\\s*){1,4})?`,border_spacing:`${ae.B.length}\\s*(${ae.B.length})?`,border_top_color:ae.C.color,border_top_style:ae.A.border_style,border_width:`((${ae.C.border_width})\\s*){1,4}`,color:ae.C.color,cursor:`(${ae.B.url}(\\s*,\\s*)?)*(auto|crosshair|default|pointer|move|e-resize|ne-resize|nw-resize|n-resize|se-resize|sw-resize|s-resize|w-resize|text|wait|help|progress|all-scroll|col-resize|hand|no-drop|not-allowed|row-resize|vertical-text)`,display:`inline|block|list-item|run-in|inline-list-item|inline-block|table|inline-table|table-cell|table-caption|flex|inline-flex|grid|inline-grid|${ae.A.display_inside}|${ae.A.display_outside}|inherit|inline-box|inline-stack`,display_outside:ae.A.display_outside,elevation:`${ae.B.angle}|below|level|above|higher|lower`,font_family:`(${ae.C.family_name}|${ae.A.generic_family})(,\\s*(${ae.C.family_name}|${ae.A.generic_family}))*`,height:`${ae.B.length}|${ae.B.percentage}|auto`,letter_spacing:`normal|${ae.B.length}`,list_style_image:`${ae.C.image}|none`,margin_right:ae.C.margin_width,max_height:`${ae.B.length_pos}|${ae.B.percentage_pos}|none|auto`,min_height:`${ae.B.length_pos}|${ae.B.percentage_pos}|auto`,opacity:ae.C.alphavalue,outline_color:`${ae.C.color}|invert`,outline_width:ae.C.border_width,padding:`((${ae.C.padding_width})\\s*){1,4}`,padding_top:ae.C.padding_width,pitch_range:ae.N.number,right:`${ae.B.length}|${ae.B.percentage}|auto`,stress:ae.N.number,text_indent:`${ae.B.length}|${ae.B.percentage}`,text_shadow:`none|${ae.C.shadow}(,\\s*(${ae.C.shadow}))*`,volume:`${ae.N.number_pos}|${ae.B.percentage_pos}|silent|x-soft|soft|medium|loud|x-loud`,word_wrap:ae.AP.overflow_wrap,zoom:`normal|${ae.N.number_pos}|${ae.B.percentage_pos}`,backface_visibility:ae.AP.visibility,background_clip:`${ae.A.box}(,\\s*(${ae.A.box}))*`,background_position:`${ae.C.bg_position}(,\\s*(${ae.C.bg_position}))*`,border_bottom_color:ae.C.color,border_bottom_style:ae.A.border_style,border_color:`((${ae.C.color})\\s*){1,4}`,border_left_color:ae.C.color,border_right_color:ae.C.color,border_style:`((${ae.A.border_style})\\s*){1,4}`,border_top_left_radius:`(${ae.B.length}|${ae.B.percentage})(\\s*(${ae.B.length}|${ae.B.percentage}))?`,border_top_width:ae.C.border_width,box_shadow:`none|${ae.C.shadow}(,\\s*(${ae.C.shadow}))*`,clip:`${ae.C.shape}|auto`,display_inside:ae.A.display_inside,font_size:`${ae.A.absolute_size}|${ae.A.relative_size}|${ae.B.length_pos}|${ae.B.percentage_pos}`,line_height:`normal|${ae.N.number_pos}|${ae.B.length_pos}|${ae.B.percentage_pos}`,margin_left:ae.C.margin_width,max_width:`${ae.B.length_pos}|${ae.B.percentage_pos}|none|auto`,outline_style:ae.A.border_style,padding_bottom:ae.C.padding_width,padding_right:ae.C.padding_width,perspective:`none|${ae.B.length}`,richness:ae.N.number,text_overflow:`((clip|ellipsis|${ae.B.string})\\s*){1,2}`,top:`${ae.B.length}|${ae.B.percentage}|auto`,width:`${ae.B.length_pos}|${ae.B.percentage_pos}|auto`,z_index:`auto|${ae.B.z_index}`,background:`(((${ae.C.bg_position}\\s*(\\/\\s*${ae.C.bg_size})?)|(${ae.A.repeat_style})|(${ae.A.attachment})|(${ae.A.bg_origin})|(${ae.C.bg_image})|(${ae.C.color}))\\s*)+`,background_size:`${ae.C.bg_size}(,\\s*${ae.C.bg_size})*`,border_bottom_left_radius:`(${ae.B.length}|${ae.B.percentage})(\\s*(${ae.B.length}|${ae.B.percentage}))?`,border_bottom_width:ae.C.border_width,border_left_style:ae.A.border_style,border_right_style:ae.A.border_style,border_top:`((${ae.C.border_width}|${ae.A.border_style}|${ae.C.color})\\s*){1,3}`,bottom:`${ae.B.len_or_perc}|auto`,list_style:`((${ae.AP.list_style_type}|${ae.AP.list_style_position}|${ae.C.image}|none})\\s*){1,3}`,margin_top:ae.C.margin_width,outline:`((${ae.C.color}|invert|${ae.A.border_style}|${ae.C.border_width})\\s*){1,3}`,overflow_y:ae.AP.overflow_x,pitch:`${ae.B.frequency}|x-low|low|medium|high|x-high`,vertical_align:`baseline|sub|super|top|text-top|middle|bottom|text-bottom|${ae.B.len_or_perc}`,word_spacing:`normal|${ae.B.length}`,background_image:`${ae.C.bg_image}(,\\s*${ae.C.bg_image})*`,border_bottom_right_radius:`(${ae.B.length}|${ae.B.percentage})(\\s*(${ae.B.length}|${ae.B.percentage}))?`,border_left_width:ae.C.border_width,border_right_width:ae.C.border_width,left:`${ae.B.len_or_perc}|auto`,margin_bottom:ae.C.margin_width,pause_after:`${ae.B.time}|${ae.B.percentage}`,speech_rate:`${ae.N.number}|x-slow|slow|medium|fast|x-fast|faster|slower`,transition_duration:`${ae.B.time}(,\\s*${ae.B.time})*`,border_bottom:`((${ae.C.border_width}|${ae.A.border_style}|${ae.C.color})\\s*){1,3}`,border_right:`((${ae.C.border_width}|${ae.A.border_style}|${ae.C.color})\\s*){1,3}`,margin:`((${ae.C.margin_width})\\s*){1,4}`,padding_left:ae.C.padding_width,border_left:`((${ae.C.border_width}|${ae.A.border_style}|${ae.C.color})\\s*){1,3}`,quotes:`(${ae.B.string}\\s*${ae.B.string})+|none`,border_top_right_radius:`(${ae.B.length}|${ae.B.percentage})(\\s*(${ae.B.length}|${ae.B.percentage}))?`,min_width:`${ae.B.length_pos}|${ae.B.percentage_pos}|auto`};ae._CP1={font:`(((((${ae.AP.font_style}|${ae.AP.font_variant}|${ae.AP.font_weight})\\s*){1,3})?\\s*(${ae._CP.font_size})\\s*(\\/\\s*(${ae._CP.line_height}))?\\s+(${ae._CP.font_family}))|caption|icon|menu|message-box|small-caption|status-bar)`};ae.CP={...ae._CP,...ae._CP1};ae.BORDER_COLLAPSE=ae.reg(ae.AP.border_collapse);ae.BOX=ae.reg(ae.AP.box);ae.BOX_SIZING=ae.reg(ae.AP.box_sizing);ae.CAPTION_SIDE=ae.reg(ae.AP.caption_side);ae.CLEAR=ae.reg(ae.AP.clear);ae.DIRECTION=ae.reg(ae.AP.direction);ae.EMPTY_CELLS=ae.reg(ae.AP.empty_cells);ae.FLOAT=ae.reg(ae.AP.float);ae.FONT_STRETCH=ae.reg(ae.AP.font_stretch);ae.FONT_STYLE=ae.reg(ae.AP.font_style);ae.FONT_VARIANT=ae.reg(ae.AP.font_variant);ae.FONT_WEIGHT=ae.reg(ae.AP.font_weight);ae.LIST_STYLE_POSITION=ae.reg(ae.AP.list_style_position);ae.LIST_STYLE_TYPE=ae.reg(ae.AP.list_style_type);ae.OVERFLOW=ae.reg(ae.AP.overflow);ae.OVERFLOW_WRAP=ae.reg(ae.AP.overflow_wrap);ae.OVERFLOW_X=ae.reg(ae.AP.overflow_x);ae.PAGE_BREAK_AFTER=ae.reg(ae.AP.page_break_after);ae.PAGE_BREAK_BEFORE=ae.reg(ae.AP.page_break_before);ae.PAGE_BREAK_INSIDE=ae.reg(ae.AP.page_break_inside);ae.POSITION=ae.reg(ae.AP.position);ae.RESIZE=ae.reg(ae.AP.resize);ae.SPEAK=ae.reg(ae.AP.speak);ae.SPEAK_HEADER=ae.reg(ae.AP.speak_header);ae.SPEAK_NUMERAL=ae.reg(ae.AP.speak_numeral);ae.SPEAK_PUNCTUATION=ae.reg(ae.AP.speak_punctuation);ae.TABLE_LAYOUT=ae.reg(ae.AP.table_layout);ae.TEXT_ALIGN=ae.reg(ae.AP.text_align);ae.TEXT_DECORATION=ae.reg(ae.AP.text_decoration);ae.TEXT_TRANSFORM=ae.reg(ae.AP.text_transform);ae.TEXT_WRAP=ae.reg(ae.AP.text_wrap);ae.UNICODE_BIDI=ae.reg(ae.AP.unicode_bidi);ae.VISIBILITY=ae.reg(ae.AP.visibility);ae.WHITE_SPACE=ae.reg(ae.AP.white_space);ae.WORD_BREAK=ae.reg(ae.AP.word_break);ae.BACKGROUND_ATTACHMENT=ae.reg(ae.CP.background_attachment);ae.BACKGROUND_COLOR=ae.reg(ae.CP.background_color);ae.BACKGROUND_ORIGIN=ae.reg(ae.CP.background_origin);ae.BACKGROUND_REPEAT=ae.reg(ae.CP.background_repeat);ae.BORDER=ae.reg(ae.CP.border);ae.BORDER_RADIUS=ae.reg(ae.CP.border_radius);ae.BORDER_SPACING=ae.reg(ae.CP.border_spacing);ae.BORDER_TOP_COLOR=ae.reg(ae.CP.border_top_color);ae.BORDER_TOP_STYLE=ae.reg(ae.CP.border_top_style);ae.BORDER_WIDTH=ae.reg(ae.CP.border_width);ae.COLOR=ae.reg(ae.CP.color);ae.CURSOR=ae.reg(ae.CP.cursor);ae.DISPLAY=ae.reg(ae.CP.display);ae.DISPLAY_OUTSIDE=ae.reg(ae.CP.display_outside);ae.ELEVATION=ae.reg(ae.CP.elevation);ae.FONT_FAMILY=ae.reg(ae.CP.font_family);ae.HEIGHT=ae.reg(ae.CP.height);ae.LETTER_SPACING=ae.reg(ae.CP.letter_spacing);ae.LIST_STYLE_IMAGE=ae.reg(ae.CP.list_style_image);ae.MARGIN_RIGHT=ae.reg(ae.CP.margin_right);ae.MAX_HEIGHT=ae.reg(ae.CP.max_height);ae.MIN_HEIGHT=ae.reg(ae.CP.min_height);ae.OPACITY=ae.reg(ae.CP.opacity);ae.OUTLINE_COLOR=ae.reg(ae.CP.outline_color);ae.OUTLINE_WIDTH=ae.reg(ae.CP.outline_width);ae.PADDING=ae.reg(ae.CP.padding);ae.PADDING_TOP=ae.reg(ae.CP.padding_top);ae.PITCH_RANGE=ae.reg(ae.CP.pitch_range);ae.RIGHT=ae.reg(ae.CP.right);ae.STRESS=ae.reg(ae.CP.stress);ae.TEXT_INDENT=ae.reg(ae.CP.text_indent);ae.TEXT_SHADOW=ae.reg(ae.CP.text_shadow);ae.VOLUME=ae.reg(ae.CP.volume);ae.WORD_WRAP=ae.reg(ae.CP.word_wrap);ae.ZOOM=ae.reg(ae.CP.zoom);ae.BACKFACE_VISIBILITY=ae.reg(ae.CP.backface_visibility);ae.BACKGROUND_CLIP=ae.reg(ae.CP.background_clip);ae.BACKGROUND_POSITION=ae.reg(ae.CP.background_position);ae.BORDER_BOTTOM_COLOR=ae.reg(ae.CP.border_bottom_color);ae.BORDER_BOTTOM_STYLE=ae.reg(ae.CP.border_bottom_style);ae.BORDER_COLOR=ae.reg(ae.CP.border_color);ae.BORDER_LEFT_COLOR=ae.reg(ae.CP.border_left_color);ae.BORDER_RIGHT_COLOR=ae.reg(ae.CP.border_right_color);ae.BORDER_STYLE=ae.reg(ae.CP.border_style);ae.BORDER_TOP_LEFT_RADIUS=ae.reg(ae.CP.border_top_left_radius);ae.BORDER_TOP_WIDTH=ae.reg(ae.CP.border_top_width);ae.BOX_SHADOW=ae.reg(ae.CP.box_shadow);ae.CLIP=ae.reg(ae.CP.clip);ae.DISPLAY_INSIDE=ae.reg(ae.CP.display_inside);ae.FONT_SIZE=ae.reg(ae.CP.font_size);ae.LINE_HEIGHT=ae.reg(ae.CP.line_height);ae.MARGIN_LEFT=ae.reg(ae.CP.margin_left);ae.MAX_WIDTH=ae.reg(ae.CP.max_width);ae.OUTLINE_STYLE=ae.reg(ae.CP.outline_style);ae.PADDING_BOTTOM=ae.reg(ae.CP.padding_bottom);ae.PADDING_RIGHT=ae.reg(ae.CP.padding_right);ae.PERSPECTIVE=ae.reg(ae.CP.perspective);ae.RICHNESS=ae.reg(ae.CP.richness);ae.TEXT_OVERFLOW=ae.reg(ae.CP.text_overflow);ae.TOP=ae.reg(ae.CP.top);ae.WIDTH=ae.reg(ae.CP.width);ae.Z_INDEX=ae.reg(ae.CP.z_index);ae.BACKGROUND=ae.reg(ae.CP.background);ae.BACKGROUND_SIZE=ae.reg(ae.CP.background_size);ae.BORDER_BOTTOM_LEFT_RADIUS=ae.reg(ae.CP.border_bottom_left_radius);ae.BORDER_BOTTOM_WIDTH=ae.reg(ae.CP.border_bottom_width);ae.BORDER_LEFT_STYLE=ae.reg(ae.CP.border_left_style);ae.BORDER_RIGHT_STYLE=ae.reg(ae.CP.border_right_style);ae.BORDER_TOP=ae.reg(ae.CP.border_top);ae.BOTTOM=ae.reg(ae.CP.bottom);ae.LIST_STYLE=ae.reg(ae.CP.list_style);ae.MARGIN_TOP=ae.reg(ae.CP.margin_top);ae.OUTLINE=ae.reg(ae.CP.outline);ae.OVERFLOW_Y=ae.reg(ae.CP.overflow_y);ae.PITCH=ae.reg(ae.CP.pitch);ae.VERTICAL_ALIGN=ae.reg(ae.CP.vertical_align);ae.WORD_SPACING=ae.reg(ae.CP.word_spacing);ae.BACKGROUND_IMAGE=ae.reg(ae.CP.background_image);ae.BORDER_BOTTOM_RIGHT_RADIUS=ae.reg(ae.CP.border_bottom_right_radius);ae.BORDER_LEFT_WIDTH=ae.reg(ae.CP.border_left_width);ae.BORDER_RIGHT_WIDTH=ae.reg(ae.CP.border_right_width);ae.LEFT=ae.reg(ae.CP.left);ae.MARGIN_BOTTOM=ae.reg(ae.CP.margin_bottom);ae.PAUSE_AFTER=ae.reg(ae.CP.pause_after);ae.SPEECH_RATE=ae.reg(ae.CP.speech_rate);ae.TRANSITION_DURATION=ae.reg(ae.CP.transition_duration);ae.BORDER_BOTTOM=ae.reg(ae.CP.border_bottom);ae.BORDER_RIGHT=ae.reg(ae.CP.border_right);ae.MARGIN=ae.reg(ae.CP.margin);ae.PADDING_LEFT=ae.reg(ae.CP.padding_left);ae.BORDER_LEFT=ae.reg(ae.CP.border_left);ae.FONT=ae.reg(ae.CP.font);ae.QUOTES=ae.reg(ae.CP.quotes);ae.BORDER_TOP_RIGHT_RADIUS=ae.reg(ae.CP.border_top_right_radius);ae.MIN_WIDTH=ae.reg(ae.CP.min_width);class le{constructor(){this._autolink=true;this._options={allowedTags:["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blockquote","br","button","canvas","caption","center","cite","code","col","colgroup","colspan","command","data","datalist","dd","del","details","dfn","dir","div","dl","dt","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","img","input","ins","kbd","label","legend","li","map","mark","menu","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rowspan","s","samp","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"],allowedAttributes:{"*":["class","dir","draggable","hidden","id","inert","itemprop","itemref","itemscope","lang","spellcheck","style","title","translate"],a:["accesskey","coords","href","hreflang","name","rel","shape","tabindex","target","type"],area:["accesskey","alt","coords","href","nohref","shape","tabindex"],audio:["autoplay","controls","loop","mediagroup","muted","preload","src"],bdo:["dir"],blockquote:["cite"],br:["clear"],button:["accesskey","data-commandlinker-args","data-commandlinker-command","disabled","name","tabindex","type","value"],canvas:["height","width"],caption:["align"],col:["align","char","charoff","span","valign","width"],colgroup:["align","char","charoff","span","valign","width"],command:["checked","command","disabled","icon","label","radiogroup","type"],data:["value"],del:["cite","datetime"],details:["open"],dir:["compact"],div:["align"],dl:["compact"],fieldset:["disabled"],font:["color","face","size"],form:["accept","autocomplete","enctype","method","name","novalidate"],h1:["align"],h2:["align"],h3:["align"],h4:["align"],h5:["align"],h6:["align"],hr:["align","noshade","size","width"],iframe:["align","frameborder","height","marginheight","marginwidth","width"],img:["align","alt","border","height","hspace","ismap","name","src","usemap","vspace","width"],input:["accept","accesskey","align","alt","autocomplete","checked","disabled","inputmode","ismap","list","max","maxlength","min","multiple","name","placeholder","readonly","required","size","src","step","tabindex","type","usemap","value"],ins:["cite","datetime"],label:["accesskey","for"],legend:["accesskey","align"],li:["type","value"],map:["name"],menu:["compact","label","type"],meter:["high","low","max","min","value"],ol:["compact","reversed","start","type"],optgroup:["disabled","label"],option:["disabled","label","selected","value"],output:["for","name"],p:["align"],pre:["width"],progress:["max","min","value"],q:["cite"],select:["autocomplete","disabled","multiple","name","required","size","tabindex"],source:["type"],table:["align","bgcolor","border","cellpadding","cellspacing","frame","rules","summary","width"],tbody:["align","char","charoff","valign"],td:["abbr","align","axis","bgcolor","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"],textarea:["accesskey","autocomplete","cols","disabled","inputmode","name","placeholder","readonly","required","rows","tabindex","wrap"],tfoot:["align","char","charoff","valign"],th:["abbr","align","axis","bgcolor","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"],thead:["align","char","charoff","valign"],tr:["align","bgcolor","char","charoff","valign"],track:["default","kind","label","srclang"],ul:["compact","type"],video:["autoplay","controls","height","loop","mediagroup","muted","poster","preload","src","width"]},allowedStyles:{"*":{"backface-visibility":[ae.BACKFACE_VISIBILITY],background:[ae.BACKGROUND],"background-attachment":[ae.BACKGROUND_ATTACHMENT],"background-clip":[ae.BACKGROUND_CLIP],"background-color":[ae.BACKGROUND_COLOR],"background-image":[ae.BACKGROUND_IMAGE],"background-origin":[ae.BACKGROUND_ORIGIN],"background-position":[ae.BACKGROUND_POSITION],"background-repeat":[ae.BACKGROUND_REPEAT],"background-size":[ae.BACKGROUND_SIZE],border:[ae.BORDER],"border-bottom":[ae.BORDER_BOTTOM],"border-bottom-color":[ae.BORDER_BOTTOM_COLOR],"border-bottom-left-radius":[ae.BORDER_BOTTOM_LEFT_RADIUS],"border-bottom-right-radius":[ae.BORDER_BOTTOM_RIGHT_RADIUS],"border-bottom-style":[ae.BORDER_BOTTOM_STYLE],"border-bottom-width":[ae.BORDER_BOTTOM_WIDTH],"border-collapse":[ae.BORDER_COLLAPSE],"border-color":[ae.BORDER_COLOR],"border-left":[ae.BORDER_LEFT],"border-left-color":[ae.BORDER_LEFT_COLOR],"border-left-style":[ae.BORDER_LEFT_STYLE],"border-left-width":[ae.BORDER_LEFT_WIDTH],"border-radius":[ae.BORDER_RADIUS],"border-right":[ae.BORDER_RIGHT],"border-right-color":[ae.BORDER_RIGHT_COLOR],"border-right-style":[ae.BORDER_RIGHT_STYLE],"border-right-width":[ae.BORDER_RIGHT_WIDTH],"border-spacing":[ae.BORDER_SPACING],"border-style":[ae.BORDER_STYLE],"border-top":[ae.BORDER_TOP],"border-top-color":[ae.BORDER_TOP_COLOR],"border-top-left-radius":[ae.BORDER_TOP_LEFT_RADIUS],"border-top-right-radius":[ae.BORDER_TOP_RIGHT_RADIUS],"border-top-style":[ae.BORDER_TOP_STYLE],"border-top-width":[ae.BORDER_TOP_WIDTH],"border-width":[ae.BORDER_WIDTH],bottom:[ae.BOTTOM],box:[ae.BOX],"box-shadow":[ae.BOX_SHADOW],"box-sizing":[ae.BOX_SIZING],"caption-side":[ae.CAPTION_SIDE],clear:[ae.CLEAR],clip:[ae.CLIP],color:[ae.COLOR],cursor:[ae.CURSOR],direction:[ae.DIRECTION],display:[ae.DISPLAY],"display-inside":[ae.DISPLAY_INSIDE],"display-outside":[ae.DISPLAY_OUTSIDE],elevation:[ae.ELEVATION],"empty-cells":[ae.EMPTY_CELLS],float:[ae.FLOAT],font:[ae.FONT],"font-family":[ae.FONT_FAMILY],"font-size":[ae.FONT_SIZE],"font-stretch":[ae.FONT_STRETCH],"font-style":[ae.FONT_STYLE],"font-variant":[ae.FONT_VARIANT],"font-weight":[ae.FONT_WEIGHT],height:[ae.HEIGHT],left:[ae.LEFT],"letter-spacing":[ae.LETTER_SPACING],"line-height":[ae.LINE_HEIGHT],"list-style":[ae.LIST_STYLE],"list-style-image":[ae.LIST_STYLE_IMAGE],"list-style-position":[ae.LIST_STYLE_POSITION],"list-style-type":[ae.LIST_STYLE_TYPE],margin:[ae.MARGIN],"margin-bottom":[ae.MARGIN_BOTTOM],"margin-left":[ae.MARGIN_LEFT],"margin-right":[ae.MARGIN_RIGHT],"margin-top":[ae.MARGIN_TOP],"max-height":[ae.MAX_HEIGHT],"max-width":[ae.MAX_WIDTH],"min-height":[ae.MIN_HEIGHT],"min-width":[ae.MIN_WIDTH],opacity:[ae.OPACITY],outline:[ae.OUTLINE],"outline-color":[ae.OUTLINE_COLOR],"outline-style":[ae.OUTLINE_STYLE],"outline-width":[ae.OUTLINE_WIDTH],overflow:[ae.OVERFLOW],"overflow-wrap":[ae.OVERFLOW_WRAP],"overflow-x":[ae.OVERFLOW_X],"overflow-y":[ae.OVERFLOW_Y],padding:[ae.PADDING],"padding-bottom":[ae.PADDING_BOTTOM],"padding-left":[ae.PADDING_LEFT],"padding-right":[ae.PADDING_RIGHT],"padding-top":[ae.PADDING_TOP],"page-break-after":[ae.PAGE_BREAK_AFTER],"page-break-before":[ae.PAGE_BREAK_BEFORE],"page-break-inside":[ae.PAGE_BREAK_INSIDE],"pause-after":[ae.PAUSE_AFTER],perspective:[ae.PERSPECTIVE],pitch:[ae.PITCH],"pitch-range":[ae.PITCH_RANGE],position:[ae.POSITION],quotes:[ae.QUOTES],resize:[ae.RESIZE],richness:[ae.RICHNESS],right:[ae.RIGHT],speak:[ae.SPEAK],"speak-header":[ae.SPEAK_HEADER],"speak-numeral":[ae.SPEAK_NUMERAL],"speak-punctuation":[ae.SPEAK_PUNCTUATION],"speech-rate":[ae.SPEECH_RATE],stress:[ae.STRESS],"table-layout":[ae.TABLE_LAYOUT],"text-align":[ae.TEXT_ALIGN],"text-decoration":[ae.TEXT_DECORATION],"text-indent":[ae.TEXT_INDENT],"text-overflow":[ae.TEXT_OVERFLOW],"text-shadow":[ae.TEXT_SHADOW],"text-transform":[ae.TEXT_TRANSFORM],"text-wrap":[ae.TEXT_WRAP],top:[ae.TOP],"unicode-bidi":[ae.UNICODE_BIDI],"vertical-align":[ae.VERTICAL_ALIGN],visibility:[ae.VISIBILITY],volume:[ae.VOLUME],"white-space":[ae.WHITE_SPACE],width:[ae.WIDTH],"word-break":[ae.WORD_BREAK],"word-spacing":[ae.WORD_SPACING],"word-wrap":[ae.WORD_WRAP],"z-index":[ae.Z_INDEX],zoom:[ae.ZOOM]}},transformTags:{a:re().simpleTransform("a",{rel:"nofollow"}),input:re().simpleTransform("input",{disabled:"disabled"})},allowedSchemes:[...re().defaults.allowedSchemes],allowedSchemesByTag:{img:re().defaults.allowedSchemes.concat(["attachment"])},allowedSchemesAppliedToAttributes:["href","cite"]}}sanitize(e,t){return re()(e,{...this._options,...t||{}})}getAutolink(){return this._autolink}setAllowedSchemes(e){this._options.allowedSchemes=[...e]}setAutolink(e){this._autolink=e}}class de{constructor(){this._commands=new Array}add(e){if(this._commands.map((e=>e.id)).includes(e.id)){throw Error(`Command ${e.id} is already defined.`)}this._commands.push({isEnabled:()=>true,rank:de.DEFAULT_RANK,...e})}getActiveCommandId(e){var t;const n=this._commands.filter((t=>t.isEnabled(e))).sort(((e,t)=>{const n=e.rank-t.rank;return n||(e.id<t.id?-1:1)}));const i=(t=n[0])!==null&&t!==void 0?t:{id:null};return i.id}}de.DEFAULT_RANK=500;var ce=n(26512);const he=75;const ue=20;class pe{constructor(e){this._current=null;this._links=[];this._overrides={};this._overrideProps={};this._outstanding=null;this._pending=0;this._requests={};this._themes={};this._themeChanged=new h.Signal(this);const{host:t,key:n,splash:i,url:o}=e;this.translator=e.translator||s.nullTranslator;this._trans=this.translator.load("jupyterlab");const r=e.settings;this._base=o;this._host=t;this._splash=i||null;void r.load(n).then((e=>{this._settings=e;this._initOverrideProps();this._settings.changed.connect(this._loadSettings,this);this._loadSettings()}))}get theme(){return this._current}get themes(){return Object.keys(this._themes)}get themeChanged(){return this._themeChanged}getCSS(e){var t;return(t=this._overrides[e])!==null&&t!==void 0?t:getComputedStyle(document.documentElement).getPropertyValue(`--jp-${e}`)}loadCSS(e){const t=this._base;const n=l.URLExt.isLocal(e)?l.URLExt.join(t,e):e;const i=this._links;return new Promise(((e,t)=>{const s=document.createElement("link");s.setAttribute("rel","stylesheet");s.setAttribute("type","text/css");s.setAttribute("href",n);s.addEventListener("load",(()=>{e(undefined)}));s.addEventListener("error",(()=>{t(`Stylesheet failed to load: ${n}`)}));document.body.appendChild(s);i.push(s);this.loadCSSOverrides()}))}loadCSSOverrides(){var e;const t=(e=this._settings.user["overrides"])!==null&&e!==void 0?e:{};Object.keys({...this._overrides,...t}).forEach((e=>{const n=t[e];if(n&&this.validateCSS(e,n)){document.documentElement.style.setProperty(`--jp-${e}`,n)}else{delete t[e];document.documentElement.style.removeProperty(`--jp-${e}`)}}));this._overrides=t}validateCSS(e,t){const n=this._overrideProps[e];if(!n){console.warn("CSS validation failed: could not find property corresponding to key.\n"+`key: '${e}', val: '${t}'`);return false}if(CSS.supports(n,t)){return true}else{console.warn("CSS validation failed: invalid value.\n"+`key: '${e}', val: '${t}', prop: '${n}'`);return false}}register(e){const{name:t}=e;const n=this._themes;if(n[t]){throw new Error(`Theme already registered for ${t}`)}n[t]=e;return new ce.DisposableDelegate((()=>{delete n[t]}))}setCSSOverride(e,t){return this._settings.set("overrides",{...this._overrides,[e]:t})}setTheme(e){return this._settings.set("theme",e)}isLight(e){return this._themes[e].isLight}incrFontSize(e){return this._incrFontSize(e,true)}decrFontSize(e){return this._incrFontSize(e,false)}themeScrollbars(e){return!!this._settings.composite["theme-scrollbars"]&&!!this._themes[e].themeScrollbars}isToggledThemeScrollbars(){return!!this._settings.composite["theme-scrollbars"]}toggleThemeScrollbars(){return this._settings.set("theme-scrollbars",!this._settings.composite["theme-scrollbars"])}getDisplayName(e){var t,n;return(n=(t=this._themes[e])===null||t===void 0?void 0:t.displayName)!==null&&n!==void 0?n:e}_incrFontSize(e,t=true){var n;const i=((n=this.getCSS(e))!==null&&n!==void 0?n:"13px").split(/([a-zA-Z]+)/);const s=(t?1:-1)*(i[1]==="em"?.1:1);return this.setCSSOverride(e,`${Number(i[0])+s}${i[1]}`)}_initOverrideProps(){const e=this._settings.schema.definitions;const t=e.cssOverrides.properties;Object.keys(t).forEach((e=>{let n;switch(e){case"code-font-size":case"content-font-size1":case"ui-font-size1":n="font-size";break;default:n=t[e].description;break}this._overrideProps[e]=n}))}_loadSettings(){const e=this._outstanding;const t=this._pending;const n=this._requests;if(t){window.clearTimeout(t);this._pending=0}const i=this._settings;const s=this._themes;const o=i.composite["theme"];if(e){e.then((()=>{this._loadSettings()})).catch((()=>{this._loadSettings()}));this._outstanding=null;return}n[o]=n[o]?n[o]+1:1;if(s[o]){this._outstanding=this._loadTheme(o);delete n[o];return}if(n[o]>ue){const e=i.default("theme");delete n[o];if(!s[e]){this._onError(this._trans.__("Neither theme %1 nor default %2 loaded.",o,e));return}console.warn(`Could not load theme ${o}, using default ${e}.`);this._outstanding=this._loadTheme(e);return}this._pending=window.setTimeout((()=>{this._loadSettings()}),he)}_loadTheme(e){var t;const n=this._current;const i=this._links;const s=this._themes;const o=this._splash?this._splash.show(s[e].isLight):new ce.DisposableDelegate((()=>undefined));i.forEach((e=>{if(e.parentElement){e.parentElement.removeChild(e)}}));i.length=0;const r=(t=this._settings.schema.properties)===null||t===void 0?void 0:t.theme;if(r){r.enum=Object.keys(s).map((e=>{var t;return(t=s[e].displayName)!==null&&t!==void 0?t:e}))}const a=n?s[n].unload():Promise.resolve();return Promise.all([a,s[e].load()]).then((()=>{this._current=e;this._themeChanged.emit({name:"theme",oldValue:n,newValue:e});this._host.hide();requestAnimationFrame((()=>{this._host.show();me.fitAll(this._host);o.dispose()}))})).catch((e=>{this._onError(e);o.dispose()}))}_onError(e){void g({title:this._trans.__("Error Loading Theme"),body:String(e),buttons:[v.okButton({label:this._trans.__("OK")})]})}}var me;(function(e){function t(e){for(const n of e.children()){t(n)}e.fit()}e.fitAll=t})(me||(me={}));const ge=new c.Token("@jupyterlab/apputils:ICommandPalette",`A service for the application command palette\n  in the left panel. Use this to add commands to the palette.`);const fe=new c.Token("@jupyterlab/apputils:IKernelStatusModel","A service to register kernel session provider to the kernel status indicator.");const ve=new c.Token("@jupyterlab/apputils:ISessionContextDialogs","A service for handling the session dialogs.");const _e=new c.Token("@jupyterlab/apputils:IThemeManager","A service for the theme manager for the application. This is used primarily in theme extensions to register new themes.");const be=new c.Token("@jupyterlab/apputils:ISanitizer","A service for sanitizing HTML strings.");const ye=new c.Token("@jupyterlab/apputils:ISplashScreen",`A service for the splash screen for the application.\n  Use this if you want to show the splash screen for your own purposes.`);const we=new c.Token("@jupyterlab/apputils:IWindowResolver",`A service for a window resolver for the\n  application. JupyterLab workspaces are given a name, which are determined using\n  the window resolver. Require this if you want to use the name of the current workspace.`);const Ce=new c.Token("@jupyterlab/apputils:IToolbarWidgetRegistry",`A registry for toolbar widgets. Require this\n  if you want to build the toolbar dynamically from a data definition (stored in settings for example).`);class xe{constructor(e){this._widgets=new Map;this._factoryAdded=new h.Signal(this);this._defaultFactory=e.defaultFactory}get defaultFactory(){return this._defaultFactory}set defaultFactory(e){this._defaultFactory=e}get factoryAdded(){return this._factoryAdded}createWidget(e,t,n){var i;const s=(i=this._widgets.get(e))===null||i===void 0?void 0:i.get(n.name);return s?s(t):this._defaultFactory(e,t,n)}addFactory(e,t,n){let i=this._widgets.get(e);const s=i===null||i===void 0?void 0:i.get(t);if(!i){i=new Map;this._widgets.set(e,i)}i.set(t,n);this._factoryAdded.emit(t);return s}registerFactory(e,t,n){return this.addFactory(e,t,n)}}function Se(e){return(t,n,s)=>{var r;switch((r=s.type)!==null&&r!==void 0?r:"command"){case"command":{const{command:t,args:n,label:o,icon:r}=s;const a=t!==null&&t!==void 0?t:"";const l={toolbar:true,...n};const d=r?i.LabIcon.resolve({icon:r}):undefined;const c=(d!==null&&d!==void 0?d:e.icon(a,l))?o!==null&&o!==void 0?o:"":o;return new i.CommandToolbarButton({commands:e,id:a,args:l,icon:d,label:c})}case"spacer":return i.Toolbar.createSpacerItem();default:return new o.Widget}}}var ke=n(9154);var je=n(51997);const Me=50;const Ee="jupyter.lab.toolbars";async function Ie(e){const t=await g({title:e.__("Information"),body:e.__("Toolbar customization has changed. You will need to reload JupyterLab to see the changes."),buttons:[v.cancelButton(),v.okButton({label:e.__("Reload")})]});if(t.button.accept){location.reload()}}async function Te(e,t,n,i,s,o="toolbar"){var r;const a=s.load("jupyterlab");let l=null;let d={};let h=true;try{function g(e){var s,r;d={};const a=Object.keys(t.plugins).filter((e=>e!==i)).map((e=>{var i,s;const o=(s=((i=t.plugins[e].schema[Ee])!==null&&i!==void 0?i:{})[n])!==null&&s!==void 0?s:[];d[e]=o;return o})).concat([(r=((s=e[Ee])!==null&&s!==void 0?s:{})[n])!==null&&r!==void 0?r:[]]).reduceRight(((e,t)=>je.SettingRegistry.reconcileToolbarItems(e,t,true)),[]);e.properties[o].default=je.SettingRegistry.reconcileToolbarItems(a,e.properties[o].default,true).sort(((e,t)=>{var n,i;return((n=e.rank)!==null&&n!==void 0?n:Me)-((i=t.rank)!==null&&i!==void 0?i:Me)}))}t.transform(i,{compose:e=>{var t,n,i,s,r;if(!l){l=c.JSONExt.deepCopy(e.schema);g(l)}const a=(i=((n=((t=l.properties)!==null&&t!==void 0?t:{})[o])!==null&&n!==void 0?n:{}).default)!==null&&i!==void 0?i:[];const d=e.data.user;const h=e.data.composite;d[o]=(s=e.data.user[o])!==null&&s!==void 0?s:[];h[o]=((r=je.SettingRegistry.reconcileToolbarItems(a,d[o],false))!==null&&r!==void 0?r:[]).sort(((e,t)=>{var n,i;return((n=e.rank)!==null&&n!==void 0?n:Me)-((i=t.rank)!==null&&i!==void 0?i:Me)}));e.data={composite:h,user:d};return e},fetch:e=>{if(!l){l=c.JSONExt.deepCopy(e.schema);g(l)}return{data:e.data,id:e.id,raw:e.raw,schema:l,version:e.version}}})}catch(m){if(m.name==="TransformError"){h=false}else{throw m}}const u=await t.load(i);u.changed.connect((()=>{var e;const t=(e=u.composite[o])!==null&&e!==void 0?e:[];p(t)}));const p=t=>{e.clear();e.pushAll(t.filter((e=>!e.disabled)))};p((r=u.composite[o])!==null&&r!==void 0?r:[]);if(!h){return}t.pluginChanged.connect((async(e,s)=>{var o,r,h;if(s===i){return}const u=(o=d[s])!==null&&o!==void 0?o:[];const p=(h=((r=t.plugins[s].schema[Ee])!==null&&r!==void 0?r:{})[n])!==null&&h!==void 0?h:[];if(!c.JSONExt.deepEqual(u,p)){if(d[s]){await Ie(a)}else{if(p.length>0){l=null;const e=t.plugins[i].schema;e.properties.toolbar.default=[];await t.load(i,true)}}}}))}function De(e,t,n,i,s,o="toolbar"){const r=new ke.ObservableList({itemCmp:(e,t)=>c.JSONExt.deepEqual(e,t)});Te(r,t,n,i,s,o).catch((e=>{console.error(`Failed to load toolbar items for factory ${n} from ${i}`,e)}));return t=>{const i=(i,s)=>{switch(s.type){case"move":o.move(s.oldIndex,s.newIndex);break;case"add":s.newValues.forEach((i=>o.push({name:i.name,widget:e.createWidget(n,t,i)})));break;case"remove":s.oldValues.forEach((()=>o.remove(s.oldIndex)));break;case"set":s.newValues.forEach((i=>o.set(s.newIndex,{name:i.name,widget:e.createWidget(n,t,i)})));break}};const s=(i,s)=>{const a=Array.from(r).findIndex((e=>e.name===s));if(a>=0){o.set(a,{name:s,widget:e.createWidget(n,t,r.get(a))})}};const o=new ke.ObservableList({values:Array.from(r).map((i=>({name:i.name,widget:e.createWidget(n,t,i)})))});e.factoryAdded.connect(s);r.changed.connect(i);t.disposed.connect((()=>{r.changed.disconnect(i);e.factoryAdded.disconnect(s)}));return o}}function Le(e,t,n){var i;if(!e.toolbar&&!n){console.log(`Widget ${e.id} has no 'toolbar' and no explicit toolbar was provided.`);return}const s=(i=e.toolbar)!==null&&i!==void 0?i:n;const o=t(e);if(Array.isArray(o)){o.forEach((({name:e,widget:t})=>{s.addItem(e,t)}))}else{const t=(e,t)=>{switch(t.type){case"add":t.newValues.forEach(((e,n)=>{s.insertItem(t.newIndex+n,e.name,e.widget)}));break;case"move":t.oldValues.forEach((e=>{e.widget.parent=null}));t.newValues.forEach(((e,n)=>{s.insertItem(t.newIndex+n,e.name,e.widget)}));break;case"remove":t.oldValues.forEach((e=>{e.widget.parent=null}));break;case"set":t.oldValues.forEach((e=>{e.widget.parent=null}));t.newValues.forEach(((e,n)=>{const i=(0,d.findIndex)(s.names(),(t=>e.name===t));if(i>=0){Array.from(s.children())[i].parent=null}s.insertItem(t.newIndex+n,e.name,e.widget)}));break}};t(o,{newIndex:0,newValues:Array.from(o),oldIndex:0,oldValues:[],type:"add"});o.changed.connect(t);e.disposed.connect((()=>{o.changed.disconnect(t)}))}}class Pe{get name(){return this._name}resolve(e){return Ae.resolve(e).then((e=>{this._name=e}))}}var Ae;(function(e){const t="@jupyterlab/statedb:StateDB";const n=`${t}:beacon`;const i=Math.floor(200+Math.random()*300);const s=`${t}:window`;let o=null;let r=null;const a=new c.PromiseDelegate;const l={};let d=null;let h=false;function u(){window.addEventListener("storage",(e=>{const{key:t,newValue:i}=e;if(i===null){return}if(t===n&&i!==o&&r!==null){p(h?d:r);return}if(h||t!==s){return}const a=i.replace(/\-\d+$/,"");l[a]=null;if(!r||r in l){m()}}))}function p(e){if(e===null){return}const{localStorage:t}=window;t.setItem(s,`${e}-${(new Date).getTime()}`)}function m(){h=true;o=null;a.reject(`Window name candidate "${r}" already exists`)}function g(e){if(h){return a.promise}r=e;if(r in l){m();return a.promise}const{localStorage:t,setTimeout:s}=window;s((()=>{if(h){return}if(!r||r in l){return m()}h=true;o=null;a.resolve(d=r);p(d)}),i);o=`${Math.random()}-${(new Date).getTime()}`;t.setItem(n,o);return a.promise}e.resolve=g;(()=>{u()})()})(Ae||(Ae={}));class Re extends i.Toolbar{}(function(e){e.createInterruptButton=E.createInterruptButton;e.createKernelNameItem=E.createKernelNameItem;e.createKernelStatusItem=E.createKernelStatusItem;e.createRestartButton=E.createRestartButton;e.createSpacerItem=i.Toolbar.createSpacerItem})(Re||(Re={}))},79536:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(98328);var r=n(93379);var a=n.n(r);var l=n(7795);var d=n.n(l);var c=n(90569);var h=n.n(c);var u=n(3565);var p=n.n(u);var m=n(19216);var g=n.n(m);var f=n(44589);var v=n.n(f);var _=n(30399);var b={};b.styleTagTransform=v();b.setAttributes=p();b.insert=h().bind(null,"head");b.domAPI=d();b.insertStyleElement=g();var y=a()(_.Z,b);const w=_.Z&&_.Z.locals?_.Z.locals:undefined},4388:(e,t,n)=>{"use strict";n.r(t);n.d(t,{AttachmentsModel:()=>r,AttachmentsResolver:()=>a});var i=n(9154);var s=n(33112);var o=n(71372);class r{constructor(e){var t;this._map=new i.ObservableMap;this._isDisposed=false;this._stateChanged=new o.Signal(this);this._changed=new o.Signal(this);this._serialized=null;this._changeGuard=false;this.contentFactory=(t=e.contentFactory)!==null&&t!==void 0?t:r.defaultContentFactory;if(e.values){for(const t of Object.keys(e.values)){if(e.values[t]!==undefined){this.set(t,e.values[t])}}}this._map.changed.connect(this._onMapChanged,this)}get stateChanged(){return this._stateChanged}get changed(){return this._changed}get keys(){return this._map.keys()}get length(){return this._map.keys().length}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this._map.dispose();o.Signal.clearData(this)}has(e){return this._map.has(e)}get(e){return this._map.get(e)}set(e,t){const n=this._createItem({value:t});this._map.set(e,n)}remove(e){this._map.delete(e)}clear(){this._map.values().forEach((e=>{e.dispose()}));this._map.clear()}fromJSON(e){this.clear();Object.keys(e).forEach((t=>{if(e[t]!==undefined){this.set(t,e[t])}}))}toJSON(){const e={};for(const t of this._map.keys()){e[t]=this._map.get(t).toJSON()}return e}_createItem(e){const t=this.contentFactory;const n=t.createAttachmentModel(e);n.changed.connect(this._onGenericChange,this);return n}_onMapChanged(e,t){if(this._serialized&&!this._changeGuard){this._changeGuard=true;this._serialized.set(this.toJSON());this._changeGuard=false}this._changed.emit(t);this._stateChanged.emit(void 0)}_onGenericChange(){this._stateChanged.emit(void 0)}}(function(e){class t{createAttachmentModel(e){return new s.AttachmentModel(e)}}e.ContentFactory=t;e.defaultContentFactory=new t})(r||(r={}));class a{constructor(e){this._parent=e.parent||null;this._model=e.model}async resolveUrl(e){if(this._parent&&!e.startsWith("attachment:")){return this._parent.resolveUrl(e)}return e}async getDownloadUrl(e){if(this._parent&&!e.startsWith("attachment:")){return this._parent.getDownloadUrl(e)}const t=e.slice("attachment:".length);const n=this._model.get(t);if(n===undefined){return e}const{data:i}=n;const o=Object.keys(i)[0];if(o===undefined||s.imageRendererFactory.mimeTypes.indexOf(o)===-1){throw new Error(`Cannot render unknown image mime type "${o}".`)}const r=`data:${o};base64,${i[o]}`;return r}isLocal(e){var t,n,i;if(this._parent&&!e.startsWith("attachment:")){return(i=(n=(t=this._parent).isLocal)===null||n===void 0?void 0:n.call(t,e))!==null&&i!==void 0?i:true}return true}}},12650:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>u});var i=n(51997);var s=n.n(i);var o=n(43147);var r=n.n(o);var a=n(90848);var l=n.n(a);var d=n(36168);var c=n.n(d);const h={id:"@jupyterlab/cell-toolbar-extension:plugin",description:"Add the cells toolbar.",autoStart:true,activate:async(e,t,n,i)=>{const s=t&&n?(0,a.createToolbarFactory)(n,t,o.CellBarExtension.FACTORY_NAME,h.id,i!==null&&i!==void 0?i:d.nullTranslator):undefined;e.docRegistry.addWidgetExtension("Notebook",new o.CellBarExtension(e.commands,s))},optional:[i.ISettingRegistry,a.IToolbarWidgetRegistry,d.ITranslator]};const u=h},69858:(e,t,n)=>{"use strict";var i=n(79536);var s=n(90516);var o=n(32902);var r=n(34849);var a=n(94683);var l=n(5956);var d=n(88164);var c=n(93379);var h=n.n(c);var u=n(7795);var p=n.n(u);var m=n(90569);var g=n.n(m);var f=n(3565);var v=n.n(f);var _=n(19216);var b=n.n(_);var y=n(44589);var w=n.n(y);var C=n(63775);var x={};x.styleTagTransform=w();x.setAttributes=v();x.insert=g().bind(null,"head");x.domAPI=p();x.insertStyleElement=b();var S=h()(C.Z,x);const k=C.Z&&C.Z.locals?C.Z.locals:undefined},70055:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CellBarExtension:()=>m,CellToolbarTracker:()=>u});var i=n(90848);var s=n(9154);var o=n(52435);var r=n(58740);var a=n(71372);const l=["text/plain","application/vnd.jupyter.stdout","application/vnd.jupyter.stderr"];const d="jp-cell-toolbar";const c="jp-cell-menu";const h="jp-toolbar-overlap";class u{constructor(e,t){var n;this._isDisposed=false;this._panel=e;this._previousActiveCell=this._panel.content.activeCell;this._toolbar=t;this._onToolbarChanged();this._toolbar.changed.connect(this._onToolbarChanged,this);void e.revealed.then((()=>{setTimeout((()=>{this._onActiveCellChanged(e.content)}),1e3/60)}));e.content.renderingLayoutChanged.connect(this._onActiveCellChanged,this);e.content.activeCellChanged.connect(this._onActiveCellChanged,this);(n=e.content.activeCell)===null||n===void 0?void 0:n.model.metadataChanged.connect(this._onMetadataChanged,this);e.disposed.connect((()=>{var t;e.content.activeCellChanged.disconnect(this._onActiveCellChanged);(t=e.content.activeCell)===null||t===void 0?void 0:t.model.metadataChanged.disconnect(this._onMetadataChanged)}))}_onMetadataChanged(e,t){if(t.key==="jupyter"){if(typeof t.newValue==="object"&&t.newValue.source_hidden===true&&(t.type==="add"||t.type==="change")){this._removeToolbar(e)}else if(typeof t.oldValue==="object"&&t.oldValue.source_hidden===true){this._addToolbar(e)}}}_onActiveCellChanged(e){if(this._previousActiveCell&&!this._previousActiveCell.isDisposed){this._removeToolbar(this._previousActiveCell.model);this._previousActiveCell.model.metadataChanged.disconnect(this._onMetadataChanged)}const t=e.activeCell;if(t===null||t.inputHidden){return}t.model.metadataChanged.connect(this._onMetadataChanged,this);this._addToolbar(t.model);this._previousActiveCell=t}get isDisposed(){return this._isDisposed}dispose(){var e;if(this.isDisposed){return}this._isDisposed=true;this._toolbar.changed.disconnect(this._onToolbarChanged,this);const t=(e=this._panel)===null||e===void 0?void 0:e.context.model.cells;if(t){for(const e of t){this._removeToolbar(e)}}this._panel=null;a.Signal.clearData(this)}_addToolbar(e){const t=this._getCell(e);if(t){const e=new o.Toolbar;e.addClass(c);const n=[];for(const{name:t,widget:i}of this._toolbar){e.addItem(t,i);if(i instanceof o.ReactWidget&&i.renderPromise!==undefined){i.update();n.push(i.renderPromise)}}Promise.all(n).then((()=>{e.addClass(d);t.layout.insertWidget(0,e);t.displayChanged.connect(this._resizeEventCallback,this);t.model.contentChanged.connect(this._changedEventCallback,this);this._updateCellForToolbarOverlap(t)})).catch((e=>{console.error("Error rendering buttons of the cell toolbar: ",e)}))}}_getCell(e){var t;return(t=this._panel)===null||t===void 0?void 0:t.content.widgets.find((t=>t.model===e))}_findToolbarWidgets(e){const t=e.layout.widgets;return t.filter((e=>e.hasClass(d)))||[]}_removeToolbar(e){const t=this._getCell(e);if(t){this._findToolbarWidgets(t).forEach((e=>{e.dispose()}));t.displayChanged.disconnect(this._resizeEventCallback,this)}e.contentChanged.disconnect(this._changedEventCallback,this)}_onToolbarChanged(){var e;const t=(e=this._panel)===null||e===void 0?void 0:e.content.activeCell;if(t){this._removeToolbar(t.model);this._addToolbar(t.model)}}_changedEventCallback(){var e;const t=(e=this._panel)===null||e===void 0?void 0:e.content.activeCell;if(t===null||t===undefined){return}this._updateCellForToolbarOverlap(t)}_resizeEventCallback(){var e;const t=(e=this._panel)===null||e===void 0?void 0:e.content.activeCell;if(t===null||t===undefined){return}this._updateCellForToolbarOverlap(t)}_updateCellForToolbarOverlap(e){requestAnimationFrame((()=>{const t=e.node;t.classList.remove(h);if(this._cellToolbarOverlapsContents(e)){t.classList.add(h)}}))}_cellToolbarOverlapsContents(e){var t;const n=e.model.type;const i=this._cellEditorWidgetLeft(e);const s=this._cellEditorWidgetRight(e);const o=this._cellToolbarLeft(e);if(o===null){return false}if((i+s)/2>o){return true}if(n==="markdown"&&e.rendered){return this._markdownOverlapsToolbar(e)}if(((t=this._panel)===null||t===void 0?void 0:t.content.renderingLayout)==="default"){return this._codeOverlapsToolbar(e)}else{return this._outputOverlapsToolbar(e)}}_markdownOverlapsToolbar(e){const t=e.inputArea;if(!t){return false}const n=t.renderedInput;const i=n.node;const s=i.firstElementChild;if(s===null){return false}const o=s.style.maxWidth;s.style.maxWidth="max-content";const r=s.getBoundingClientRect().right;s.style.maxWidth=o;const a=this._cellToolbarLeft(e);return a===null?false:r>a}_outputOverlapsToolbar(e){const t=e.outputArea.node;if(t){const n=t.querySelectorAll("[data-mime-type]");const i=this._cellToolbarRect(e);if(i){const{left:e,bottom:t}=i;return(0,r.some)(n,(n=>{const i=n.firstElementChild;if(i){const s=new Range;if(l.includes(n.getAttribute("data-mime-type")||"")){s.selectNodeContents(i)}else{s.selectNode(i)}const{right:o,top:r}=s.getBoundingClientRect();return o>e&&r<t}return false}))}}return false}_codeOverlapsToolbar(e){const t=e.editorWidget;const n=e.editor;if(!t||!n){return false}if(n.lineCount<1){return false}const i=t.node.getElementsByClassName("cm-line");if(i.length<1){return false}let s=i[0].getBoundingClientRect().left;const o=document.createRange();o.selectNodeContents(i[0]);s+=o.getBoundingClientRect().width;const r=this._cellToolbarLeft(e);return r===null?false:s>r}_cellEditorWidgetLeft(e){var t,n;return(n=(t=e.editorWidget)===null||t===void 0?void 0:t.node.getBoundingClientRect().left)!==null&&n!==void 0?n:0}_cellEditorWidgetRight(e){var t,n;return(n=(t=e.editorWidget)===null||t===void 0?void 0:t.node.getBoundingClientRect().right)!==null&&n!==void 0?n:0}_cellToolbarRect(e){const t=this._findToolbarWidgets(e);if(t.length<1){return null}const n=t[0].node;return n.getBoundingClientRect()}_cellToolbarLeft(e){var t;return((t=this._cellToolbarRect(e))===null||t===void 0?void 0:t.left)||null}}const p=[{command:"notebook:duplicate-below",name:"duplicate-cell"},{command:"notebook:move-cell-up",name:"move-cell-up"},{command:"notebook:move-cell-down",name:"move-cell-down"},{command:"notebook:insert-cell-above",name:"insert-cell-above"},{command:"notebook:insert-cell-below",name:"insert-cell-below"},{command:"notebook:delete-cell",name:"delete-cell"}];class m{constructor(e,t){this._commands=e;this._toolbarFactory=t!==null&&t!==void 0?t:this.defaultToolbarFactory}get defaultToolbarFactory(){const e=(0,i.createDefaultFactory)(this._commands);return t=>new s.ObservableList({values:p.map((n=>({name:n.name,widget:e(m.FACTORY_NAME,t,n)})))})}createNew(e){return new u(e,this._toolbarFactory(e))}}m.FACTORY_NAME="Cell"},98596:(e,t,n)=>{"use strict";n.r(t);n.d(t,{AttachmentsCell:()=>$e,AttachmentsCellModel:()=>W,Cell:()=>We,CellDragUtils:()=>c,CellFooter:()=>k,CellHeader:()=>S,CellModel:()=>H,CellSearchProvider:()=>re,CodeCell:()=>Ue,CodeCellLayout:()=>Ve,CodeCellModel:()=>$,Collapser:()=>_,InputArea:()=>D,InputCollapser:()=>b,InputPlaceholder:()=>ee,InputPrompt:()=>L,MarkdownCell:()=>qe,MarkdownCellModel:()=>U,OutputCollapser:()=>y,OutputPlaceholder:()=>te,Placeholder:()=>Q,RawCell:()=>Ke,RawCellModel:()=>V,SELECTED_HIGHLIGHT_CLASS:()=>oe,createCellSearchProvider:()=>de,isCodeCellModel:()=>B,isMarkdownCellModel:()=>F,isRawCellModel:()=>z});var i=n(90502);const s=5;const o="jp-dragImage";const r="jp-dragImage-singlePrompt";const a="jp-dragImage-content";const l="jp-dragImage-prompt";const d="jp-dragImage-multipleBack";var c;(function(e){function t(e,t,n){let i=-1;while(e&&e.parentElement){if(n(e)){let n=-1;for(const s of t){if(s.node===e){i=++n;break}}break}e=e.parentElement}return i}e.findCell=t;function n(e,t){var n,i;let s;if(e){if((n=e.editorWidget)===null||n===void 0?void 0:n.node.contains(t)){s="input"}else if((i=e.promptNode)===null||i===void 0?void 0:i.contains(t)){s="prompt"}else{s="cell"}}else{s="unknown"}return s}e.detectTargetArea=n;function c(e,t,n,i){const o=Math.abs(n-e);const r=Math.abs(i-t);return o>=s||r>=s}e.shouldStartDrag=c;function h(e,t){const n=t.length;let s;if(e.model.type==="code"){const t=e.model.executionCount;s=" ";if(t){s=t.toString()}}else{s=""}const c=e.model.sharedModel.getSource().split("\n")[0].slice(0,26);if(n>1){if(s!==""){return i.VirtualDOM.realize(i.h.div(i.h.div({className:o},i.h.span({className:l},"["+s+"]:"),i.h.span({className:a},c)),i.h.div({className:d},"")))}else{return i.VirtualDOM.realize(i.h.div(i.h.div({className:o},i.h.span({className:l}),i.h.span({className:a},c)),i.h.div({className:d},"")))}}else{if(s!==""){return i.VirtualDOM.realize(i.h.div(i.h.div({className:`${o} ${r}`},i.h.span({className:l},"["+s+"]:"),i.h.span({className:a},c))))}else{return i.VirtualDOM.realize(i.h.div(i.h.div({className:`${o} ${r}`},i.h.span({className:l}),i.h.span({className:a},c))))}}}e.createCellDragImage=h})(c||(c={}));var h=n(52435);var u=n(36044);var p=n(28416);const m="jp-Collapser";const g="jp-Collapser-child";const f="jp-InputCollapser";const v="jp-OutputCollapser";class _ extends h.ReactWidget{constructor(){super();this.addClass(m)}get collapsed(){return false}render(){const e=g;return p.createElement("div",{className:e,onClick:e=>this.handleClick(e)})}}class b extends _{constructor(){super();this.addClass(f)}get collapsed(){var e;const t=(e=this.parent)===null||e===void 0?void 0:e.parent;if(t){return t.inputHidden}else{return false}}handleClick(e){var t;const n=(t=this.parent)===null||t===void 0?void 0:t.parent;if(n){n.inputHidden=!n.inputHidden}this.update()}}class y extends _{constructor(){super();this.addClass(v)}get collapsed(){var e;const t=(e=this.parent)===null||e===void 0?void 0:e.parent;if(t){return t.outputHidden}else{return false}}handleClick(e){var t,n;const i=(t=this.parent)===null||t===void 0?void 0:t.parent;if(i){i.outputHidden=!i.outputHidden;if(i.outputHidden){let e=(n=i.parent)===null||n===void 0?void 0:n.node;if(e){u.ElementExt.scrollIntoViewIfNeeded(e,i.node)}}}this.update()}}var w=n(85448);const C="jp-CellHeader";const x="jp-CellFooter";class S extends w.Widget{constructor(){super();this.addClass(C)}}class k extends w.Widget{constructor(){super();this.addClass(x)}}var j=n(47391);const M="jp-InputArea";const E="jp-InputArea-prompt";const I="jp-InputPrompt";const T="jp-InputArea-editor";class D extends w.Widget{constructor(e){super();this.addClass(M);const{contentFactory:t,editorOptions:n,model:i}=e;this.model=i;this.contentFactory=t;const s=this._prompt=t.createInputPrompt();s.addClass(E);const o=this._editor=new j.CodeEditorWrapper({factory:t.editorFactory,model:i,editorOptions:n});o.addClass(T);const r=this.layout=new w.PanelLayout;r.addWidget(s);r.addWidget(o)}get editorWidget(){return this._editor}get editor(){return this._editor.editor}get promptNode(){return this._prompt.node}get renderedInput(){return this._rendered}renderInput(e){const t=this.layout;if(this._rendered){this._rendered.parent=null}this._editor.hide();this._rendered=e;t.addWidget(e)}showEditor(){if(this._rendered){this._rendered.parent=null}this._editor.show()}setPrompt(e){this._prompt.executionCount=e}dispose(){if(this.isDisposed){return}this._prompt=null;this._editor=null;this._rendered=null;super.dispose()}}(function(e){class t{constructor(e){this._editor=e.editorFactory}get editorFactory(){return this._editor}createInputPrompt(){return new L}}e.ContentFactory=t})(D||(D={}));class L extends w.Widget{constructor(){super();this._executionCount=null;this.addClass(I)}get executionCount(){return this._executionCount}set executionCount(e){this._executionCount=e;if(e===null){this.node.textContent=" "}else{this.node.textContent=`[${e||" "}]:`}}}var P=n(71372);var A=n(19987);var R=n(994);var N=n(87519);const O=(0,N.createMutex)();function B(e){return e.type==="code"}function F(e){return e.type==="markdown"}function z(e){return e.type==="raw"}class H extends j.CodeEditor.Model{constructor(e={}){const{cell_type:t,sharedModel:n,...i}=e;super({sharedModel:n!==null&&n!==void 0?n:(0,N.createStandaloneCell)({cell_type:t!==null&&t!==void 0?t:"raw",id:e.id}),...i});this.contentChanged=new P.Signal(this);this.stateChanged=new P.Signal(this);this._metadataChanged=new P.Signal(this);this._trusted=false;this.standaloneModel=typeof e.sharedModel==="undefined";this.trusted=!!this.getMetadata("trusted")||!!e.trusted;this.sharedModel.changed.connect(this.onGenericChange,this);this.sharedModel.metadataChanged.connect(this._onMetadataChanged,this)}get metadataChanged(){return this._metadataChanged}get id(){return this.sharedModel.getId()}get metadata(){return this.sharedModel.metadata}get trusted(){return this._trusted}set trusted(e){const t=this.trusted;if(t!==e){this._trusted=e;this.onTrustedChanged(this,{newValue:e,oldValue:t})}}dispose(){if(this.isDisposed){return}this.sharedModel.changed.disconnect(this.onGenericChange,this);this.sharedModel.metadataChanged.disconnect(this._onMetadataChanged,this);super.dispose()}onTrustedChanged(e,t){}deleteMetadata(e){return this.sharedModel.deleteMetadata(e)}getMetadata(e){return this.sharedModel.getMetadata(e)}setMetadata(e,t){if(typeof t==="undefined"){this.sharedModel.deleteMetadata(e)}else{this.sharedModel.setMetadata(e,t)}}toJSON(){return this.sharedModel.toJSON()}onGenericChange(){this.contentChanged.emit(void 0)}_onMetadataChanged(e,t){this._metadataChanged.emit(t)}}class W extends H{constructor(e){var t;super(e);const n=(t=e.contentFactory)!==null&&t!==void 0?t:W.defaultContentFactory;const i=this.sharedModel.getAttachments();this._attachments=n.createAttachmentsModel({values:i});this._attachments.stateChanged.connect(this.onGenericChange,this);this._attachments.changed.connect(this._onAttachmentsChange,this);this.sharedModel.changed.connect(this._onSharedModelChanged,this)}get attachments(){return this._attachments}dispose(){if(this.isDisposed){return}this._attachments.stateChanged.disconnect(this.onGenericChange,this);this._attachments.changed.disconnect(this._onAttachmentsChange,this);this._attachments.dispose();this.sharedModel.changed.disconnect(this._onSharedModelChanged,this);super.dispose()}toJSON(){return super.toJSON()}_onAttachmentsChange(e,t){const n=this.sharedModel;O((()=>n.setAttachments(e.toJSON())))}_onSharedModelChanged(e,t){if(t.attachmentsChange){const e=this.sharedModel;O((()=>{var t;return this._attachments.fromJSON((t=e.getAttachments())!==null&&t!==void 0?t:{})}))}}}(function(e){class t{createAttachmentsModel(e){return new A.AttachmentsModel(e)}}e.ContentFactory=t;e.defaultContentFactory=new t})(W||(W={}));class V extends W{constructor(e={}){super({cell_type:"raw",...e})}get type(){return"raw"}toJSON(){return super.toJSON()}}class U extends W{constructor(e={}){super({cell_type:"markdown",...e});this.mimeType="text/x-ipythongfm"}get type(){return"markdown"}toJSON(){return super.toJSON()}}class $ extends H{constructor(e={}){var t;super({cell_type:"code",...e});this._executedCode="";this._isDirty=false;const n=(t=e===null||e===void 0?void 0:e.contentFactory)!==null&&t!==void 0?t:$.defaultContentFactory;const i=this.trusted;const s=this.sharedModel.getOutputs();this._outputs=n.createOutputArea({trusted:i,values:s});this.sharedModel.changed.connect(this._onSharedModelChanged,this);this._outputs.changed.connect(this.onGenericChange,this);this._outputs.changed.connect(this.onOutputsChange,this)}get type(){return"code"}get executionCount(){return this.sharedModel.execution_count||null}set executionCount(e){this.sharedModel.execution_count=e||null}get isDirty(){return this._isDirty}get outputs(){return this._outputs}clearExecution(){this.outputs.clear();this.executionCount=null;this._setDirty(false);this.sharedModel.deleteMetadata("execution");this.trusted=true}dispose(){if(this.isDisposed){return}this.sharedModel.changed.disconnect(this._onSharedModelChanged,this);this._outputs.changed.disconnect(this.onGenericChange,this);this._outputs.changed.disconnect(this.onOutputsChange,this);this._outputs.dispose();this._outputs=null;super.dispose()}onTrustedChanged(e,t){const n=t.newValue;if(this._outputs){this._outputs.trusted=n}if(n){const e=this.sharedModel;const t=e.getMetadata();t.trusted=true;e.setMetadata(t)}this.stateChanged.emit({name:"trusted",oldValue:t.oldValue,newValue:n})}toJSON(){return super.toJSON()}onOutputsChange(e,t){const n=this.sharedModel;O((()=>{switch(t.type){case"add":{const e=t.newValues.map((e=>e.toJSON()));n.updateOutputs(t.newIndex,t.newIndex,e);break}case"set":{const e=t.newValues.map((e=>e.toJSON()));n.updateOutputs(t.oldIndex,t.oldIndex+e.length,e);break}case"remove":n.updateOutputs(t.oldIndex,t.oldValues.length);break;default:throw new Error(`Invalid event type: ${t.type}`)}}))}_onSharedModelChanged(e,t){if(t.outputsChange){O((()=>{this.outputs.clear();e.getOutputs().forEach((e=>this._outputs.add(e)))}))}if(t.executionCountChange){if(t.executionCountChange.newValue&&(this.isDirty||!t.executionCountChange.oldValue)){this._setDirty(false)}this.stateChanged.emit({name:"executionCount",oldValue:t.executionCountChange.oldValue,newValue:t.executionCountChange.newValue})}if(t.sourceChange&&this.executionCount!==null){this._setDirty(this._executedCode!==this.sharedModel.getSource().trim())}}_setDirty(e){if(!e){this._executedCode=this.sharedModel.getSource().trim()}if(e!==this._isDirty){this._isDirty=e;this.stateChanged.emit({name:"isDirty",oldValue:!e,newValue:e})}}}(function(e){class t{createOutputArea(e){return new R.OutputAreaModel(e)}}e.ContentFactory=t;e.defaultContentFactory=new t})($||($={}));var q=n(36168);const K="jp-Placeholder";const J="jp-Placeholder-prompt jp-InputPrompt";const Z="jp-Placeholder-prompt jp-OutputPrompt";const G="jp-Placeholder-content";const Y="jp-InputPlaceholder";const X="jp-OutputPlaceholder";class Q extends w.Widget{constructor(e){var t,n,i;const s=document.createElement("div");super({node:s});const o=((t=e.translator)!==null&&t!==void 0?t:q.nullTranslator).load("jupyterlab");const r=document.createElement("div");r.className=(n=e.promptClass)!==null&&n!==void 0?n:"";s.insertAdjacentHTML("afterbegin",r.outerHTML);this._cell=document.createElement("div");this._cell.classList.add(G);this._cell.title=o.__("Click to expand");const a=this._cell.appendChild(document.createElement("div"));a.classList.add("jp-Placeholder-contentContainer");this._textContent=a.appendChild(document.createElement("span"));this._textContent.className="jp-PlaceholderText";this._textContent.innerText=(i=e.text)!==null&&i!==void 0?i:"";s.appendChild(this._cell);h.ellipsesIcon.element({container:a.appendChild(document.createElement("span")),className:"jp-MoreHorizIcon",elementPosition:"center",height:"auto",width:"32px"});this.addClass(K);this._callback=e.callback}set text(e){this._textContent.innerText=e}get text(){return this._textContent.innerText}onAfterAttach(e){super.onAfterAttach(e);this.node.addEventListener("click",this._callback)}onBeforeDetach(e){this.node.removeEventListener("click",this._callback);super.onBeforeDetach(e)}}class ee extends Q{constructor(e){super({...e,promptClass:J});this.addClass(Y)}}class te extends Q{constructor(e){super({...e,promptClass:Z});this.addClass(X)}}var ne=n(96912);var ie=n(22873);var se=n(15645);const oe="jp-mod-selected";class re extends ne.EditorSearchProvider{constructor(e){super();this.cell=e;if(!this.cell.inViewport&&!this.cell.editor){void(0,ie.signalToPromise)(e.inViewportChanged).then((([,e])=>{if(e){this.cmHandler.setEditor(this.editor)}}))}}get editor(){return this.cell.editor}get model(){return this.cell.model}}class ae extends re{constructor(e){super(e);this.currentProviderIndex=-1;this.outputsProvider=[];const t=this.cell.outputArea;this._onOutputsChanged(t,t.widgets.length).catch((e=>{console.error(`Failed to initialize search on cell outputs.`,e)}));t.outputLengthChanged.connect(this._onOutputsChanged,this);t.disposed.connect((()=>{t.outputLengthChanged.disconnect(this._onOutputsChanged)}),this)}get matchesCount(){if(!this.isActive){return 0}return super.matchesCount+this.outputsProvider.reduce(((e,t)=>{var n;return e+((n=t.matchesCount)!==null&&n!==void 0?n:0)}),0)}async clearHighlight(){await super.clearHighlight();await Promise.all(this.outputsProvider.map((e=>e.clearHighlight())))}dispose(){if(this.isDisposed){return}super.dispose();this.outputsProvider.map((e=>{e.dispose()}));this.outputsProvider.length=0}async highlightNext(e,t){if(this.matchesCount===0||!this.isActive){this.currentIndex=null}else{if(this.currentProviderIndex===-1){const e=await super.highlightNext(true,t);if(e){this.currentIndex=this.cmHandler.currentIndex;return e}else{this.currentProviderIndex=0}}while(this.currentProviderIndex<this.outputsProvider.length){const e=this.outputsProvider[this.currentProviderIndex];const t=await e.highlightNext(false);if(t){this.currentIndex=super.matchesCount+this.outputsProvider.slice(0,this.currentProviderIndex).reduce(((e,t)=>{var n;return e+=(n=t.matchesCount)!==null&&n!==void 0?n:0}),0)+e.currentMatchIndex;return t}else{this.currentProviderIndex+=1}}this.currentProviderIndex=-1;this.currentIndex=null;return undefined}}async highlightPrevious(){if(this.matchesCount===0||!this.isActive){this.currentIndex=null}else{if(this.currentIndex===null){this.currentProviderIndex=this.outputsProvider.length-1}while(this.currentProviderIndex>=0){const e=this.outputsProvider[this.currentProviderIndex];const t=await e.highlightPrevious(false);if(t){this.currentIndex=super.matchesCount+this.outputsProvider.slice(0,this.currentProviderIndex).reduce(((e,t)=>{var n;return e+=(n=t.matchesCount)!==null&&n!==void 0?n:0}),0)+e.currentMatchIndex;return t}else{this.currentProviderIndex-=1}}const e=await super.highlightPrevious();if(e){this.currentIndex=this.cmHandler.currentIndex;return e}else{this.currentIndex=null;return undefined}}}async startQuery(e,t){await super.startQuery(e,t);if((t===null||t===void 0?void 0:t.output)!==false&&this.isActive){await Promise.all(this.outputsProvider.map((t=>t.startQuery(e))))}}async endQuery(){var e;await super.endQuery();if(((e=this.filters)===null||e===void 0?void 0:e.output)!==false&&this.isActive){await Promise.all(this.outputsProvider.map((e=>e.endQuery())))}}async _onOutputsChanged(e,t){var n;this.outputsProvider.forEach((e=>{e.dispose()}));this.outputsProvider.length=0;this.currentProviderIndex=-1;this.outputsProvider=this.cell.outputArea.widgets.map((e=>new se.GenericSearchProvider(e)));if(this.isActive&&this.query&&((n=this.filters)===null||n===void 0?void 0:n.output)!==false){await Promise.all([this.outputsProvider.map((e=>{void e.startQuery(this.query)}))])}this._stateChanged.emit()}}class le extends re{constructor(e){super(e);this._unrenderedByHighligh=false;this.renderedProvider=new se.GenericSearchProvider(e.renderer)}async clearHighlight(){await super.clearHighlight();await this.renderedProvider.clearHighlight()}dispose(){if(this.isDisposed){return}super.dispose();this.renderedProvider.dispose()}async endQuery(){await super.endQuery();await this.renderedProvider.endQuery()}async highlightNext(){let e=undefined;if(!this.isActive){return e}const t=this.cell;if(t.rendered&&this.matchesCount>0){this._unrenderedByHighligh=true;const e=(0,ie.signalToPromise)(t.renderedChanged);t.rendered=false;await e}e=await super.highlightNext();return e}async highlightPrevious(){let e=undefined;const t=this.cell;if(t.rendered&&this.matchesCount>0){this._unrenderedByHighligh=true;const e=(0,ie.signalToPromise)(t.renderedChanged);t.rendered=false;await e}e=await super.highlightPrevious();return e}async startQuery(e,t){await super.startQuery(e,t);const n=this.cell;if(n.rendered){this.onRenderedChanged(n,n.rendered)}n.renderedChanged.connect(this.onRenderedChanged,this)}async replaceAllMatches(e){const t=await super.replaceAllMatches(e);if(this.cell.rendered){this.cell.update()}return t}onRenderedChanged(e,t){var n;if(!this._unrenderedByHighligh){this.currentIndex=null}this._unrenderedByHighligh=false;if(this.isActive){if(t){void this.renderedProvider.startQuery(this.query)}else{(n=e.editor)===null||n===void 0?void 0:n.setCursorPosition({column:0,line:0});void this.renderedProvider.endQuery()}}}}function de(e){if(e.isPlaceholder()){return new re(e)}switch(e.model.type){case"code":return new ae(e);case"markdown":return new le(e);default:return new re(e)}}var ce=n(66143);var he=n(33112);var ue=n(85147);var pe=n(5596);var me=n(58740);var ge=n(28821);var fe=n(95905);const ve="jp-CellResizeHandle";const _e="jp-mod-resizedCell";class be extends w.Widget{constructor(e){super();this.targetNode=e;this._isActive=false;this._isDragging=false;this.addClass(ve);this._resizer=new fe.Throttler((e=>this._resize(e)),50)}dispose(){this._resizer.dispose();super.dispose()}handleEvent(e){var t,n;switch(e.type){case"dblclick":(t=this.targetNode.parentNode)===null||t===void 0?void 0:t.childNodes.forEach((e=>{e.classList.remove(_e)}));document.documentElement.style.setProperty("--jp-side-by-side-output-size",`1fr`);this._isActive=false;break;case"mousedown":this._isDragging=true;if(!this._isActive){(n=this.targetNode.parentNode)===null||n===void 0?void 0:n.childNodes.forEach((e=>{e.classList.add(_e)}));this._isActive=true}window.addEventListener("mousemove",this);window.addEventListener("mouseup",this);break;case"mousemove":{if(this._isActive&&this._isDragging){void this._resizer.invoke(e)}break}case"mouseup":this._isDragging=false;window.removeEventListener("mousemove",this);window.removeEventListener("mouseup",this);break;default:break}}onAfterAttach(e){this.node.addEventListener("dblclick",this);this.node.addEventListener("mousedown",this);super.onAfterAttach(e)}onBeforeDetach(e){this.node.removeEventListener("dblclick",this);this.node.removeEventListener("mousedown",this);super.onBeforeDetach(e)}_resize(e){const{width:t,x:n}=this.targetNode.getBoundingClientRect();const i=e.clientX-n;const s=t/i-1;if(0<s){const e=Math.max(Math.min(Math.abs(s),50),.05);document.documentElement.style.setProperty("--jp-side-by-side-output-size",`${e}fr`)}}}const ye="jp-Cell";const we="jp-Cell-header";const Ce="jp-Cell-footer";const xe="jp-Cell-inputWrapper";const Se="jp-Cell-outputWrapper";const ke="jp-Cell-inputArea";const je="jp-Cell-outputArea";const Me="jp-Cell-inputCollapser";const Ee="jp-Cell-outputCollapser";const Ie="jp-mod-dirty";const Te="jp-CodeCell";const De="jp-MarkdownCell";const Le="jp-MarkdownOutput";const Pe="jp-MarkdownHeadingCollapsed";const Ae="jp-collapseHeadingButton";const Re="jp-showHiddenCellsButton";const Ne="jp-RawCell";const Oe="jp-mod-rendered";const Be="jp-mod-noOutputs";const Fe="Type Markdown and LaTeX: $ ^2 $";const ze=1e3;const He="application/x-jupyter-icontentsrich";class We extends w.Widget{constructor(e){var t,n,i,s;super();this.prompt="";this._displayChanged=new P.Signal(this);this._editorConfig={};this._inputHidden=false;this._inViewportChanged=new P.Signal(this);this._readOnly=false;this._ready=new pe.PromiseDelegate;this._resizeDebouncer=new fe.Debouncer((()=>{this._displayChanged.emit()}),0);this._syncCollapse=false;this._syncEditable=false;this.addClass(ye);const o=this._model=e.model;this.contentFactory=e.contentFactory;this.layout=(t=e.layout)!==null&&t!==void 0?t:new w.PanelLayout;this.translator=(n=e.translator)!==null&&n!==void 0?n:q.nullTranslator;this._editorConfig=(i=e.editorConfig)!==null&&i!==void 0?i:{};this._placeholder=true;this._inViewport=false;this.placeholder=(s=e.placeholder)!==null&&s!==void 0?s:true;o.metadataChanged.connect(this.onMetadataChanged,this)}initializeState(){this.loadCollapseState();this.loadEditableState();return this}get displayChanged(){return this._displayChanged}get inViewport(){return this._inViewport}set inViewport(e){if(this._inViewport!==e){this._inViewport=e;this._inViewportChanged.emit(this._inViewport)}}get inViewportChanged(){return this._inViewportChanged}get placeholder(){return this._placeholder}set placeholder(e){if(this._placeholder!==e&&e===false){this.initializeDOM();this._placeholder=e;this._ready.resolve()}}get promptNode(){if(this.placeholder){return null}if(!this._inputHidden){return this._input.promptNode}else{return this._inputPlaceholder.node.firstElementChild}}get editorWidget(){var e,t;return(t=(e=this._input)===null||e===void 0?void 0:e.editorWidget)!==null&&t!==void 0?t:null}get editor(){var e,t;return(t=(e=this._input)===null||e===void 0?void 0:e.editor)!==null&&t!==void 0?t:null}get editorConfig(){return this._editorConfig}get headings(){return new Array}get model(){return this._model}get inputArea(){return this._input}get readOnly(){return this._readOnly}set readOnly(e){if(e===this._readOnly){return}this._readOnly=e;if(this.syncEditable){this.saveEditableState()}this.update()}isPlaceholder(){return this.placeholder}saveEditableState(){const{sharedModel:e}=this.model;const t=e.getMetadata("editable");if(this.readOnly&&t===false||!this.readOnly&&t===undefined){return}if(this.readOnly){e.setMetadata("editable",false)}else{e.deleteMetadata("editable")}}loadEditableState(){this.readOnly=this.model.sharedModel.getMetadata("editable")===false}get ready(){return this._ready.promise}setPrompt(e){var t;this.prompt=e;(t=this._input)===null||t===void 0?void 0:t.setPrompt(e)}get inputHidden(){return this._inputHidden}set inputHidden(e){var t;if(this._inputHidden===e){return}if(!this.placeholder){const n=this._inputWrapper.layout;if(e){this._input.parent=null;if(this._inputPlaceholder){this._inputPlaceholder.text=(t=this.model.sharedModel.getSource().split("\n"))===null||t===void 0?void 0:t[0]}n.addWidget(this._inputPlaceholder)}else{this._inputPlaceholder.parent=null;n.addWidget(this._input)}}this._inputHidden=e;if(this.syncCollapse){this.saveCollapseState()}this.handleInputHidden(e)}saveCollapseState(){const e={...this.model.getMetadata("jupyter")};if(this.inputHidden&&e.source_hidden===true||!this.inputHidden&&e.source_hidden===undefined){return}if(this.inputHidden){e.source_hidden=true}else{delete e.source_hidden}if(Object.keys(e).length===0){this.model.deleteMetadata("jupyter")}else{this.model.setMetadata("jupyter",e)}}loadCollapseState(){var e;const t=(e=this.model.getMetadata("jupyter"))!==null&&e!==void 0?e:{};this.inputHidden=!!t.source_hidden}handleInputHidden(e){return}get syncCollapse(){return this._syncCollapse}set syncCollapse(e){if(this._syncCollapse===e){return}this._syncCollapse=e;if(e){this.loadCollapseState()}}get syncEditable(){return this._syncEditable}set syncEditable(e){if(this._syncEditable===e){return}this._syncEditable=e;if(e){this.loadEditableState()}}clone(){const e=this.constructor;return new e({model:this.model,contentFactory:this.contentFactory,placeholder:false,translator:this.translator})}dispose(){if(this.isDisposed){return}this._resizeDebouncer.dispose();this._input=null;this._model=null;this._inputWrapper=null;this._inputPlaceholder=null;super.dispose()}updateEditorConfig(e){this._editorConfig={...this._editorConfig,...e};if(this.editor){this.editor.setOptions(this._editorConfig)}}initializeDOM(){if(!this.placeholder){return}const e=this.contentFactory;const t=this._model;const n=e.createCellHeader();n.addClass(we);this.layout.addWidget(n);const i=this._inputWrapper=new w.Panel;i.addClass(xe);const s=new b;s.addClass(Me);const o=this._input=new D({model:t,contentFactory:e,editorOptions:this.getEditorOptions()});o.addClass(ke);i.addWidget(s);i.addWidget(o);this.layout.addWidget(i);this._inputPlaceholder=new ee({callback:()=>{this.inputHidden=!this.inputHidden},text:o.model.sharedModel.getSource().split("\n")[0],translator:this.translator});o.model.contentChanged.connect(((e,t)=>{var n;if(this._inputPlaceholder&&this.inputHidden){this._inputPlaceholder.text=(n=e.sharedModel.getSource().split("\n"))===null||n===void 0?void 0:n[0]}}));if(this.inputHidden){o.parent=null;i.layout.addWidget(this._inputPlaceholder)}const r=this.contentFactory.createCellFooter();r.addClass(Ce);this.layout.addWidget(r)}getEditorOptions(){return{config:this.editorConfig}}onBeforeAttach(e){if(this.placeholder){this.placeholder=false}}onAfterAttach(e){this.update()}onActivateRequest(e){var t;(t=this.editor)===null||t===void 0?void 0:t.focus()}onResize(e){void this._resizeDebouncer.invoke()}onUpdateRequest(e){var t,n;if(!this._model){return}if(((t=this.editor)===null||t===void 0?void 0:t.getOption("readOnly"))!==this._readOnly){(n=this.editor)===null||n===void 0?void 0:n.setOption("readOnly",this._readOnly)}}onContentChanged(){var e;if(this.inputHidden&&this._inputPlaceholder){this._inputPlaceholder.text=(e=this.model.sharedModel.getSource().split("\n"))===null||e===void 0?void 0:e[0]}}onMetadataChanged(e,t){switch(t.key){case"jupyter":if(this.syncCollapse){this.loadCollapseState()}break;case"editable":if(this.syncEditable){this.loadEditableState()}break;default:break}}}(function(e){let t;(function(e){e[e["HTML"]=0]="HTML";e[e["Markdown"]=1]="Markdown"})(t=e.HeadingType||(e.HeadingType={}));class n{constructor(e){this._editorFactory=e.editorFactory}get editorFactory(){return this._editorFactory}createCellHeader(){return new S}createCellFooter(){return new k}createInputPrompt(){return new L}createOutputPrompt(){return new R.OutputPrompt}createStdin(e){return new R.Stdin(e)}}e.ContentFactory=n})(We||(We={}));class Ve extends w.PanelLayout{onBeforeAttach(e){let t=true;const n=this.parent.node.firstElementChild;for(const i of this){if(n){if(i.node===n){t=false}else{ge.MessageLoop.sendMessage(i,e);if(t){this.parent.node.insertBefore(i.node,n)}else{this.parent.node.appendChild(i.node)}if(!this.parent.isHidden){i.setFlag(w.Widget.Flag.IsVisible)}ge.MessageLoop.sendMessage(i,w.Widget.Msg.AfterAttach)}}}}onAfterDetach(e){for(const t of this){if(!t.hasClass(Se)&&t.node.isConnected){ge.MessageLoop.sendMessage(t,w.Widget.Msg.BeforeDetach);this.parent.node.removeChild(t.node);ge.MessageLoop.sendMessage(t,e)}}}}class Ue extends We{constructor(e){var t;super({layout:new Ve,...e,placeholder:true});this._headingsCache=null;this._outputHidden=false;this._outputWrapper=null;this._outputPlaceholder=null;this._syncScrolled=false;this.addClass(Te);const n=this.translator.load("jupyterlab");const i=this._rendermime=e.rendermime;const s=this.contentFactory;const o=this.model;this.maxNumberOutputs=e.maxNumberOutputs;const r=o.outputs.length===0?n.__("Code Cell Content"):n.__("Code Cell Content with Output");this.node.setAttribute("aria-label",r);const a=this._output=new R.OutputArea({model:this.model.outputs,rendermime:i,contentFactory:s,maxNumberOutputs:this.maxNumberOutputs,translator:this.translator,promptOverlay:true,inputHistoryScope:e.inputHistoryScope});a.addClass(je);a.toggleScrolling.connect((()=>{this.outputsScrolled=!this.outputsScrolled}));this.placeholder=(t=e.placeholder)!==null&&t!==void 0?t:true;o.outputs.changed.connect(this.onOutputChanged,this);o.outputs.stateChanged.connect(this.onOutputChanged,this);o.stateChanged.connect(this.onStateChanged,this)}initializeDOM(){if(!this.placeholder){return}super.initializeDOM();this.setPrompt(this.prompt);const e=this._outputWrapper=new w.Panel;e.addClass(Se);const t=new y;t.addClass(Ee);e.addWidget(t);if(this.model.outputs.length===0){this.addClass(Be)}this._output.outputLengthChanged.connect(this._outputLengthHandler,this);e.addWidget(this._output);const n=this.layout;n.insertWidget(n.widgets.length-1,new be(this.node));n.insertWidget(n.widgets.length-1,e);if(this.model.isDirty){this.addClass(Ie)}this._outputPlaceholder=new te({callback:()=>{this.outputHidden=!this.outputHidden},text:this.getOutputPlaceholderText(),translator:this.translator});const i=e.layout;if(this.outputHidden){i.removeWidget(this._output);i.addWidget(this._outputPlaceholder);if(this.inputHidden&&!e.isHidden){this._outputWrapper.hide()}}const s=this.translator.load("jupyterlab");const o=this.model.outputs.length===0?s.__("Code Cell Content"):s.__("Code Cell Content with Output");this.node.setAttribute("aria-label",o)}getOutputPlaceholderText(){var e;const t=this.model.outputs.get(0);const n=t===null||t===void 0?void 0:t.data;if(!n){return undefined}const i=["text/html","image/svg+xml","application/pdf","text/markdown","text/plain","application/vnd.jupyter.stderr","application/vnd.jupyter.stdout","text"];const s=i.find((e=>{const n=t.data[e];return(Array.isArray(n)?typeof n[0]:typeof n)==="string"}));const o=t.data[s!==null&&s!==void 0?s:""];if(o!==undefined){return(e=Array.isArray(o)?o:o===null||o===void 0?void 0:o.split("\n"))===null||e===void 0?void 0:e.find((e=>e!==""))}return undefined}initializeState(){super.initializeState();this.loadScrolledState();this.setPrompt(`${this.model.executionCount||""}`);return this}get headings(){if(!this._headingsCache){const e=[];const t=this.model.outputs;for(let n=0;n<t.length;n++){const i=t.get(n);let s=null;let o=null;Object.keys(i.data).forEach((e=>{if(!o&&ue.TableOfContentsUtils.Markdown.isMarkdown(e)){o=e}else if(!s&&ue.TableOfContentsUtils.isHTML(e)){s=e}}));if(s){e.push(...ue.TableOfContentsUtils.getHTMLHeadings(this._rendermime.sanitizer.sanitize(i.data[s])).map((e=>({...e,outputIndex:n,type:We.HeadingType.HTML}))))}else if(o){e.push(...ue.TableOfContentsUtils.Markdown.getHeadings(i.data[o]).map((e=>({...e,outputIndex:n,type:We.HeadingType.Markdown}))))}}this._headingsCache=e}return[...this._headingsCache]}get outputArea(){return this._output}get outputHidden(){return this._outputHidden}set outputHidden(e){var t;if(this._outputHidden===e){return}if(!this.placeholder){const n=this._outputWrapper.layout;if(e){n.removeWidget(this._output);n.addWidget(this._outputPlaceholder);if(this.inputHidden&&!this._outputWrapper.isHidden){this._outputWrapper.hide()}if(this._outputPlaceholder){this._outputPlaceholder.text=(t=this.getOutputPlaceholderText())!==null&&t!==void 0?t:""}}else{if(this._outputWrapper.isHidden){this._outputWrapper.show()}n.removeWidget(this._outputPlaceholder);n.addWidget(this._output)}}this._outputHidden=e;if(this.syncCollapse){this.saveCollapseState()}}saveCollapseState(){this.model.sharedModel.transact((()=>{super.saveCollapseState();const e=this.model.getMetadata("collapsed");if(this.outputHidden&&e===true||!this.outputHidden&&e===undefined){return}if(this.outputHidden){this.model.setMetadata("collapsed",true)}else{this.model.deleteMetadata("collapsed")}}),false)}loadCollapseState(){super.loadCollapseState();this.outputHidden=!!this.model.getMetadata("collapsed")}get outputsScrolled(){return this._outputsScrolled}set outputsScrolled(e){this.toggleClass("jp-mod-outputsScrolled",e);this._outputsScrolled=e;if(this.syncScrolled){this.saveScrolledState()}}saveScrolledState(){const e=this.model.getMetadata("scrolled");if(this.outputsScrolled&&e===true||!this.outputsScrolled&&e===undefined){return}if(this.outputsScrolled){this.model.setMetadata("scrolled",true)}else{this.model.deleteMetadata("scrolled")}}loadScrolledState(){if(this.model.getMetadata("scrolled")==="auto"){this.outputsScrolled=false}else{this.outputsScrolled=!!this.model.getMetadata("scrolled")}}get syncScrolled(){return this._syncScrolled}set syncScrolled(e){if(this._syncScrolled===e){return}this._syncScrolled=e;if(e){this.loadScrolledState()}}handleInputHidden(e){if(this.placeholder){return}if(!e&&this._outputWrapper.isHidden){this._outputWrapper.show()}else if(e&&!this._outputWrapper.isHidden&&this._outputHidden){this._outputWrapper.hide()}}clone(){const e=this.constructor;return new e({model:this.model,contentFactory:this.contentFactory,rendermime:this._rendermime,placeholder:false,translator:this.translator})}cloneOutputArea(){return new R.SimplifiedOutputArea({model:this.model.outputs,contentFactory:this.contentFactory,rendermime:this._rendermime})}dispose(){if(this.isDisposed){return}this._output.outputLengthChanged.disconnect(this._outputLengthHandler,this);this._rendermime=null;this._output=null;this._outputWrapper=null;this._outputPlaceholder=null;super.dispose()}onStateChanged(e,t){switch(t.name){case"executionCount":this.setPrompt(`${e.executionCount||""}`);break;case"isDirty":if(e.isDirty){this.addClass(Ie)}else{this.removeClass(Ie)}break;default:break}}onOutputChanged(){var e;this._headingsCache=null;if(this._outputPlaceholder&&this.outputHidden){this._outputPlaceholder.text=(e=this.getOutputPlaceholderText())!==null&&e!==void 0?e:""}}onMetadataChanged(e,t){switch(t.key){case"scrolled":if(this.syncScrolled){this.loadScrolledState()}break;case"collapsed":if(this.syncCollapse){this.loadCollapseState()}break;default:break}super.onMetadataChanged(e,t)}_outputLengthHandler(e,t){const n=t===0?true:false;this.toggleClass(Be,n);const i=this.translator.load("jupyterlab");const s=n?i.__("Code Cell Content"):i.__("Code Cell Content with Output");this.node.setAttribute("aria-label",s)}}(function(e){async function t(e,t,n){var i;const s=e.model;const o=s.sharedModel.getSource();if(!o.trim()||!((i=t.session)===null||i===void 0?void 0:i.kernel)){s.sharedModel.transact((()=>{s.clearExecution()}),false);return}const r={cellId:s.sharedModel.getId()};n={...s.metadata,...n,...r};const{recordTiming:a}=n;s.sharedModel.transact((()=>{s.clearExecution();e.outputHidden=false}),false);e.setPrompt("*");s.trusted=true;let l;try{const i=R.OutputArea.execute(o,e.outputArea,t,n);if(a){const t=e=>{let t;switch(e.header.msg_type){case"status":t=`status.${e.content.execution_state}`;break;case"execute_input":t="execute_input";break;default:return true}const n=e.header.date||(new Date).toISOString();const i=Object.assign({},s.getMetadata("execution"));i[`iopub.${t}`]=n;s.setMetadata("execution",i);return true};e.outputArea.future.registerMessageHook(t)}else{s.deleteMetadata("execution")}l=e.outputArea.future;const r=await i;s.executionCount=r.content.execution_count;if(a){const e=Object.assign({},s.getMetadata("execution"));const t=r.metadata.started;if(t){e["shell.execute_reply.started"]=t}const n=r.header.date;e["shell.execute_reply"]=n||(new Date).toISOString();s.setMetadata("execution",e)}return r}catch(d){if(l&&!e.isDisposed&&e.outputArea.future===l){e.setPrompt("")}throw d}}e.execute=t})(Ue||(Ue={}));class $e extends We{handleEvent(e){switch(e.type){case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;default:break}}getEditorOptions(){var e,t;const n=(e=super.getEditorOptions())!==null&&e!==void 0?e:{};n.extensions=[...(t=n.extensions)!==null&&t!==void 0?t:[],ce.EditorView.domEventHandlers({dragenter:e=>{e.preventDefault()},dragover:e=>{e.preventDefault()},drop:e=>{this._evtNativeDrop(e)},paste:e=>{this._evtPaste(e)}})];return n}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;t.addEventListener("lm-dragover",this);t.addEventListener("lm-drop",this)}onBeforeDetach(e){const t=this.node;t.removeEventListener("lm-dragover",this);t.removeEventListener("lm-drop",this);super.onBeforeDetach(e)}_evtDragOver(e){const t=(0,me.some)(he.imageRendererFactory.mimeTypes,(t=>{if(!e.mimeData.hasData(He)){return false}const n=e.mimeData.getData(He);return n.model.mimetype===t}));if(!t){return}e.preventDefault();e.stopPropagation();e.dropAction=e.proposedAction}_evtPaste(e){if(e.clipboardData){const t=e.clipboardData.items;for(let n=0;n<t.length;n++){if(t[n].type==="text/plain"){if(n<t.length-1&&t[n+1].kind==="file"){continue}t[n].getAsString((e=>{var t,n;(n=(t=this.editor).replaceSelection)===null||n===void 0?void 0:n.call(t,e)}))}this._attachFiles(e.clipboardData.items)}}e.preventDefault()}_evtNativeDrop(e){if(e.dataTransfer){this._attachFiles(e.dataTransfer.items)}e.preventDefault()}_evtDrop(e){const t=e.mimeData.types().filter((t=>{if(t===He){const t=e.mimeData.getData(He);return he.imageRendererFactory.mimeTypes.indexOf(t.model.mimetype)!==-1}return he.imageRendererFactory.mimeTypes.indexOf(t)!==-1}));if(t.length===0){return}e.preventDefault();e.stopPropagation();if(e.proposedAction==="none"){e.dropAction="none";return}e.dropAction="copy";for(const n of t){if(n===He){const{model:t,withContent:n}=e.mimeData.getData(He);if(t.type==="file"){const e=this._generateURI(t.name);this.updateCellSourceWithAttachment(t.name,e);void n().then((t=>{this.model.attachments.set(e,{[t.mimetype]:t.content})}))}}else{const t=this._generateURI();this.model.attachments.set(t,{[n]:e.mimeData.getData(n)});this.updateCellSourceWithAttachment(t,t)}}}_attachFiles(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="file"){const e=n.getAsFile();if(e){this._attachFile(e)}}}}_attachFile(e){const t=new FileReader;t.onload=n=>{const{href:i,protocol:s}=ie.URLExt.parse(t.result);if(s!=="data:"){return}const o=/([\w+\/\+]+)?(?:;(charset=[\w\d-]*|base64))?,(.*)/;const r=o.exec(i);if(!r||r.length!==4){return}const a=r[1];const l=r[3];const d={[a]:l};const c=this._generateURI(e.name);if(a.startsWith("image/")){this.model.attachments.set(c,d);this.updateCellSourceWithAttachment(e.name,c)}};t.onerror=t=>{console.error(`Failed to attach ${e.name}`+t)};t.readAsDataURL(e)}_generateURI(e=""){const t=e.lastIndexOf(".");return t!==-1?pe.UUID.uuid4().concat(e.substring(t)):pe.UUID.uuid4()}}class qe extends $e{constructor(e){var t,n,i,s;super({...e,placeholder:true});this._headingsCache=null;this._headingCollapsedChanged=new P.Signal(this);this._prevText="";this._rendered=true;this._renderedChanged=new P.Signal(this);this._showEditorForReadOnlyMarkdown=true;this.addClass(De);this.model.contentChanged.connect(this.onContentChanged,this);const o=this.translator.load("jupyterlab");this.node.setAttribute("aria-label",o.__("Markdown Cell Content"));this._rendermime=e.rendermime.clone({resolver:new A.AttachmentsResolver({parent:(t=e.rendermime.resolver)!==null&&t!==void 0?t:undefined,model:this.model.attachments})});this._renderer=this._rendermime.createRenderer("text/markdown");this._renderer.addClass(Le);this._headingCollapsed=(n=this.model.getMetadata(Pe))!==null&&n!==void 0?n:false;this._showEditorForReadOnlyMarkdown=(i=e.showEditorForReadOnlyMarkdown)!==null&&i!==void 0?i:qe.defaultShowEditorForReadOnlyMarkdown;this.placeholder=(s=e.placeholder)!==null&&s!==void 0?s:true;this._monitor=new ie.ActivityMonitor({signal:this.model.contentChanged,timeout:ze});this.ready.then((()=>{if(this.isDisposed){return}this._monitor.activityStopped.connect((()=>{if(this._rendered){this.update()}}),this)})).catch((e=>{console.error("Failed to be ready",e)}))}get headingInfo(){const e=this.headings;if(e.length>0){const{text:t,level:n}=e.reduce(((e,t)=>e.level<=t.level?e:t),e[0]);return{text:t,level:n}}else{return{text:"",level:-1}}}get headings(){if(!this._headingsCache){const e=ue.TableOfContentsUtils.Markdown.getHeadings(this.model.sharedModel.getSource());this._headingsCache=e.map((e=>({...e,type:We.HeadingType.Markdown})))}return[...this._headingsCache]}get headingCollapsed(){return this._headingCollapsed}set headingCollapsed(e){var t;if(this._headingCollapsed!==e){this._headingCollapsed=e;if(e){this.model.setMetadata(Pe,e)}else if(this.model.getMetadata(Pe)!=="undefined"){this.model.deleteMetadata(Pe)}const n=(t=this.inputArea)===null||t===void 0?void 0:t.promptNode.getElementsByClassName(Ae)[0];if(n){if(e){n.classList.add("jp-mod-collapsed")}else{n.classList.remove("jp-mod-collapsed")}}this.renderCollapseButtons(this._renderer);this._headingCollapsedChanged.emit(this._headingCollapsed)}}get numberChildNodes(){return this._numberChildNodes}set numberChildNodes(e){this._numberChildNodes=e;this.renderCollapseButtons(this._renderer)}get headingCollapsedChanged(){return this._headingCollapsedChanged}get rendered(){return this._rendered}set rendered(e){if(this.readOnly&&this._showEditorForReadOnlyMarkdown===false){e=true}if(e===this._rendered){return}this._rendered=e;this._handleRendered().then((()=>{this._displayChanged.emit();this._renderedChanged.emit(this._rendered)})).catch((e=>{console.error("Failed to render",e)}))}get renderedChanged(){return this._renderedChanged}get showEditorForReadOnly(){return this._showEditorForReadOnlyMarkdown}set showEditorForReadOnly(e){this._showEditorForReadOnlyMarkdown=e;if(e===false){this.rendered=true}}get renderer(){return this._renderer}dispose(){if(this.isDisposed){return}this._monitor.dispose();super.dispose()}initializeDOM(){if(!this.placeholder){return}super.initializeDOM();this.renderCollapseButtons(this._renderer);this._handleRendered().catch((e=>{console.error("Failed to render",e)}))}maybeCreateCollapseButton(){var e;const{level:t}=this.headingInfo;if(t>0&&((e=this.inputArea)===null||e===void 0?void 0:e.promptNode.getElementsByClassName(Ae).length)==0){let e=this.inputArea.promptNode.appendChild(document.createElement("button"));e.className=`jp-Button ${Ae}`;e.setAttribute("data-heading-level",t.toString());if(this._headingCollapsed){e.classList.add("jp-mod-collapsed")}else{e.classList.remove("jp-mod-collapsed")}e.onclick=e=>{this.headingCollapsed=!this.headingCollapsed}}}maybeCreateOrUpdateExpandButton(){const e=this.node.getElementsByClassName(Re);let t=this.translator.load("jupyterlab");let n=t._n("%1 cell hidden","%1 cells hidden",this._numberChildNodes);let i=this.headingCollapsed&&this._numberChildNodes>0&&e.length==0;if(i){const e=document.createElement("button");e.className=`jp-mod-minimal jp-Button ${Re}`;h.addIcon.render(e);const t=document.createElement("div");t.textContent=n;e.appendChild(t);e.onclick=()=>{this.headingCollapsed=false};this.node.appendChild(e)}let s=this.headingCollapsed&&this._numberChildNodes>0&&e.length==1;if(s){e[0].childNodes[1].textContent=n}let o=!(this.headingCollapsed&&this._numberChildNodes>0);if(o){for(const t of e){this.node.removeChild(t)}}}onContentChanged(){super.onContentChanged();this._headingsCache=null}renderCollapseButtons(e){this.node.classList.toggle(Pe,this._headingCollapsed);this.maybeCreateCollapseButton();this.maybeCreateOrUpdateExpandButton()}renderInput(e){this.addClass(Oe);if(!this.placeholder&&!this.isDisposed){this.renderCollapseButtons(e);this.inputArea.renderInput(e)}}showEditor(){this.removeClass(Oe);if(!this.placeholder&&!this.isDisposed){this.inputArea.showEditor();let e=(this.model.sharedModel.getSource().match(/^#+/g)||[""])[0].length;if(e>0){this.inputArea.editor.setCursorPosition({column:e+1,line:0})}}}onUpdateRequest(e){this._handleRendered().catch((e=>{console.error("Failed to render",e)}));super.onUpdateRequest(e)}updateCellSourceWithAttachment(e,t){var n,i;const s=`![${e}](attachment:${t!==null&&t!==void 0?t:e})`;(i=(n=this.editor)===null||n===void 0?void 0:n.replaceSelection)===null||i===void 0?void 0:i.call(n,s)}async _handleRendered(){if(!this._rendered){this.showEditor()}else{await this._updateRenderedInput();if(this._rendered){this.renderInput(this._renderer)}}}_updateRenderedInput(){if(this.placeholder){return Promise.resolve()}const e=this.model;const t=e&&e.sharedModel.getSource()||Fe;if(t!==this._prevText){const e=new he.MimeModel({data:{"text/markdown":t}});this._prevText=t;return this._renderer.renderModel(e)}return Promise.resolve()}clone(){const e=this.constructor;return new e({model:this.model,contentFactory:this.contentFactory,rendermime:this._rendermime,placeholder:false,translator:this.translator})}}(function(e){e.defaultShowEditorForReadOnlyMarkdown=true})(qe||(qe={}));class Ke extends We{constructor(e){super(e);this.addClass(Ne);const t=this.translator.load("jupyterlab");this.node.setAttribute("aria-label",t.__("Raw Cell Content"))}clone(){const e=this.constructor;return new e({model:this.model,contentFactory:this.contentFactory,placeholder:false,translator:this.translator})}}},5956:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(98896);var a=n(22748);var l=n(49914);var d=n(38613);var c=n(37935);var h=n(59240);var u=n(5333);var p=n(99434);var m=n(93379);var g=n.n(m);var f=n(7795);var v=n.n(f);var _=n(90569);var b=n.n(_);var y=n(3565);var w=n.n(y);var C=n(19216);var x=n.n(C);var S=n(44589);var k=n.n(S);var j=n(90346);var M={};M.styleTagTransform=k();M.setAttributes=w();M.insert=b().bind(null,"head");M.domAPI=v();M.insertStyleElement=x();var E=g()(j.Z,M);const I=j.Z&&j.Z.locals?j.Z.locals:undefined},94131:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>_});var i=n(74202);var s=n(28416);var o=n.n(s);var r=n(52435);var a=n(58740);var l=n(36168);const d="jp-CellTags";const c="jp-CellTags-Tag";const h="jp-CellTags-Applied";const u="jp-CellTags-Unapplied";const p="jp-CellTags-Holder";const m="jp-CellTags-Add";const g="jp-CellTags-Empty";class f{constructor(e,t){this._tracker=e;this._translator=t||l.nullTranslator;this._trans=this._translator.load("jupyterlab");this._editing=false}addTag(e,t){const n=e.formData;if(t&&!n.includes(t)){n.push(t);e.formContext.updateMetadata({[e.name]:n},true)}}pullTags(){var e,t;const n=(e=this._tracker)===null||e===void 0?void 0:e.currentWidget;const i=(t=n===null||n===void 0?void 0:n.model)===null||t===void 0?void 0:t.cells;if(i===undefined){return[]}const s=(0,a.reduce)(i,((e,t)=>{var n;const i=(n=t.getMetadata("tags"))!==null&&n!==void 0?n:[];return[...e,...i]}),[]);return[...new Set(s)].filter((e=>e!==""))}_emptyAddTag(e){e.value="";e.style.width="";e.classList.add(g)}_onAddTagKeyDown(e,t){const n=t.target;if(t.ctrlKey)return;if(t.key==="Enter"){this.addTag(e,n.value)}else if(t.key==="Escape"){this._emptyAddTag(n)}}_onAddTagFocus(e){if(!this._editing){e.target.blur()}}_onAddTagBlur(e){if(this._editing){this._editing=false;this._emptyAddTag(e)}}_onChange(e){if(!e.target.value){this._emptyAddTag(e.target)}else{e.target.classList.remove(g);const t=document.createElement("span");t.className=m;t.textContent=e.target.value;document.body.appendChild(t);e.target.style.setProperty("width",`calc(${t.getBoundingClientRect().width}px + var(--jp-add-tag-extra-width))`);document.body.removeChild(t)}}_onAddTagClick(e,t){const n=t.target.closest("div");const i=n===null||n===void 0?void 0:n.childNodes[0];if(!this._editing){this._editing=true;i.value="";i.focus()}else if(t.target!==i){this.addTag(e,i.value)}t.preventDefault()}_onTagClick(e,t){const n=e.formData;if(n.includes(t)){n.splice(n.indexOf(t),1)}else{n.push(t)}e.formContext.updateMetadata({[e.name]:n},true)}render(e){const t=this.pullTags();return o().createElement("div",{className:d},o().createElement("div",{className:"jp-FormGroup-fieldLabel jp-FormGroup-contentItem"},"Cell Tags"),t&&t.map(((t,n)=>o().createElement("div",{key:n,className:`${c} ${e.formData.includes(t)?h:u}`,onClick:()=>this._onTagClick(e,t)},o().createElement("div",{className:p},o().createElement("span",null,t),e.formData.includes(t)&&o().createElement(r.LabIcon.resolveReact,{icon:r.checkIcon,tag:"span",elementPosition:"center",height:"18px",width:"18px",marginLeft:"5px",marginRight:"-3px"}))))),o().createElement("div",{className:`${c} ${u}`},o().createElement("div",{className:p,onMouseDown:t=>this._onAddTagClick(e,t)},o().createElement("input",{className:`${m} ${g}`,type:"text",placeholder:this._trans.__("Add Tag"),onKeyDown:t=>this._onAddTagKeyDown(e,t),onFocus:e=>this._onAddTagFocus(e),onBlur:e=>this._onAddTagBlur(e.target),onChange:e=>{this._onChange(e)}}),o().createElement(r.LabIcon.resolveReact,{icon:r.addIcon,tag:"span",height:"18px",width:"18px",marginLeft:"5px",marginRight:"-3px"}))))}}const v={id:"@jupyterlab/celltags-extension:plugin",description:"Adds the cell tags editor.",autoStart:true,requires:[i.INotebookTracker],optional:[r.IFormRendererRegistry],activate:(e,t,n)=>{if(n){const e={fieldRenderer:e=>new f(t).render(e)};n.addRenderer("@jupyterlab/celltags-extension:plugin.renderer",e)}}};const _=[v]},48641:(e,t,n)=>{"use strict";var i=n(34849);var s=n(90516);var o=n(88164);var r=n(93379);var a=n.n(r);var l=n(7795);var d=n.n(l);var c=n(90569);var h=n.n(c);var u=n(3565);var p=n.n(u);var m=n(19216);var g=n.n(m);var f=n(44589);var v=n.n(f);var _=n(30289);var b={};b.styleTagTransform=v();b.setAttributes=p();b.insert=h().bind(null,"head");b.domAPI=d();b.insertStyleElement=g();var y=a()(_.Z,b);const w=_.Z&&_.Z.locals?_.Z.locals:undefined},95131:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CodeEditor:()=>r,CodeEditorWrapper:()=>I,CodeViewerWidget:()=>D,IEditorMimeTypeService:()=>C,IEditorServices:()=>x,IPositionModel:()=>S,JSONEditor:()=>g,LineCol:()=>w});var i=n(87519);var s=n(9154);var o=n(71372);var r;(function(e){class t{constructor(e={}){var t,n;this.standaloneModel=false;this._isDisposed=false;this._selections=new s.ObservableMap;this._mimeType="text/plain";this._mimeTypeChanged=new o.Signal(this);this.standaloneModel=typeof e.sharedModel==="undefined";this.sharedModel=(t=e.sharedModel)!==null&&t!==void 0?t:new i.YFile;this._mimeType=(n=e.mimeType)!==null&&n!==void 0?n:"text/plain"}get mimeTypeChanged(){return this._mimeTypeChanged}get selections(){return this._selections}get mimeType(){return this._mimeType}set mimeType(e){const t=this.mimeType;if(t===e){return}this._mimeType=e;this._mimeTypeChanged.emit({name:"mimeType",oldValue:t,newValue:e})}get isDisposed(){return this._isDisposed}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._selections.dispose();if(this.standaloneModel){this.sharedModel.dispose()}o.Signal.clearData(this)}}e.Model=t})(r||(r={}));var a=n(36168);var l=n(52435);var d=n(5596);var c=n(85448);const h="jp-JSONEditor";const u="jp-mod-error";const p="jp-JSONEditor-host";const m="jp-JSONEditor-header";class g extends c.Widget{constructor(e){super();this._dataDirty=false;this._inputDirty=false;this._source=null;this._originalValue=d.JSONExt.emptyObject;this._changeGuard=false;this.translator=e.translator||a.nullTranslator;this._trans=this.translator.load("jupyterlab");this.addClass(h);this.headerNode=document.createElement("div");this.headerNode.className=m;this.revertButtonNode=l.undoIcon.element({tag:"span",title:this._trans.__("Revert changes to data")});this.commitButtonNode=l.checkIcon.element({tag:"span",title:this._trans.__("Commit changes to data"),marginLeft:"8px"});this.editorHostNode=document.createElement("div");this.editorHostNode.className=p;this.headerNode.appendChild(this.revertButtonNode);this.headerNode.appendChild(this.commitButtonNode);this.node.appendChild(this.headerNode);this.node.appendChild(this.editorHostNode);const t=new r.Model({mimeType:"application/json"});t.sharedModel.changed.connect(this._onModelChanged,this);this.model=t;this.editor=e.editorFactory({host:this.editorHostNode,model:t,config:{readOnly:true}})}get source(){return this._source}set source(e){if(this._source===e){return}if(this._source){this._source.changed.disconnect(this._onSourceChanged,this)}this._source=e;this.editor.setOption("readOnly",e===null);if(e){e.changed.connect(this._onSourceChanged,this)}this._setValue()}get isDirty(){return this._dataDirty||this._inputDirty}dispose(){var e;if(this.isDisposed){return}(e=this.source)===null||e===void 0?void 0:e.dispose();this.model.dispose();this.editor.dispose();super.dispose()}handleEvent(e){switch(e.type){case"blur":this._evtBlur(e);break;case"click":this._evtClick(e);break;default:break}}onAfterAttach(e){const t=this.editorHostNode;t.addEventListener("blur",this,true);t.addEventListener("click",this,true);this.revertButtonNode.hidden=true;this.commitButtonNode.hidden=true;this.headerNode.addEventListener("click",this)}onBeforeDetach(e){const t=this.editorHostNode;t.removeEventListener("blur",this,true);t.removeEventListener("click",this,true);this.headerNode.removeEventListener("click",this)}_onSourceChanged(e,t){if(this._changeGuard){return}if(this._inputDirty||this.editor.hasFocus()){this._dataDirty=true;return}this._setValue()}_onModelChanged(e,t){if(t.sourceChange){let e=true;try{const e=JSON.parse(this.editor.model.sharedModel.getSource());this.removeClass(u);this._inputDirty=!this._changeGuard&&!d.JSONExt.deepEqual(e,this._originalValue)}catch(n){this.addClass(u);this._inputDirty=true;e=false}this.revertButtonNode.hidden=!this._inputDirty;this.commitButtonNode.hidden=!e||!this._inputDirty}}_evtBlur(e){if(!this._inputDirty&&this._dataDirty){this._setValue()}}_evtClick(e){const t=e.target;if(this.revertButtonNode.contains(t)){this._setValue()}else if(this.commitButtonNode.contains(t)){if(!this.commitButtonNode.hidden&&!this.hasClass(u)){this._changeGuard=true;this._mergeContent();this._changeGuard=false;this._setValue()}}else if(this.editorHostNode.contains(t)){this.editor.focus()}}_mergeContent(){const e=this.editor.model;const t=this._originalValue;const n=JSON.parse(e.sharedModel.getSource());const i=this.source;if(!i){return}for(const s in n){if(!d.JSONExt.deepEqual(n[s],t[s]||null)){i.set(s,n[s])}}for(const s in t){if(!(s in n)){i.delete(s)}}}_setValue(){this._dataDirty=false;this._inputDirty=false;this.revertButtonNode.hidden=true;this.commitButtonNode.hidden=true;this.removeClass(u);const e=this.editor.model;const t=this._source?this._source.toJSON():{};this._changeGuard=true;if(t===void 0){e.sharedModel.setSource(this._trans.__("No data!"));this._originalValue=d.JSONExt.emptyObject}else{const n=JSON.stringify(t,null,4);e.sharedModel.setSource(n);this._originalValue=t;if(n.length>1&&n[0]==="{"){this.editor.setCursorPosition({line:0,column:1})}}this._changeGuard=false;this.commitButtonNode.hidden=true;this.revertButtonNode.hidden=true}}var f=n(88478);var v=n(28416);var _=n.n(v);class b extends _().Component{constructor(e){super(e);this._handleChange=e=>{this.setState({value:e.currentTarget.value})};this._handleSubmit=e=>{e.preventDefault();const t=parseInt(this._textInput.value,10);if(!isNaN(t)&&isFinite(t)&&1<=t&&t<=this.props.maxLine){this.props.handleSubmit(t)}return false};this._handleFocus=()=>{this.setState({hasFocus:true})};this._handleBlur=()=>{this.setState({hasFocus:false})};this._textInput=null;this.translator=e.translator||a.nullTranslator;this._trans=this.translator.load("jupyterlab");this.state={value:"",hasFocus:false}}componentDidMount(){this._textInput.focus()}render(){return _().createElement("div",{className:"jp-lineFormSearch"},_().createElement("form",{name:"lineColumnForm",onSubmit:this._handleSubmit,noValidate:true},_().createElement("div",{className:(0,l.classes)("jp-lineFormWrapper","lm-lineForm-wrapper",this.state.hasFocus?"jp-lineFormWrapperFocusWithin":undefined)},_().createElement("input",{type:"text",className:"jp-lineFormInput",onChange:this._handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur,value:this.state.value,ref:e=>{this._textInput=e}}),_().createElement("div",{className:"jp-baseLineForm jp-lineFormButtonContainer"},_().createElement(l.lineFormIcon.react,{className:"jp-baseLineForm jp-lineFormButtonIcon",elementPosition:"center"}),_().createElement("input",{type:"submit",className:"jp-baseLineForm jp-lineFormButton",value:""}))),_().createElement("label",{className:"jp-lineFormCaption"},this._trans.__("Go to line number between 1 and %1",this.props.maxLine))))}}function y(e){const t=e.translator||a.nullTranslator;const n=t.load("jupyterlab");return _().createElement(f.TextItem,{onClick:e.handleClick,source:n.__("Ln %1, Col %2",e.line,e.column),title:n.__("Go to line number")})}class w extends l.VDomRenderer{constructor(e){super(new w.Model);this._popup=null;this.addClass("jp-mod-highlighted");this.translator=e||a.nullTranslator}render(){if(this.model===null){return null}else{return _().createElement(y,{line:this.model.line,column:this.model.column,translator:this.translator,handleClick:()=>this._handleClick()})}}_handleClick(){if(this._popup){this._popup.dispose()}const e=l.ReactWidget.create(_().createElement(b,{handleSubmit:e=>this._handleSubmit(e),currentLine:this.model.line,maxLine:this.model.editor.lineCount,translator:this.translator}));this._popup=(0,f.showPopup)({body:e,anchor:this,align:"right"})}_handleSubmit(e){this.model.editor.setCursorPosition({line:e-1,column:0});this._popup.dispose();this.model.editor.focus()}}(function(e){class t extends l.VDomModel{constructor(){super(...arguments);this._onSelectionChanged=()=>{const e=this._getAllState();const t=this.editor.getCursorPosition();this._line=t.line+1;this._column=t.column+1;this._triggerChange(e,this._getAllState())};this._line=1;this._column=1;this._editor=null}get editor(){return this._editor}set editor(e){var t;const n=this._editor;if((t=n===null||n===void 0?void 0:n.model)===null||t===void 0?void 0:t.selections){n.model.selections.changed.disconnect(this._onSelectionChanged)}const i=this._getAllState();this._editor=e;if(!this._editor){this._column=1;this._line=1}else{this._editor.model.selections.changed.connect(this._onSelectionChanged);const e=this._editor.getCursorPosition();this._column=e.column+1;this._line=e.line+1}this._triggerChange(i,this._getAllState())}get line(){return this._line}get column(){return this._column}_getAllState(){return[this._line,this._column]}_triggerChange(e,t){if(e[0]!==t[0]||e[1]!==t[1]){this.stateChanged.emit(void 0)}}}e.Model=t})(w||(w={}));var C;(function(e){e.defaultMimeType="text/plain"})(C||(C={}));const x=new d.Token("@jupyterlab/codeeditor:IEditorServices",`A service for the text editor provider\n  for the application. Use this to create new text editors and host them in your\n  UI elements.`);const S=new d.Token("@jupyterlab/codeeditor:IPositionModel",`A service to handle an code editor cursor position.`);const k="jp-mod-has-primary-selection";const j="jp-mod-in-leading-whitespace";const M="jp-mod-dropTarget";const E=/^\s+$/;class I extends c.Widget{constructor(e){super();const{factory:t,model:n,editorOptions:i}=e;const s=this.editor=t({host:this.node,model:n,...i});s.model.selections.changed.connect(this._onSelectionsChanged,this)}get model(){return this.editor.model}dispose(){if(this.isDisposed){return}this.editor.dispose();super.dispose()}handleEvent(e){switch(e.type){case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;default:break}}onActivateRequest(e){this.editor.focus()}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;t.addEventListener("lm-dragenter",this);t.addEventListener("lm-dragleave",this);t.addEventListener("lm-dragover",this);t.addEventListener("lm-drop",this)}onBeforeDetach(e){const t=this.node;t.removeEventListener("lm-dragenter",this);t.removeEventListener("lm-dragleave",this);t.removeEventListener("lm-dragover",this);t.removeEventListener("lm-drop",this)}_onSelectionsChanged(){const{start:e,end:t}=this.editor.getSelection();if(e.column!==t.column||e.line!==t.line){this.addClass(k);this.removeClass(j)}else{this.removeClass(k);if(this.editor.getLine(t.line).slice(0,t.column).match(E)){this.addClass(j)}else{this.removeClass(j)}}}_evtDragEnter(e){if(this.editor.getOption("readOnly")===true){return}const t=T.findTextData(e.mimeData);if(t===undefined){return}e.preventDefault();e.stopPropagation();this.addClass("jp-mod-dropTarget")}_evtDragLeave(e){this.removeClass(M);if(this.editor.getOption("readOnly")===true){return}const t=T.findTextData(e.mimeData);if(t===undefined){return}e.preventDefault();e.stopPropagation()}_evtDragOver(e){this.removeClass(M);if(this.editor.getOption("readOnly")===true){return}const t=T.findTextData(e.mimeData);if(t===undefined){return}e.preventDefault();e.stopPropagation();e.dropAction="copy";this.addClass(M)}_evtDrop(e){if(this.editor.getOption("readOnly")===true){return}const t=T.findTextData(e.mimeData);if(t===undefined){return}const n={top:e.y,bottom:e.y,left:e.x,right:e.x,x:e.x,y:e.y,width:0,height:0};const i=this.editor.getPositionForCoordinate(n);if(i===null){return}this.removeClass(M);e.preventDefault();e.stopPropagation();if(e.proposedAction==="none"){e.dropAction="none";return}const s=this.editor.getOffsetAt(i);this.model.sharedModel.updateSource(s,s,t)}}var T;(function(e){function t(e){const t=e.types();const n=t.find((e=>e.indexOf("text")===0));if(n===undefined){return undefined}return e.getData(n)}e.findTextData=t})(T||(T={}));class D extends c.Widget{constructor(e){var t;super();this.model=e.model;const n=new I({factory:e.factory,model:this.model,editorOptions:{...e.editorOptions,config:{...(t=e.editorOptions)===null||t===void 0?void 0:t.config,readOnly:true}}});this.editor=n.editor;const i=this.layout=new c.StackedLayout;i.addWidget(n)}static createCodeViewer(e){const{content:t,mimeType:n,...i}=e;const s=new r.Model({mimeType:n});s.sharedModel.setSource(t);const o=new D({...i,model:s});o.disposed.connect((()=>{s.dispose()}));return o}get content(){return this.model.sharedModel.getSource()}get mimeType(){return this.model.mimeType}}},49914:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(98328);var r=n(22748);var a=n(93379);var l=n.n(a);var d=n(7795);var c=n.n(d);var h=n(90569);var u=n.n(h);var p=n(3565);var m=n.n(p);var g=n(19216);var f=n.n(g);var v=n(44589);var _=n.n(v);var b=n(46832);var y={};y.styleTagTransform=_();y.setAttributes=m();y.insert=u().bind(null,"head");y.domAPI=c();y.insertStyleElement=f();var w=l()(b.Z,y);const C=b.Z&&b.Z.locals?b.Z.locals:undefined},16795:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>S,lineColItem:()=>C});var i=n(44906);var s=n(47391);var o=n(88478);var r=n(36168);var a=n(24104);var l=n(96912);var d=n(51997);var c=n(52435);var h=n(5596);var u=n(13802);var p=n.n(u);var m=n(28416);var g=n.n(m);const f="@jupyterlab/codemirror-extension:plugin";const v={id:"@jupyterlab/codemirror-extension:languages",description:"Provides the CodeMirror languages registry.",provides:l.IEditorLanguageRegistry,optional:[r.ITranslator],activate:(e,t)=>{const i=new l.EditorLanguageRegistry;for(const n of l.EditorLanguageRegistry.getDefaultLanguages(t)){i.addLanguage(n)}i.addLanguage({name:"ipythongfm",mime:"text/x-ipythongfm",load:async()=>{const[e,t]=await Promise.all([n.e(3068).then(n.t.bind(n,13068,23)),n.e(8010).then(n.bind(n,38010))]);return e.markdown({base:e.markdownLanguage,codeLanguages:e=>i.findBest(e),extensions:[(0,l.parseMathIPython)(a.StreamLanguage.define(t.stexMath).parser)]})}});return i}};const _={id:"@jupyterlab/codemirror-extension:themes",description:"Provides the CodeMirror theme registry",provides:l.IEditorThemeRegistry,optional:[r.ITranslator],activate:(e,t)=>{const n=new l.EditorThemeRegistry;for(const i of l.EditorThemeRegistry.getDefaultThemes(t)){n.addTheme(i)}return n}};const b={id:"@jupyterlab/codemirror-extension:extensions",description:"Provides the CodeMirror extension factory registry.",provides:l.IEditorExtensionRegistry,requires:[l.IEditorThemeRegistry],optional:[r.ITranslator,d.ISettingRegistry,c.IFormRendererRegistry],activate:(e,t,n,i,s)=>{const o=new l.EditorExtensionRegistry;for(const r of l.EditorExtensionRegistry.getDefaultExtensions({themes:t,translator:n})){o.addExtension(r)}if(i){const t=e=>{var t;o.baseConfiguration=(t=e.get("defaultConfig").composite)!==null&&t!==void 0?t:{}};void Promise.all([i.load(f),e.restored]).then((([e])=>{t(e);e.changed.connect(t)}));s===null||s===void 0?void 0:s.addRenderer(`${f}.defaultConfig`,{fieldRenderer:e=>{const t=g().useMemo((()=>o.settingsSchema),[]);const i=e.formContext.settings.id===f?o.baseConfiguration:o.defaultConfiguration;const s={};for(const[n,o]of Object.entries(i)){if(typeof t[n]!=="undefined"){s[n]=o}}return g().createElement("div",{className:"jp-FormGroup-contentNormal"},g().createElement("h3",{className:"jp-FormGroup-fieldLabel jp-FormGroup-contentItem"},e.schema.title),e.schema.description&&g().createElement("div",{className:"jp-FormGroup-description"},e.schema.description),g().createElement(c.FormComponent,{schema:{title:e.schema.title,description:e.schema.description,type:"object",properties:t,additionalProperties:false},validator:p(),formData:{...s,...e.formData},formContext:{defaultFormData:s},liveValidate:true,onChange:t=>{var n;const i={};for(const[e,o]of Object.entries((n=t.formData)!==null&&n!==void 0?n:{})){const t=s[e];if(t===undefined||!h.JSONExt.deepEqual(o,t)){i[e]=o}}e.onChange(i)},tagName:"div",translator:n!==null&&n!==void 0?n:r.nullTranslator}))}})}return o}};const y={id:"@jupyterlab/codemirror-extension:binding",description:"Register the CodeMirror extension factory binding the editor and the shared model.",autoStart:true,requires:[l.IEditorExtensionRegistry],activate:(e,t)=>{t.addExtension({name:"shared-model-binding",factory:e=>{var t;const n=e.model.sharedModel;return l.EditorExtensionRegistry.createImmutableExtension((0,l.ybinding)({ytext:n.ysource,undoManager:(t=n.undoManager)!==null&&t!==void 0?t:undefined}))}})}};const w={id:"@jupyterlab/codemirror-extension:services",description:"Provides the service to instantiate CodeMirror editors.",provides:s.IEditorServices,requires:[l.IEditorLanguageRegistry,l.IEditorExtensionRegistry,l.IEditorThemeRegistry],optional:[r.ITranslator],activate:(e,t,n,i)=>{const s=new l.CodeMirrorEditorFactory({extensions:n,languages:t,translator:i!==null&&i!==void 0?i:r.nullTranslator});return{factoryService:s,mimeTypeService:new l.CodeMirrorMimeTypeService(t)}}};const C={id:"@jupyterlab/codemirror-extension:line-col-status",description:"Provides the code editor cursor position model.",autoStart:true,requires:[r.ITranslator],optional:[i.ILabShell,o.IStatusBar],provides:s.IPositionModel,activate:(e,t,n,i)=>{const o=new s.LineCol(t);const r=new Set;if(i){i.registerStatusItem(C.id,{item:o,align:"right",rank:2,isActive:()=>!!o.model.editor})}const a=t=>{r.add(t);if(e.shell.currentWidget){d(e.shell,{newValue:e.shell.currentWidget,oldValue:null})}};const l=()=>{d(e.shell,{oldValue:e.shell.currentWidget,newValue:e.shell.currentWidget})};function d(e,t){Promise.all([...r].map((e=>e(t.newValue)))).then((e=>{var t;o.model.editor=(t=e.filter((e=>e!==null))[0])!==null&&t!==void 0?t:null})).catch((e=>{console.error("Get editors",e)}))}if(n){n.currentChanged.connect(d)}return{addEditorProvider:a,update:l}}};const x=[v,_,y,b,w,C];const S=x},64331:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(98328);var r=n(49914);var a=n(90516);var l=n(37935)},73089:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CodeMirrorEditor:()=>G,CodeMirrorEditorFactory:()=>Q,CodeMirrorMimeTypeService:()=>ee,CodeMirrorSearchHighlighter:()=>ie,EditorExtensionRegistry:()=>B,EditorLanguageRegistry:()=>q,EditorSearchProvider:()=>ne,EditorThemeRegistry:()=>$,ExtensionsHandler:()=>O,IEditorExtensionRegistry:()=>oe,IEditorLanguageRegistry:()=>re,IEditorThemeRegistry:()=>ae,StateCommands:()=>s,YRange:()=>T,YSyncConfig:()=>D,customTheme:()=>m,jupyterEditorTheme:()=>W,jupyterHighlightStyle:()=>V,jupyterTheme:()=>U,parseMathIPython:()=>x,rulers:()=>E,ySync:()=>A,ySyncAnnotation:()=>P,ySyncFacet:()=>L,ybinding:()=>R});var i=n(45026);var s;(function(e){function t(e){const t={state:e.state,dispatch:e.dispatch};const n=e.state.selection.main.from;const s=e.state.selection.main.to;if(n!=s){return(0,i.indentMore)(t)}const o=e.state.doc.lineAt(n);const r=e.state.doc.slice(o.from,n).toString();if(/^\s*$/.test(r)){return(0,i.indentMore)(t)}else{return(0,i.insertTab)(t)}}e.indentMoreOrInsertTab=t})(s||(s={}));var o=n(24104);var r=n(37496);var a=n(66143);var l=n(5596);var d=n(71372);var c=n(1065);var h=n(36168);const u=r.Facet.define({combine(e){return(0,r.combineConfig)(e,{fontFamily:null,fontSize:null,lineHeight:null},{fontFamily:(e,t)=>e!==null&&e!==void 0?e:t,fontSize:(e,t)=>e!==null&&e!==void 0?e:t,lineHeight:(e,t)=>e!==null&&e!==void 0?e:t})}});function p(e){const{fontFamily:t,fontSize:n,lineHeight:i}=e.state.facet(u);let s="";if(n){s+=`font-size: ${n}px !important;`}if(t){s+=`font-family: ${t} !important;`}if(i){s+=`line-height: ${i.toString()} !important`}return{style:s}}function m(e){return[u.of(e),a.EditorView.editorAttributes.of(p)]}var g=n(73265);var f=n(6016);const v="InlineMathDollar";const _="InlineMathBracket";const b="BlockMathDollar";const y="BlockMathBracket";const w={[v]:1,[_]:3,[b]:2,[y]:3};const C=Object.keys(w).reduce(((e,t)=>{e[t]={mark:`${t}Mark`,resolve:t};return e}),{});function x(e){const t=new Array;Object.keys(w).forEach((e=>{t.push({name:e,style:f.tags.emphasis},{name:`${e}Mark`,style:f.tags.processingInstruction})}));return{defineNodes:t,parseInline:[{name:b,parse(e,t,n){if(t!=36||e.char(n+1)!=36){return-1}return e.addDelimiter(C[b],n,n+w[b],true,true)}},{name:v,parse(e,t,n){if(t!=36||e.char(n+1)==36){return-1}return e.addDelimiter(C[v],n,n+w[v],true,true)}},{name:_,before:"Escape",parse(e,t,n){if(t!=92||e.char(n+1)!=92||![40,41].includes(e.char(n+2))){return-1}return e.addDelimiter(C[_],n,n+w[_],e.char(n+2)==40,e.char(n+2)==41)}},{name:y,before:"Escape",parse(e,t,n){if(t!=92||e.char(n+1)!=92||![91,93].includes(e.char(n+2))){return-1}return e.addDelimiter(C[y],n,n+w[y],e.char(n+2)==91,e.char(n+2)==93)}}],wrap:e?(0,g.parseMixed)(((t,n)=>{const i=w[t.type.name];if(i){return{parser:e,overlay:[{from:t.from+i,to:t.to-i}]}}return null})):undefined}}const S="cm-rulers";const k=a.EditorView.baseTheme({[`.${S}`]:{borderRight:"1px dotted gray",opacity:.7}});const j=r.Facet.define({combine(e){const t=e.reduce(((e,t)=>e.concat(t.filter(((n,i)=>!e.includes(n)&&i==t.lastIndexOf(n))))),[]);return t}});const M=a.ViewPlugin.fromClass(class{constructor(e){this.rulersContainer=e.dom.appendChild(document.createElement("div"));this.rulersContainer.style.cssText=`\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 100%;\n                height: 100%;\n                pointer-events: none;\n                overflow: hidden;\n            `;const t=e.defaultCharacterWidth;const n=e.state.facet(j);this.rulers=n.map((e=>{const n=this.rulersContainer.appendChild(document.createElement("div"));n.classList.add(S);n.style.cssText=`\n                position: absolute;\n                left: ${e*t}px;\n                height: 100%;\n            `;n.style.width="6px";return n}))}update(e){const t=e.view.state.facet(j);if(e.viewportChanged||!l.JSONExt.deepEqual(t,e.startState.facet(j))){const n=e.view.defaultCharacterWidth;this.rulers.forEach(((e,i)=>{e.style.left=`${t[i]*n}px`}))}}destroy(){this.rulers.forEach((e=>{e.remove()}));this.rulersContainer.remove()}});function E(e){return[k,j.of(e),M]}var I=n(66350);class T{constructor(e,t){this.yanchor=e;this.yhead=t}toJSON(){return{yanchor:(0,I.relativePositionToJSON)(this.yanchor),yhead:(0,I.relativePositionToJSON)(this.yhead)}}static fromJSON(e){return new T((0,I.createRelativePositionFromJSON)(e.yanchor),(0,I.createRelativePositionFromJSON)(e.yhead))}}class D{constructor(e){this.ytext=e}toYPos(e,t=0){return(0,I.createRelativePositionFromTypeIndex)(this.ytext,e,t)}fromYPos(e){const t=(0,I.createAbsolutePositionFromRelativePosition)((0,I.createRelativePositionFromJSON)(e),this.ytext.doc);if(t==null||t.type!==this.ytext){throw new Error("[y-codemirror] The position you want to retrieve was created by a different document")}return{pos:t.index,assoc:t.assoc}}toYRange(e){const t=e.assoc;const n=this.toYPos(e.anchor,t);const i=this.toYPos(e.head,t);return new T(n,i)}fromYRange(e){const t=this.fromYPos(e.yanchor);const n=this.fromYPos(e.yhead);if(t.pos===n.pos){return r.EditorSelection.cursor(n.pos,n.assoc)}return r.EditorSelection.range(t.pos,n.pos)}}const L=r.Facet.define({combine(e){return e[e.length-1]}});const P=r.Annotation.define();const A=a.ViewPlugin.fromClass(class{constructor(e){this.conf=e.state.facet(L);this._observer=(t,n)=>{var i;if(n.origin!==this.conf){const n=t.delta;const s=[];let o=0;for(let e=0;e<n.length;e++){const t=n[e];if(t.insert!=null){s.push({from:o,to:o,insert:t.insert})}else if(t.delete!=null){s.push({from:o,to:o+t.delete,insert:""});o+=t.delete}else{o+=(i=t.retain)!==null&&i!==void 0?i:0}}e.dispatch({changes:s,annotations:[P.of(this.conf)]})}};this._ytext=this.conf.ytext;this._ytext.observe(this._observer)}update(e){if(!e.docChanged||e.transactions.length>0&&e.transactions[0].annotation(P)===this.conf){return}const t=this.conf.ytext;t.doc.transact((()=>{let n=0;e.changes.iterChanges(((e,i,s,o,r)=>{const a=r.sliceString(0,r.length,"\n");if(e!==i){t.delete(e+n,i-e)}if(a.length>0){t.insert(e+n,a)}n+=a.length-(i-e)}))}),this.conf)}destroy(){this._ytext.unobserve(this._observer)}});function R({ytext:e,undoManager:t}){const n=new D(e);return[L.of(n),A,t?a.ViewPlugin.define((()=>{t.addTrackedOrigin(n);return{destroy:()=>{t.removeTrackedOrigin(n)}}})):[]]}const N="jp-mod-readOnly";class O{constructor({baseConfiguration:e,config:t,defaultExtensions:n}={}){this._configChanged=new d.Signal(this);this._disposed=new d.Signal(this);this._isDisposed=false;this._immutables=new Set;this._baseConfig=e!==null&&e!==void 0?e:{};this._config=t!==null&&t!==void 0?t:{};this._configurableBuilderMap=new Map(n);const i=Object.keys(this._config).concat(Object.keys(this._baseConfig));this._immutables=new Set([...this._configurableBuilderMap.keys()].filter((e=>!i.includes(e))))}get configChanged(){return this._configChanged}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this._disposed.emit();d.Signal.clearData(this)}getOption(e){var t;return(t=this._config[e])!==null&&t!==void 0?t:this._baseConfig[e]}hasOption(e){return Object.keys(this._config).includes(e)||Object.keys(this._baseConfig).includes(e)}setOption(e,t){if(this._config[e]!==t){this._config[e]=t;this._configChanged.emit({[e]:t})}}setBaseOptions(e){const t=this._getChangedOptions(e,this._baseConfig);if(t.length>0){this._baseConfig=e;const n=Object.keys(this._config);const i=t.filter((e=>!n.includes(e)));if(i.length>0){this._configChanged.emit(i.reduce(((e,t)=>{e[t]=this._baseConfig[t];return e}),{}))}}}setOptions(e){const t=this._getChangedOptions(e,this._config);if(t.length>0){this._config={...e};this._configChanged.emit(t.reduce(((e,t)=>{var n;e[t]=(n=this._config[t])!==null&&n!==void 0?n:this._baseConfig[t];return e}),{}))}}reconfigureExtension(e,t,n){const i=this.getEffect(e.state,t,n);if(i){e.dispatch({effects:[i]})}}reconfigureExtensions(e,t){const n=Object.keys(t).filter((e=>this.has(e))).map((n=>this.getEffect(e.state,n,t[n])));e.dispatch({effects:n.filter((e=>e!==null))})}injectExtension(e,t){e.dispatch({effects:r.StateEffect.appendConfig.of(t)})}getInitialExtensions(){const e={...this._baseConfig,...this._config};const t=[...this._immutables].map((e=>{var t;return(t=this.get(e))===null||t===void 0?void 0:t.instance(undefined)})).filter((e=>e));for(const n of Object.keys(e)){const i=this.get(n);if(i){const s=e[n];t.push(i.instance(s))}}return t}get(e){return this._configurableBuilderMap.get(e)}has(e){return this._configurableBuilderMap.has(e)}getEffect(e,t,n){var i;const s=this.get(t);return(i=s===null||s===void 0?void 0:s.reconfigure(n))!==null&&i!==void 0?i:null}_getChangedOptions(e,t){const n=new Array;const i=new Array;for(const[s,o]of Object.entries(e)){i.push(s);if(t[s]!==o){n.push(s)}}n.push(...Object.keys(t).filter((e=>!i.includes(e))));return n}}class B{constructor(){this.configurationBuilder=new Map;this.configurationSchema={};this.defaultOptions={};this.handlers=new Set;this.immutableExtensions=new Set;this._baseConfiguration={}}get baseConfiguration(){return{...this.defaultOptions,...this._baseConfiguration}}set baseConfiguration(e){if(!l.JSONExt.deepEqual(e,this._baseConfiguration)){this._baseConfiguration=e;for(const e of this.handlers){e.setBaseOptions(this.baseConfiguration)}}}get defaultConfiguration(){return Object.freeze({...this.defaultOptions})}get settingsSchema(){return Object.freeze(l.JSONExt.deepCopy(this.configurationSchema))}addExtension(e){var t;if(this.configurationBuilder.has(e.name)){throw new Error(`Extension named ${e.name} is already registered.`)}this.configurationBuilder.set(e.name,e);if(typeof e.default!="undefined"){this.defaultOptions[e.name]=e.default}if(e.schema){this.configurationSchema[e.name]={default:(t=e.default)!==null&&t!==void 0?t:null,...e.schema};this.defaultOptions[e.name]=this.configurationSchema[e.name].default}}createNew(e){const t=new Array;for(const[i,s]of this.configurationBuilder.entries()){const n=s.factory(e);if(n){t.push([i,n])}}const n=new O({baseConfiguration:this.baseConfiguration,config:e.config,defaultExtensions:t});this.handlers.add(n);n.disposed.connect((()=>{this.handlers.delete(n)}));return n}}(function(e){class t{constructor(e){this._compartment=new r.Compartment;this._builder=e}instance(e){return this._compartment.of(this._builder(e))}reconfigure(e){return this._compartment.reconfigure(this._builder(e))}}class n{constructor(e){this._extension=e}instance(){return this._extension}reconfigure(){return null}}function l(e){return new t(e)}e.createConfigurableExtension=l;function d(e,n=[]){return new t((t=>t?e:n))}e.createConditionalExtension=d;function u(e){return new n(e)}e.createImmutableExtension=u;function p(e={}){const{themes:t,translator:n}=e;const u=(n!==null&&n!==void 0?n:h.nullTranslator).load("jupyterlab");const p=[Object.freeze({name:"autoClosingBrackets",default:false,factory:()=>d((0,c.vQ)()),schema:{type:"boolean",title:u.__("Auto Closing Brackets")}}),Object.freeze({name:"codeFolding",default:false,factory:()=>d((0,o.foldGutter)()),schema:{type:"boolean",title:u.__("Code Folding")}}),Object.freeze({name:"cursorBlinkRate",default:1200,factory:()=>l((e=>(0,a.drawSelection)({cursorBlinkRate:e}))),schema:{type:"number",title:u.__("Cursor blinking rate"),description:u.__("Half-period in milliseconds used for cursor blinking. The default blink rate is 1200ms. By setting this to zero, blinking can be disabled.")}}),Object.freeze({name:"highlightActiveLine",default:false,factory:()=>d((0,a.highlightActiveLine)()),schema:{type:"boolean",title:u.__("Highlight the active line")}}),Object.freeze({name:"highlightTrailingWhitespace",default:false,factory:()=>d((0,a.highlightTrailingWhitespace)()),schema:{type:"boolean",title:u.__("Highlight trailing white spaces")}}),Object.freeze({name:"highlightWhitespace",default:false,factory:()=>d((0,a.highlightWhitespace)()),schema:{type:"boolean",title:u.__("Highlight white spaces")}}),Object.freeze({name:"indentUnit",default:"4",factory:()=>l((e=>e=="Tab"?o.indentUnit.of("\t"):o.indentUnit.of(" ".repeat(parseInt(e,10))))),schema:{type:"string",title:u.__("Indentation unit"),description:u.__("The indentation is a `Tab` or the number of spaces. This defaults to 4 spaces."),enum:["Tab","1","2","4","8"]}}),Object.freeze({name:"keymap",default:[...i.defaultKeymap,{key:"Tab",run:s.indentMoreOrInsertTab,shift:i.indentLess}],factory:()=>l((e=>a.keymap.of(e)))}),Object.freeze({name:"lineNumbers",default:true,factory:()=>d((0,a.lineNumbers)()),schema:{type:"boolean",title:u.__("Line Numbers")}}),Object.freeze({name:"lineWrap",factory:()=>d(a.EditorView.lineWrapping),default:true,schema:{type:"boolean",title:u.__("Line Wrap")}}),Object.freeze({name:"matchBrackets",default:true,factory:()=>d((0,o.bracketMatching)()),schema:{type:"boolean",title:u.__("Match Brackets")}}),Object.freeze({name:"rectangularSelection",default:true,factory:()=>d([(0,a.rectangularSelection)(),(0,a.crosshairCursor)()]),schema:{type:"boolean",title:u.__("Rectangular selection"),description:u.__("Rectangular (block) selection can be created by dragging the mouse pointer while holding the left mouse button and the Alt key. When the Alt key is pressed, a crosshair cursor will appear, indicating that the rectangular selection mode is active.")}}),Object.freeze({name:"readOnly",default:false,factory:()=>l((e=>[r.EditorState.readOnly.of(e),e?a.EditorView.editorAttributes.of({class:N}):[]]))}),Object.freeze({name:"rulers",default:[],factory:()=>l((e=>e.length>0?E(e):[])),schema:{type:"array",title:u.__("Rulers"),items:{type:"number",minimum:0}}}),Object.freeze({name:"scrollPastEnd",default:false,factory:e=>e.inline?null:d((0,a.scrollPastEnd)())}),Object.freeze({name:"smartIndent",default:true,factory:()=>d((0,o.indentOnInput)()),schema:{type:"boolean",title:u.__("Smart Indentation")}}),Object.freeze({name:"tabSize",default:4,factory:()=>l((e=>r.EditorState.tabSize.of(e))),schema:{type:"number",title:u.__("Tab size")}}),Object.freeze({name:"allowMultipleSelections",default:true,factory:()=>l((e=>r.EditorState.allowMultipleSelections.of(e))),schema:{type:"boolean",title:u.__("Multiple selections")}}),Object.freeze({name:"customStyles",factory:()=>l((e=>m(e))),default:{fontFamily:null,fontSize:null,lineHeight:null},schema:{title:u.__("Custom editor styles"),type:"object",properties:{fontFamily:{type:["string","null"],title:u.__("Font Family")},fontSize:{type:["number","null"],minimum:1,maximum:100,title:u.__("Font Size")},lineHeight:{type:["number","null"],title:u.__("Line Height")}},additionalProperties:false}})];if(t){p.push(Object.freeze({name:"theme",default:"jupyter",factory:()=>l((e=>t.getTheme(e))),schema:{type:"string",title:u.__("Theme"),description:u.__("CodeMirror theme")}}))}if(n){p.push(Object.freeze({name:"translation",default:{"Control character":u.__("Control character"),"Selection deleted":u.__("Selection deleted"),"Folded lines":u.__("Folded lines"),"Unfolded lines":u.__("Unfolded lines"),to:u.__("to"),"folded code":u.__("folded code"),unfold:u.__("unfold"),"Fold line":u.__("Fold line"),"Unfold line":u.__("Unfold line"),"Go to line":u.__("Go to line"),go:u.__("go"),Find:u.__("Find"),Replace:u.__("Replace"),next:u.__("next"),previous:u.__("previous"),all:u.__("all"),"match case":u.__("match case"),replace:u.__("replace"),"replace all":u.__("replace all"),close:u.__("close"),"current match":u.__("current match"),"replaced $ matches":u.__("replaced $ matches"),"replaced match on line $":u.__("replaced match on line $"),"on line":u.__("on line"),Completions:u.__("Completions"),Diagnostics:u.__("Diagnostics"),"No diagnostics":u.__("No diagnostics")},factory:()=>l((e=>r.EditorState.phrases.of(e)))}))}return p}e.getDefaultExtensions=p})(B||(B={}));var F=n(47391);var z=n(22873);var H=n(19041);const W=a.EditorView.theme({"&":{background:"var(--jp-layout-color0)",color:"var(--jp-content-font-color1)"},".jp-CodeConsole &, .jp-Notebook &":{background:"transparent"},".cm-content":{caretColor:"var(--jp-editor-cursor-color)"},".cm-scroller":{fontFamily:"inherit"},".cm-cursor, .cm-dropCursor":{borderLeft:"var(--jp-code-cursor-width0) solid var(--jp-editor-cursor-color)"},".cm-selectionBackground, .cm-content ::selection":{backgroundColor:"var(--jp-editor-selected-background)"},"&.cm-focused .cm-selectionBackground":{backgroundColor:"var(--jp-editor-selected-focused-background)"},".cm-gutters":{borderRight:"1px solid var(--jp-border-color2)",backgroundColor:"var(--jp-layout-color2)"},".cm-gutter, .cm-activeLine":{backgroundColor:"var(--jp-layout-color2)"},".cm-lineNumbers":{color:"var(--jp-ui-font-color2)"},".cm-searchMatch":{backgroundColor:"var(--jp-search-unselected-match-background-color)",color:"var(--jp-search-unselected-match-color)"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"var(--jp-search-selected-match-background-color) !important",color:"var(--jp-search-selected-match-color) !important"}});const V=o.HighlightStyle.define([{tag:f.tags.meta,color:"var(--jp-mirror-editor-meta-color)"},{tag:f.tags.heading,color:"var(--jp-mirror-editor-header-color)"},{tag:[f.tags.heading1,f.tags.heading2,f.tags.heading3,f.tags.heading4],color:"var(--jp-mirror-editor-header-color)",fontWeight:"bold"},{tag:f.tags.keyword,color:"var(--jp-mirror-editor-keyword-color)",fontWeight:"bold"},{tag:f.tags.atom,color:"var(--jp-mirror-editor-atom-color)"},{tag:f.tags.number,color:"var(--jp-mirror-editor-number-color)"},{tag:[f.tags.definition(f.tags.name),f.tags["function"](f.tags.definition(f.tags.variableName))],color:"var(--jp-mirror-editor-def-color)"},{tag:f.tags.standard(f.tags.variableName),color:"var(--jp-mirror-editor-builtin-color)"},{tag:[f.tags.special(f.tags.variableName),f.tags.self],color:"var(--jp-mirror-editor-variable-2-color)"},{tag:f.tags.punctuation,color:"var(--jp-mirror-editor-punctuation-color)"},{tag:f.tags.propertyName,color:"var(--jp-mirror-editor-property-color)"},{tag:f.tags.operator,color:"var(--jp-mirror-editor-operator-color)",fontWeight:"bold"},{tag:f.tags.comment,color:"var(--jp-mirror-editor-comment-color)",fontStyle:"italic"},{tag:f.tags.string,color:"var(--jp-mirror-editor-string-color)"},{tag:[f.tags.labelName,f.tags.monospace,f.tags.special(f.tags.string)],color:"var(--jp-mirror-editor-string-2-color)"},{tag:f.tags.bracket,color:"var(--jp-mirror-editor-bracket-color)"},{tag:f.tags.tagName,color:"var(--jp-mirror-editor-tag-color)"},{tag:f.tags.attributeName,color:"var(--jp-mirror-editor-attribute-color)"},{tag:f.tags.quote,color:"var(--jp-mirror-editor-quote-color)"},{tag:f.tags.link,color:"var(--jp-mirror-editor-link-color)",textDecoration:"underline"},{tag:[f.tags.separator,f.tags.derefOperator,f.tags.paren],color:""},{tag:f.tags.strong,fontWeight:"bold"},{tag:f.tags.emphasis,fontStyle:"italic"},{tag:f.tags.strikethrough,textDecoration:"line-through"},{tag:f.tags.bool,color:"var(--jp-mirror-editor-keyword-color)",fontWeight:"bold"}]);const U=[W,(0,o.syntaxHighlighting)(V)];class ${constructor(){this._themeMap=new Map([["jupyter",Object.freeze({name:"jupyter",theme:U})]])}get themes(){return Array.from(this._themeMap.values())}defaultTheme(){return this._themeMap.get("jupyter").theme}addTheme(e){if(this._themeMap.has(e.name)){throw new Error(`A theme named '${e.name}' is already registered.`)}this._themeMap.set(e.name,{displayName:e.name,...e})}getTheme(e){var t;const n=(t=this._themeMap.get(e))===null||t===void 0?void 0:t.theme;return n!==null&&n!==void 0?n:this.defaultTheme()}}(function(e){function t(e){const t=(e!==null&&e!==void 0?e:h.nullTranslator).load("jupyterlab");return[Object.freeze({name:"codemirror",displayName:t.__("codemirror"),theme:[a.EditorView.baseTheme({}),(0,o.syntaxHighlighting)(o.defaultHighlightStyle)]})]}e.getDefaultThemes=t})($||($={}));class q{constructor(){this._modeList=[];this.addLanguage({name:"none",mime:"text/plain",support:new o.LanguageSupport(o.LRLanguage.define({parser:(0,H.pV)("@top Program { }")}))})}addLanguage(e){var t;const n=(t=this.findByName(e.name))!==null&&t!==void 0?t:this.findByMIME(e.mime,true);if(n){throw new Error(`${e.mime} already registered`)}this._modeList.push(this.makeSpec(e))}async getLanguage(e){const t=this.findBest(e);if(t&&!t.support){t.support=await t.load()}return t}getLanguages(){return[...this._modeList]}findByMIME(e,t=false){if(Array.isArray(e)){for(let t=0;t<e.length;t++){const n=this.findByMIME(e[t]);if(n)return n}return null}e=e.toLowerCase();for(let n=0;n<this._modeList.length;n++){let t=this._modeList[n];if(Array.isArray(t.mime)){for(let n=0;n<t.mime.length;n++){if(t.mime[n]==e){return t}}}else if(t.mime==e){return t}}if(!t){if(/\+xml$/.test(e))return this.findByMIME("application/xml");if(/\+json$/.test(e))return this.findByMIME("application/json")}return null}findByName(e){e=e.toLowerCase();for(let t=0;t<this._modeList.length;t++){let n=this._modeList[t];if(n.name.toLowerCase()==e)return n;if(n.alias){for(let t=0;t<n.alias.length;t++){if(n.alias[t].toLowerCase()==e){return n}}}}return null}findByExtension(e){if(Array.isArray(e)){for(let t=0;t<e.length;t++){const n=this.findByExtension(e[t]);if(n)return n}return null}e=e.toLowerCase();for(let t=0;t<this._modeList.length;t++){let n=this._modeList[t];for(let t=0;t<n.extensions.length;t++){if(n.extensions[t].toLowerCase()==e){return n}}}return null}findByFileName(e){const t=z.PathExt.basename(e);for(let s=0;s<this._modeList.length;s++){let e=this._modeList[s];if(e.filename&&e.filename.test(t)){return e}}let n=t.lastIndexOf(".");let i=n>-1&&t.substring(n+1,t.length);if(i){return this.findByExtension(i)}return null}findBest(e,t=true){var n,i,s,o;const r=typeof e==="string"?e:e.name;const a=typeof e!=="string"?e.mime:r;const l=typeof e!=="string"?(n=e.extensions)!==null&&n!==void 0?n:[]:[];return(o=(s=(i=r?this.findByName(r):null)!==null&&i!==void 0?i:a?this.findByMIME(a):null)!==null&&s!==void 0?s:this.findByExtension(l))!==null&&o!==void 0?o:t?this.findByMIME(F.IEditorMimeTypeService.defaultMimeType):null}async highlight(e,t,n){var i;if(t){await this.getLanguage(t)}const s=(i=t===null||t===void 0?void 0:t.support)===null||i===void 0?void 0:i.language;if(!s){n.appendChild(document.createTextNode(e));return}const o=s.parser.parse(e);let r=0;(0,f.highlightTree)(o,V,((t,i,s)=>{if(t>r){n.appendChild(document.createTextNode(e.slice(r,t)))}const o=n.appendChild(document.createElement("span"));o.className=s;o.appendChild(document.createTextNode(e.slice(t,i)));r=i}));if(r<o.length-1){n.appendChild(document.createTextNode(e.slice(r,o.length)))}}makeSpec(e){let t=o.LanguageDescription.of(e);t.mime=e.mime;t.displayName=e.displayName;return t}}(function(e){function t(e){return new o.LanguageSupport(o.StreamLanguage.define(e))}e.legacy=t;async function i(e){const t=await n.e(8771).then(n.bind(n,28771));return t.sql({dialect:t[e]})}function s(e){const s=(e!==null&&e!==void 0?e:h.nullTranslator).load("jupyterlab");return[{name:"C",displayName:s.__("C"),mime:"text/x-csrc",extensions:["c","h","ino"],async load(){const e=await n.e(5157).then(n.bind(n,45157));return e.cpp()}},{name:"C++",displayName:s.__("C++"),mime:"text/x-c++src",extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],async load(){const e=await n.e(5157).then(n.bind(n,45157));return e.cpp()}},{name:"CQL",displayName:s.__("CQL"),mime:"text/x-cassandra",extensions:["cql"],load(){return i("Cassandra")}},{name:"CSS",displayName:s.__("CSS"),mime:"text/css",extensions:["css"],async load(){const e=await n.e(5201).then(n.bind(n,75201));return e.css()}},{name:"HTML",displayName:s.__("HTML"),alias:["xhtml"],mime:"text/html",extensions:["html","htm","handlebars","hbs"],async load(){const e=await Promise.all([n.e(2091),n.e(5201),n.e(49)]).then(n.bind(n,60049));return e.html()}},{name:"Java",displayName:s.__("Java"),mime:"text/x-java",extensions:["java"],async load(){const e=await n.e(9621).then(n.bind(n,29621));return e.java()}},{name:"Javascript",displayName:s.__("Javascript"),alias:["ecmascript","js","node"],mime:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],extensions:["js","mjs","cjs"],async load(){const e=await n.e(2091).then(n.bind(n,62091));return e.javascript()}},{name:"JSON",displayName:s.__("JSON"),alias:["json5"],mime:["application/json","application/x-json"],extensions:["json","map"],async load(){const e=await n.e(2254).then(n.bind(n,52254));return e.json()}},{name:"JSX",displayName:s.__("JSX"),mime:"text/jsx",extensions:["jsx"],async load(){const e=await n.e(2091).then(n.bind(n,62091));return e.javascript({jsx:true})}},{name:"MariaDB SQL",displayName:s.__("MariaDB SQL"),mime:"text/x-mariadb",load(){return i("MariaSQL")}},{name:"Markdown",displayName:s.__("Markdown"),mime:"text/x-markdown",extensions:["md","markdown","mkd"],async load(){const e=await n.e(3068).then(n.t.bind(n,13068,23));return e.markdown({codeLanguages:this._modeList})}},{name:"MS SQL",displayName:s.__("MS SQL"),mime:"text/x-mssql",load(){return i("MSSQL")}},{name:"MySQL",displayName:s.__("MySQL"),mime:"text/x-mysql",load(){return i("MySQL")}},{name:"PHP",displayName:s.__("PHP"),mime:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],extensions:["php","php3","php4","php5","php7","phtml"],async load(){const e=await Promise.all([n.e(2091),n.e(5201),n.e(49),n.e(6207)]).then(n.bind(n,66207));return e.php()}},{name:"PLSQL",displayName:s.__("PLSQL"),mime:"text/x-plsql",extensions:["pls"],load(){return i("PLSQL")}},{name:"PostgreSQL",displayName:s.__("PostgreSQL"),mime:"text/x-pgsql",load(){return i("PostgreSQL")}},{name:"Python",displayName:s.__("Python"),mime:"text/x-python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,async load(){const e=await n.e(7472).then(n.bind(n,37472));return e.python()}},{name:"ipython",displayName:s.__("ipython"),mime:"text/x-ipython",async load(){const e=await n.e(7472).then(n.bind(n,37472));return e.python()}},{name:"Rust",displayName:s.__("Rust"),mime:"text/x-rustsrc",extensions:["rs"],async load(){const e=await n.e(4291).then(n.bind(n,34291));return e.rust()}},{name:"SQL",displayName:s.__("SQL"),mime:"text/x-sql",extensions:["sql"],load(){return i("StandardSQL")}},{name:"SQLite",displayName:s.__("SQLite"),mime:"text/x-sqlite",load(){return i("SQLite")}},{name:"TSX",displayName:s.__("TSX"),alias:["TypeScript-JSX"],mime:"text/typescript-jsx",extensions:["tsx"],async load(){const e=await n.e(2091).then(n.bind(n,62091));return e.javascript({jsx:true,typescript:true})}},{name:"TypeScript",displayName:s.__("TypeScript"),alias:["ts"],mime:"application/typescript",extensions:["ts"],async load(){const e=await n.e(2091).then(n.bind(n,62091));return e.javascript({typescript:true})}},{name:"WebAssembly",displayName:s.__("WebAssembly"),mime:"text/webassembly",extensions:["wat","wast"],async load(){const e=await n.e(1410).then(n.bind(n,51410));return e.wast()}},{name:"XML",displayName:s.__("XML"),alias:["rss","wsdl","xsd"],mime:["application/xml","text/xml"],extensions:["xml","xsl","xsd","svg"],async load(){const e=await n.e(9030).then(n.bind(n,9030));return e.xml()}},{name:"APL",displayName:s.__("APL"),mime:"text/apl",extensions:["dyalog","apl"],async load(){const e=await n.e(3601).then(n.bind(n,93601));return t(e.apl)}},{name:"PGP",displayName:s.__("PGP"),alias:["asciiarmor"],mime:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],extensions:["asc","pgp","sig"],async load(){const e=await n.e(4283).then(n.bind(n,34283));return t(e.asciiArmor)}},{name:"ASN.1",displayName:s.__("ASN.1"),mime:"text/x-ttcn-asn",extensions:["asn","asn1"],async load(){const e=await n.e(4743).then(n.bind(n,54743));return t(e.asn1({}))}},{name:"Asterisk",displayName:s.__("Asterisk"),mime:"text/x-asterisk",filename:/^extensions\.conf$/i,async load(){const e=await n.e(7827).then(n.bind(n,17827));return t(e.asterisk)}},{name:"Brainfuck",displayName:s.__("Brainfuck"),mime:"text/x-brainfuck",extensions:["b","bf"],async load(){const e=await n.e(8347).then(n.bind(n,38347));return t(e.brainfuck)}},{name:"Cobol",displayName:s.__("Cobol"),mime:"text/x-cobol",extensions:["cob","cpy"],async load(){const e=await n.e(378).then(n.bind(n,10378));return t(e.cobol)}},{name:"C#",displayName:s.__("C#"),alias:["csharp","cs"],mime:"text/x-csharp",extensions:["cs"],async load(){const e=await n.e(942).then(n.bind(n,60942));return t(e.csharp)}},{name:"Clojure",displayName:s.__("Clojure"),mime:"text/x-clojure",extensions:["clj","cljc","cljx"],async load(){const e=await n.e(1861).then(n.bind(n,1861));return t(e.clojure)}},{name:"ClojureScript",displayName:s.__("ClojureScript"),mime:"text/x-clojurescript",extensions:["cljs"],async load(){const e=await n.e(1861).then(n.bind(n,1861));return t(e.clojure)}},{name:"Closure Stylesheets (GSS)",displayName:s.__("Closure Stylesheets (GSS)"),mime:"text/x-gss",extensions:["gss"],async load(){const e=await n.e(3923).then(n.bind(n,63923));return t(e.gss)}},{name:"CMake",displayName:s.__("CMake"),mime:"text/x-cmake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,async load(){const e=await n.e(4419).then(n.bind(n,54419));return t(e.cmake)}},{name:"CoffeeScript",displayName:s.__("CoffeeScript"),alias:["coffee","coffee-script"],mime:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],extensions:["coffee"],async load(){const e=await n.e(2646).then(n.bind(n,22646));return t(e.coffeeScript)}},{name:"Common Lisp",displayName:s.__("Common Lisp"),alias:["lisp"],mime:"text/x-common-lisp",extensions:["cl","lisp","el"],async load(){const e=await n.e(1420).then(n.bind(n,61420));return t(e.commonLisp)}},{name:"Cypher",displayName:s.__("Cypher"),mime:"application/x-cypher-query",extensions:["cyp","cypher"],async load(){const e=await n.e(4878).then(n.bind(n,74878));return t(e.cypher)}},{name:"Cython",displayName:s.__("Cython"),mime:"text/x-cython",extensions:["pyx","pxd","pxi"],async load(){const e=await n.e(6532).then(n.bind(n,16532));return t(e.cython)}},{name:"Crystal",displayName:s.__("Crystal"),mime:"text/x-crystal",extensions:["cr"],async load(){const e=await n.e(1945).then(n.bind(n,11945));return t(e.crystal)}},{name:"D",displayName:s.__("D"),mime:"text/x-d",extensions:["d"],async load(){const e=await n.e(5041).then(n.bind(n,95041));return t(e.d)}},{name:"Dart",displayName:s.__("Dart"),mime:["application/dart","text/x-dart"],extensions:["dart"],async load(){const e=await n.e(942).then(n.bind(n,60942));return t(e.dart)}},{name:"diff",displayName:s.__("diff"),mime:"text/x-diff",extensions:["diff","patch"],async load(){const e=await n.e(1776).then(n.bind(n,41776));return t(e.diff)}},{name:"Dockerfile",displayName:s.__("Dockerfile"),mime:"text/x-dockerfile",filename:/^Dockerfile$/,async load(){const e=await n.e(2485).then(n.bind(n,92485));return t(e.dockerFile)}},{name:"DTD",displayName:s.__("DTD"),mime:"application/xml-dtd",extensions:["dtd"],async load(){const e=await n.e(8493).then(n.bind(n,68493));return t(e.dtd)}},{name:"Dylan",displayName:s.__("Dylan"),mime:"text/x-dylan",extensions:["dylan","dyl","intr"],async load(){const e=await n.e(9409).then(n.bind(n,89409));return t(e.dylan)}},{name:"EBNF",displayName:s.__("EBNF"),mime:"text/x-ebnf",async load(){const e=await n.e(5203).then(n.bind(n,75203));return t(e.ebnf)}},{name:"ECL",displayName:s.__("ECL"),mime:"text/x-ecl",extensions:["ecl"],async load(){const e=await n.e(1903).then(n.bind(n,91903));return t(e.ecl)}},{name:"edn",displayName:s.__("edn"),mime:"application/edn",extensions:["edn"],async load(){const e=await n.e(1861).then(n.bind(n,1861));return t(e.clojure)}},{name:"Eiffel",displayName:s.__("Eiffel"),mime:"text/x-eiffel",extensions:["e"],async load(){const e=await n.e(1467).then(n.bind(n,41467));return t(e.eiffel)}},{name:"Elm",displayName:s.__("Elm"),mime:"text/x-elm",extensions:["elm"],async load(){const e=await n.e(9738).then(n.bind(n,39738));return t(e.elm)}},{name:"Erlang",displayName:s.__("Erlang"),mime:"text/x-erlang",extensions:["erl"],async load(){const e=await n.e(4519).then(n.bind(n,34519));return t(e.erlang)}},{name:"Esper",displayName:s.__("Esper"),mime:"text/x-esper",async load(){const e=await n.e(4591).then(n.bind(n,34591));return t(e.esper)}},{name:"Factor",displayName:s.__("Factor"),mime:"text/x-factor",extensions:["factor"],async load(){const e=await n.e(4017).then(n.bind(n,4017));return t(e.factor)}},{name:"FCL",displayName:s.__("FCL"),mime:"text/x-fcl",async load(){const e=await n.e(8002).then(n.bind(n,8002));return t(e.fcl)}},{name:"Forth",displayName:s.__("Forth"),mime:"text/x-forth",extensions:["forth","fth","4th"],async load(){const e=await n.e(7317).then(n.bind(n,7317));return t(e.forth)}},{name:"Fortran",displayName:s.__("Fortran"),mime:"text/x-fortran",extensions:["f","for","f77","f90","f95"],async load(){const e=await n.e(4452).then(n.bind(n,94452));return t(e.fortran)}},{name:"F#",displayName:s.__("F#"),alias:["fsharp"],mime:"text/x-fsharp",extensions:["fs"],async load(){const e=await n.e(2909).then(n.bind(n,2909));return t(e.fSharp)}},{name:"Gas",displayName:s.__("Gas"),mime:"text/x-gas",extensions:["s"],async load(){const e=await n.e(3549).then(n.bind(n,23549));return t(e.gas)}},{name:"Gherkin",displayName:s.__("Gherkin"),mime:"text/x-feature",extensions:["feature"],async load(){const e=await n.e(5881).then(n.bind(n,95881));return t(e.gherkin)}},{name:"Go",displayName:s.__("Go"),mime:"text/x-go",extensions:["go"],async load(){const e=await n.e(3528).then(n.bind(n,93528));return t(e.go)}},{name:"Groovy",displayName:s.__("Groovy"),mime:"text/x-groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,async load(){const e=await n.e(1085).then(n.bind(n,41085));return t(e.groovy)}},{name:"Haskell",displayName:s.__("Haskell"),mime:"text/x-haskell",extensions:["hs"],async load(){const e=await n.e(1294).then(n.bind(n,21294));return t(e.haskell)}},{name:"Haxe",displayName:s.__("Haxe"),mime:"text/x-haxe",extensions:["hx"],async load(){const e=await n.e(9055).then(n.bind(n,59055));return t(e.haxe)}},{name:"HXML",displayName:s.__("HXML"),mime:"text/x-hxml",extensions:["hxml"],async load(){const e=await n.e(9055).then(n.bind(n,59055));return t(e.hxml)}},{name:"HTTP",displayName:s.__("HTTP"),mime:"message/http",async load(){const e=await n.e(1550).then(n.bind(n,71550));return t(e.http)}},{name:"IDL",displayName:s.__("IDL"),mime:"text/x-idl",extensions:["pro"],async load(){const e=await n.e(2857).then(n.bind(n,2857));return t(e.idl)}},{name:"JSON-LD",displayName:s.__("JSON-LD"),alias:["jsonld"],mime:"application/ld+json",extensions:["jsonld"],async load(){const e=await n.e(7318).then(n.bind(n,27318));return t(e.jsonld)}},{name:"Jinja2",displayName:s.__("Jinja2"),mime:"text/jinja2",extensions:["j2","jinja","jinja2"],async load(){const e=await n.e(7848).then(n.bind(n,71269));return t(e.jinja2)}},{name:"Julia",displayName:s.__("Julia"),mime:"text/x-julia",extensions:["jl"],async load(){const e=await n.e(4139).then(n.bind(n,4139));return t(e.julia)}},{name:"Kotlin",displayName:s.__("Kotlin"),mime:"text/x-kotlin",extensions:["kt"],async load(){const e=await n.e(942).then(n.bind(n,60942));return t(e.kotlin)}},{name:"LESS",displayName:s.__("LESS"),mime:"text/x-less",extensions:["less"],async load(){const e=await n.e(3923).then(n.bind(n,63923));return t(e.less)}},{name:"LiveScript",displayName:s.__("LiveScript"),alias:["ls"],mime:"text/x-livescript",extensions:["ls"],async load(){const e=await n.e(9445).then(n.bind(n,9445));return t(e.liveScript)}},{name:"Lua",displayName:s.__("Lua"),mime:"text/x-lua",extensions:["lua"],async load(){const e=await n.e(6595).then(n.bind(n,6595));return t(e.lua)}},{name:"mIRC",displayName:s.__("mIRC"),mime:"text/mirc",async load(){const e=await n.e(9192).then(n.bind(n,69192));return t(e.mirc)}},{name:"Mathematica",displayName:s.__("Mathematica"),mime:"text/x-mathematica",extensions:["m","nb","wl","wls"],async load(){const e=await n.e(8405).then(n.bind(n,8405));return t(e.mathematica)}},{name:"Modelica",displayName:s.__("Modelica"),mime:"text/x-modelica",extensions:["mo"],async load(){const e=await n.e(4562).then(n.bind(n,14562));return t(e.modelica)}},{name:"MUMPS",displayName:s.__("MUMPS"),mime:"text/x-mumps",extensions:["mps"],async load(){const e=await n.e(7112).then(n.bind(n,77112));return t(e.mumps)}},{name:"mbox",displayName:s.__("mbox"),mime:"application/mbox",extensions:["mbox"],async load(){const e=await n.e(7731).then(n.bind(n,47731));return t(e.mbox)}},{name:"Nginx",displayName:s.__("Nginx"),mime:"text/x-nginx-conf",filename:/nginx.*\.conf$/i,async load(){const e=await n.e(8319).then(n.bind(n,38319));return t(e.nginx)}},{name:"NSIS",displayName:s.__("NSIS"),mime:"text/x-nsis",extensions:["nsh","nsi"],async load(){const e=await n.e(7823).then(n.bind(n,27823));return t(e.nsis)}},{name:"NTriples",displayName:s.__("NTriples"),mime:["application/n-triples","application/n-quads","text/n-triples"],extensions:["nt","nq"],async load(){const e=await n.e(7390).then(n.bind(n,87390));return t(e.ntriples)}},{name:"Objective-C",displayName:s.__("Objective-C"),alias:["objective-c","objc"],mime:"text/x-objectivec",extensions:["m"],async load(){const e=await n.e(942).then(n.bind(n,60942));return t(e.objectiveC)}},{name:"Objective-C++",displayName:s.__("Objective-C++"),alias:["objective-c++","objc++"],mime:"text/x-objectivec++",extensions:["mm"],async load(){const e=await n.e(942).then(n.bind(n,60942));return t(e.objectiveCpp)}},{name:"OCaml",displayName:s.__("OCaml"),mime:"text/x-ocaml",extensions:["ml","mli","mll","mly"],async load(){const e=await n.e(2909).then(n.bind(n,2909));return t(e.oCaml)}},{name:"Octave",displayName:s.__("Octave"),mime:"text/x-octave",extensions:["m"],async load(){const e=await n.e(1954).then(n.bind(n,21954));return t(e.octave)}},{name:"Oz",displayName:s.__("Oz"),mime:"text/x-oz",extensions:["oz"],async load(){const e=await n.e(7080).then(n.bind(n,97080));return t(e.oz)}},{name:"Pascal",displayName:s.__("Pascal"),mime:"text/x-pascal",extensions:["p","pas"],async load(){const e=await n.e(1452).then(n.bind(n,91452));return t(e.pascal)}},{name:"Perl",displayName:s.__("Perl"),mime:"text/x-perl",extensions:["pl","pm"],async load(){const e=await n.e(5521).then(n.bind(n,5521));return t(e.perl)}},{name:"Pig",displayName:s.__("Pig"),mime:"text/x-pig",extensions:["pig"],async load(){const e=await n.e(6243).then(n.bind(n,86243));return t(e.pig)}},{name:"PowerShell",displayName:s.__("PowerShell"),mime:"application/x-powershell",extensions:["ps1","psd1","psm1"],async load(){const e=await n.e(2145).then(n.bind(n,92145));return t(e.powerShell)}},{name:"Properties files",displayName:s.__("Properties files"),alias:["ini","properties"],mime:"text/x-properties",extensions:["properties","ini","in"],async load(){const e=await n.e(3306).then(n.bind(n,93306));return t(e.properties)}},{name:"ProtoBuf",displayName:s.__("ProtoBuf"),mime:"text/x-protobuf",extensions:["proto"],async load(){const e=await n.e(5959).then(n.bind(n,15959));return t(e.protobuf)}},{name:"Puppet",displayName:s.__("Puppet"),mime:"text/x-puppet",extensions:["pp"],async load(){const e=await n.e(8710).then(n.bind(n,58710));return t(e.puppet)}},{name:"Q",displayName:s.__("Q"),mime:"text/x-q",extensions:["q"],async load(){const e=await n.e(2459).then(n.bind(n,12459));return t(e.q)}},{name:"R",displayName:s.__("R"),alias:["rscript"],mime:"text/x-rsrc",extensions:["r","R"],async load(){const e=await n.e(7887).then(n.bind(n,67887));return t(e.r)}},{name:"RPM Changes",displayName:s.__("RPM Changes"),mime:"text/x-rpm-changes",async load(){const e=await n.e(8285).then(n.bind(n,98285));return t(e.rpmChanges)}},{name:"RPM Spec",displayName:s.__("RPM Spec"),mime:"text/x-rpm-spec",extensions:["spec"],async load(){const e=await n.e(8285).then(n.bind(n,98285));return t(e.rpmSpec)}},{name:"Ruby",displayName:s.__("Ruby"),alias:["jruby","macruby","rake","rb","rbx"],mime:"text/x-ruby",extensions:["rb"],async load(){const e=await n.e(2929).then(n.bind(n,42929));return t(e.ruby)}},{name:"SAS",displayName:s.__("SAS"),mime:"text/x-sas",extensions:["sas"],async load(){const e=await n.e(8498).then(n.bind(n,18498));return t(e.sas)}},{name:"Scala",displayName:s.__("Scala"),mime:"text/x-scala",extensions:["scala"],async load(){const e=await n.e(942).then(n.bind(n,60942));return t(e.scala)}},{name:"Scheme",displayName:s.__("Scheme"),mime:"text/x-scheme",extensions:["scm","ss"],async load(){const e=await n.e(1993).then(n.bind(n,91993));return t(e.scheme)}},{name:"SCSS",displayName:s.__("SCSS"),mime:"text/x-scss",extensions:["scss"],async load(){const e=await n.e(3923).then(n.bind(n,63923));return t(e.sCSS)}},{name:"Shell",displayName:s.__("Shell"),alias:["bash","sh","zsh"],mime:["text/x-sh","application/x-sh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,async load(){const e=await n.e(795).then(n.bind(n,80795));return t(e.shell)}},{name:"Sieve",displayName:s.__("Sieve"),mime:"application/sieve",extensions:["siv","sieve"],async load(){const e=await n.e(6163).then(n.bind(n,46163));return t(e.sieve)}},{name:"Smalltalk",displayName:s.__("Smalltalk"),mime:"text/x-stsrc",extensions:["st"],async load(){const e=await n.e(8012).then(n.bind(n,28012));return t(e.smalltalk)}},{name:"Solr",displayName:s.__("Solr"),mime:"text/x-solr",async load(){const e=await n.e(7669).then(n.bind(n,17669));return t(e.solr)}},{name:"SML",displayName:s.__("SML"),mime:"text/x-sml",extensions:["sml","sig","fun","smackspec"],async load(){const e=await n.e(2909).then(n.bind(n,2909));return t(e.sml)}},{name:"SPARQL",displayName:s.__("SPARQL"),alias:["sparul"],mime:"application/sparql-query",extensions:["rq","sparql"],async load(){const e=await n.e(3127).then(n.bind(n,23127));return t(e.sparql)}},{name:"Spreadsheet",displayName:s.__("Spreadsheet"),alias:["excel","formula"],mime:"text/x-spreadsheet",async load(){const e=await n.e(7702).then(n.bind(n,57702));return t(e.spreadsheet)}},{name:"Squirrel",displayName:s.__("Squirrel"),mime:"text/x-squirrel",extensions:["nut"],async load(){const e=await n.e(942).then(n.bind(n,60942));return t(e.squirrel)}},{name:"Stylus",displayName:s.__("Stylus"),mime:"text/x-styl",extensions:["styl"],async load(){const e=await n.e(9222).then(n.bind(n,89222));return t(e.stylus)}},{name:"Swift",displayName:s.__("Swift"),mime:"text/x-swift",extensions:["swift"],async load(){const e=await n.e(2363).then(n.bind(n,32363));return t(e.swift)}},{name:"sTeX",displayName:s.__("sTeX"),mime:"text/x-stex",async load(){const e=await n.e(8010).then(n.bind(n,38010));return t(e.stex)}},{name:"LaTeX",displayName:s.__("LaTeX"),alias:["tex"],mime:"text/x-latex",extensions:["text","ltx","tex"],async load(){const e=await n.e(8010).then(n.bind(n,38010));return t(e.stex)}},{name:"SystemVerilog",displayName:s.__("SystemVerilog"),mime:"text/x-systemverilog",extensions:["v","sv","svh"],async load(){const e=await n.e(9747).then(n.bind(n,59747));return t(e.verilog)}},{name:"Tcl",displayName:s.__("Tcl"),mime:"text/x-tcl",extensions:["tcl"],async load(){const e=await n.e(3807).then(n.bind(n,73807));return t(e.tcl)}},{name:"Textile",displayName:s.__("Textile"),mime:"text/x-textile",extensions:["textile"],async load(){const e=await n.e(2039).then(n.bind(n,72039));return t(e.textile)}},{name:"TiddlyWiki",displayName:s.__("TiddlyWiki"),mime:"text/x-tiddlywiki",async load(){const e=await n.e(1716).then(n.bind(n,21716));return t(e.tiddlyWiki)}},{name:"Tiki wiki",displayName:s.__("Tiki wiki"),mime:"text/tiki",async load(){const e=await n.e(9362).then(n.bind(n,19362));return t(e.tiki)}},{name:"TOML",displayName:s.__("TOML"),mime:"text/x-toml",extensions:["toml"],async load(){const e=await n.e(46).then(n.bind(n,50046));return t(e.toml)}},{name:"troff",displayName:s.__("troff"),mime:"text/troff",extensions:["1","2","3","4","5","6","7","8","9"],async load(){const e=await n.e(5331).then(n.bind(n,45331));return t(e.troff)}},{name:"TTCN",displayName:s.__("TTCN"),mime:"text/x-ttcn",extensions:["ttcn","ttcn3","ttcnpp"],async load(){const e=await n.e(581).then(n.bind(n,30581));return t(e.ttcn)}},{name:"TTCN_CFG",displayName:s.__("TTCN_CFG"),mime:"text/x-ttcn-cfg",extensions:["cfg"],async load(){const e=await n.e(3962).then(n.bind(n,93962));return t(e.ttcnCfg)}},{name:"Turtle",displayName:s.__("Turtle"),mime:"text/turtle",extensions:["ttl"],async load(){const e=await n.e(8805).then(n.bind(n,78805));return t(e.turtle)}},{name:"Web IDL",displayName:s.__("Web IDL"),mime:"text/x-webidl",extensions:["webidl"],async load(){const e=await n.e(9109).then(n.bind(n,39109));return t(e.webIDL)}},{name:"VB.NET",displayName:s.__("VB.NET"),mime:"text/x-vb",extensions:["vb"],async load(){const e=await n.e(7173).then(n.bind(n,67173));return t(e.vb)}},{name:"VBScript",displayName:s.__("VBScript"),mime:"text/vbscript",extensions:["vbs"],async load(){const e=await n.e(8787).then(n.bind(n,68787));return t(e.vbScript)}},{name:"Velocity",displayName:s.__("Velocity"),mime:"text/velocity",extensions:["vtl"],async load(){const e=await n.e(7363).then(n.bind(n,57363));return t(e.velocity)}},{name:"Verilog",displayName:s.__("Verilog"),mime:"text/x-verilog",extensions:["v"],async load(){const e=await n.e(9747).then(n.bind(n,59747));return t(e.verilog)}},{name:"VHDL",displayName:s.__("VHDL"),mime:"text/x-vhdl",extensions:["vhd","vhdl"],async load(){const e=await n.e(6359).then(n.bind(n,6359));return t(e.vhdl)}},{name:"XQuery",displayName:s.__("XQuery"),mime:"application/xquery",extensions:["xy","xquery"],async load(){const e=await n.e(6815).then(n.bind(n,96815));return t(e.xQuery)}},{name:"Yacas",displayName:s.__("Yacas"),mime:"text/x-yacas",extensions:["ys"],async load(){const e=await n.e(6267).then(n.bind(n,76267));return t(e.yacas)}},{name:"YAML",displayName:s.__("YAML"),alias:["yml"],mime:["text/x-yaml","text/yaml"],extensions:["yaml","yml"],async load(){const e=await n.e(2090).then(n.bind(n,52090));return t(e.yaml)}},{name:"Z80",displayName:s.__("Z80"),mime:"text/x-z80",extensions:["z80"],async load(){const e=await n.e(2295).then(n.bind(n,22295));return t(e.z80)}},{name:"mscgen",displayName:s.__("mscgen"),mime:"text/x-mscgen",extensions:["mscgen","mscin","msc"],async load(){const e=await n.e(1608).then(n.bind(n,31608));return t(e.mscgen)}},{name:"xu",displayName:s.__("xu"),mime:"text/x-xu",extensions:["xu"],async load(){const e=await n.e(1608).then(n.bind(n,31608));return t(e.xu)}},{name:"msgenny",displayName:s.__("msgenny"),mime:"text/x-msgenny",extensions:["msgenny"],async load(){const e=await n.e(1608).then(n.bind(n,31608));return t(e.msgenny)}}]}e.getDefaultLanguages=s})(q||(q={}));const K="jp-CodeMirrorEditor";const J=38;const Z=40;class G{constructor(e){var t,n,i,s,o,c;this.edgeRequested=new d.Signal(this);this._isDisposed=false;this._language=new r.Compartment;this._uuid="";this._languages=(t=e.languages)!==null&&t!==void 0?t:new q;this._configurator=(s=(n=e.extensionsRegistry)===null||n===void 0?void 0:n.createNew({...e,inline:(i=e.inline)!==null&&i!==void 0?i:false}))!==null&&s!==void 0?s:new O;const h=this.host=e.host;h.classList.add(K);h.classList.add("jp-Editor");h.addEventListener("focus",this,true);h.addEventListener("blur",this,true);h.addEventListener("scroll",this,true);this._uuid=(o=e.uuid)!==null&&o!==void 0?o:l.UUID.uuid4();const u=this._model=e.model;const p=a.EditorView.domEventHandlers({keydown:(e,t)=>this.onKeydown(e)});const m=a.EditorView.updateListener.of((e=>{this._onDocChanged(e)}));this._editor=Y.createEditor(h,this._configurator,[r.Prec.high(p),m,this._language.of([]),...(c=e.extensions)!==null&&c!==void 0?c:[]],u.sharedModel.source);this._onMimeTypeChanged();this._onCursorActivity();this._configurator.configChanged.connect(this.onConfigChanged,this);u.mimeTypeChanged.connect(this._onMimeTypeChanged,this)}get uuid(){return this._uuid}set uuid(e){this._uuid=e}get editor(){return this._editor}get doc(){return this._editor.state.doc}get lineCount(){return this.doc.lines}get model(){return this._model}get lineHeight(){return this._editor.defaultLineHeight}get charWidth(){return this._editor.defaultCharacterWidth}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this.host.removeEventListener("focus",this,true);this.host.removeEventListener("blur",this,true);this.host.removeEventListener("scroll",this,true);this._configurator.dispose();d.Signal.clearData(this);this.editor.destroy()}getOption(e){return this._configurator.getOption(e)}hasOption(e){return this._configurator.hasOption(e)}setOption(e,t){this._configurator.setOption(e,t)}setOptions(e){this._configurator.setOptions(e)}injectExtension(e){this._configurator.injectExtension(this._editor,e)}getLine(e){e=e+1;return e<=this.doc.lines?this.doc.line(e).text:undefined}getOffsetAt(e){return this.doc.line(e.line+1).from+e.column}getPositionAt(e){const t=this.doc.lineAt(e);return{line:t.number-1,column:e-t.from}}undo(){this.model.sharedModel.undo()}redo(){this.model.sharedModel.redo()}clearHistory(){this.model.sharedModel.clearUndoHistory()}focus(){this._editor.focus()}hasFocus(){return this._editor.hasFocus}blur(){this._editor.contentDOM.blur()}get state(){return this._editor.state}firstLine(){return 0}lastLine(){return this.doc.lines-1}cursorCoords(e,t){const n=this.state.selection.main;const i=e?n.from:n.to;const s=this.editor.coordsAtPos(i);return s}getRange(e,t,n){const i=this.getOffsetAt(this._toPosition(e));const s=this.getOffsetAt(this._toPosition(t));return this.state.sliceDoc(i,s)}revealPosition(e){const t=this.getOffsetAt(e);this._editor.dispatch({effects:a.EditorView.scrollIntoView(t)})}revealSelection(e){const t=this.getOffsetAt(e.start);const n=this.getOffsetAt(e.end);this._editor.dispatch({effects:a.EditorView.scrollIntoView(r.EditorSelection.range(t,n))})}getCoordinateForPosition(e){const t=this.getOffsetAt(e);const n=this.editor.coordsAtPos(t);return n}getPositionForCoordinate(e){const t=this.editor.posAtCoords({x:e.left,y:e.top});return this.getPositionAt(t)||null}getCursorPosition(){const e=this.state.selection.main.head;return this.getPositionAt(e)}setCursorPosition(e,t){const n=this.getOffsetAt(e);this.editor.dispatch({selection:{anchor:n},scrollIntoView:true});if(!this.editor.hasFocus){this.model.selections.set(this.uuid,this.getSelections())}}getSelection(){return this.getSelections()[0]}setSelection(e){this.setSelections([e])}getSelections(){const e=this.state.selection.ranges;if(e.length>0){const t=e.map((e=>({anchor:this._toCodeMirrorPosition(this.getPositionAt(e.from)),head:this._toCodeMirrorPosition(this.getPositionAt(e.to))})));return t.map((e=>this._toSelection(e)))}const t=this._toCodeMirrorPosition(this.getPositionAt(this.state.selection.main.head));const n=this._toSelection({anchor:t,head:t});return[n]}setSelections(e){const t=e.length?e.map((e=>r.EditorSelection.range(this.getOffsetAt(e.start),this.getOffsetAt(e.end)))):[r.EditorSelection.range(0,0)];this.editor.dispatch({selection:r.EditorSelection.create(t)})}replaceSelection(e){const t=this.getSelections()[0];this.model.sharedModel.updateSource(this.getOffsetAt(t.start),this.getOffsetAt(t.end),e);const n=this.getPositionAt(this.getOffsetAt(t.start)+e.length);this.setSelection({start:n,end:n})}getTokens(){const e=[];const t=(0,o.ensureSyntaxTree)(this.state,this.doc.length);if(t){t.iterate({enter:t=>{if(t.node.firstChild===null){e.push({value:this.state.sliceDoc(t.from,t.to),offset:t.from,type:t.name})}return true}})}return e}getTokenAt(e){const t=(0,o.ensureSyntaxTree)(this.state,e);let n=null;if(t){t.iterate({enter:t=>{if(n){return false}if(t.node.firstChild){return true}if(e>=t.from&&e<=t.to){n={value:this.state.sliceDoc(t.from,t.to),offset:t.from,type:t.name};return false}return true}})}return n||{offset:e,value:""}}getTokenAtCursor(){return this.getTokenAt(this.state.selection.main.head)}newIndentedLine(){(0,i.insertNewlineAndIndent)({state:this.state,dispatch:this.editor.dispatch})}execCommand(e){e(this.editor)}onConfigChanged(e,t){e.reconfigureExtensions(this._editor,t)}onKeydown(e){const t=this.state.selection.main.head;if(t===0&&e.keyCode===J){if(!e.shiftKey){this.edgeRequested.emit("top")}return false}const n=this.doc.lineAt(t).number;if(n===1&&e.keyCode===J){if(!e.shiftKey){this.edgeRequested.emit("topLine")}return false}const i=this.doc.length;if(t===i&&e.keyCode===Z){if(!e.shiftKey){this.edgeRequested.emit("bottom")}return false}return false}_onMimeTypeChanged(){this._languages.getLanguage(this._model.mimeType).then((e=>{var t;this._editor.dispatch({effects:this._language.reconfigure((t=e===null||e===void 0?void 0:e.support)!==null&&t!==void 0?t:[])})})).catch((e=>{console.log(`Failed to load language for '${this._model.mimeType}'.`,e);this._editor.dispatch({effects:this._language.reconfigure([])})}))}_onCursorActivity(){if(this._editor.hasFocus){const e=this.getSelections();this.model.selections.set(this.uuid,e)}}_toSelection(e){return{uuid:this.uuid,start:this._toPosition(e.anchor),end:this._toPosition(e.head)}}_toPosition(e){return{line:e.line,column:e.ch}}_toCodeMirrorPosition(e){return{line:e.line,ch:e.column}}_onDocChanged(e){if(e.transactions.length&&e.transactions[0].selection){this._onCursorActivity()}}handleEvent(e){switch(e.type){case"focus":this._evtFocus(e);break;case"blur":this._evtBlur(e);break;default:break}}_evtFocus(e){this.host.classList.add("jp-mod-focused");this._onCursorActivity()}_evtBlur(e){this.host.classList.remove("jp-mod-focused")}}var Y;(function(e){function t(e,t,n,i){const s=t.getInitialExtensions();s.push(...n);const o=new a.EditorView({state:r.EditorState.create({doc:i,extensions:s}),parent:e});return o}e.createEditor=t})(Y||(Y={}));var X=n(52993);class Q{constructor(e={}){var t,n,i;this.newInlineEditor=e=>{var t;e.host.dataset.type="inline";return this.newEditor({...e,config:{...this.inlineCodeMirrorConfig,...e.config||{}},inline:true,extensions:[a.keymap.of(X.searchKeymap)].concat((t=e.extensions)!==null&&t!==void 0?t:[])})};this.newDocumentEditor=e=>{var t,n;e.host.dataset.type="document";return this.newEditor({...e,config:{...this.documentCodeMirrorConfig,...(t=e.config)!==null&&t!==void 0?t:{}},inline:false,extensions:[a.keymap.of([{key:"Shift-Enter",run:e=>true}])].concat((n=e.extensions)!==null&&n!==void 0?n:[])})};this.languages=(t=e.languages)!==null&&t!==void 0?t:new q;this.extensions=(n=e.extensions)!==null&&n!==void 0?n:new B;this.translator=(i=e.translator)!==null&&i!==void 0?i:h.nullTranslator;this.inlineCodeMirrorConfig={};this.documentCodeMirrorConfig={lineNumbers:true,scrollPastEnd:true}}newEditor(e){const t=new G({extensionsRegistry:this.extensions,languages:this.languages,translator:this.translator,...e});return t}}class ee{constructor(e){this.languages=e}getMimeTypeByLanguage(e){const t=e.file_extension||"";const n=this.languages.findBest(e.codemirror_mode||{mimetype:e.mimetype,name:e.name,ext:[t.split(".").slice(-1)[0]]});return n?n.mime:F.IEditorMimeTypeService.defaultMimeType}getMimeTypeByFilePath(e){var t;const n=z.PathExt.extname(e);if(n===".ipy"){return"text/x-python"}else if(n===".md"){return"text/x-ipythongfm"}const i=this.languages.findByFileName(e);return i?Array.isArray(i.mime)?(t=i.mime[0])!==null&&t!==void 0?t:F.IEditorMimeTypeService.defaultMimeType:i.mime:F.IEditorMimeTypeService.defaultMimeType}}var te=n(15645);class ne{constructor(){this.currentIndex=null;this.query=null;this._isActive=true;this._inSelection=null;this._isDisposed=false;this._cmHandler=null;this.currentIndex=null;this._stateChanged=new d.Signal(this)}get cmHandler(){if(!this._cmHandler){this._cmHandler=new ie(this.editor)}return this._cmHandler}get stateChanged(){return this._stateChanged}get currentMatchIndex(){return this.isActive?this.currentIndex:null}get isActive(){return this._isActive}get isDisposed(){return this._isDisposed}get matchesCount(){return this.isActive?this.cmHandler.matches.length:0}clearHighlight(){this.currentIndex=null;this.cmHandler.clearHighlight();return Promise.resolve()}dispose(){if(this._isDisposed){return}this._isDisposed=true;d.Signal.clearData(this);if(this.isActive){this.endQuery().catch((e=>{console.error(`Failed to end search query on cells.`,e)}))}}async setIsActive(e){if(this._isActive===e){return}this._isActive=e;if(this._isActive){if(this.query!==null){await this.startQuery(this.query,this.filters)}}else{await this.endQuery()}}async setSearchSelection(e){if(this._inSelection===e){return}this._inSelection=e;await this.updateCodeMirror(this.model.sharedModel.getSource());this._stateChanged.emit()}setProtectSelection(e){this.cmHandler.protectSelection=e}async startQuery(e,t){this.query=e;this.filters=t;const n=this.model.sharedModel.getSource();await this.updateCodeMirror(n);this.model.sharedModel.changed.connect(this.onSharedModelChanged,this)}async endQuery(){await this.clearHighlight();await this.cmHandler.endQuery();this.currentIndex=null}async highlightNext(e=true,t){if(this.matchesCount===0||!this.isActive){this.currentIndex=null}else{let n=await this.cmHandler.highlightNext(t);if(n){this.currentIndex=this.cmHandler.currentIndex}else{this.currentIndex=e?0:null}return n}return Promise.resolve(this.getCurrentMatch())}async highlightPrevious(e=true,t){if(this.matchesCount===0||!this.isActive){this.currentIndex=null}else{let n=await this.cmHandler.highlightPrevious(t);if(n){this.currentIndex=this.cmHandler.currentIndex}else{this.currentIndex=e?this.matchesCount-1:null}return n}return Promise.resolve(this.getCurrentMatch())}replaceCurrentMatch(e,t,n){if(!this.isActive){return Promise.resolve(false)}let i=false;if(this.currentIndex!==null&&this.currentIndex<this.cmHandler.matches.length){const t=this.getCurrentMatch();if(!t){this.currentIndex=null}else{this.cmHandler.matches.splice(this.currentIndex,1);this.currentIndex=this.currentIndex<this.cmHandler.matches.length?Math.max(this.currentIndex-1,0):null;const s=(n===null||n===void 0?void 0:n.regularExpression)?t.text.replace(this.query,e):e;const o=(n===null||n===void 0?void 0:n.preserveCase)?te.GenericSearchProvider.preserveCase(t.text,s):s;this.model.sharedModel.updateSource(t.position,t.position+t.text.length,o);i=true}}return Promise.resolve(i)}replaceAllMatches(e,t){if(!this.isActive){return Promise.resolve(false)}let n=this.cmHandler.matches.length>0;let i=this.model.sharedModel.getSource();let s=0;const o=this.cmHandler.matches.reduce(((n,o)=>{const r=o.position;const a=r+o.text.length;const l=(t===null||t===void 0?void 0:t.regularExpression)?o.text.replace(this.query,e):e;const d=(t===null||t===void 0?void 0:t.preserveCase)?te.GenericSearchProvider.preserveCase(o.text,l):l;const c=`${n}${i.slice(s,r)}${d}`;s=a;return c}),"");if(n){this.cmHandler.matches=[];this.currentIndex=null;this.model.sharedModel.setSource(`${o}${i.slice(s)}`)}return Promise.resolve(n)}getCurrentMatch(){if(this.currentIndex===null){return undefined}else{let e=undefined;if(this.currentIndex<this.cmHandler.matches.length){e=this.cmHandler.matches[this.currentIndex]}return e}}async onSharedModelChanged(e,t){if(t.sourceChange){await this.updateCodeMirror(e.getSource());this._stateChanged.emit()}}async updateCodeMirror(e){if(this.query!==null&&this.isActive){const t=await te.TextSearchEngine.search(this.query,e);if(this._inSelection){const e=this.editor;const n=e.getOffsetAt(this._inSelection.start);const i=e.getOffsetAt(this._inSelection.end);this.cmHandler.matches=t.filter((e=>e.position>=n&&e.position<=i));if(this.cmHandler.currentIndex===null&&this.cmHandler.matches.length>0){await this.cmHandler.highlightNext({from:"selection",select:false,scroll:false})}this.currentIndex=this.cmHandler.currentIndex}else{this.cmHandler.matches=t}}else{this.cmHandler.matches=[]}}}class ie{constructor(e){this._current=null;this._cm=e;this._matches=new Array;this._currentIndex=null;this._highlightEffect=r.StateEffect.define({map:(e,t)=>{const n=e=>({text:e.text,position:t.mapPos(e.position)});return{matches:e.matches.map(n),currentMatch:e.currentMatch?n(e.currentMatch):null}}});this._highlightMark=a.Decoration.mark({class:"cm-searching"});this._currentMark=a.Decoration.mark({class:"jp-current-match"});this._highlightField=r.StateField.define({create:()=>a.Decoration.none,update:(e,t)=>{e=e.map(t.changes);for(let n of t.effects){if(n.is(this._highlightEffect)){const t=n;if(t.value.matches.length){e=e.update({add:t.value.matches.map((e=>this._highlightMark.range(e.position,e.position+e.text.length))),filter:()=>false});e=e.update({add:t.value.currentMatch?[this._currentMark.range(t.value.currentMatch.position,t.value.currentMatch.position+t.value.currentMatch.text.length)]:[]})}else{e=a.Decoration.none}}}return e},provide:e=>a.EditorView.decorations.from(e)});this._domEventHandlers=a.EditorView.domEventHandlers({focus:()=>{this._selectCurrentMatch()}})}get currentIndex(){return this._currentIndex}get matches(){return this._matches}set matches(e){this._matches=e;if(this._currentIndex!==null&&this._currentIndex>this._matches.length){this._currentIndex=this._matches.length>0?0:null}this._highlightCurrentMatch({select:false})}get protectSelection(){return this._protectSelection}set protectSelection(e){this._protectSelection=e}clearHighlight(){this._currentIndex=null;this._highlightCurrentMatch()}endQuery(){this._currentIndex=null;this._matches=[];if(this._cm){this._cm.editor.dispatch({effects:this._highlightEffect.of({matches:[],currentMatch:null})})}return Promise.resolve()}highlightNext(e){var t;this._currentIndex=this._findNext(false,(t=e===null||e===void 0?void 0:e.from)!==null&&t!==void 0?t:"auto");this._highlightCurrentMatch(e);return Promise.resolve(this._currentIndex!==null?this._matches[this._currentIndex]:undefined)}highlightPrevious(e){var t;this._currentIndex=this._findNext(true,(t=e===null||e===void 0?void 0:e.from)!==null&&t!==void 0?t:"auto");this._highlightCurrentMatch(e);return Promise.resolve(this._currentIndex!==null?this._matches[this._currentIndex]:undefined)}setEditor(e){if(this._cm){throw new Error("CodeMirrorEditor already set.")}else{this._cm=e;if(this._currentIndex!==null){this._highlightCurrentMatch()}this._cm.editor.dispatch({effects:r.StateEffect.appendConfig.of(this._domEventHandlers)});this._refresh()}}_selectCurrentMatch(e=true){const t=this._current;if(!t){return}if(!this._cm){return}const n={anchor:t.position,head:t.position+t.text.length};const i=this._cm.editor.state.selection.main;if(i.from===t.position&&i.to===t.position+t.text.length||this._protectSelection){if(e){this._cm.editor.dispatch({effects:a.EditorView.scrollIntoView(r.EditorSelection.range(n.anchor,n.head))});return}}else{this._cm.editor.dispatch({selection:n,scrollIntoView:e})}}_highlightCurrentMatch(e){var t,n,i;if(!this._cm){return}if(this._currentIndex!==null){const s=this.matches[this._currentIndex];this._current=s;if((t=e===null||e===void 0?void 0:e.select)!==null&&t!==void 0?t:true){if(this._cm.hasFocus()){this._selectCurrentMatch((n=e===null||e===void 0?void 0:e.scroll)!==null&&n!==void 0?n:true)}else if((i=e===null||e===void 0?void 0:e.scroll)!==null&&i!==void 0?i:true){this._cm.editor.dispatch({effects:a.EditorView.scrollIntoView(s.position)})}}}else{this._current=null}this._refresh()}_refresh(){if(!this._cm){return}let e=[this._highlightEffect.of({matches:this.matches,currentMatch:this._current})];if(!this._cm.state.field(this._highlightField,false)){e.push(r.StateEffect.appendConfig.of([this._highlightField]))}this._cm.editor.dispatch({effects:e})}_findNext(e,t="auto"){if(this._matches.length===0){return null}let n=0;if(t==="auto"&&this._cm.hasFocus()||t==="selection"){const t=this._cm.state.selection.main;n=e?t.anchor:t.head}else if(t==="selection-start"){const e=this._cm.state.selection.main;n=Math.min(e.anchor,e.head)}else if(t==="start"){n=0}else if(this._current){n=e?this._current.position:this._current.position+this._current.text.length}if(n===0&&e&&this.currentIndex===null){n=this._cm.doc.length}const i=n;let s=se.findNext(this._matches,i,0,this._matches.length-1);if(s===null){return e?this._matches.length-1:null}if(e){s-=1;if(s<0){return null}}return s}}var se;(function(e){function t(e,t,n=0,i=Infinity){i=Math.min(e.length-1,i);while(n<=i){let s=Math.floor(.5*(n+i));const o=e[s].position;if(o<t){n=s+1;if(n<e.length&&e[n].position>t){return n}}else if(o>t){i=s-1;if(i>0&&e[i].position<t){return s}}else{return s}}const s=n>0?n-1:0;const o=e[s];return o.position>=t?s:null}e.findNext=t})(se||(se={}));const oe=new l.Token("@jupyterlab/codemirror:IEditorExtensionRegistry",`A registry for CodeMirror extension factories.`);const re=new l.Token("@jupyterlab/codemirror:IEditorLanguageRegistry","A registry for CodeMirror languages.");const ae=new l.Token("@jupyterlab/codemirror:IEditorThemeRegistry","A registry for CodeMirror theme.")},37935:(e,t,n)=>{"use strict";var i=n(49914);var s=n(38613);var o=n(93379);var r=n.n(o);var a=n(7795);var l=n.n(a);var d=n(90569);var c=n.n(d);var h=n(3565);var u=n.n(h);var p=n(19216);var m=n.n(p);var g=n(44589);var f=n.n(g);var v=n(67657);var _={};_.styleTagTransform=f();_.setAttributes=u();_.insert=c().bind(null,"head");_.domAPI=l();_.insertStyleElement=m();var b=r()(v.Z,_);const y=v.Z&&v.Z.locals?v.Z.locals:undefined},45759:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>m});var i=n(83408);var s=n(51997);var o=n(52435);var r=n(28416);var a=n.n(r);const l="availableProviders";function d(e){const{schema:t}=e;const n=t.title;const i=t.description;const s=e.formContext.settings;const o=s.get(l).user;const d={...t.default};if(o){for(const e of Object.keys(d)){if(e in o){d[e]=o[e]}else{d[e]=-1}}}const[c,h]=(0,r.useState)(d);const u=(e,t)=>{const n={...c,[e]:parseInt(t.target.value)};s.set(l,n).catch(console.error);h(n)};return a().createElement("div",null,a().createElement("fieldset",null,a().createElement("legend",null,n),a().createElement("p",{className:"field-description"},i),Object.keys(d).map((e=>a().createElement("div",{key:e,className:"form-group small-field"},a().createElement("div",null,a().createElement("h3",null," ",e),a().createElement("div",{className:"inputFieldWrapper"},a().createElement("input",{className:"form-control",type:"number",value:c[e],onChange:t=>{u(e,t)}}))))))))}const c="@jupyterlab/completer-extension:manager";const h={id:"@jupyterlab/completer-extension:base-service",description:"Adds context and kernel completion providers.",requires:[i.ICompletionProviderManager],autoStart:true,activate:(e,t)=>{t.registerProvider(new i.ContextCompleterProvider);t.registerProvider(new i.KernelCompleterProvider)}};const u={id:c,description:"Provides the completion provider manager.",requires:[s.ISettingRegistry],optional:[o.IFormRendererRegistry],provides:i.ICompletionProviderManager,autoStart:true,activate:(e,t,n)=>{const s="availableProviders";const o="providerTimeout";const r="showDocumentationPanel";const a="autoCompletion";const l=new i.CompletionProviderManager;const h=(e,t)=>{var n;const i=e.get(s);const d=e.get(o);const c=e.get(r);const h=e.get(a);l.setTimeout(d.composite);l.setShowDocumentationPanel(c.composite);l.setContinuousHinting(h.composite);const u=(n=i.user)!==null&&n!==void 0?n:i.composite;const p=Object.entries(u!==null&&u!==void 0?u:{}).filter((e=>e[1]>=0&&t.includes(e[0]))).sort((([,e],[,t])=>t-e)).map((e=>e[0]));l.activateProvider(p)};e.restored.then((()=>{const e=[...l.getProviders().keys()];t.transform(c,{fetch:t=>{const n=t.schema.properties;const i={};e.forEach(((e,t)=>{i[e]=(t+1)*100}));n[s]["default"]=i;return t}});const n=t.load(c);n.then((t=>{h(t,e);t.changed.connect((t=>{h(t,e)}))})).catch(console.error)})).catch(console.error);if(n){const e={fieldRenderer:e=>d(e)};n.addRenderer(`${c}.availableProviders`,e)}return l}};const p=[u,h];const m=p},55834:(e,t,n)=>{"use strict";var i=n(34849);var s=n(90516);var o=n(64431)},79621:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CONTEXT_PROVIDER_ID:()=>I,Completer:()=>k,CompleterModel:()=>u,CompletionHandler:()=>l,CompletionProviderManager:()=>A,ContextCompleterProvider:()=>T,ICompletionProviderManager:()=>M,KERNEL_PROVIDER_ID:()=>L,KernelCompleterProvider:()=>P,ProviderReconciliator:()=>E});var i=n(22873);var s=n(28821);var o=n(71372);const r="jp-mod-completer-enabled";const a="jp-mod-completer-active";class l{constructor(e){this._editor=null;this._enabled=false;this._isDisposed=false;this._autoCompletion=false;this.completer=e.completer;this.completer.selected.connect(this.onCompletionSelected,this);this.completer.visibilityChanged.connect(this.onVisibilityChanged,this);this._reconciliator=e.reconciliator}set reconciliator(e){this._reconciliator=e}get editor(){return this._editor}set editor(e){if(e===this._editor){return}let t=this._editor;if(t&&!t.isDisposed){const e=t.model;t.host.classList.remove(r);t.host.classList.remove(a);e.selections.changed.disconnect(this.onSelectionsChanged,this);e.sharedModel.changed.disconnect(this.onTextChanged,this)}this.completer.reset();this.completer.editor=e;t=this._editor=e;if(t){const e=t.model;this._enabled=false;e.selections.changed.connect(this.onSelectionsChanged,this);e.sharedModel.changed.connect(this.onTextChanged,this);this.onSelectionsChanged()}}get isDisposed(){return this._isDisposed}set autoCompletion(e){this._autoCompletion=e}get autoCompletion(){return this._autoCompletion}dispose(){if(this.isDisposed){return}this._isDisposed=true;o.Signal.clearData(this)}invoke(){s.MessageLoop.sendMessage(this,l.Msg.InvokeRequest)}processMessage(e){switch(e.type){case l.Msg.InvokeRequest.type:this.onInvokeRequest(e);break;default:break}}getState(e,t){return{text:e.model.sharedModel.getSource(),line:t.line,column:t.column}}onCompletionSelected(e,t){const n=e.model;const i=this._editor;if(!i||!n){return}const s=n.createPatch(t);if(!s){return}const{start:o,end:r,value:a}=s;const l=i.getOffsetAt(i.getCursorPosition());i.model.sharedModel.updateSource(o,r,a);if(l<=r&&l>=o){i.setCursorPosition(i.getPositionAt(o+a.length))}}onInvokeRequest(e){if(!this.completer.model){return}if(this.completer.model.original){return}const t=this._editor;if(t){this._makeRequest(t.getCursorPosition()).catch((e=>{console.warn("Invoke request bailed",e)}))}}onSelectionsChanged(){const e=this.completer.model;const t=this._editor;if(!t){return}const n=t.host;if(!e){this._enabled=false;n.classList.remove(r);return}if(e.subsetMatch){return}const i=t.getCursorPosition();const s=t.getLine(i.line);if(!s){this._enabled=false;e.reset(true);n.classList.remove(r);return}const{start:o,end:a}=t.getSelection();if(o.column!==a.column||o.line!==a.line){this._enabled=false;e.reset(true);n.classList.remove(r);return}if(s.slice(0,i.column).match(/^\s*$/)){this._enabled=false;e.reset(true);n.classList.remove(r);return}if(!this._enabled){this._enabled=true;n.classList.add(r)}e.handleCursorChange(this.getState(t,t.getCursorPosition()))}onTextChanged(e,t){const n=this.completer.model;if(!n||!this._enabled){return}const i=this.editor;if(!i){return}if(this._autoCompletion&&this._reconciliator.shouldShowContinuousHint&&this._reconciliator.shouldShowContinuousHint(this.completer.isVisible,t)){void this._makeRequest(i.getCursorPosition())}const{start:s,end:o}=i.getSelection();if(s.column!==o.column||s.line!==o.line){return}n.handleTextChange(this.getState(i,i.getCursorPosition()))}onVisibilityChanged(e){if(e.isDisposed||e.isHidden){if(this._editor){this._editor.host.classList.remove(a);this._editor.focus()}return}if(this._editor){this._editor.host.classList.add(a)}}_makeRequest(e){const t=this.editor;if(!t){return Promise.reject(new Error("No active editor"))}const n=t.model.sharedModel.getSource();const s=i.Text.jsIndexToCharIndex(t.getOffsetAt(e),n);const o=this.getState(t,e);const r={text:n,offset:s};return this._reconciliator.fetch(r).then((e=>{if(!e){return}const t=this._updateModel(o,e.start,e.end);if(!t){return}if(t.setCompletionItems){t.setCompletionItems(e.items)}})).catch((e=>{}))}_updateModel(e,t,n){const s=this.completer.model;const o=e.text;if(!s){return null}s.original=e;s.cursor={start:i.Text.charIndexToJsIndex(t,o),end:i.Text.charIndexToJsIndex(n,o)};return s}}(function(e){let t;(function(e){e.InvokeRequest=new s.Message("invoke-request")})(t=e.Msg||(e.Msg={}))})(l||(l={}));var d=n(58740);var c=n(5596);function h(e){const t=document.createElement("span");t.textContent=e;return t.innerHTML}class u{constructor(){this._current=null;this._cursor=null;this._isDisposed=false;this._completionItems=[];this._processedItemsCache=null;this._original=null;this._query="";this._subsetMatch=false;this._typeMap={};this._orderedTypes=[];this._stateChanged=new o.Signal(this);this._queryChanged=new o.Signal(this);this._resolvingItem=0}get stateChanged(){return this._stateChanged}get queryChanged(){return this._queryChanged}get original(){return this._original}set original(e){const t=this._original===e||this._original&&e&&c.JSONExt.deepEqual(e,this._original);if(t){return}this._reset();this._current=this._original=e;this._stateChanged.emit(undefined)}get current(){return this._current}set current(e){const t=this._current===e||this._current&&e&&c.JSONExt.deepEqual(e,this._current);if(t){return}const n=this._original;if(!n){return}const i=this._cursor;if(!i){return}const s=this._current=e;if(!s){this._stateChanged.emit(undefined);return}const o=n.text.split("\n")[n.line];const r=s.text.split("\n")[s.line];if(!this._subsetMatch&&r.length<o.length){this.reset(true);return}const{start:a,end:l}=i;let d=s.text.substring(a);const h=n.text.substring(l);d=d.substring(0,d.lastIndexOf(h));this._query=d;this._processedItemsCache=null;this._queryChanged.emit({newValue:this._query,origin:"editorUpdate"});this._stateChanged.emit(undefined)}get cursor(){return this._cursor}set cursor(e){if(!this.original){return}this._cursor=e}get query(){return this._query}set query(e){this._query=e;this._processedItemsCache=null;this._queryChanged.emit({newValue:this._query,origin:"setter"})}get subsetMatch(){return this._subsetMatch}set subsetMatch(e){this._subsetMatch=e}get isDisposed(){return this._isDisposed}dispose(){if(this._isDisposed){return}this._isDisposed=true;o.Signal.clearData(this)}completionItems(){if(!this._processedItemsCache){let e=this._query;if(e){this._processedItemsCache=this._markup(e)}else{this._processedItemsCache=this._completionItems.map((e=>this._escapeItemLabel(e)))}}return this._processedItemsCache}setCompletionItems(e){if(c.JSONExt.deepEqual(e,this._completionItems)){return}this._completionItems=e;this._orderedTypes=p.findOrderedCompletionItemTypes(this._completionItems);this._processedItemsCache=null;this._stateChanged.emit(undefined)}typeMap(){return this._typeMap}orderedTypes(){return this._orderedTypes}handleCursorChange(e){if(!this._original){return}const{column:t,line:n}=e;const{current:i,original:s}=this;if(!s){return}if(n!==s.line){this.reset(true);return}if(t<s.column){this.reset(true);return}const{cursor:o}=this;if(!o||!i){return}const r=o.end-o.start;const a=s.text.split("\n")[s.line];const l=i.text.split("\n")[i.line];const d=l.length-a.length;if(t>s.column+r+d){this.reset(true);return}}handleTextChange(e){const t=this._original;if(!t){return}const{text:n,column:i,line:s}=e;const o=n.split("\n")[s][i-1];if(o&&o.match(/\S/)||e.column>=t.column){this.current=e;return}this.reset(false)}createPatch(e){const t=this._original;const n=this._cursor;const i=this._current;if(!t||!n||!i){return undefined}let{start:s,end:o}=n;o=o+(i.text.length-t.text.length);return{start:s,end:o,value:e}}reset(e=false){if(!e&&this._subsetMatch){return}this._reset();this._stateChanged.emit(undefined)}_markup(e){var t;const n=this._completionItems;let i=[];for(let s of n){const n=s.label.indexOf("(");const o=n>-1?s.label.substring(0,n):s.label;const r=d.StringExt.matchSumOfSquares(h(o),e);if(r){let e=d.StringExt.highlight(h(s.label),r.indices,p.mark);const n=Object.assign({},s);n.label=e.join("");n.insertText=(t=s.insertText)!==null&&t!==void 0?t:s.label;i.push({item:n,score:r.score})}}i.sort(p.scoreCmp);return i.map((e=>e.item))}resolveItem(e){const t=++this._resolvingItem;let n;if(!this.completionItems){return undefined}let i=this._completionItems;if(!i||!i[e]){return undefined}let s=i[e];if(s.resolve){let e;if(s.insertText){e=this.createPatch(s.insertText)}n=s.resolve(e)}else{n=Promise.resolve(s)}return n.then((e=>{this._escapeItemLabel(e,true);Object.keys(e).forEach((t=>{s[t]=e[t]}));s.resolve=undefined;if(t!==this._resolvingItem){return Promise.resolve(null)}return e})).catch((e=>{console.error(e);return Promise.resolve(s)}))}_escapeItemLabel(e,t=false){var n;const i=h(e.label);if(i!==e.label){const s=t?e:Object.assign({},e);s.insertText=(n=e.insertText)!==null&&n!==void 0?n:e.label;s.label=i;return s}return e}_reset(){const e=this._query;this._current=null;this._cursor=null;this._completionItems=[];this._original=null;this._query="";this._processedItemsCache=null;this._subsetMatch=false;this._typeMap={};this._orderedTypes=[];if(e){this._queryChanged.emit({newValue:this._query,origin:"reset"})}}}var p;(function(e){const t=["function","instance","class","module","keyword"];const n=t.reduce(((e,t)=>{e[t]=null;return e}),{});function i(e){return`<mark>${e}</mark>`}e.mark=i;function s(e,t){var n,i,s;const o=e.score-t.score;if(o!==0){return o}return(s=(n=e.item.insertText)===null||n===void 0?void 0:n.localeCompare((i=t.item.insertText)!==null&&i!==void 0?i:""))!==null&&s!==void 0?s:0}e.scoreCmp=s;function o(e){const n=new Set;e.forEach((e=>{if(e.type&&!t.includes(e.type)&&!n.has(e.type)){n.add(e.type)}}));const i=Array.from(n);i.sort(((e,t)=>e.localeCompare(t)));return t.concat(i)}e.findOrderedCompletionItemTypes=o;function r(e){const i=Object.keys(e).map((t=>e[t])).filter((e=>!!e&&!(e in n))).sort(((e,t)=>e.localeCompare(t)));return t.concat(i)}e.findOrderedTypes=r})(p||(p={}));var m=n(90848);var g=n(33112);var f=n(52435);var v=n(36044);var _=n(85448);const b="jp-Completer-item";const y="jp-mod-active";const w="jp-Completer-list";const C="jp-Completer-docpanel";const x=true;const S=10;class k extends _.Widget{constructor(e){var t,n,i,s;super({node:document.createElement("div")});this._activeIndex=0;this._editor=null;this._model=null;this._selected=new o.Signal(this);this._visibilityChanged=new o.Signal(this);this._indexChanged=new o.Signal(this);this._lastSubsetMatch="";this._geometryLock=false;this._geometryCounter=0;this._docPanelExpanded=false;this._renderCounter=0;this.sanitizer=(t=e.sanitizer)!==null&&t!==void 0?t:new m.Sanitizer;this._defaultRenderer=k.getDefaultRenderer(this.sanitizer);this._renderer=(n=e.renderer)!==null&&n!==void 0?n:this._defaultRenderer;this.model=(i=e.model)!==null&&i!==void 0?i:null;this.editor=(s=e.editor)!==null&&s!==void 0?s:null;this.addClass("jp-Completer");this._updateConstraints()}_updateConstraints(){const e=document.createElement("div");e.classList.add(w);e.style.visibility="hidden";e.style.overflowY="scroll";document.body.appendChild(e);const t=window.getComputedStyle(e);this._maxHeight=parseInt(t.maxHeight,10);this._minHeight=parseInt(t.minHeight,10);this._scrollbarWidth=e.offsetWidth-e.clientWidth;document.body.removeChild(e);const n=document.createElement("div");n.classList.add(C);this._docPanelWidth=j.measureSize(n,"inline-block").width}get activeIndex(){return this._activeIndex}get editor(){return this._editor}set editor(e){this._editor=e}get selected(){return this._selected}get visibilityChanged(){return this._visibilityChanged}get indexChanged(){return this._indexChanged}get model(){return this._model}set model(e){if(!e&&!this._model||e===this._model){return}if(this._model){this._model.stateChanged.disconnect(this.onModelStateChanged,this);this._model.queryChanged.disconnect(this.onModelQueryChanged,this)}this._model=e;if(this._model){this._model.stateChanged.connect(this.onModelStateChanged,this);this._model.queryChanged.connect(this.onModelQueryChanged,this)}}set showDocsPanel(e){this._showDoc=e}get showDocsPanel(){return this._showDoc}dispose(){this._sizeCache=undefined;this._model=null;super.dispose()}handleEvent(e){if(this.isHidden||!this._editor){return}switch(e.type){case"keydown":this._evtKeydown(e);break;case"mousedown":this._evtMousedown(e);break;case"scroll":this._evtScroll(e);break;default:break}}reset(){this._activeIndex=0;this._lastSubsetMatch="";if(this._model){this._model.reset(true)}this._sizeCache=undefined;this.node.scrollTop=0}selectActive(){const e=this.node.querySelector(`.${y}`);if(!e){this.reset();return}this._selected.emit(e.getAttribute("data-value"));this.reset()}onAfterAttach(e){document.addEventListener("keydown",this,x);document.addEventListener("mousedown",this,x);document.addEventListener("scroll",this,x)}onBeforeDetach(e){document.removeEventListener("keydown",this,x);document.removeEventListener("mousedown",this,x);document.removeEventListener("scroll",this,x)}onModelStateChanged(){if(this.isAttached){this._activeIndex=0;this._indexChanged.emit(this._activeIndex);this.update()}}onModelQueryChanged(e,t){if(this._sizeCache&&t.origin==="editorUpdate"){const t=e.completionItems();const n=this._sizeCache.items;const i=n[this._findWidestItemIndex(n)];const s=t[this._findWidestItemIndex(t)];const o=this._getPreferredItemWidthHeuristic();if(t.length!==this._sizeCache.items.length||o(i)!==o(s)){this._sizeCache=undefined}}}onUpdateRequest(e){var t;const n=this._model;if(!n){return}if(!n.query){this._populateSubset()}let i=n.completionItems();if(!i.length){if(!this.isHidden){this.reset();this.hide();this._visibilityChanged.emit(undefined)}return}this._updateConstraints();this._geometryLock=true;const s=this._createCompleterNode(n,i);let o=s.querySelectorAll(`.${b}`)[this._activeIndex];o.classList.add(y);if(this._showDoc){let e=document.createElement("div");e.className=C;this._docPanel=e;s.appendChild(e);this._docPanelExpanded=false}const r=(t=this.model)===null||t===void 0?void 0:t.resolveItem(this._activeIndex);this._updateDocPanel(r);if(this.isHidden){this.show();this._setGeometry();this._visibilityChanged.emit(undefined)}else{this._setGeometry()}this._geometryLock=false}get sizeCache(){if(!this._sizeCache){return}return{width:this._sizeCache.width,height:this._sizeCache.height}}_createCompleterNode(e,t){const n=++this._renderCounter;let i=this.node;i.textContent="";let s=e.orderedTypes();let o=document.createElement("ul");o.className=w;const r=this._renderer.createCompletionItemNode(t[0],s);const a=[r];const l=j.measureSize(r,"inline-grid");const d=Math.max(Math.ceil(this._maxHeight/l.height),5);const c=Math.min(d+1,t.length);const h=performance.now();for(let u=1;u<c;u++){const e=this._renderer.createCompletionItemNode(t[u],s);a.push(e)}for(const u of a){o.appendChild(u)}if(d<t.length){const e=this._findWidestItemIndex(t);const n=e<a.length?a[e]:this._renderer.createCompletionItemNode(t[e],s);const i=j.measureSize(n.cloneNode(true),"inline-grid");this._sizeCache={height:this._maxHeight,width:i.width+this._scrollbarWidth,items:t}}if(c<t.length){const e=(performance.now()-h)/c;const i=Math.max(5,Math.floor(12/e));let r=c;let d=a[a.length-1];const u=()=>{if(r>=t.length){return}const e=l.height*(t.length-r);d.style.marginBottom=`${e}px`;requestAnimationFrame((()=>{if(n!=this._renderCounter){return}d.style.marginBottom="";const e=Math.min(t.length,r+i);for(let n=r;n<e;n++){const e=this._renderer.createCompletionItemNode(t[n],s);o.appendChild(e);d=e}r=e;u()}))};u()}i.appendChild(o);return i}_findWidestItemIndex(e){const t=this._getPreferredItemWidthHeuristic();const n=e.map(t);return n.indexOf(Math.max(...n))}_getPreferredItemWidthHeuristic(){return this._renderer.itemWidthHeuristic?this._renderer.itemWidthHeuristic.bind(this._renderer):this._defaultRenderer.itemWidthHeuristic.bind(this._defaultRenderer)}_cycle(e){var t;const n=this.node.querySelectorAll(`.${b}`);const i=this._activeIndex;const s=n.length-1;let o=this.node.querySelector(`.${y}`);o.classList.remove(y);switch(e){case"up":this._activeIndex=i===0?s:i-1;break;case"down":this._activeIndex=i<s?i+1:0;break;case"pageUp":case"pageDown":{const t=this.node.getBoundingClientRect();const n=o.getBoundingClientRect();const r=Math.floor(t.height/n.height);const a=e==="pageUp"?-1:1;this._activeIndex=Math.min(Math.max(0,i+a*r),s);break}}o=n[this._activeIndex];o.classList.add(y);let r=this.node.querySelector(`.${w}`);v.ElementExt.scrollIntoViewIfNeeded(r,o);this._indexChanged.emit(this._activeIndex);const a=(t=this.model)===null||t===void 0?void 0:t.resolveItem(this._activeIndex);this._updateDocPanel(a)}_evtKeydown(e){if(this.isHidden||!this._editor){return}if(!this._editor.host.contains(e.target)){this.reset();return}switch(e.keyCode){case 9:{e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();const t=this._model;if(!t){return}const n=t.completionItems();if(n&&n.length===1){this._selected.emit(n[0].insertText||n[0].label);this.reset();return}const i=this._populateSubset();if(t.query&&t.query!==this._lastSubsetMatch){t.subsetMatch=true;this._selected.emit(t.query);t.subsetMatch=false;this._lastSubsetMatch=t.query}if(i){this.update()}this._cycle(e.shiftKey?"up":"down");return}case 27:e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();this.reset();return;case 33:case 34:case 38:case 40:{e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();const t=j.keyCodeMap[e.keyCode];this._cycle(t);return}default:return}}_evtMousedown(e){if(this.isHidden||!this._editor){return}if(j.nonstandardClick(e)){this.reset();return}let t=e.target;while(t!==document.documentElement){if(t.classList.contains(b)){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();this._selected.emit(t.getAttribute("data-value"));this.reset();return}if(t===this.node){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();return}t=t.parentElement}this.reset()}_evtScroll(e){if(this.isHidden||!this._editor){return}const{node:t}=this;if(t.contains(e.target)){return}requestAnimationFrame((()=>{this._setGeometry()}))}_populateSubset(){const{model:e}=this;if(!e){return false}const t=e.completionItems();const n=j.commonSubset(t.map((e=>e.insertText||e.label)));const{query:i}=e;if(n&&n!==i&&n.indexOf(i)===0){e.query=n;return true}return false}_setGeometry(){const{node:e}=this;const t=this._model;const n=this._editor;if(!n||!t||!t.original||!t.cursor){return}const i=t.cursor.start;const s=n.getPositionAt(i);const o=n.getCoordinateForPosition(s);const r=window.getComputedStyle(e);const a=parseInt(r.borderLeftWidth,10)||0;const l=parseInt(r.paddingLeft,10)||0;const d=n.host.closest(".jp-MainAreaWidget > .lm-Widget")||n.host;const c=t.completionItems();if(this._sizeCache&&this._sizeCache.items.length!==c.length){this._sizeCache=undefined}f.HoverBox.setGeometry({anchor:o,host:d,maxHeight:this._maxHeight,minHeight:this._minHeight,node:e,size:this._sizeCache,offset:{horizontal:a+l},privilege:"below",style:r,outOfViewDisplay:{top:"stick-inside",bottom:"stick-inside",left:"stick-inside",right:"stick-outside"}});const h=++this._geometryCounter;if(!this._sizeCache){requestAnimationFrame((()=>{if(h!=this._geometryCounter){return}let t=e.getBoundingClientRect();this._sizeCache={width:t.width,height:t.height,items:c}}))}}_updateDocPanel(e){var t,n,i;let s=this._docPanel;if(!s){return}this._toggleDocPanel(true);if(!e){this._toggleDocPanel(false);return}s.textContent="";const o=(i=(n=(t=this._renderer).createLoadingDocsIndicator)===null||n===void 0?void 0:n.call(t))!==null&&i!==void 0?i:this._defaultRenderer.createLoadingDocsIndicator();s.appendChild(o);e.then((e=>{var t,n,i;if(!e){return}if(!s){return}if(e.documentation){const o=(i=(n=(t=this._renderer).createDocumentationNode)===null||n===void 0?void 0:n.call(t,e))!==null&&i!==void 0?i:this._defaultRenderer.createDocumentationNode(e);s.textContent="";s.appendChild(o)}else{this._toggleDocPanel(false)}})).catch((e=>console.error(e)))}_toggleDocPanel(e){let t=this._docPanel;if(!t){return}if(e){if(this._docPanelExpanded){return}t.style.display="";this._docPanelExpanded=true}else{if(!this._docPanelExpanded){return}t.style.display="none";this._docPanelExpanded=false}const n=this._sizeCache;if(n){n.width+=this._docPanelWidth*(e?+1:-1);if(!this._geometryLock){this._setGeometry()}}}}(function(e){class t{constructor(e){this.sanitizer=(e===null||e===void 0?void 0:e.sanitizer)||new m.Sanitizer}createCompletionItemNode(e,t){let n=this._createWrapperNode(e.insertText||e.label);if(e.deprecated){n.classList.add("jp-Completer-deprecated")}return this._constructNode(n,this._createLabelNode(e.label),!!e.type,e.type,t,e.icon)}createDocumentationNode(e){const t=document.createElement("div");t.classList.add("jp-RenderedText");const n=this.sanitizer;const i=e.documentation||"";(0,g.renderText)({host:t,sanitizer:n,source:i}).catch(console.error);return t}itemWidthHeuristic(e){var t;return e.label.replace(/<\?mark>/g,"").length+(((t=e.type)===null||t===void 0?void 0:t.length)||0)}createLoadingDocsIndicator(){const e=document.createElement("div");e.classList.add("jp-Completer-loading-bar-container");const t=document.createElement("div");t.classList.add("jp-Completer-loading-bar");e.append(t);return e}_createWrapperNode(e){const t=document.createElement("li");t.className=b;t.setAttribute("data-value",e);return t}_createLabelNode(e){const t=document.createElement("code");t.className="jp-Completer-match";t.innerHTML=e;return t}_constructNode(e,t,n,i,s,o){if(o){const t=o.element({className:"jp-Completer-type jp-Completer-icon"});e.appendChild(t)}else if(n){const t=document.createElement("span");t.textContent=(i[0]||"").toLowerCase();const n=s.indexOf(i)%S+1;t.className="jp-Completer-type jp-Completer-monogram";t.setAttribute(`data-color-index`,n.toString());e.appendChild(t)}else{const t=document.createElement("span");t.className="jp-Completer-monogram";e.appendChild(t)}e.appendChild(t);if(n){e.title=i;const t=document.createElement("code");t.className="jp-Completer-typeExtended";t.textContent=i.toLocaleLowerCase();e.appendChild(t)}else{const t=document.createElement("span");t.className="jp-Completer-typeExtended";e.appendChild(t)}return e}}e.Renderer=t;let n;function i(e){if(!n||e&&n.sanitizer!==e){n=new t({sanitizer:e})}return n}e.getDefaultRenderer=i})(k||(k={}));var j;(function(e){e.keyCodeMap={38:"up",40:"down",33:"pageUp",34:"pageDown"};function t(e){const t=e.length;let n="";if(t<2){return n}const i=e[0].length;for(let s=0;s<i;s++){const i=e[0][s];for(let o=1;o<t;o++){if(e[o][s]!==i){return n}}n+=i}return n}e.commonSubset=t;function n(e){return e.button!==0||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey}e.nonstandardClick=n;function i(e,t){if(e.isConnected){console.warn("Measuring connected elements with `measureSize` has side-effects")}e.style.visibility="hidden";e.style.display=t;document.body.appendChild(e);const n=e.getBoundingClientRect();document.body.removeChild(e);e.removeAttribute("style");return n}e.measureSize=i})(j||(j={}));const M=new c.Token("@jupyterlab/completer:ICompletionProviderManager","A service for the completion providers management.");class E{constructor(e){this._resolveFactory=(e,t)=>e.resolve?n=>e.resolve(t,this._context,n):undefined;this._fetching=0;this._providers=e.providers;this._context=e.context;this._timeout=e.timeout}async fetch(e){const t=++this._fetching;let n=[];for(const s of this._providers){let i;i=s.fetch(e,this._context).then((e=>{if(t!==this._fetching){return Promise.reject(void 0)}const n=e.items.map((e=>({...e,resolve:this._resolveFactory(s,e)})));return{...e,items:n}}));const o=new Promise((e=>setTimeout((()=>e(null)),this._timeout)));i=Promise.race([i,o]);n.push(i.catch((e=>e)))}const i=Promise.all(n);return this._mergeCompletions(i)}shouldShowContinuousHint(e,t){if(this._providers[0].shouldShowContinuousHint){return this._providers[0].shouldShowContinuousHint(e,t)}return this._defaultShouldShowContinuousHint(e,t)}_alignPrefixes(e,t,n){if(t!=n){const t=this._context.editor;if(!t){return e}const i=t.getCursorPosition();const s=t.getLine(i.line);if(!s){return e}return e.map((e=>{if(e.start==n){return e}let t=s.substring(e.start,n);return{...e,items:e.items.map((e=>{let n=e.insertText||e.label;e.insertText=n.startsWith(t)?n.slice(t.length):n;return e}))}}))}return e}async _mergeCompletions(e){let t=(await e).filter((e=>{if(!e||e instanceof Error){return false}if(!e.items.length){return false}return true}));if(t.length==0){return null}else if(t.length==1){return t[0]}const n=Math.min(...t.map((e=>e.end)));const i=t.map((e=>e.start));const s=Math.min(...i);const o=Math.max(...i);t=this._alignPrefixes(t,s,o);const r=new Set;const a=new Array;for(const l of t){l.items.forEach((e=>{let t=(e.insertText||e.label).trim();if(r.has(t)){return}r.add(t);a.push(e)}))}return{start:o,end:n,items:a}}_defaultShouldShowContinuousHint(e,t){return!e&&(t.sourceChange==null||t.sourceChange.some((e=>e.insert!=null&&e.insert.length>0)))}}const I="CompletionProvider:context";class T{constructor(){this.identifier=I;this.renderer=null}async isApplicable(e){return true}fetch(e,t){const n=t.editor;if(!n){return Promise.reject("No editor")}return new Promise((e=>{e(D.contextHint(n))}))}}var D;(function(e){function t(e){const t=e.getTokenAtCursor();const i=n(t,e);const s=i.filter((e=>e.type)).map((e=>e.value));const o=new Set(s);const r=new Array;o.forEach((e=>r.push({label:e})));return{start:t.offset,end:t.offset+t.value.length,items:r}}e.contextHint=t;function n(e,t){const n=t.getTokens();return n.filter((t=>t.value.indexOf(e.value)===0&&t.value!==e.value))}})(D||(D={}));const L="CompletionProvider:kernel";class P{constructor(){this.identifier=L;this.renderer=null}async isApplicable(e){var t;const n=(t=e.session)===null||t===void 0?void 0:t.kernel;if(!n){return false}return true}async fetch(e,t){var n;const i=(n=t.session)===null||n===void 0?void 0:n.kernel;if(!i){throw new Error("No kernel for completion request.")}const s={code:e.text,cursor_pos:e.offset};const o=await i.requestComplete(s);const r=o.content;if(r.status!=="ok"){throw new Error("Completion fetch failed to return successfully.")}const a=new Array;const l=r.metadata._jupyter_types_experimental;r.matches.forEach(((e,t)=>{if(l&&l[t]){a.push({label:e,type:l[t].type,insertText:l[t].text})}else{a.push({label:e})}}));return{start:r.cursor_start,end:r.cursor_end,items:a}}async resolve(e,t,n){const{editor:s,session:o}=t;if(o&&s){let t=s.model.sharedModel.getSource();const r=s.getCursorPosition();let a=i.Text.jsIndexToCharIndex(s.getOffsetAt(r),t);const l=o.kernel;if(!t||!l){return Promise.resolve(e)}if(n){const{start:e,value:i}=n;t=t.substring(0,e)+i;a=a+i.length}const d={code:t,cursor_pos:a,detail_level:0};const c=await l.requestInspect(d);const h=c.content;if(h.status!=="ok"||!h.found){return e}e.documentation=h.data["text/plain"];return e}return e}shouldShowContinuousHint(e,t){const n=t.sourceChange;if(n==null){return true}if(n.some((e=>e.delete!=null))){return false}return n.some((t=>t.insert!=null&&(t.insert==="."||!e&&t.insert.trim().length>0)))}}class A{constructor(){this._activeProviders=new Set([L,I]);this._providers=new Map;this._panelHandlers=new Map;this._activeProvidersChanged=new o.Signal(this)}get activeProvidersChanged(){return this._activeProvidersChanged}setTimeout(e){this._timeout=e}setShowDocumentationPanel(e){this._panelHandlers.forEach((t=>t.completer.showDocsPanel=e));this._showDoc=e}setContinuousHinting(e){this._panelHandlers.forEach((t=>t.autoCompletion=e));this._autoCompletion=e}registerProvider(e){const t=e.identifier;if(this._providers.has(t)){console.warn(`Completion service with identifier ${t} is already registered`)}else{this._providers.set(t,e)}}getProviders(){return this._providers}activateProvider(e){this._activeProviders=new Set([]);e.forEach((e=>{if(this._providers.has(e)){this._activeProviders.add(e)}}));if(this._activeProviders.size===0){this._activeProviders.add(L);this._activeProviders.add(I)}this._activeProvidersChanged.emit()}async updateCompleter(e){const{widget:t,editor:n}=e;const i=t.id;const s=this._panelHandlers.get(i);if(!s){const n=await this.generateHandler(e);this._panelHandlers.set(t.id,n);t.disposed.connect((e=>{this.disposeHandler(e.id,n)}))}else{s.completer.showDocsPanel=this._showDoc;s.autoCompletion=this._autoCompletion;if(n){s.editor=n;s.reconciliator=await this.generateReconciliator(e)}}}invoke(e){const t=this._panelHandlers.get(e);if(t){t.invoke()}}select(e){const t=this._panelHandlers.get(e);if(t){t.completer.selectActive()}}async generateReconciliator(e){let t=[];for(const n of this._activeProviders){const i=this._providers.get(n);if(i&&await i.isApplicable(e)){t.push(i)}}return new E({context:e,providers:t,timeout:this._timeout})}disposeHandler(e,t){var n;(n=t.completer.model)===null||n===void 0?void 0:n.dispose();t.completer.dispose();t.dispose();this._panelHandlers.delete(e)}async generateHandler(e){var t;const n=[...this._activeProviders][0];const i=this._providers.get(n);let s=(t=i===null||i===void 0?void 0:i.renderer)!==null&&t!==void 0?t:k.getDefaultRenderer(e.sanitizer);const o=i===null||i===void 0?void 0:i.modelFactory;let r;if(o){r=await o(e)}else{r=new u}const{sanitizer:a}=e;const d=new k({model:r,renderer:s,sanitizer:a});d.showDocsPanel=this._showDoc;d.hide();_.Widget.attach(d,document.body);const c=await this.generateReconciliator(e);const h=new l({completer:d,reconciliator:c});h.editor=e.editor;return h}}},64431:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(98896);var a=n(93379);var l=n.n(a);var d=n(7795);var c=n.n(d);var h=n(90569);var u=n.n(h);var p=n(3565);var m=n.n(p);var g=n(19216);var f=n.n(g);var v=n(44589);var _=n.n(v);var b=n(62173);var y={};y.styleTagTransform=_();y.setAttributes=m();y.insert=u().bind(null,"head");y.domAPI=c();y.insertStyleElement=f();var w=l()(b.Z,y);const C=b.Z&&b.Z.locals?b.Z.locals:undefined},39511:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>T});var i=n(44906);var s=n(90848);var o=n(47391);var r=n(83408);var a=n(85257);var l=n(30796);var d=n(9036);var c=n(46054);var h=n(33112);var u=n(51997);var p=n(36168);var m=n(52435);var g=n(58740);var f=n(5596);var v=n(26512);var _=n(75379);const b={id:"@jupyterlab/console-extension:foreign",description:"Add foreign handler of IOPub messages to the console.",requires:[a.IConsoleTracker,u.ISettingRegistry,p.ITranslator],optional:[s.ICommandPalette],activate:w,autoStart:true};const y=b;function w(e,t,n,i,s){const o=i.load("jupyterlab");const{shell:r}=e;t.widgetAdded.connect(((e,t)=>{const i=t.console;const s=new a.ForeignHandler({sessionContext:i.sessionContext,parent:i});C.foreignHandlerProperty.set(i,s);void n.get("@jupyterlab/console-extension:tracker","showAllKernelActivity").then((({composite:e})=>{const t=e;s.enabled=t}));i.disposed.connect((()=>{s.dispose()}))}));const{commands:l}=e;const d=o.__("Console");const c="console:toggle-show-all-kernel-activity";function h(e){const n=t.currentWidget;const i=e["activate"]!==false;if(i&&n){r.activateById(n.id)}return n}l.addCommand(c,{label:e=>o.__("Show All Kernel Activity"),execute:e=>{const t=h(e);if(!t){return}const n=C.foreignHandlerProperty.get(t.console);if(n){n.enabled=!n.enabled}},isToggled:()=>{var e;return t.currentWidget!==null&&!!((e=C.foreignHandlerProperty.get(t.currentWidget.console))===null||e===void 0?void 0:e.enabled)},isEnabled:()=>t.currentWidget!==null&&t.currentWidget===r.currentWidget});if(s){s.addItem({command:c,category:d,args:{isPalette:true}})}}var C;(function(e){e.foreignHandlerProperty=new _.AttachedProperty({name:"foreignHandler",create:()=>undefined})})(C||(C={}));var x;(function(e){e.autoClosingBrackets="console:toggle-autoclosing-brackets";e.create="console:create";e.clear="console:clear";e.runUnforced="console:run-unforced";e.runForced="console:run-forced";e.linebreak="console:linebreak";e.interrupt="console:interrupt-kernel";e.restart="console:restart-kernel";e.closeAndShutdown="console:close-and-shutdown";e.open="console:open";e.inject="console:inject";e.changeKernel="console:change-kernel";e.getKernel="console:get-kernel";e.enterToExecute="console:enter-to-execute";e.shiftEnterToExecute="console:shift-enter-to-execute";e.interactionMode="console:interaction-mode";e.replaceSelection="console:replace-selection";e.shutdown="console:shutdown";e.invokeCompleter="completer:invoke-console";e.selectCompleter="completer:select-console"})(x||(x={}));const S={id:"@jupyterlab/console-extension:tracker",description:"Provides the console widget tracker.",provides:a.IConsoleTracker,requires:[a.ConsolePanel.IContentFactory,o.IEditorServices,h.IRenderMimeRegistry,u.ISettingRegistry],optional:[i.ILayoutRestorer,l.IDefaultFileBrowser,c.IMainMenu,s.ICommandPalette,d.ILauncher,i.ILabStatus,s.ISessionContextDialogs,m.IFormRendererRegistry,p.ITranslator],activate:D,autoStart:true};const k={id:"@jupyterlab/console-extension:factory",description:"Provides the console widget content factory.",provides:a.ConsolePanel.IContentFactory,requires:[o.IEditorServices],autoStart:true,activate:(e,t)=>{const n=t.factoryService.newInlineEditor;return new a.ConsolePanel.ContentFactory({editorFactory:n})}};const j={id:"@jupyterlab/console-extension:kernel-status",description:"Adds the console to the kernel status indicator model.",autoStart:true,requires:[a.IConsoleTracker,s.IKernelStatusModel],activate:(e,t,n)=>{const i=e=>{let n=null;if(e&&t.has(e)){return e.sessionContext}return n};n.addSessionProvider(i)}};const M={id:"@jupyterlab/console-extension:cursor-position",description:"Adds the console to the code editor cursor position model.",autoStart:true,requires:[a.IConsoleTracker,o.IPositionModel],activate:(e,t,n)=>{let i=null;const s=async e=>{let s=null;if(e!==i){i===null||i===void 0?void 0:i.console.promptCellCreated.disconnect(n.update);i=null;if(e&&t.has(e)){e.console.promptCellCreated.connect(n.update);const t=e.console.promptCell;s=null;if(t){await t.ready;s=t.editor}i=e}}else if(e){const t=e.console.promptCell;s=null;if(t){await t.ready;s=t.editor}}return s};n.addEditorProvider(s)}};const E={id:"@jupyterlab/console-extension:completer",description:"Adds completion to the console.",autoStart:true,requires:[a.IConsoleTracker],optional:[r.ICompletionProviderManager,p.ITranslator,s.ISanitizer],activate:L};const I=[k,S,y,j,M,E];const T=I;async function D(e,t,n,i,o,r,l,d,c,h,u,_,b,y){const w=y!==null&&y!==void 0?y:p.nullTranslator;const C=w.load("jupyterlab");const S=e.serviceManager;const{commands:k,shell:j}=e;const M=C.__("Console");const E=_!==null&&_!==void 0?_:new s.SessionContextDialogs({translator:w});const I=new s.WidgetTracker({namespace:"console"});if(r){void r.restore(I,{command:x.create,args:e=>{const{path:t,name:n,kernelPreference:i}=e.console.sessionContext;return{path:t,name:n,kernelPreference:{...i}}},name:e=>{var t;return(t=e.console.sessionContext.path)!==null&&t!==void 0?t:f.UUID.uuid4()},when:S.ready})}if(h){void S.ready.then((()=>{let e=null;const t=()=>{if(e){e.dispose();e=null}const t=S.kernelspecs.specs;if(!t){return}e=new v.DisposableSet;for(const n in t.kernelspecs){const i=n===t.default?0:Infinity;const s=t.kernelspecs[n];const o=s.resources["logo-svg"]||s.resources["logo-64x64"];e.add(h.add({command:x.create,args:{isLauncher:true,kernelPreference:{name:n}},category:C.__("Console"),rank:i,kernelIconUrl:o,metadata:{kernel:f.JSONExt.deepCopy(s.metadata||{})}}))}};t();S.kernelspecs.specsChanged.connect(t)}))}async function T(e){var s,r;await S.ready;const l=new a.ConsolePanel({manager:S,contentFactory:t,mimeTypeService:n.mimeTypeService,rendermime:i,sessionDialogs:E,translator:w,setBusy:(s=u&&(()=>u.setBusy()))!==null&&s!==void 0?s:undefined,...e});const d=(await o.get("@jupyterlab/console-extension:tracker","interactionMode")).composite;l.console.node.dataset.jpInteractionMode=d;await I.add(l);l.sessionContext.propertyChanged.connect((()=>{void I.save(l)}));j.add(l,"main",{ref:e.ref,mode:e.insertMode,activate:e.activate!==false,type:(r=e.type)!==null&&r!==void 0?r:"Console"});return l}const D="@jupyterlab/console-extension:tracker";let L;let P={};async function A(e){L=(await o.get(D,"interactionMode")).composite;P=(await o.get(D,"promptCellConfig")).composite;const t=e=>{var t,n;e.console.node.dataset.jpInteractionMode=L;e.console.editorConfig=P;(n=(t=e.console.promptCell)===null||t===void 0?void 0:t.editor)===null||n===void 0?void 0:n.setOptions(P)};if(e){t(e)}else{I.forEach(t)}}o.pluginChanged.connect(((e,t)=>{if(t===D){void A()}}));await A();if(b){const e=b.getRenderer("@jupyterlab/codemirror-extension:plugin.defaultConfig");if(e){b.addRenderer("@jupyterlab/console-extension:tracker.promptCellConfig",e)}}I.widgetAdded.connect(((e,t)=>{void A(t)}));k.addCommand(x.autoClosingBrackets,{execute:async e=>{var t;P.autoClosingBrackets=!!((t=e["force"])!==null&&t!==void 0?t:!P.autoClosingBrackets);await o.set(D,"promptCellConfig",P)},label:C.__("Auto Close Brackets for Code Console Prompt"),isToggled:()=>P.autoClosingBrackets});function R(){return I.currentWidget!==null&&I.currentWidget===j.currentWidget}let N=x.open;k.addCommand(N,{label:C.__("Open a console for the provided `path`."),execute:e=>{const t=e["path"];const n=I.find((e=>{var n;return((n=e.console.sessionContext.session)===null||n===void 0?void 0:n.path)===t}));if(n){if(e.activate!==false){j.activateById(n.id)}return n}else{return S.ready.then((()=>{const n=(0,g.find)(S.sessions.running(),(e=>e.path===t));if(n){return T(e)}return Promise.reject(`No running kernel session for path: ${t}`)}))}}});N=x.create;k.addCommand(N,{label:e=>{var t,n,i,s;if(e["isPalette"]){return C.__("New Console")}else if(e["isLauncher"]&&e["kernelPreference"]){const o=e["kernelPreference"];return(s=(i=(n=(t=S.kernelspecs)===null||t===void 0?void 0:t.specs)===null||n===void 0?void 0:n.kernelspecs[o.name||""])===null||i===void 0?void 0:i.display_name)!==null&&s!==void 0?s:""}return C.__("Console")},icon:e=>e["isPalette"]?undefined:m.consoleIcon,execute:e=>{var t;const n=(t=e["basePath"]||e["cwd"]||(l===null||l===void 0?void 0:l.model.path))!==null&&t!==void 0?t:"";return T({basePath:n,...e})}});function O(e){const t=I.currentWidget;const n=e["activate"]!==false;if(n&&t){j.activateById(t.id)}return t!==null&&t!==void 0?t:null}k.addCommand(x.clear,{label:C.__("Clear Console Cells"),execute:e=>{const t=O(e);if(!t){return}t.console.clear()},isEnabled:R});k.addCommand(x.runUnforced,{label:C.__("Run Cell (unforced)"),execute:e=>{const t=O(e);if(!t){return}return t.console.execute()},isEnabled:R});k.addCommand(x.runForced,{label:C.__("Run Cell (forced)"),execute:e=>{const t=O(e);if(!t){return}return t.console.execute(true)},isEnabled:R});k.addCommand(x.linebreak,{label:C.__("Insert Line Break"),execute:e=>{const t=O(e);if(!t){return}t.console.insertLinebreak()},isEnabled:R});k.addCommand(x.replaceSelection,{label:C.__("Replace Selection in Console"),execute:e=>{const t=O(e);if(!t){return}const n=e["text"]||"";t.console.replaceSelection(n)},isEnabled:R});k.addCommand(x.interrupt,{label:C.__("Interrupt Kernel"),execute:e=>{var t;const n=O(e);if(!n){return}const i=(t=n.console.sessionContext.session)===null||t===void 0?void 0:t.kernel;if(i){return i.interrupt()}},isEnabled:R});k.addCommand(x.restart,{label:C.__("Restart Kernel"),execute:e=>{const t=O(e);if(!t){return}return E.restart(t.console.sessionContext)},isEnabled:R});k.addCommand(x.shutdown,{label:C.__("Shut Down"),execute:e=>{const t=O(e);if(!t){return}return t.console.sessionContext.shutdown()}});k.addCommand(x.closeAndShutdown,{label:C.__("Close and Shut Down"),execute:e=>{const t=O(e);if(!t){return}return(0,s.showDialog)({title:C.__("Shut down the console?"),body:C.__('Are you sure you want to close "%1"?',t.title.label),buttons:[s.Dialog.cancelButton({ariaLabel:C.__("Cancel console Shut Down")}),s.Dialog.warnButton({ariaLabel:C.__("Confirm console Shut Down")})]}).then((e=>{if(e.button.accept){return k.execute(x.shutdown,{activate:false}).then((()=>{t.dispose();return true}))}else{return false}}))},isEnabled:R});k.addCommand(x.inject,{label:C.__("Inject some code in a console."),execute:e=>{const t=e["path"];I.find((n=>{var i;if(((i=n.console.sessionContext.session)===null||i===void 0?void 0:i.path)===t){if(e["activate"]!==false){j.activateById(n.id)}void n.console.inject(e["code"],e["metadata"]);return true}return false}))},isEnabled:R});k.addCommand(x.changeKernel,{label:C.__("Change Kernel"),execute:e=>{const t=O(e);if(!t){return}return E.selectKernel(t.console.sessionContext)},isEnabled:R});k.addCommand(x.getKernel,{label:C.__("Get Kernel"),execute:e=>{var t;const n=O({activate:false,...e});if(!n){return}return(t=n.sessionContext.session)===null||t===void 0?void 0:t.kernel},isEnabled:R});if(c){[x.create,x.linebreak,x.clear,x.runUnforced,x.runForced,x.restart,x.interrupt,x.changeKernel,x.closeAndShutdown].forEach((e=>{c.addItem({command:e,category:M,args:{isPalette:true}})}))}if(d){d.fileMenu.closeAndCleaners.add({id:x.closeAndShutdown,isEnabled:R});d.kernelMenu.kernelUsers.changeKernel.add({id:x.changeKernel,isEnabled:R});d.kernelMenu.kernelUsers.clearWidget.add({id:x.clear,isEnabled:R});d.kernelMenu.kernelUsers.interruptKernel.add({id:x.interrupt,isEnabled:R});d.kernelMenu.kernelUsers.restartKernel.add({id:x.restart,isEnabled:R});d.kernelMenu.kernelUsers.shutdownKernel.add({id:x.shutdown,isEnabled:R});d.runMenu.codeRunners.run.add({id:x.runForced,isEnabled:R});d.editMenu.clearers.clearCurrent.add({id:x.clear,isEnabled:R});d.helpMenu.getKernel.add({id:x.getKernel,isEnabled:R})}const B={notebook:C.__("Execute with Shift+Enter"),terminal:C.__("Execute with Enter")};k.addCommand(x.interactionMode,{label:e=>{var t;return(t=B[e["interactionMode"]])!==null&&t!==void 0?t:"Set the console interaction mode."},execute:async e=>{const t="keyMap";try{await o.set(D,"interactionMode",e["interactionMode"])}catch(n){console.error(`Failed to set ${D}:${t} - ${n.message}`)}},isToggled:e=>e["interactionMode"]===L});return I}function L(e,t,n,i,o){if(!n){return}const r=(i!==null&&i!==void 0?i:p.nullTranslator).load("jupyterlab");const a=o!==null&&o!==void 0?o:new s.Sanitizer;e.commands.addCommand(x.invokeCompleter,{label:r.__("Display the completion helper."),execute:()=>{const e=t.currentWidget&&t.currentWidget.id;if(e){return n.invoke(e)}}});e.commands.addCommand(x.selectCompleter,{label:r.__("Select the completion suggestion."),execute:()=>{const e=t.currentWidget&&t.currentWidget.id;if(e){return n.select(e)}}});e.commands.addKeyBinding({command:x.selectCompleter,keys:["Enter"],selector:".jp-ConsolePanel .jp-mod-completer-active"});const l=async(e,t)=>{var i,s;const o={editor:(s=(i=t.console.promptCell)===null||i===void 0?void 0:i.editor)!==null&&s!==void 0?s:null,session:t.console.sessionContext.session,widget:t};await n.updateCompleter(o);t.console.promptCellCreated.connect(((e,i)=>{const s={editor:i.editor,session:e.sessionContext.session,widget:t,sanitzer:a};n.updateCompleter(s).catch(console.error)}));t.console.sessionContext.sessionChanged.connect((()=>{var e,i;const s={editor:(i=(e=t.console.promptCell)===null||e===void 0?void 0:e.editor)!==null&&i!==void 0?i:null,session:t.console.sessionContext.session,widget:t,sanitizer:a};n.updateCompleter(s).catch(console.error)}))};t.widgetAdded.connect(l);n.activeProvidersChanged.connect((()=>{t.forEach((e=>{l(undefined,e).catch((e=>console.error(e)))}))}))}},28180:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(49914);var a=n(98896);var l=n(90516);var d=n(64431);var c=n(59240);var h=n(42650);var u=n(52812);var p=n(74518)},80867:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CodeConsole:()=>D,ConsoleHistory:()=>r,ConsolePanel:()=>A,ForeignHandler:()=>o,IConsoleTracker:()=>N});var i=n(71372);const s="jp-CodeConsole-foreignCell";class o{constructor(e){this._enabled=false;this._isDisposed=false;this.sessionContext=e.sessionContext;this.sessionContext.iopubMessage.connect(this.onIOPubMessage,this);this._parent=e.parent}get enabled(){return this._enabled}set enabled(e){this._enabled=e}get parent(){return this._parent}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;i.Signal.clearData(this)}onIOPubMessage(e,t){var n;if(!this._enabled){return false}const i=(n=this.sessionContext.session)===null||n===void 0?void 0:n.kernel;if(!i){return false}const s=this._parent;const o=t.parent_header.session;if(o===i.clientId){return false}const r=t.header.msg_type;const a=t.parent_header;const l=a.msg_id;let d;switch(r){case"execute_input":{const e=t;d=this._newCell(l);const n=d.model;n.executionCount=e.content.execution_count;n.sharedModel.setSource(e.content.code);n.trusted=true;s.update();return true}case"execute_result":case"display_data":case"stream":case"error":{d=this._parent.getCell(l);if(!d){return false}const e={...t.content,output_type:r};d.model.outputs.add(e);s.update();return true}case"clear_output":{const e=t.content.wait;d=this._parent.getCell(l);if(d){d.model.outputs.clear(e)}return true}default:return false}}_newCell(e){const t=this.parent.createCodeCell();t.addClass(s);this._parent.addCell(t,e);return t}}class r{constructor(e){this._cursor=0;this._hasSession=false;this._history=[];this._placeholder="";this._setByHistory=false;this._isDisposed=false;this._editor=null;this._filtered=[];const{sessionContext:t}=e;if(t){this.sessionContext=t;void this._handleKernel();this.sessionContext.kernelChanged.connect(this._handleKernel,this)}}get editor(){return this._editor}set editor(e){if(this._editor===e){return}const t=this._editor;if(t){t.edgeRequested.disconnect(this.onEdgeRequest,this);t.model.sharedModel.changed.disconnect(this.onTextChange,this)}this._editor=e;if(e){e.edgeRequested.connect(this.onEdgeRequest,this);e.model.sharedModel.changed.connect(this.onTextChange,this)}}get placeholder(){return this._placeholder}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed=true;this._history.length=0;i.Signal.clearData(this)}back(e){if(!this._hasSession){this._hasSession=true;this._placeholder=e;this.setFilter(e);this._cursor=this._filtered.length-1}--this._cursor;this._cursor=Math.max(0,this._cursor);const t=this._filtered[this._cursor];return Promise.resolve(t)}forward(e){if(!this._hasSession){this._hasSession=true;this._placeholder=e;this.setFilter(e);this._cursor=this._filtered.length}++this._cursor;this._cursor=Math.min(this._filtered.length-1,this._cursor);const t=this._filtered[this._cursor];return Promise.resolve(t)}push(e){if(e&&e!==this._history[this._history.length-1]){this._history.push(e)}this.reset()}reset(){this._cursor=this._history.length;this._hasSession=false;this._placeholder=""}onHistory(e){this._history.length=0;let t="";let n="";if(e.content.status==="ok"){for(let i=0;i<e.content.history.length;i++){n=e.content.history[i][2];if(n!==t){this._history.push(t=n)}}}this._cursor=this._history.length}onTextChange(){if(this._setByHistory){this._setByHistory=false;return}this.reset()}onEdgeRequest(e,t){const n=e.model.sharedModel;const i=n.getSource();if(t==="top"||t==="topLine"){void this.back(i).then((t=>{if(this.isDisposed||!t){return}if(n.getSource()===t){return}this._setByHistory=true;n.setSource(t);let i=0;i=t.indexOf("\n");if(i<0){i=t.length}e.setCursorPosition({line:0,column:i})}))}else{void this.forward(i).then((t=>{if(this.isDisposed){return}const i=t||this.placeholder;if(n.getSource()===i){return}this._setByHistory=true;n.setSource(i);const s=e.getPositionAt(i.length);if(s){e.setCursorPosition(s)}}))}}async _handleKernel(){var e,t;const n=(t=(e=this.sessionContext)===null||e===void 0?void 0:e.session)===null||t===void 0?void 0:t.kernel;if(!n){this._history.length=0;return}return n.requestHistory(a.initialRequest).then((e=>{this.onHistory(e)}))}setFilter(e=""){this._filtered.length=0;let t="";let n="";for(let i=0;i<this._history.length;i++){n=this._history[i];if(n!==t&&e===n.slice(0,e.length)){this._filtered.push(t=n)}}this._filtered.push(e)}}var a;(function(e){e.initialRequest={output:false,raw:true,hist_access_type:"tail",n:500}})(a||(a={}));var l=n(90848);var d=n(22873);var c=n(33112);var h=n(36168);var u=n(52435);var p=n(5596);var m=n(85448);var g=n(37496);var f=n(66143);var v=n(87519);var _=n(279);var b=n(9154);var y=n(21299);const w="jpKernelUser";const C="jpCodeRunner";const x="jp-CodeConsole";const S="jp-Console-cell";const k="jp-CodeConsole-banner";const j="jp-CodeConsole-promptCell";const M="jp-CodeConsole-content";const E="jp-CodeConsole-input";const I=250;const T="application/vnd.jupyter.cells";class D extends m.Widget{constructor(e){var t,n;super();this.editorConfig=D.defaultEditorConfig;this._banner=null;this._executed=new i.Signal(this);this._mimetype="text/x-ipython";this._msgIds=new Map;this._msgIdCells=new Map;this._promptCellCreated=new i.Signal(this);this._dragData=null;this._drag=null;this._focusedCell=null;this._translator=(t=e.translator)!==null&&t!==void 0?t:h.nullTranslator;this.addClass(x);this.node.dataset[w]="true";this.node.dataset[C]="true";this.node.tabIndex=-1;const s=this.layout=new m.PanelLayout;this._cells=new b.ObservableList;this._content=new m.Panel;this._input=new m.Panel;this.contentFactory=e.contentFactory;this.modelFactory=(n=e.modelFactory)!==null&&n!==void 0?n:D.defaultModelFactory;this.rendermime=e.rendermime;this.sessionContext=e.sessionContext;this._mimeTypeService=e.mimeTypeService;this._content.addClass(M);this._input.addClass(E);s.addWidget(this._content);s.addWidget(this._input);this._history=new r({sessionContext:this.sessionContext});void this._onKernelChanged();this.sessionContext.kernelChanged.connect(this._onKernelChanged,this);this.sessionContext.statusChanged.connect(this._onKernelStatusChanged,this)}get executed(){return this._executed}get promptCellCreated(){return this._promptCellCreated}get cells(){return this._cells}get promptCell(){const e=this._input.layout;return e.widgets[0]||null}addCell(e,t){e.addClass(S);this._content.addWidget(e);this._cells.push(e);if(t){this._msgIds.set(t,e);this._msgIdCells.set(e,t)}e.disposed.connect(this._onCellDisposed,this);this.update()}addBanner(){if(this._banner){const e=this._banner;this._cells.push(this._banner);e.disposed.connect(this._onCellDisposed,this)}const e=this.modelFactory.createRawCell({sharedModel:(0,v.createStandaloneCell)({cell_type:"raw",source:"..."})});const t=(this._banner=new _.RawCell({model:e,contentFactory:this.contentFactory,placeholder:false,editorConfig:{autoClosingBrackets:false,codeFolding:false,highlightActiveLine:false,highlightTrailingWhitespace:false,highlightWhitespace:false,indentUnit:"4",lineNumbers:false,lineWrap:true,matchBrackets:false,readOnly:true,rulers:[],scrollPastEnd:false,smartIndent:false,tabSize:4,theme:"jupyter"}})).initializeState();t.addClass(k);t.readOnly=true;this._content.addWidget(t)}clear(){const e=this._cells;while(e.length>0){e.get(0).dispose()}}createCodeCell(){const e=this.contentFactory;const t=this._createCodeCellOptions();const n=e.createCodeCell(t);n.readOnly=true;n.model.mimeType=this._mimetype;return n}dispose(){if(this.isDisposed){return}this._msgIdCells=null;this._msgIds=null;this._history.dispose();super.dispose()}async execute(e=false,t=I){var n,i;if(((i=(n=this.sessionContext.session)===null||n===void 0?void 0:n.kernel)===null||i===void 0?void 0:i.status)==="dead"){return}const s=this.promptCell;if(!s){throw new Error("Cannot execute without a prompt cell")}s.model.trusted=true;if(e){this.newPromptCell();await this._execute(s);return}const o=await this._shouldExecute(t);if(this.isDisposed){return}if(o){this.newPromptCell();this.promptCell.editor.focus();await this._execute(s)}else{s.editor.newIndentedLine()}}getCell(e){return this._msgIds.get(e)}inject(e,t={}){const n=this.createCodeCell();n.model.sharedModel.setSource(e);for(const i of Object.keys(t)){n.model.setMetadata(i,t[i])}this.addCell(n);return this._execute(n)}insertLinebreak(){const e=this.promptCell;if(!e){return}e.editor.newIndentedLine()}replaceSelection(e){var t,n;const i=this.promptCell;if(!i){return}(n=(t=i.editor).replaceSelection)===null||n===void 0?void 0:n.call(t,e)}serialize(){const e=[];for(const t of this._cells){const n=t.model;if((0,_.isCodeCellModel)(n)){e.push(n.toJSON())}}if(this.promptCell){e.push(this.promptCell.model.toJSON())}return e}_evtMouseDown(e){const{button:t,shiftKey:n}=e;if(!(t===0||t===2)||n&&t===2){return}let i=e.target;const s=e=>e.classList.contains(S);let o=_.CellDragUtils.findCell(i,this._cells,s);if(o===-1){i=document.elementFromPoint(e.clientX,e.clientY);o=_.CellDragUtils.findCell(i,this._cells,s)}if(o===-1){return}const r=this._cells.get(o);const a=_.CellDragUtils.detectTargetArea(r,e.target);if(a==="prompt"){this._dragData={pressX:e.clientX,pressY:e.clientY,index:o};this._focusedCell=r;document.addEventListener("mouseup",this,true);document.addEventListener("mousemove",this,true);e.preventDefault()}}_evtMouseMove(e){const t=this._dragData;if(t&&_.CellDragUtils.shouldStartDrag(t.pressX,t.pressY,e.clientX,e.clientY)){void this._startDrag(t.index,e.clientX,e.clientY)}}_startDrag(e,t,n){const i=this._focusedCell.model;const s=[i.toJSON()];const o=_.CellDragUtils.createCellDragImage(this._focusedCell,s);this._drag=new y.Drag({mimeData:new p.MimeData,dragImage:o,proposedAction:"copy",supportedActions:"copy",source:this});this._drag.mimeData.setData(T,s);const r=i.sharedModel.getSource();this._drag.mimeData.setData("text/plain",r);this._focusedCell=null;document.removeEventListener("mousemove",this,true);document.removeEventListener("mouseup",this,true);return this._drag.start(t,n).then((()=>{if(this.isDisposed){return}this._drag=null;this._dragData=null}))}handleEvent(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;default:break}}onAfterAttach(e){const t=this.node;t.addEventListener("keydown",this,true);t.addEventListener("click",this);t.addEventListener("mousedown",this);if(!this.promptCell){this.newPromptCell()}else{this.promptCell.editor.focus();this.update()}}onBeforeDetach(e){const t=this.node;t.removeEventListener("keydown",this,true);t.removeEventListener("click",this)}onActivateRequest(e){const t=this.promptCell&&this.promptCell.editor;if(t){t.focus()}this.update()}newPromptCell(){var e;let t=this.promptCell;const n=this._input;if(t){t.readOnly=true;t.removeClass(j);i.Signal.clearData(t.editor);(e=t.editor)===null||e===void 0?void 0:e.blur();const s=n.widgets[0];s.parent=null;this.addCell(t)}const s=this.contentFactory;const o=this._createCodeCellOptions();t=s.createCodeCell(o);t.model.mimeType=this._mimetype;t.addClass(j);this._input.addWidget(t);this._history.editor=t.editor;this._promptCellCreated.emit(t)}onUpdateRequest(e){L.scrollToBottom(this._content.node)}_evtKeyDown(e){const t=this.promptCell&&this.promptCell.editor;if(!t){return}if(e.keyCode===13&&!t.hasFocus()){e.preventDefault();t.focus()}else if(e.keyCode===27&&t.hasFocus()){e.preventDefault();e.stopPropagation();this.node.focus()}}_evtMouseUp(e){if(this.promptCell&&this.promptCell.node.contains(e.target)){this.promptCell.editor.focus()}}_execute(e){const t=e.model.sharedModel.getSource();this._history.push(t);if(t==="clear"||t==="%clear"){this.clear();return Promise.resolve(void 0)}e.model.contentChanged.connect(this.update,this);const n=t=>{if(this.isDisposed){return}if(t&&t.content.status==="ok"){const n=t.content;if(n.payload&&n.payload.length){const t=n.payload.filter((e=>e.source==="set_next_input"))[0];if(t){const n=t.text;e.model.sharedModel.setSource(n)}}}else if(t&&t.content.status==="error"){for(const e of this._cells){if(e.model.executionCount===null){e.setPrompt("")}}}e.model.contentChanged.disconnect(this.update,this);this.update();this._executed.emit(new Date)};const i=()=>{if(this.isDisposed){return}e.model.contentChanged.disconnect(this.update,this);this.update()};return _.CodeCell.execute(e,this.sessionContext).then(n,i)}_handleInfo(e){if(e.status!=="ok"){this._banner.model.sharedModel.setSource("Error in getting kernel banner");return}this._banner.model.sharedModel.setSource(e.banner);const t=e.language_info;this._mimetype=this._mimeTypeService.getMimeTypeByLanguage(t);if(this.promptCell){this.promptCell.model.mimeType=this._mimetype}}_createCodeCellOptions(){const e=this.contentFactory;const t=this.modelFactory;const n=t.createCodeCell({});const i=this.rendermime;const s=this.editorConfig;const o=f.EditorView.domEventHandlers({keydown:(e,t)=>{if(e.keyCode===13){e.preventDefault();return true}return false}});return{model:n,rendermime:i,contentFactory:e,editorConfig:s,editorExtensions:[g.Prec.high(o)],placeholder:false,translator:this._translator}}_onCellDisposed(e,t){if(!this.isDisposed){this._cells.removeValue(e);const t=this._msgIdCells.get(e);if(t){this._msgIdCells.delete(e);this._msgIds.delete(t)}}}_shouldExecute(e){const t=this.promptCell;if(!t){return Promise.resolve(false)}const n=t.model;const i=n.sharedModel.getSource();return new Promise(((t,n)=>{var s;const o=setTimeout((()=>{t(true)}),e);const r=(s=this.sessionContext.session)===null||s===void 0?void 0:s.kernel;if(!r){t(false);return}r.requestIsComplete({code:i}).then((e=>{clearTimeout(o);if(this.isDisposed){t(false)}if(e.content.status!=="incomplete"){t(true);return}t(false)})).catch((()=>{t(true)}))}))}async _onKernelChanged(){var e;this.clear();if(this._banner){this._banner.dispose();this._banner=null}this.addBanner();if((e=this.sessionContext.session)===null||e===void 0?void 0:e.kernel){this._handleInfo(await this.sessionContext.session.kernel.info)}}async _onKernelStatusChanged(){var e;const t=(e=this.sessionContext.session)===null||e===void 0?void 0:e.kernel;if((t===null||t===void 0?void 0:t.status)==="restarting"){this.addBanner();this._handleInfo(await(t===null||t===void 0?void 0:t.info))}}}(function(e){e.defaultEditorConfig={codeFolding:false,lineNumbers:false};class t extends _.Cell.ContentFactory{createCodeCell(e){return new _.CodeCell(e).initializeState()}createRawCell(e){return new _.RawCell(e).initializeState()}}e.ContentFactory=t;class n{constructor(e={}){this.codeCellContentFactory=e.codeCellContentFactory||_.CodeCellModel.defaultContentFactory}createCodeCell(e={}){if(!e.contentFactory){e.contentFactory=this.codeCellContentFactory}return new _.CodeCellModel(e)}createRawCell(e){return new _.RawCellModel(e)}}e.ModelFactory=n;e.defaultModelFactory=new n({})})(D||(D={}));var L;(function(e){function t(e){e.scrollTop=e.scrollHeight-e.clientHeight}e.scrollToBottom=t})(L||(L={}));const P="jp-ConsolePanel";class A extends l.MainAreaWidget{constructor(e){super({content:new m.Panel});this._executed=null;this._connected=null;this.addClass(P);let{rendermime:t,mimeTypeService:n,path:i,basePath:s,name:o,manager:r,modelFactory:a,sessionContext:g,translator:f}=e;this.translator=f!==null&&f!==void 0?f:h.nullTranslator;const v=this.translator.load("jupyterlab");const _=this.contentFactory=e.contentFactory;const b=R.count++;if(!i){i=d.PathExt.join(s||"",`console-${b}-${p.UUID.uuid4()}`)}g=this._sessionContext=g!==null&&g!==void 0?g:new l.SessionContext({sessionManager:r.sessions,specsManager:r.kernelspecs,path:r.contents.localPath(i),name:o||v.__("Console %1",b),type:"console",kernelPreference:e.kernelPreference,setBusy:e.setBusy});const y=new c.RenderMimeRegistry.UrlResolver({path:i,contents:r.contents});t=t.clone({resolver:y});this.console=_.createConsole({rendermime:t,sessionContext:g,mimeTypeService:n,contentFactory:_,modelFactory:a,translator:f});this.content.addWidget(this.console);void g.initialize().then((async t=>{var n;if(t){await((n=e.sessionDialogs)!==null&&n!==void 0?n:new l.SessionContextDialogs({translator:f})).selectKernel(g)}this._connected=new Date;this._updateTitlePanel()}));this.console.executed.connect(this._onExecuted,this);this._updateTitlePanel();g.kernelChanged.connect(this._updateTitlePanel,this);g.propertyChanged.connect(this._updateTitlePanel,this);this.title.icon=u.consoleIcon;this.title.closable=true;this.id=`console-${b}`}get sessionContext(){return this._sessionContext}dispose(){this.sessionContext.dispose();this.console.dispose();super.dispose()}onActivateRequest(e){const t=this.console.promptCell;if(t){t.editor.focus()}}onCloseRequest(e){super.onCloseRequest(e);this.dispose()}_onExecuted(e,t){this._executed=t;this._updateTitlePanel()}_updateTitlePanel(){R.updateTitle(this,this._connected,this._executed,this.translator)}}(function(e){class t extends D.ContentFactory{createConsole(e){return new D(e)}}e.ContentFactory=t;e.IContentFactory=new p.Token("@jupyterlab/console:IContentFactory","A factory object that creates new code consoles. Use this if you want to create and host code consoles in your own UI elements.")})(A||(A={}));var R;(function(e){e.count=1;function t(e,t,n,i){i=i||h.nullTranslator;const s=i.load("jupyterlab");const o=e.console.sessionContext.session;if(o){let i=s.__("Name: %1\n",o.name)+s.__("Directory: %1\n",d.PathExt.dirname(o.path))+s.__("Kernel: %1",e.console.sessionContext.kernelDisplayName);if(t){i+=s.__("\nConnected: %1",d.Time.format(t.toISOString()))}if(n){i+=s.__("\nLast Execution: %1")}e.title.label=o.name;e.title.caption=i}else{e.title.label=s.__("Console");e.title.caption=""}}e.updateTitle=t})(R||(R={}));const N=new p.Token("@jupyterlab/console:IConsoleTracker",`A widget tracker for code consoles.\n  Use this if you want to be able to iterate over and interact with code consoles\n  created by the application.`)},42650:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(98896);var a=n(22748);var l=n(49914);var d=n(5956);var c=n(93379);var h=n.n(c);var u=n(7795);var p=n.n(u);var m=n(90569);var g=n.n(m);var f=n(3565);var v=n.n(f);var _=n(19216);var b=n.n(_);var y=n(44589);var w=n.n(y);var C=n(79937);var x={};x.styleTagTransform=w();x.setAttributes=v();x.insert=g().bind(null,"head");x.domAPI=p();x.insertStyleElement=b();var S=h()(C.Z,x);const k=C.Z&&C.Z.locals?C.Z.locals:undefined},47542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ActivityMonitor=void 0;const i=n(71372);class s{constructor(e){this._timer=-1;this._timeout=-1;this._isDisposed=false;this._activityStopped=new i.Signal(this);e.signal.connect(this._onSignalFired,this);this._timeout=e.timeout||1e3}get activityStopped(){return this._activityStopped}get timeout(){return this._timeout}set timeout(e){this._timeout=e}get isDisposed(){return this._isDisposed}dispose(){if(this._isDisposed){return}this._isDisposed=true;i.Signal.clearData(this)}_onSignalFired(e,t){clearTimeout(this._timer);this._sender=e;this._args=t;this._timer=setTimeout((()=>{this._activityStopped.emit({sender:this._sender,args:this._args})}),this._timeout)}}t.ActivityMonitor=s},79622:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){if(i===undefined)i=n;var s=Object.getOwnPropertyDescriptor(t,n);if(!s||("get"in s?!t.__esModule:s.writable||s.configurable)){s={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,i,s)}:function(e,t,n,i){if(i===undefined)i=n;e[i]=t[n]});var s=this&&this.__exportStar||function(e,t){for(var n in e)if(n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n))i(t,e,n)};Object.defineProperty(t,"__esModule",{value:true});s(n(47542),t);s(n(92086),t);s(n(47390),t);s(n(99458),t);s(n(20176),t);s(n(2643),t);s(n(47846),t);s(n(32533),t);s(n(57319),t)},92086:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},47390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MarkdownCodeBlocks=void 0;var n;(function(e){e.CODE_BLOCK_MARKER="```";const t=[".markdown",".mdown",".mkdn",".md",".mkd",".mdwn",".mdtxt",".mdtext",".text",".txt",".Rmd"];class n{constructor(e){this.startLine=e;this.code="";this.endLine=-1}}e.MarkdownCodeBlock=n;function i(e){return t.indexOf(e)>-1}e.isMarkdown=i;function s(t){if(!t||t===""){return[]}const i=t.split("\n");const s=[];let o=null;for(let r=0;r<i.length;r++){const t=i[r];const a=t.indexOf(e.CODE_BLOCK_MARKER)===0;const l=o!=null;if(!a&&!l){continue}if(!l){o=new n(r);const i=t.indexOf(e.CODE_BLOCK_MARKER);const a=t.lastIndexOf(e.CODE_BLOCK_MARKER);const l=i!==a;if(l){o.code=t.substring(i+e.CODE_BLOCK_MARKER.length,a);o.endLine=r;s.push(o);o=null}}else if(o){if(a){o.endLine=r-1;s.push(o);o=null}else{o.code+=t+"\n"}}}return s}e.findMarkdownCodeBlocks=s})(n=t.MarkdownCodeBlocks||(t.MarkdownCodeBlocks={}))},99458:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var process=__webpack_require__(34155);var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:true});exports.PageConfig=void 0;const coreutils_1=__webpack_require__(5596);const minimist_1=__importDefault(__webpack_require__(96562));const url_1=__webpack_require__(57319);var PageConfig;(function(PageConfig){function getOption(name){if(configData){return configData[name]||getBodyData(name)}configData=Object.create(null);let found=false;if(typeof document!=="undefined"&&document){const e=document.getElementById("jupyter-config-data");if(e){configData=JSON.parse(e.textContent||"");found=true}}if(!found&&typeof process!=="undefined"&&process.argv){try{const cli=(0,minimist_1.default)(process.argv.slice(2));const path=__webpack_require__(26470);let fullPath="";if("jupyter-config-data"in cli){fullPath=path.resolve(cli["jupyter-config-data"])}else if("JUPYTER_CONFIG_DATA"in process.env){fullPath=path.resolve(process.env["JUPYTER_CONFIG_DATA"])}if(fullPath){configData=eval("require")(fullPath)}}catch(e){console.error(e)}}if(!coreutils_1.JSONExt.isObject(configData)){configData=Object.create(null)}else{for(const e in configData){if(typeof configData[e]!=="string"){configData[e]=JSON.stringify(configData[e])}}}return configData[name]||getBodyData(name)}PageConfig.getOption=getOption;function setOption(e,t){const n=getOption(e);configData[e]=t;return n}PageConfig.setOption=setOption;function getBaseUrl(){return url_1.URLExt.normalize(getOption("baseUrl")||"/")}PageConfig.getBaseUrl=getBaseUrl;function getTreeUrl(){return url_1.URLExt.join(getBaseUrl(),getOption("treeUrl"))}PageConfig.getTreeUrl=getTreeUrl;function getShareUrl(){return url_1.URLExt.normalize(getOption("shareUrl")||getBaseUrl())}PageConfig.getShareUrl=getShareUrl;function getTreeShareUrl(){return url_1.URLExt.normalize(url_1.URLExt.join(getShareUrl(),getOption("treeUrl")))}PageConfig.getTreeShareUrl=getTreeShareUrl;function getUrl(e){var t,n,i,s;let o=e.toShare?getShareUrl():getBaseUrl();const r=(t=e.mode)!==null&&t!==void 0?t:getOption("mode");const a=(n=e.workspace)!==null&&n!==void 0?n:getOption("workspace");const l=r==="single-document"?"doc":"lab";o=url_1.URLExt.join(o,l);if(a!==PageConfig.defaultWorkspace){o=url_1.URLExt.join(o,"workspaces",encodeURIComponent((i=getOption("workspace"))!==null&&i!==void 0?i:PageConfig.defaultWorkspace))}const d=(s=e.treePath)!==null&&s!==void 0?s:getOption("treePath");if(d){o=url_1.URLExt.join(o,"tree",url_1.URLExt.encodeParts(d))}return o}PageConfig.getUrl=getUrl;PageConfig.defaultWorkspace="default";function getWsUrl(e){let t=getOption("wsUrl");if(!t){e=e?url_1.URLExt.normalize(e):getBaseUrl();if(e.indexOf("http")!==0){return""}t="ws"+e.slice(4)}return url_1.URLExt.normalize(t)}PageConfig.getWsUrl=getWsUrl;function getNBConvertURL({path:e,format:t,download:n}){const i=url_1.URLExt.encodeParts(e);const s=url_1.URLExt.join(getBaseUrl(),"nbconvert",t,i);if(n){return s+"?download=true"}return s}PageConfig.getNBConvertURL=getNBConvertURL;function getToken(){return getOption("token")||getBodyData("jupyterApiToken")}PageConfig.getToken=getToken;function getNotebookVersion(){const e=getOption("notebookVersion");if(e===""){return[0,0,0]}return JSON.parse(e)}PageConfig.getNotebookVersion=getNotebookVersion;let configData=null;function getBodyData(e){if(typeof document==="undefined"||!document.body){return""}const t=document.body.dataset[e];if(typeof t==="undefined"){return""}return decodeURIComponent(t)}let Extension;(function(e){function t(e){try{const t=getOption(e);if(t){return JSON.parse(t)}}catch(t){console.warn(`Unable to parse ${e}.`,t)}return[]}e.deferred=t("deferredExtensions");e.disabled=t("disabledExtensions");function n(t){const n=t.indexOf(":");let i="";if(n!==-1){i=t.slice(0,n)}return e.deferred.some((e=>e===t||i&&e===i))}e.isDeferred=n;function i(t){const n=t.indexOf(":");let i="";if(n!==-1){i=t.slice(0,n)}return e.disabled.some((e=>e===t||i&&e===i))}e.isDisabled=i})(Extension=PageConfig.Extension||(PageConfig.Extension={}))})(PageConfig=exports.PageConfig||(exports.PageConfig={}))},20176:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PathExt=void 0;const i=n(26470);var s;(function(e){function t(...e){const t=i.posix.join(...e);return t==="."?"":c(t)}e.join=t;function n(e,t){return i.posix.basename(e,t)}e.basename=n;function s(e){const t=c(i.posix.dirname(e));return t==="."?"":t}e.dirname=s;function o(e){return i.posix.extname(e)}e.extname=o;function r(e){if(e===""){return""}return c(i.posix.normalize(e))}e.normalize=r;function a(...e){return c(i.posix.resolve(...e))}e.resolve=a;function l(e,t){return c(i.posix.relative(e,t))}e.relative=l;function d(e){if(e.length>0&&e.indexOf(".")!==0){e=`.${e}`}return e}e.normalizeExtension=d;function c(e){if(e.indexOf("/")===0){e=e.slice(1)}return e}e.removeSlash=c})(s=t.PathExt||(t.PathExt={}))},2643:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.signalToPromise=void 0;const i=n(5596);function s(e,t){const n=new i.PromiseDelegate;function s(){e.disconnect(o)}function o(e,t){s();n.resolve([e,t])}e.connect(o);if((t!==null&&t!==void 0?t:0)>0){setTimeout((()=>{s();n.reject(`Signal not emitted within ${t} ms.`)}),t)}return n.promise}t.signalToPromise=s},47846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Text=void 0;var n;(function(e){const t="".length>1;function n(e,n){if(t){return e}let i=e;for(let t=0;t+1<n.length&&t<e;t++){const e=n.charCodeAt(t);if(e>=55296&&e<=56319){const e=n.charCodeAt(t+1);if(e>=56320&&e<=57343){i--;t++}}}return i}e.jsIndexToCharIndex=n;function i(e,n){if(t){return e}let i=e;for(let t=0;t+1<n.length&&t<i;t++){const e=n.charCodeAt(t);if(e>=55296&&e<=56319){const e=n.charCodeAt(t+1);if(e>=56320&&e<=57343){i++;t++}}}return i}e.charIndexToJsIndex=i;function s(e,t=false){return e.replace(/^(\w)|[\s-_:]+(\w)/g,(function(e,n,i){if(i){return i.toUpperCase()}else{return t?n.toUpperCase():n.toLowerCase()}}))}e.camelCase=s;function o(e){return(e||"").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}e.titleCase=o})(n=t.Text||(t.Text={}))},32533:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Time=void 0;const n=[{name:"years",milliseconds:365*24*60*60*1e3},{name:"months",milliseconds:30*24*60*60*1e3},{name:"days",milliseconds:24*60*60*1e3},{name:"hours",milliseconds:60*60*1e3},{name:"minutes",milliseconds:60*1e3},{name:"seconds",milliseconds:1e3}];var i;(function(e){function t(e){const t=document.documentElement.lang||"en";const i=new Intl.RelativeTimeFormat(t,{numeric:"auto"});const s=new Date(e).getTime()-Date.now();for(let o of n){const e=Math.ceil(s/o.milliseconds);if(e===0){continue}return i.format(e,o.name)}return i.format(0,"seconds")}e.formatHuman=t;function i(e){const t=document.documentElement.lang||"en";const n=new Intl.DateTimeFormat(t,{dateStyle:"short",timeStyle:"short"});return n.format(new Date(e))}e.format=i})(i=t.Time||(t.Time={}))},57319:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.URLExt=void 0;const s=n(26470);const o=i(n(84564));var r;(function(e){function t(e){if(typeof document!=="undefined"&&document){const t=document.createElement("a");t.href=e;return t}return(0,o.default)(e)}e.parse=t;function n(e){return(0,o.default)(e).hostname}e.getHostName=n;function i(e){return e&&t(e).toString()}e.normalize=i;function r(...e){let t=(0,o.default)(e[0],{});const n=t.protocol===""&&t.slashes;if(n){t=(0,o.default)(e[0],"https:"+e[0])}const i=`${n?"":t.protocol}${t.slashes?"//":""}${t.auth}${t.auth?"@":""}${t.host}`;const r=s.posix.join(`${!!i&&t.pathname[0]!=="/"?"/":""}${t.pathname}`,...e.slice(1));return`${i}${r==="."?"":r}`}e.join=r;function a(e){return r(...e.split("/").map(encodeURIComponent))}e.encodeParts=a;function l(e){const t=Object.keys(e).filter((e=>e.length>0));if(!t.length){return""}return"?"+t.map((t=>{const n=encodeURIComponent(String(e[t]));return t+(n?"="+n:"")})).join("&")}e.objectToQueryString=l;function d(e){return e.replace(/^\?/,"").split("&").reduce(((e,t)=>{const[n,i]=t.split("=");if(n.length>0){e[n]=decodeURIComponent(i||"")}return e}),{})}e.queryStringToObject=d;function c(e){const{protocol:n}=t(e);return(!n||e.toLowerCase().indexOf(n)!==0)&&e.indexOf("/")!==0}e.isLocal=c})(r=t.URLExt||(t.URLExt={}))},32854:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>k});var i=n(44906);var s=n.n(i);var o=n(90848);var r=n.n(o);var a=n(13475);var l=n(10998);var d=n(15645);var c=n.n(d);var h=n(46054);var u=n.n(h);var p=n(51997);var m=n.n(p);var g=n(36168);var f=n.n(g);const v="CSVTable";const _="TSVTable";var b;(function(e){e.CSVGoToLine="csv:go-to-line";e.TSVGoToLine="tsv:go-to-line"})(b||(b={}));const y={activate:C,id:"@jupyterlab/csvviewer-extension:csv",description:"Adds viewer for CSV file types",requires:[g.ITranslator],optional:[i.ILayoutRestorer,o.IThemeManager,h.IMainMenu,d.ISearchProviderRegistry,p.ISettingRegistry,o.IToolbarWidgetRegistry],autoStart:true};const w={activate:x,id:"@jupyterlab/csvviewer-extension:tsv",description:"Adds viewer for TSV file types.",requires:[g.ITranslator],optional:[i.ILayoutRestorer,o.IThemeManager,h.IMainMenu,d.ISearchProviderRegistry,p.ISettingRegistry,o.IToolbarWidgetRegistry],autoStart:true};function C(e,t,i,s,r,d,c,h){const{commands:u,shell:p}=e;let m;if(h){h.addFactory(v,"delimiter",(e=>new l.p({widget:e.content,translator:t})));if(c){m=(0,o.createToolbarFactory)(h,c,v,y.id,t)}}const g=t.load("jupyterlab");const f=new a.LT({name:v,label:g.__("CSV Viewer"),fileTypes:["csv"],defaultFor:["csv"],readOnly:true,toolbarFactory:m,translator:t});const _=new o.WidgetTracker({namespace:"csvviewer"});let w=j.LIGHT_STYLE;let C=j.LIGHT_TEXT_CONFIG;if(i){void i.restore(_,{command:"docmanager:open",args:e=>({path:e.context.path,factory:v}),name:e=>e.context.path})}e.docRegistry.addWidgetFactory(f);const x=e.docRegistry.getFileType("csv");let S=false;f.widgetCreated.connect((async(e,t)=>{if(d&&!S){const{CSVSearchProvider:e}=await Promise.all([n.e(3472),n.e(6621)]).then(n.bind(n,14196));d.add("csv",e);S=true}void _.add(t);t.context.pathChanged.connect((()=>{void _.save(t)}));if(x){t.title.icon=x.icon;t.title.iconClass=x.iconClass;t.title.iconLabel=x.iconLabel}t.content.style=w;t.content.rendererConfig=C}));const k=()=>{const e=s&&s.theme?s.isLight(s.theme):true;w=e?j.LIGHT_STYLE:j.DARK_STYLE;C=e?j.LIGHT_TEXT_CONFIG:j.DARK_TEXT_CONFIG;_.forEach((e=>{e.content.style=w;e.content.rendererConfig=C}))};if(s){s.themeChanged.connect(k)}const M=()=>_.currentWidget!==null&&_.currentWidget===p.currentWidget;u.addCommand(b.CSVGoToLine,{label:g.__("Go to Line"),execute:async()=>{const e=_.currentWidget;if(e===null){return}const t=await o.InputDialog.getNumber({title:g.__("Go to Line"),value:0});if(t.button.accept&&t.value!==null){e.content.goToLine(t.value)}},isEnabled:M});if(r){r.editMenu.goToLiners.add({id:b.CSVGoToLine,isEnabled:M})}}function x(e,t,i,s,r,d,c,h){const{commands:u,shell:p}=e;let m;if(h){h.addFactory(_,"delimiter",(e=>new l.p({widget:e.content,translator:t})));if(c){m=(0,o.createToolbarFactory)(h,c,_,w.id,t)}}const g=t.load("jupyterlab");const f=new a._d({name:_,label:g.__("TSV Viewer"),fileTypes:["tsv"],defaultFor:["tsv"],readOnly:true,toolbarFactory:m,translator:t});const v=new o.WidgetTracker({namespace:"tsvviewer"});let y=j.LIGHT_STYLE;let C=j.LIGHT_TEXT_CONFIG;if(i){void i.restore(v,{command:"docmanager:open",args:e=>({path:e.context.path,factory:_}),name:e=>e.context.path})}e.docRegistry.addWidgetFactory(f);const x=e.docRegistry.getFileType("tsv");let S=false;f.widgetCreated.connect((async(e,t)=>{if(d&&!S){const{CSVSearchProvider:e}=await Promise.all([n.e(3472),n.e(6621)]).then(n.bind(n,14196));d.add("tsv",e);S=true}void v.add(t);t.context.pathChanged.connect((()=>{void v.save(t)}));if(x){t.title.icon=x.icon;t.title.iconClass=x.iconClass;t.title.iconLabel=x.iconLabel}t.content.style=y;t.content.rendererConfig=C}));const k=()=>{const e=s&&s.theme?s.isLight(s.theme):true;y=e?j.LIGHT_STYLE:j.DARK_STYLE;C=e?j.LIGHT_TEXT_CONFIG:j.DARK_TEXT_CONFIG;v.forEach((e=>{e.content.style=y;e.content.rendererConfig=C}))};if(s){s.themeChanged.connect(k)}const M=()=>v.currentWidget!==null&&v.currentWidget===p.currentWidget;u.addCommand(b.TSVGoToLine,{label:g.__("Go to Line"),execute:async()=>{const e=v.currentWidget;if(e===null){return}const t=await o.InputDialog.getNumber({title:g.__("Go to Line"),value:0});if(t.button.accept&&t.value!==null){e.content.goToLine(t.value)}},isEnabled:M});if(r){r.editMenu.goToLiners.add({id:b.TSVGoToLine,isEnabled:M})}}const S=[y,w];const k=S;var j;(function(e){e.LIGHT_STYLE={voidColor:"#F3F3F3",backgroundColor:"white",headerBackgroundColor:"#EEEEEE",gridLineColor:"rgba(20, 20, 20, 0.15)",headerGridLineColor:"rgba(20, 20, 20, 0.25)",rowBackgroundColor:e=>e%2===0?"#F5F5F5":"white"};e.DARK_STYLE={voidColor:"black",backgroundColor:"#111111",headerBackgroundColor:"#424242",gridLineColor:"rgba(235, 235, 235, 0.15)",headerGridLineColor:"rgba(235, 235, 235, 0.25)",rowBackgroundColor:e=>e%2===0?"#212121":"#111111"};e.LIGHT_TEXT_CONFIG={textColor:"#111111",matchBackgroundColor:"#FFFFE0",currentMatchBackgroundColor:"#FFFF00",horizontalAlignment:"right"};e.DARK_TEXT_CONFIG={textColor:"#F5F5F5",matchBackgroundColor:"#838423",currentMatchBackgroundColor:"#A3807A",horizontalAlignment:"right"}})(j||(j={}))},14196:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CSVSearchProvider:()=>d});var i=n(56621);var s=n.n(i);var o=n(35788);var r=n.n(o);var a=n(15645);var l=n.n(a);class d extends a.SearchProvider{constructor(){super(...arguments);this.isReadOnly=true}static createNew(e,t){return new d(e)}static isApplicable(e){return e instanceof o.DocumentWidget&&e.content instanceof i.CSVViewer}clearHighlight(){return Promise.resolve()}highlightNext(e){this.widget.content.searchService.find(this._query);return Promise.resolve(undefined)}highlightPrevious(e){this.widget.content.searchService.find(this._query,true);return Promise.resolve(undefined)}replaceCurrentMatch(e,t){return Promise.resolve(false)}replaceAllMatches(e){return Promise.resolve(false)}startQuery(e){this._query=e;this.widget.content.searchService.find(e);return Promise.resolve()}endQuery(){this.widget.content.searchService.clear();return Promise.resolve()}}},2542:(e,t,n)=>{"use strict";var i=n(32902);var s=n(79536);var o=n(94683);var r=n(90516);var a=n(34849);var l=n(93379);var d=n.n(l);var c=n(7795);var h=n.n(c);var u=n(90569);var p=n.n(u);var m=n(3565);var g=n.n(m);var f=n(19216);var v=n.n(f);var _=n(44589);var b=n.n(_);var y=n(13818);var w={};w.styleTagTransform=b();w.setAttributes=g();w.insert=p().bind(null,"head");w.domAPI=h();w.insertStyleElement=v();var C=d()(y.Z,w);const x=y.Z&&y.Z.locals?y.Z.locals:undefined;var S=n(38613);var k=n(74518)},43734:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CSVDelimiter:()=>o.p,CSVDocumentWidget:()=>r.kw,CSVViewer:()=>r.A9,CSVViewerFactory:()=>r.LT,DSVModel:()=>i.DSVModel,GridSearchService:()=>r.JZ,TSVViewerFactory:()=>r._d,TextRenderConfig:()=>r.B0,parseDSV:()=>s.G,parseDSVNoQuotes:()=>s.z});var i=n(33183);var s=n(38208);var o=n(10998);var r=n(13475)},33183:(e,t,n)=>{"use strict";n.r(t);n.d(t,{DSVModel:()=>d});var i=n(5596);var s=n.n(i);var o=n(23364);var r=n.n(o);var a=n(38208);const l={quotes:a.G,noquotes:a.z};class d extends o.DataModel{constructor(e){super();this._rowCount=0;this._header=[];this._columnOffsets=new Uint32Array(0);this._columnOffsetsStartingRow=0;this._maxCacheGet=1e3;this._rowOffsets=new Uint32Array(0);this._delayedParse=null;this._startedParsing=false;this._doneParsing=false;this._isDisposed=false;this._ready=new i.PromiseDelegate;let{data:t,delimiter:n=",",rowDelimiter:s=undefined,quote:o='"',quoteParser:r=undefined,header:a=true,initialRows:l=500}=e;this._rawData=t;this._delimiter=n;this._quote=o;this._quoteEscaped=new RegExp(o+o,"g");this._initialRows=l;if(s===undefined){const e=t.slice(0,5e3).indexOf("\r");if(e===-1){s="\n"}else if(t[e+1]==="\n"){s="\r\n"}else{s="\r"}}this._rowDelimiter=s;if(r===undefined){r=t.indexOf(o)>=0}this._parser=r?"quotes":"noquotes";this.parseAsync();if(a===true&&this._columnCount>0){const e=[];for(let t=0;t<this._columnCount;t++){e.push(this._getField(0,t))}this._header=e}}get isDisposed(){return this._isDisposed}get ready(){return this._ready.promise}get rawData(){return this._rawData}set rawData(e){this._rawData=e}get initialRows(){return this._initialRows}set initialRows(e){this._initialRows=e}get header(){return this._header}set header(e){this._header=e}get delimiter(){return this._delimiter}get rowDelimiter(){return this._rowDelimiter}get doneParsing(){return this._doneParsing}rowCount(e){if(e==="body"){if(this._header.length===0){return this._rowCount}else{return this._rowCount-1}}return 1}columnCount(e){if(e==="body"){return this._columnCount}return 1}data(e,t,n){let i;switch(e){case"body":if(this._header.length===0){i=this._getField(t,n)}else{i=this._getField(t+1,n)}break;case"column-header":if(this._header.length===0){i=(n+1).toString()}else{i=this._header[n]}break;case"row-header":i=(t+1).toString();break;case"corner-header":i="";break;default:throw"unreachable"}return i}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._columnCount=undefined;this._rowCount=undefined;this._rowOffsets=null;this._columnOffsets=null;this._rawData=null;if(this._doneParsing===false){this.ready.catch((()=>{}));this._ready.reject(undefined)}if(this._delayedParse!==null){window.clearTimeout(this._delayedParse)}}getOffsetIndex(e,t){const n=this._columnCount;let i=(e-this._columnOffsetsStartingRow)*n;if(i<0||i>this._columnOffsets.length){this._columnOffsets.fill(4294967295);this._columnOffsetsStartingRow=e;i=0}if(this._columnOffsets[i]===4294967295){let t=1;while(t<=this._maxCacheGet&&this._columnOffsets[i+t*n]===16777215){t++}const{offsets:s}=l[this._parser]({data:this._rawData,delimiter:this._delimiter,rowDelimiter:this._rowDelimiter,quote:this._quote,columnOffsets:true,maxRows:t,ncols:n,startIndex:this._rowOffsets[e]});for(let e=0;e<s.length;e++){this._columnOffsets[i+e]=s[e]}}return this._columnOffsets[i+t]}parseAsync(){let e=this._initialRows;let t=Math.pow(2,32)-1;const n=30;const i=e=>{try{this._computeRowOffsets(e)}catch(t){if(this._parser==="quotes"){console.warn(t);this._parser="noquotes";this._resetParser();this._computeRowOffsets(e)}else{throw t}}return this._doneParsing};this._resetParser();const s=i(e);if(s){return}const o=()=>{const s=i(e+t);e+=t;if(t<1e6){t*=2}if(s){this._delayedParse=null}else{this._delayedParse=window.setTimeout(o,n)}};this._delayedParse=window.setTimeout(o,n)}_computeRowOffsets(e=4294967295){var t;if(this._rowCount>=e||this._doneParsing===true){return}if(this._columnCount===undefined){this._columnCount=l[this._parser]({data:this._rawData,delimiter:this._delimiter,rowDelimiter:this._rowDelimiter,quote:this._quote,columnOffsets:true,maxRows:1}).ncols}const n=this._rowCount>0?1:0;const{nrows:i,offsets:s}=l[this._parser]({data:this._rawData,startIndex:(t=this._rowOffsets[this._rowCount-n])!==null&&t!==void 0?t:0,delimiter:this._delimiter,rowDelimiter:this._rowDelimiter,quote:this._quote,columnOffsets:false,maxRows:e-this._rowCount+n});if(this._startedParsing&&i<=n){this._doneParsing=true;this._ready.resolve(undefined);return}this._startedParsing=true;const o=this._rowCount;const r=Math.min(i,n);this._rowCount=o+i-r;if(this._rowCount<e){this._doneParsing=true;this._ready.resolve(undefined)}if(this._rowCount>o){const e=this._rowOffsets;this._rowOffsets=new Uint32Array(this._rowCount);this._rowOffsets.set(e);this._rowOffsets.set(s,o-r)}const a=Math.floor(33554432/this._columnCount);if(o<=a){if(this._rowCount<=a){const e=this._columnOffsets;this._columnOffsets=new Uint32Array(this._rowCount*this._columnCount);this._columnOffsets.set(e);this._columnOffsets.fill(4294967295,e.length)}else{const e=this._columnOffsets;this._columnOffsets=new Uint32Array(Math.min(this._maxCacheGet,a)*this._columnCount);this._columnOffsets.set(e.subarray(0,this._columnOffsets.length));this._columnOffsets.fill(4294967295,e.length);this._columnOffsetsStartingRow=0}}let d=o;if(this._header.length>0){d-=1}this.emitChanged({type:"rows-inserted",region:"body",index:d,span:this._rowCount-o})}_getField(e,t){let n;let i;const s=this.getOffsetIndex(e,t);let o=0;let r=0;if(t===this._columnCount-1){if(e<this._rowCount-1){i=this.getOffsetIndex(e+1,0);o+=this._rowDelimiter.length}else{i=this._rawData.length;if(this._rawData[i-1]===this._rowDelimiter[this._rowDelimiter.length-1]){o+=this._rowDelimiter.length}}}else{i=this.getOffsetIndex(e,t+1);if(s<i&&this._rawData[i-1]===this._delimiter){o+=1}}if(this._rawData[s]===this._quote){r+=1;o+=1}n=this._rawData.slice(s+r,i-o);if(r===1&&n.indexOf(this._quote)!==-1){n=n.replace(this._quoteEscaped,this._quote)}return n}_resetParser(){this._columnCount=undefined;this._rowOffsets=new Uint32Array(0);this._rowCount=0;this._startedParsing=false;this._columnOffsets=new Uint32Array(0);if(this._doneParsing===false){this.ready.catch((()=>{}));this._ready.reject(undefined)}this._doneParsing=false;this._ready=new i.PromiseDelegate;if(this._delayedParse!==null){window.clearTimeout(this._delayedParse);this._delayedParse=null}this.emitChanged({type:"model-reset"})}}},38208:(e,t,n)=>{"use strict";n.d(t,{G:()=>o,z:()=>r});var i;(function(e){e[e["QUOTED_FIELD"]=0]="QUOTED_FIELD";e[e["QUOTED_FIELD_QUOTE"]=1]="QUOTED_FIELD_QUOTE";e[e["UNQUOTED_FIELD"]=2]="UNQUOTED_FIELD";e[e["NEW_FIELD"]=3]="NEW_FIELD";e[e["NEW_ROW"]=4]="NEW_ROW"})(i||(i={}));var s;(function(e){e[e["CR"]=0]="CR";e[e["CRLF"]=1]="CRLF";e[e["LF"]=2]="LF"})(s||(s={}));function o(e){const{data:t,columnOffsets:n,delimiter:o=",",startIndex:r=0,maxRows:a=4294967295,rowDelimiter:l="\r\n",quote:d='"'}=e;let c=e.ncols;let h=0;const u=[];const p=o.charCodeAt(0);const m=d.charCodeAt(0);const g=10;const f=13;const v=t.length;const{QUOTED_FIELD:_,QUOTED_FIELD_QUOTE:b,UNQUOTED_FIELD:y,NEW_FIELD:w,NEW_ROW:C}=i;const{CR:x,LF:S,CRLF:k}=s;const[j,M]=l==="\r\n"?[k,2]:l==="\r"?[x,1]:[S,1];let E=C;let I=r;let T=0;let D;while(I<v){if(E===C){u.push(I);T=1}D=t.charCodeAt(I);switch(E){case C:case w:switch(D){case m:E=_;break;case p:E=w;break;case f:if(j===x){E=C}else if(j===k&&t.charCodeAt(I+1)===g){I++;E=C}else{throw`string index ${I} (in row ${h}, column ${T}): carriage return found, but not as part of a row delimiter C ${t.charCodeAt(I+1)}`}break;case g:if(j===S){E=C}else{throw`string index ${I} (in row ${h}, column ${T}): line feed found, but row delimiter starts with a carriage return`}break;default:E=y;break}break;case _:I=t.indexOf(d,I);if(I<0){throw`string index ${I} (in row ${h}, column ${T}): mismatched quote`}E=b;break;case b:switch(D){case m:E=_;break;case p:E=w;break;case f:if(j===x){E=C}else if(j===k&&t.charCodeAt(I+1)===g){I++;E=C}else{throw`string index ${I} (in row ${h}, column ${T}): carriage return found, but not as part of a row delimiter C ${t.charCodeAt(I+1)}`}break;case g:if(j===S){E=C}else{throw`string index ${I} (in row ${h}, column ${T}): line feed found, but row delimiter starts with a carriage return`}break;default:throw`string index ${I} (in row ${h}, column ${T}): quote in escaped field not followed by quote, delimiter, or row delimiter`}break;case y:while(I<v){D=t.charCodeAt(I);if(D===p||D===g||D===f){break}I++}switch(D){case p:E=w;break;case f:if(j===x){E=C}else if(j===k&&t.charCodeAt(I+1)===g){I++;E=C}else{throw`string index ${I} (in row ${h}, column ${T}): carriage return found, but not as part of a row delimiter C ${t.charCodeAt(I+1)}`}break;case g:if(j===S){E=C}else{throw`string index ${I} (in row ${h}, column ${T}): line feed found, but row delimiter starts with a carriage return`}break;default:continue}break;default:throw`string index ${I} (in row ${h}, column ${T}): state not recognized`}I++;switch(E){case C:h++;if(c===undefined){if(h!==1){throw new Error("Error parsing default number of columns")}c=T}if(n===true){if(T<c){for(;T<c;T++){u.push(I-M)}}else if(T>c){u.length=u.length-(T-c)}}if(h===a){return{nrows:h,ncols:n?c:0,offsets:u}}break;case w:if(n===true){u.push(I)}T++;break;default:break}}if(E!==C){h++;if(n===true){if(c===undefined){c=T}if(T<c){for(;T<c;T++){u.push(I-(M-1))}}else if(T>c){u.length=u.length-(T-c)}}}return{nrows:h,ncols:n?c!==null&&c!==void 0?c:0:0,offsets:u}}function r(e){const{data:t,columnOffsets:n,delimiter:i=",",rowDelimiter:s="\r\n",startIndex:o=0,maxRows:r=4294967295}=e;let a=e.ncols;const l=[];let d=0;const c=s.length;let h=o;const u=t.length;let p;let m;let g;let f;let v;p=o;while(p!==-1&&d<r&&h<u){l.push(h);d++;p=t.indexOf(s,h);v=p===-1?u:p;if(n===true){m=1;g=t.slice(h,v);f=g.indexOf(i);if(a===undefined){while(f!==-1){l.push(h+f+1);m++;f=g.indexOf(i,f+1)}a=m}else{while(f!==-1&&m<a){l.push(h+f+1);m++;f=g.indexOf(i,f+1)}while(m<a){l.push(v);m++}}}h=v+c}return{nrows:d,ncols:n?a!==null&&a!==void 0?a:0:0,offsets:l}}},10998:(e,t,n)=>{"use strict";n.d(t,{p:()=>u});var i=n(36168);var s=n.n(i);var o=n(52435);var r=n.n(o);var a=n(85448);var l=n.n(a);const d="jp-CSVDelimiter";const c="jp-CSVDelimiter-label";const h="jp-CSVDelimiter-dropdown";class u extends a.Widget{constructor(e){super({node:p.createNode(e.widget.delimiter,e.translator)});this._widget=e.widget;this.addClass(d)}get selectNode(){return this.node.getElementsByTagName("select")[0]}handleEvent(e){switch(e.type){case"change":this._widget.delimiter=this.selectNode.value;break;default:break}}onAfterAttach(e){this.selectNode.addEventListener("change",this)}onBeforeDetach(e){this.selectNode.removeEventListener("change",this)}}var p;(function(e){function t(e,t){t=t||i.nullTranslator;const n=t===null||t===void 0?void 0:t.load("jupyterlab");const s=[[",",","],[";",";"],["\t",n.__("tab")],["|",n.__("pipe")],["#",n.__("hash")]];const r=document.createElement("div");const a=document.createElement("span");const l=document.createElement("select");a.textContent=n.__("Delimiter: ");a.className=c;for(const[i,o]of s){const t=document.createElement("option");t.value=i;t.textContent=o;if(i===e){t.selected=true}l.appendChild(t)}r.appendChild(a);const d=o.Styling.wrapSelect(l);d.classList.add(h);r.appendChild(d);return r}e.createNode=t})(p||(p={}))},13475:(e,t,n)=>{"use strict";n.d(t,{A9:()=>b,B0:()=>v,JZ:()=>_,LT:()=>w,_d:()=>C,kw:()=>y});var i=n(22873);var s=n.n(i);var o=n(35788);var r=n.n(o);var a=n(5596);var l=n.n(a);var d=n(71372);var c=n.n(d);var h=n(85448);var u=n.n(h);var p=n(10998);const m="jp-CSVViewer";const g="jp-CSVViewer-grid";const f=1e3;class v{}class _{constructor(e){this._looping=true;this._changed=new d.Signal(this);this._grid=e;this._query=null;this._row=0;this._column=-1}get changed(){return this._changed}cellBackgroundColorRendererFunc(e){return({value:t,row:n,column:i})=>{if(this._query){if(t.match(this._query)){if(this._row===n&&this._column===i){return e.currentMatchBackgroundColor}return e.matchBackgroundColor}}return""}}clear(){this._query=null;this._row=0;this._column=-1;this._changed.emit(undefined)}find(e,t=false){const n=this._grid.dataModel;const i=n.rowCount("body");const s=n.columnCount("body");if(this._query!==e){this._row=0;this._column=-1}this._query=e;const o=this._grid.scrollY/this._grid.defaultSizes.rowHeight;const r=(this._grid.scrollY+this._grid.pageHeight)/this._grid.defaultSizes.rowHeight;const a=this._grid.scrollX/this._grid.defaultSizes.columnHeaderHeight;const l=(this._grid.scrollX+this._grid.pageWidth)/this._grid.defaultSizes.columnHeaderHeight;const d=(e,t)=>e>=o&&e<=r&&t>=a&&t<=l;const c=t?-1:1;this._column+=c;for(let h=this._row;t?h>=0:h<i;h+=c){for(let i=this._column;t?i>=0:i<s;i+=c){const t=n.data("body",h,i);if(t.match(e)){this._changed.emit(undefined);if(!d(h,i)){this._grid.scrollToRow(h)}this._row=h;this._column=i;return true}}this._column=t?s-1:0}if(this._looping){this._looping=false;this._row=t?0:i-1;this._wrapRows(t);try{return this.find(e,t)}finally{this._looping=true}}return false}_wrapRows(e=false){const t=this._grid.dataModel;const n=t.rowCount("body");const i=t.columnCount("body");if(e&&this._row<=0){this._row=n-1;this._column=i}else if(!e&&this._row>=n-1){this._row=0;this._column=-1}}get query(){return this._query}}class b extends h.Widget{constructor(e){super();this._monitor=null;this._delimiter=",";this._revealed=new a.PromiseDelegate;this._baseRenderer=null;this._context=e.context;this.layout=new h.PanelLayout;this.addClass(m);void this.initialize()}async initialize(){const e=this.layout;if(this.isDisposed||!e){return}const{BasicKeyHandler:t,BasicMouseHandler:n,DataGrid:s}=await x.ensureDataGrid();this._defaultStyle=s.defaultStyle;this._grid=new s({defaultSizes:{rowHeight:24,columnWidth:144,rowHeaderWidth:64,columnHeaderHeight:36}});this._grid.addClass(g);this._grid.headerVisibility="all";this._grid.keyHandler=new t;this._grid.mouseHandler=new n;this._grid.copyConfig={separator:"\t",format:s.copyFormatGeneric,headers:"all",warningThreshold:1e6};e.addWidget(this._grid);this._searchService=new _(this._grid);this._searchService.changed.connect(this._updateRenderer,this);await this._context.ready;await this._updateGrid();this._revealed.resolve(undefined);this._monitor=new i.ActivityMonitor({signal:this._context.model.contentChanged,timeout:f});this._monitor.activityStopped.connect(this._updateGrid,this)}get context(){return this._context}get revealed(){return this._revealed.promise}get delimiter(){return this._delimiter}set delimiter(e){if(e===this._delimiter){return}this._delimiter=e;void this._updateGrid()}get style(){return this._grid.style}set style(e){this._grid.style={...this._defaultStyle,...e}}set rendererConfig(e){this._baseRenderer=e;void this._updateRenderer()}get searchService(){return this._searchService}dispose(){if(this._monitor){this._monitor.dispose()}super.dispose()}goToLine(e){this._grid.scrollToRow(e)}onActivateRequest(e){this.node.tabIndex=-1;this.node.focus()}async _updateGrid(){const{BasicSelectionModel:e}=await x.ensureDataGrid();const{DSVModel:t}=await x.ensureDSVModel();const n=this._context.model.toString();const i=this._delimiter;const s=this._grid.dataModel;const o=this._grid.dataModel=new t({data:n,delimiter:i});this._grid.selectionModel=new e({dataModel:o});if(s){s.dispose()}}async _updateRenderer(){if(this._baseRenderer===null){return}const{TextRenderer:e}=await x.ensureDataGrid();const t=this._baseRenderer;const n=new e({textColor:t.textColor,horizontalAlignment:t.horizontalAlignment,backgroundColor:this._searchService.cellBackgroundColorRendererFunc(t)});this._grid.cellRenderers.update({body:n,"column-header":n,"corner-header":n,"row-header":n})}}class y extends o.DocumentWidget{constructor(e){let{content:t,context:n,delimiter:i,reveal:s,...o}=e;t=t||x.createContent(n);s=Promise.all([s,t.revealed]);super({content:t,context:n,reveal:s,...o});if(i){t.delimiter=i}}setFragment(e){const t=e.split("=");if(t[0]!=="#row"){return}let n=t[1].split(";")[0];n=n.split("-")[0];void this.context.ready.then((()=>{this.content.goToLine(Number(n))}))}}class w extends o.ABCWidgetFactory{createNewWidget(e){const t=this.translator;return new y({context:e,translator:t})}defaultToolbarFactory(e){return[{name:"delimiter",widget:new p.p({widget:e.content,translator:this.translator})}]}}class C extends w{createNewWidget(e){const t="\t";return new y({context:e,delimiter:t,translator:this.translator})}}var x;(function(e){let t=null;let i=null;async function s(){if(t==null){t=new a.PromiseDelegate;t.resolve(await n.e(3364).then(n.t.bind(n,23364,23)))}return t.promise}e.ensureDataGrid=s;async function o(){if(i==null){i=new a.PromiseDelegate;i.resolve(await Promise.all([n.e(3472),n.e(3364)]).then(n.bind(n,33183)))}return i.promise}e.ensureDSVModel=o;function r(e){return new b({context:e})}e.createContent=r})(x||(x={}))},34360:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>W});var i=n(44906);var s=n.n(i);var o=n(90848);var r=n.n(o);var a=n(279);var l=n.n(a);var d=n(47391);var c=n.n(d);var h=n(85257);var u=n.n(h);var p=n(22873);var m=n.n(p);var g=n(79321);var f=n.n(g);var v=n(35788);var _=n.n(v);var b=n(2e3);var y=n.n(b);var w=n(47215);var C=n.n(w);var x=n(74202);var S=n.n(x);var k=n(33112);var j=n.n(k);var M=n(51997);var E=n.n(M);var I=n(36168);var T=n.n(I);function D(e){Object.values(g.Debugger.CommandIDs).forEach((t=>{if(e.commands.hasCommand(t)){e.commands.notifyCommandChanged(t)}}))}const L={id:"@jupyterlab/debugger-extension:consoles",description:"Add debugger capability to the consoles.",autoStart:true,requires:[g.IDebugger,h.IConsoleTracker],optional:[i.ILabShell],activate:(e,t,n,i)=>{const s=new g.Debugger.Handler({type:"console",shell:e.shell,service:t});const o=async t=>{const{sessionContext:n}=t;await n.ready;await s.updateContext(t,n);D(e)};if(i){i.currentChanged.connect(((e,t)=>{const n=t.newValue;if(n instanceof h.ConsolePanel){void o(n)}}))}else{n.currentChanged.connect(((e,t)=>{if(t){void o(t)}}))}}};const P={id:"@jupyterlab/debugger-extension:files",description:"Adds debugger capabilities to files.",autoStart:true,requires:[g.IDebugger,b.IEditorTracker],optional:[i.ILabShell],activate:(e,t,n,i)=>{const s=new g.Debugger.Handler({type:"file",shell:e.shell,service:t});const o={};const r=async t=>{const n=e.serviceManager.sessions;try{const i=await n.findByPath(t.context.path);if(!i){return}let r=o[i.id];if(!r){r=n.connectTo({model:i});o[i.id]=r}await s.update(t,r);D(e)}catch(i){return}};if(i){i.currentChanged.connect(((e,t)=>{const n=t.newValue;if(n instanceof v.DocumentWidget){const{content:e}=n;if(e instanceof b.FileEditor){void r(n)}}}))}else{n.currentChanged.connect(((e,t)=>{if(t){void r(t)}}))}}};const A={id:"@jupyterlab/debugger-extension:notebooks",description:"Adds debugger capability to notebooks and provides the debugger notebook handler.",autoStart:true,requires:[g.IDebugger,x.INotebookTracker],optional:[i.ILabShell,o.ICommandPalette,o.ISessionContextDialogs,I.ITranslator],provides:g.IDebuggerHandler,activate:(e,t,n,i,s,r,a)=>{const l=a!==null&&a!==void 0?a:I.nullTranslator;const d=r!==null&&r!==void 0?r:new o.SessionContextDialogs({translator:l});const c=new g.Debugger.Handler({type:"notebook",shell:e.shell,service:t});const h=l.load("jupyterlab");e.commands.addCommand(g.Debugger.CommandIDs.restartDebug,{label:h.__("Restart Kernel and Debug"),caption:h.__("Restart Kernel and Debug"),isEnabled:()=>t.isStarted,execute:async()=>{const e=t.getDebuggerState();await t.stop();const i=n.currentWidget;if(!i){return}const{content:s,sessionContext:o}=i;const r=await d.restart(o);if(!r){return}await t.restoreDebuggerState(e);await c.updateWidget(i,o.session);await x.NotebookActions.runAll(s,o,d,l)}});const u=async t=>{if(t){const{sessionContext:e}=t;await e.ready;await c.updateContext(t,e)}D(e)};if(i){i.currentChanged.connect(((e,t)=>{const n=t.newValue;if(n instanceof x.NotebookPanel){void u(n)}}))}else{n.currentChanged.connect(((e,t)=>{if(t){void u(t)}}))}if(s){s.addItem({category:"Notebook Operations",command:g.Debugger.CommandIDs.restartDebug})}return c}};const R={id:"@jupyterlab/debugger-extension:service",description:"Provides the debugger service.",autoStart:true,provides:g.IDebugger,requires:[g.IDebuggerConfig],optional:[g.IDebuggerSources,I.ITranslator],activate:(e,t,n,i)=>new g.Debugger.Service({config:t,debuggerSources:n,specsManager:e.serviceManager.kernelspecs,translator:i})};const N={id:"@jupyterlab/debugger-extension:config",description:"Provides the debugger configuration",provides:g.IDebuggerConfig,autoStart:true,activate:()=>new g.Debugger.Config};const O={id:"@jupyterlab/debugger-extension:sources",description:"Provides the source feature for debugging",autoStart:true,provides:g.IDebuggerSources,requires:[g.IDebuggerConfig,d.IEditorServices],optional:[x.INotebookTracker,h.IConsoleTracker,b.IEditorTracker],activate:(e,t,n,i,s,o)=>new g.Debugger.Sources({config:t,shell:e.shell,editorServices:n,notebookTracker:i,consoleTracker:s,editorTracker:o})};const B={id:"@jupyterlab/debugger-extension:variables",description:"Adds variables renderer and inspection in the debugger variable panel.",autoStart:true,requires:[g.IDebugger,g.IDebuggerHandler,I.ITranslator],optional:[o.IThemeManager,k.IRenderMimeRegistry],activate:(e,t,n,i,s,r)=>{const a=i.load("jupyterlab");const{commands:l,shell:d}=e;const c=new o.WidgetTracker({namespace:"debugger/inspect-variable"});const h=new o.WidgetTracker({namespace:"debugger/render-variable"});const u=g.Debugger.CommandIDs;l.addCommand(u.inspectVariable,{label:a.__("Inspect Variable"),caption:a.__("Inspect Variable"),isEnabled:e=>{var n,i,s,o;return!!((n=t.session)===null||n===void 0?void 0:n.isStarted)&&Number((o=(i=e.variableReference)!==null&&i!==void 0?i:(s=t.model.variables.selectedVariable)===null||s===void 0?void 0:s.variablesReference)!==null&&o!==void 0?o:0)>0},execute:async e=>{var n,i,r,a;let{variableReference:h,name:u}=e;if(!h){h=(n=t.model.variables.selectedVariable)===null||n===void 0?void 0:n.variablesReference}if(!u){u=(i=t.model.variables.selectedVariable)===null||i===void 0?void 0:i.name}const p=`jp-debugger-variable-${u}`;if(!u||!h||c.find((e=>e.id===p))){return}const m=await t.inspectVariable(h);if(!m||m.length===0){return}const f=t.model.variables;const v=new o.MainAreaWidget({content:new g.Debugger.VariablesGrid({model:f,commands:l,scopes:[{name:u,variables:m}],themeManager:s})});v.addClass("jp-DebuggerVariables");v.id=p;v.title.icon=g.Debugger.Icons.variableIcon;v.title.label=`${(a=(r=t.session)===null||r===void 0?void 0:r.connection)===null||a===void 0?void 0:a.name} - ${u}`;void c.add(v);const _=()=>{v.dispose();f.changed.disconnect(_)};f.changed.connect(_);d.add(v,"main",{mode:c.currentWidget?"split-right":"split-bottom",activate:false,type:"Debugger Variables"})}});l.addCommand(u.renderMimeVariable,{label:a.__("Render Variable"),caption:a.__("Render variable according to its mime type"),isEnabled:()=>{var e;return!!((e=t.session)===null||e===void 0?void 0:e.isStarted)},isVisible:()=>t.model.hasRichVariableRendering&&(r!==null||n.activeWidget instanceof x.NotebookPanel),execute:e=>{var s,o,a,l,c,u,p,m;let{name:f,frameId:v}=e;if(!f){f=(s=t.model.variables.selectedVariable)===null||s===void 0?void 0:s.name}if(!v){v=(o=t.model.callstack.frame)===null||o===void 0?void 0:o.id}const _=n.activeWidget;let b=_ instanceof x.NotebookPanel?_.content.rendermime:r;if(!b){return}const y=`jp-debugger-variable-mime-${f}-${(l=(a=t.session)===null||a===void 0?void 0:a.connection)===null||l===void 0?void 0:l.path.replace("/","-")}`;if(!f||h.find((e=>e.id===y))||!v&&t.hasStoppedThreads()){return}const w=t.model.variables;const C=new g.Debugger.VariableRenderer({dataLoader:()=>t.inspectRichVariable(f,v),rendermime:b,translator:i});C.addClass("jp-DebuggerRichVariable");C.id=y;C.title.icon=g.Debugger.Icons.variableIcon;C.title.label=`${f} - ${(u=(c=t.session)===null||c===void 0?void 0:c.connection)===null||u===void 0?void 0:u.name}`;C.title.caption=`${f} - ${(m=(p=t.session)===null||p===void 0?void 0:p.connection)===null||m===void 0?void 0:m.path}`;void h.add(C);const S=()=>{C.dispose();w.changed.disconnect(k);_===null||_===void 0?void 0:_.disposed.disconnect(S)};const k=()=>{if(n.activeWidget===_){void C.refresh()}};C.disposed.connect(S);w.changed.connect(k);_===null||_===void 0?void 0:_.disposed.connect(S);d.add(C,"main",{mode:h.currentWidget?"split-right":"split-bottom",activate:false,type:"Debugger Variables"})}});l.addCommand(u.copyToClipboard,{label:a.__("Copy to Clipboard"),caption:a.__("Copy text representation of the value to clipboard"),isEnabled:()=>{var e,n;return!!((e=t.session)===null||e===void 0?void 0:e.isStarted)&&!!((n=t.model.variables.selectedVariable)===null||n===void 0?void 0:n.value)},isVisible:()=>n.activeWidget instanceof x.NotebookPanel,execute:async()=>{const e=t.model.variables.selectedVariable.value;if(e){o.Clipboard.copyToSystem(e)}}});l.addCommand(u.copyToGlobals,{label:a.__("Copy Variable to Globals"),caption:a.__("Copy variable to globals scope"),isEnabled:()=>{var e;return!!((e=t.session)===null||e===void 0?void 0:e.isStarted)},isVisible:()=>n.activeWidget instanceof x.NotebookPanel&&t.model.supportCopyToGlobals,execute:async e=>{const n=t.model.variables.selectedVariable.name;await t.copyToGlobals(n)}})}};const F={id:"@jupyterlab/debugger-extension:sidebar",description:"Provides the debugger sidebar.",provides:g.IDebuggerSidebar,requires:[g.IDebugger,d.IEditorServices,I.ITranslator],optional:[o.IThemeManager,M.ISettingRegistry],autoStart:true,activate:async(e,t,n,i,s,o)=>{const{commands:r}=e;const a=g.Debugger.CommandIDs;const l={registry:r,continue:a.debugContinue,terminate:a.terminate,next:a.next,stepIn:a.stepIn,stepOut:a.stepOut,evaluate:a.evaluate};const d={registry:r,pauseOnExceptions:a.pauseOnExceptions};const c=new g.Debugger.Sidebar({service:t,callstackCommands:l,breakpointsCommands:d,editorServices:n,themeManager:s,translator:i});if(o){const e=await o.load(z.id);const n=()=>{var n,i,s,o;const r=e.get("variableFilters").composite;const a=(o=(s=(i=(n=t.session)===null||n===void 0?void 0:n.connection)===null||i===void 0?void 0:i.kernel)===null||s===void 0?void 0:s.name)!==null&&o!==void 0?o:"";if(a&&r[a]){c.variables.filter=new Set(r[a])}const l=e.get("defaultKernelSourcesFilter").composite;c.kernelSources.filter=l};n();e.changed.connect(n);t.sessionChanged.connect(n)}return c}};const z={id:"@jupyterlab/debugger-extension:main",description:"Initialize the debugger user interface.",requires:[g.IDebugger,g.IDebuggerSidebar,d.IEditorServices,I.ITranslator],optional:[o.ICommandPalette,g.IDebuggerSources,i.ILabShell,i.ILayoutRestorer,w.ILoggerRegistry,M.ISettingRegistry],autoStart:true,activate:async(e,t,n,i,s,r,l,d,c,h,u)=>{var m;const f=s.load("jupyterlab");const{commands:v,shell:_,serviceManager:b}=e;const{kernelspecs:y}=b;const w=g.Debugger.CommandIDs;const C=p.PageConfig.getOption("alwaysShowDebuggerExtension").toLowerCase()==="true";if(!C){await y.ready;const e=(m=y.specs)===null||m===void 0?void 0:m.kernelspecs;if(!e){return}const t=Object.keys(e).some((t=>{var n,i,s;return!!((s=(i=(n=e[t])===null||n===void 0?void 0:n.metadata)===null||i===void 0?void 0:i["debugger"])!==null&&s!==void 0?s:false)}));if(!t){return}}const x=async()=>{var e,n,s;const o=(n=(e=t.session)===null||e===void 0?void 0:e.connection)===null||n===void 0?void 0:n.kernel;if(!o){return""}const r=(await o.info).language_info;const a=r.name;const l=(s=i.mimeTypeService.getMimeTypeByLanguage({name:a}))!==null&&s!==void 0?s:"";return l};const S=new k.RenderMimeRegistry({initialFactories:k.standardRendererFactories});v.addCommand(w.evaluate,{label:f.__("Evaluate Code"),caption:f.__("Evaluate Code"),icon:g.Debugger.Icons.evaluateIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{var e,n,s;const o=await x();const r=await g.Debugger.Dialogs.getCode({title:f.__("Evaluate Code"),okLabel:f.__("Evaluate"),cancelLabel:f.__("Cancel"),mimeType:o,contentFactory:new a.CodeCell.ContentFactory({editorFactory:e=>i.factoryService.newInlineEditor(e)}),rendermime:S});const l=r.value;if(!r.button.accept||!l){return}const d=await t.evaluate(l);if(d){const i=d.result;const o=(n=(e=t===null||t===void 0?void 0:t.session)===null||e===void 0?void 0:e.connection)===null||n===void 0?void 0:n.path;const r=o?(s=h===null||h===void 0?void 0:h.getLogger)===null||s===void 0?void 0:s.call(h,o):undefined;if(r){r.log({type:"text",data:i,level:r.level})}else{console.debug(i)}}}});v.addCommand(w.debugContinue,{label:()=>t.hasStoppedThreads()?f.__("Continue"):f.__("Pause"),caption:()=>t.hasStoppedThreads()?f.__("Continue"):f.__("Pause"),icon:()=>t.hasStoppedThreads()?g.Debugger.Icons.continueIcon:g.Debugger.Icons.pauseIcon,isEnabled:()=>{var e,n;return(n=(e=t.session)===null||e===void 0?void 0:e.isStarted)!==null&&n!==void 0?n:false},execute:async()=>{if(t.hasStoppedThreads()){await t.continue()}else{await t.pause()}v.notifyCommandChanged(w.debugContinue)}});v.addCommand(w.terminate,{label:f.__("Terminate"),caption:f.__("Terminate"),icon:g.Debugger.Icons.terminateIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{await t.restart();D(e)}});v.addCommand(w.next,{label:f.__("Next"),caption:f.__("Next"),icon:g.Debugger.Icons.stepOverIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{await t.next()}});v.addCommand(w.stepIn,{label:f.__("Step In"),caption:f.__("Step In"),icon:g.Debugger.Icons.stepIntoIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{await t.stepIn()}});v.addCommand(w.stepOut,{label:f.__("Step Out"),caption:f.__("Step Out"),icon:g.Debugger.Icons.stepOutIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{await t.stepOut()}});v.addCommand(w.pauseOnExceptions,{label:e=>e.filter||"Breakpoints on exception",caption:e=>e.description,isToggled:e=>{var n;return((n=t.session)===null||n===void 0?void 0:n.isPausingOnException(e.filter))||false},isEnabled:()=>t.pauseOnExceptionsIsValid(),execute:async e=>{var n,i,s;if(e===null||e===void 0?void 0:e.filter){let n=e.filter;await t.pauseOnExceptionsFilter(n)}else{let e=[];(i=(n=t.session)===null||n===void 0?void 0:n.exceptionBreakpointFilters)===null||i===void 0?void 0:i.forEach((t=>{e.push(t.filter)}));const r=await o.InputDialog.getMultipleItems({title:f.__("Select a filter for breakpoints on exception"),items:e,defaults:((s=t.session)===null||s===void 0?void 0:s.currentExceptionFilters)||[]});let a=r.button.accept?r.value:null;if(a!==null){await t.pauseOnExceptions(a)}}}});let j=false;if(u){const e=await u.load(z.id);const t=()=>{j=e.get("autoCollapseDebuggerSidebar").composite};t();e.changed.connect(t)}t.eventMessage.connect(((t,i)=>{D(e);if(d&&i.event==="initialized"){d.activateById(n.id)}else if(d&&n.isVisible&&i.event==="terminated"&&j){d.collapseRight()}}));t.sessionChanged.connect((t=>{D(e)}));if(c){c.add(n,"debugger-sidebar")}n.node.setAttribute("role","region");n.node.setAttribute("aria-label",f.__("Debugger section"));n.title.caption=f.__("Debugger");_.add(n,"right",{type:"Debugger"});v.addCommand(w.showPanel,{label:f.__("Debugger Panel"),execute:()=>{_.activateById(n.id)}});if(r){const e=f.__("Debugger");[w.debugContinue,w.terminate,w.next,w.stepIn,w.stepOut,w.evaluate,w.pauseOnExceptions].forEach((t=>{r.addItem({command:t,category:e})}))}if(l){const{model:e}=t;const n=new g.Debugger.ReadOnlyEditorFactory({editorServices:i});const s=(e,n)=>{var i,s,o,r,a,d,c,h,u;l.find({focus:true,kernel:(r=(o=(s=(i=t.session)===null||i===void 0?void 0:i.connection)===null||s===void 0?void 0:s.kernel)===null||o===void 0?void 0:o.name)!==null&&r!==void 0?r:"",path:(c=(d=(a=t.session)===null||a===void 0?void 0:a.connection)===null||d===void 0?void 0:d.path)!==null&&c!==void 0?c:"",source:(u=(h=n===null||n===void 0?void 0:n.source)===null||h===void 0?void 0:h.path)!==null&&u!==void 0?u:""}).forEach((e=>{requestAnimationFrame((()=>{void e.reveal().then((()=>{const t=e.get();if(t){g.Debugger.EditorHandler.showCurrentLine(t,n.line)}}))}))}))};const o=(e,i,s)=>{var o,r,a,d,c,h,u;if(!i){return}const{content:m,mimeType:f,path:v}=i;const _=l.find({focus:true,kernel:(d=(a=(r=(o=t.session)===null||o===void 0?void 0:o.connection)===null||r===void 0?void 0:r.kernel)===null||a===void 0?void 0:a.name)!==null&&d!==void 0?d:"",path:(u=(h=(c=t.session)===null||c===void 0?void 0:c.connection)===null||h===void 0?void 0:h.path)!==null&&u!==void 0?u:"",source:v});if(_.length>0){if(s&&typeof s.line!=="undefined"){_.forEach((e=>{void e.reveal().then((()=>{var t;(t=e.get())===null||t===void 0?void 0:t.revealPosition({line:s.line-1,column:s.column||0})}))}))}return}const b=n.createNewEditor({content:m,mimeType:f,path:v});const y=b.editor;const w=new g.Debugger.EditorHandler({debuggerService:t,editorReady:()=>Promise.resolve(y),getEditor:()=>y,path:v,src:y.model.sharedModel});b.disposed.connect((()=>w.dispose()));l.open({label:p.PathExt.basename(v),caption:v,editorWrapper:b});const C=t.model.callstack.frame;if(C){g.Debugger.EditorHandler.showCurrentLine(y,C.line)}};const r=(e,t,n)=>{if(!t){return}o(null,t,n)};e.callstack.currentFrameChanged.connect(s);e.sources.currentSourceOpened.connect(o);e.kernelSources.kernelSourceOpened.connect(r);e.breakpoints.clicked.connect((async(e,n)=>{var i;const s=(i=n.source)===null||i===void 0?void 0:i.path;const r=await t.getSource({sourceReference:0,path:s});o(null,r,n)}))}}};const H=[R,L,P,A,B,F,z,O,N];const W=H},7920:(e,t,n)=>{"use strict";var i=n(79536);var s=n(49914);var o=n(98896);var r=n(94683);var a=n(90516);var l=n(5956);var d=n(42650);var c=n(33379);var h=n(88164);var u=n(32902);var p=n(34849);var m=n(37935);var g=n(93379);var f=n.n(g);var v=n(7795);var _=n.n(v);var b=n(90569);var y=n.n(b);var w=n(3565);var C=n.n(w);var x=n(19216);var S=n.n(x);var k=n(44589);var j=n.n(k);var M=n(69324);var E={};E.styleTagTransform=j();E.setAttributes=C();E.insert=y().bind(null,"head");E.domAPI=_();E.insertStyleElement=S();var I=f()(M.Z,E);const T=M.Z&&M.Z.locals?M.Z.locals:undefined;var D=n(70161)},24767:(e,t,n)=>{"use strict";n.d(t,{q:()=>Qe});var i=n(52435);const s=1540483477;const o=new TextEncoder;function r(e,t){const n=o.encode(e);let i=n.length;let r=t^i;let a=0;while(i>=4){let e=n[a]&255|(n[++a]&255)<<8|(n[++a]&255)<<16|(n[++a]&255)<<24;e=(e&65535)*s+(((e>>>16)*s&65535)<<16);e^=e>>>24;e=(e&65535)*s+(((e>>>16)*s&65535)<<16);r=(r&65535)*s+(((r>>>16)*s&65535)<<16)^e;i-=4;++a}switch(i){case 3:r^=(n[a+2]&255)<<16;case 2:r^=(n[a+1]&255)<<8;case 1:r^=n[a]&255;r=(r&65535)*s+(((r>>>16)*s&65535)<<16)}r^=r>>>13;r=(r&65535)*s+(((r>>>16)*s&65535)<<16);r^=r>>>15;return r>>>0}class a{constructor(){this._fileParams=new Map;this._hashMethods=new Map}getCodeId(e,t){const n=this._fileParams.get(t);if(!n){throw new Error(`Kernel (${t}) has no tmp file params.`)}const i=this._hashMethods.get(t);if(!i){throw new Error(`Kernel (${t}) has no hashing params.`)}const{prefix:s,suffix:o}=n;return`${s}${i(e)}${o}`}setHashParams(e){const{kernel:t,method:n,seed:i}=e;if(!t){throw new TypeError(`Kernel name is not defined.`)}switch(n){case"Murmur2":this._hashMethods.set(t,(e=>r(e,i).toString()));break;default:throw new Error(`Hash method (${n}) is not supported.`)}}setTmpFileParams(e){const{kernel:t,prefix:n,suffix:i}=e;if(!t){throw new TypeError(`Kernel name is not defined.`)}this._fileParams.set(t,{kernel:t,prefix:n,suffix:i})}getTmpFileParams(e){return this._fileParams.get(e)}}var l=n(90848);var d=n(279);var c=n(85448);var h;(function(e){function t(e){const t=new u({...e,body:new p(e),buttons:[l.Dialog.cancelButton({label:e.cancelLabel}),l.Dialog.okButton({label:e.okLabel})]});return t.launch()}e.getCode=t})(h||(h={}));class u extends l.Dialog{handleEvent(e){if(e.type==="keydown"){const t=e;const{code:n,shiftKey:i}=t;if(i&&n==="Enter"){return this.resolve()}if(n==="Enter"){return}}super.handleEvent(e)}}class p extends c.Widget{constructor(e){super();const{contentFactory:t,rendermime:n,mimeType:i}=e;const s=new d.CodeCellModel;s.mimeType=i!==null&&i!==void 0?i:"";this._prompt=new d.CodeCell({contentFactory:t,rendermime:n,model:s,placeholder:false}).initializeState();this._prompt.inputArea.promptNode.remove();this.node.appendChild(this._prompt.node)}getValue(){return this._prompt.model.sharedModel.getSource()}onAfterAttach(e){super.onAfterAttach(e);this._prompt.activate()}}var m=n(47391);class g{constructor(e){this._services=e.editorServices}createNewEditor(e){const{content:t,mimeType:n,path:i}=e;const s=this._services.factoryService.newInlineEditor;const o=this._services.mimeTypeService;const r=new m.CodeEditor.Model({mimeType:n||o.getMimeTypeByFilePath(i)});r.sharedModel.source=t;const a=new m.CodeEditorWrapper({editorOptions:{config:{readOnly:true,lineNumbers:true}},model:r,factory:s});a.node.setAttribute("data-jp-debugger","true");a.disposed.connect((()=>{r.dispose()}));return a}}var f=n(36168);var v=n(9154);var _=n(71372);var b=n(22873);var y=n(37496);var w=n(66143);const C="jp-DebuggerEditor-highlight";const x=1e3;class S{constructor(e){var t,n,i,s;this._src=e.src;this._id=(i=(n=(t=e.debuggerService.session)===null||t===void 0?void 0:t.connection)===null||n===void 0?void 0:n.id)!==null&&i!==void 0?i:"";this._path=(s=e.path)!==null&&s!==void 0?s:"";this._debuggerService=e.debuggerService;this._editor=e.getEditor;this._editorMonitor=new b.ActivityMonitor({signal:this._src.changed,timeout:x});this._editorMonitor.activityStopped.connect((()=>{this._sendEditorBreakpoints()}),this);this._debuggerService.model.breakpoints.changed.connect((async()=>{const e=this.editor;if(!e||e.isDisposed){return}this._addBreakpointsToEditor()}));this._debuggerService.model.breakpoints.restored.connect((async()=>{const e=this.editor;if(!e||e.isDisposed){return}this._addBreakpointsToEditor()}));this._debuggerService.model.callstack.currentFrameChanged.connect((()=>{const e=this.editor;if(e){S.clearHighlight(e)}}));this._breakpointEffect=y.StateEffect.define({map:(e,t)=>({pos:e.pos.map((e=>t.mapPos(e)))})});this._breakpointState=y.StateField.define({create:()=>y.RangeSet.empty,update:(e,t)=>{e=e.map(t.changes);for(let n of t.effects){if(n.is(this._breakpointEffect)){let t=n;if(t.value.pos.length){e=e.update({add:t.value.pos.map((e=>k.breakpointMarker.range(e))),sort:true})}else{e=y.RangeSet.empty}}}return e}});this._gutter=new y.Compartment;this._highlightDeco=w.Decoration.line({class:C});this._highlightState=y.StateField.define({create:()=>w.Decoration.none,update:(e,t)=>{e=e.map(t.changes);for(let n of t.effects){if(n.is(S._highlightEffect)){let t=n;if(t.value.pos.length){e=e.update({add:t.value.pos.map((e=>this._highlightDeco.range(e)))})}else{e=w.Decoration.none}}}return e},provide:e=>w.EditorView.decorations.from(e)});void e.editorReady().then((()=>{this._setupEditor()}))}get editor(){return this._editor()}dispose(){if(this.isDisposed){return}this._editorMonitor.dispose();this._clearEditor();this.isDisposed=true;_.Signal.clearData(this)}refreshBreakpoints(){this._addBreakpointsToEditor()}_setupEditor(){const e=this.editor;if(!e||e.isDisposed){return}e.setOption("lineNumbers",true);const t=[this._breakpointState,this._highlightState,y.Prec.highest((0,w.gutter)({class:"cm-breakpoint-gutter",renderEmptyElements:true,markers:e=>e.state.field(this._breakpointState),initialSpacer:()=>k.breakpointMarker,domEventHandlers:{mousedown:(e,t)=>{this._onGutterClick(e,t.from);return true}}}))];e.injectExtension(this._gutter.of(t));this._addBreakpointsToEditor()}_clearEditor(){const e=this.editor;if(!e||e.isDisposed){return}S.clearHighlight(e);this._clearGutter(e);e.setOption("lineNumbers",false);e.editor.dispatch({effects:this._gutter.reconfigure([])})}_sendEditorBreakpoints(){var e;if((e=this.editor)===null||e===void 0?void 0:e.isDisposed){return}const t=this._getBreakpointsFromEditor().map((e=>{var t,n;return k.createBreakpoint(((n=(t=this._debuggerService.session)===null||t===void 0?void 0:t.connection)===null||n===void 0?void 0:n.name)||"",e)}));void this._debuggerService.updateBreakpoints(this._src.getSource(),t,this._path)}_onGutterClick(e,t){var n,i,s;if(this._id!==((i=(n=this._debuggerService.session)===null||n===void 0?void 0:n.connection)===null||i===void 0?void 0:i.id)){return}const o=e.state.doc.lineAt(t).number;let r=e.state.field(this._breakpointState);let a=false;r.between(t,t,(()=>{a=true}));let l=this._getBreakpoints();if(a){l=l.filter((e=>e.line!==o))}else{l.push(k.createBreakpoint((s=this._path)!==null&&s!==void 0?s:this._debuggerService.session.connection.name,o))}l.sort(((e,t)=>e.line-t.line));void this._debuggerService.updateBreakpoints(this._src.getSource(),l,this._path)}_addBreakpointsToEditor(){var e,t;if(this._id!==((t=(e=this._debuggerService.session)===null||e===void 0?void 0:e.connection)===null||t===void 0?void 0:t.id)){return}const n=this.editor;const i=this._getBreakpoints();this._clearGutter(n);const s=i.map((e=>n.state.doc.line(e.line).from));n.editor.dispatch({effects:this._breakpointEffect.of({pos:s})})}_getBreakpointsFromEditor(){const e=this.editor;const t=e.editor.state.field(this._breakpointState);let n=[];t.between(0,e.doc.length,(t=>{n.push(e.doc.lineAt(t).number)}));return n}_clearGutter(e){if(!e){return}const t=e.editor;t.dispatch({effects:this._breakpointEffect.of({pos:[]})})}_getBreakpoints(){const e=this._src.getSource();return this._debuggerService.model.breakpoints.getBreakpoints(this._path||this._debuggerService.getCodeId(e))}}(function(e){e._highlightEffect=y.StateEffect.define({map:(e,t)=>({pos:e.pos.map((e=>t.mapPos(e)))})});function t(t,i){n(t);const s=t;const o=s.doc.line(i).from;s.editor.dispatch({effects:e._highlightEffect.of({pos:[o]})})}e.showCurrentLine=t;function n(t){if(!t||t.isDisposed){return}const n=t;n.editor.dispatch({effects:e._highlightEffect.of({pos:[]})})}e.clearHighlight=n})(S||(S={}));var k;(function(e){e.breakpointMarker=new class extends w.GutterMarker{toDOM(){const e=document.createTextNode("");return e}};function t(e,t){return{line:t,verified:true,source:{name:e}}}e.createBreakpoint=t})(k||(k={}));class j{constructor(e){this._debuggerService=e.debuggerService;this._consolePanel=e.widget;this._cellMap=new v.ObservableMap;const t=this._consolePanel.console;if(t.promptCell){this._addEditorHandler(t.promptCell)}t.promptCellCreated.connect(((e,t)=>{this._addEditorHandler(t)}));const n=()=>{for(const e of t.cells){this._addEditorHandler(e)}};n();this._consolePanel.console.cells.changed.connect(n)}dispose(){if(this.isDisposed){return}this.isDisposed=true;this._cellMap.values().forEach((e=>e.dispose()));this._cellMap.dispose();_.Signal.clearData(this)}_addEditorHandler(e){const t=e.model.id;if(e.model.type!=="code"||this._cellMap.has(t)){return}const n=e;const i=new S({debuggerService:this._debuggerService,editorReady:async()=>{await n.ready;return n.editor},getEditor:()=>n.editor,src:e.model.sharedModel});n.disposed.connect((()=>{this._cellMap.delete(t);i.dispose()}));this._cellMap.set(t,i)}}class M{constructor(e){var t;this._debuggerService=e.debuggerService;this._fileEditor=e.widget.content;this._hasLineNumber=(t=this._fileEditor.editor.getOption("lineNumbers"))!==null&&t!==void 0?t:false;this._editorHandler=new S({debuggerService:this._debuggerService,editorReady:()=>Promise.resolve(this._fileEditor.editor),getEditor:()=>this._fileEditor.editor,src:this._fileEditor.model.sharedModel})}dispose(){var e,t;if(this.isDisposed){return}this.isDisposed=true;(e=this._editorHandler)===null||e===void 0?void 0:e.dispose();(t=this._editorHandler)===null||t===void 0?void 0:t.editor.setOptions({lineNumbers:this._hasLineNumber});_.Signal.clearData(this)}}class E{constructor(e){this._debuggerService=e.debuggerService;this._notebookPanel=e.widget;this._cellMap=new v.ObservableMap;const t=this._notebookPanel.content;t.model.cells.changed.connect(this._onCellsChanged,this);this._onCellsChanged()}dispose(){if(this.isDisposed){return}this.isDisposed=true;this._cellMap.values().forEach((e=>{var t;e.dispose();(t=e.editor)===null||t===void 0?void 0:t.setOptions({...this._notebookPanel.content.editorConfig.code})}));this._cellMap.dispose();_.Signal.clearData(this)}_onCellsChanged(e,t){var n;this._notebookPanel.content.widgets.forEach((e=>this._addEditorHandler(e)));if((t===null||t===void 0?void 0:t.type)==="move"){for(const e of t.newValues){(n=this._cellMap.get(e.id))===null||n===void 0?void 0:n.refreshBreakpoints()}}}_addEditorHandler(e){const t=e.model.id;if(e.model.type!=="code"||this._cellMap.has(t)){return}const n=e;const i=new S({debuggerService:this._debuggerService,editorReady:async()=>{await n.ready;return n.editor},getEditor:()=>n.editor,src:e.model.sharedModel});n.disposed.connect((()=>{this._cellMap.delete(t);i.dispose()}));this._cellMap.set(e.model.id,i)}}const I="debugger-icon";function T(e,t,n,s,o=f.nullTranslator){const r=o.load("jupyterlab");const a=new i.ToolbarButton({className:"jp-DebuggerBugButton",icon:i.bugIcon,tooltip:r.__("Enable Debugger"),pressedIcon:i.bugDotIcon,pressedTooltip:r.__("Disable Debugger"),disabledTooltip:r.__("Select a kernel that supports debugging to enable debugger"),enabled:n,pressed:s,onClick:t});if(!e.toolbar.insertBefore("kernelName",I,a)){e.toolbar.addItem(I,a)}return a}function D(e,t,n=true,i){if(e){e.enabled=n;e.pressed=t;if(i){e.onClick=i}}}class L{constructor(e){this._handlers={};this._contextKernelChangedHandlers={};this._kernelChangedHandlers={};this._statusChangedHandlers={};this._iopubMessageHandlers={};this._iconButtons={};this._type=e.type;this._shell=e.shell;this._service=e.service}get activeWidget(){return this._activeWidget}async update(e,t){if(!t){delete this._kernelChangedHandlers[e.id];delete this._statusChangedHandlers[e.id];delete this._iopubMessageHandlers[e.id];return this.updateWidget(e,t)}const n=()=>{void this.updateWidget(e,t)};const i=this._kernelChangedHandlers[e.id];if(i){t.kernelChanged.disconnect(i)}this._kernelChangedHandlers[e.id]=n;t.kernelChanged.connect(n);const s=(n,i)=>{if(i.endsWith("restarting")){void this.updateWidget(e,t)}};const o=this._statusChangedHandlers[e.id];if(o){t.statusChanged.disconnect(o)}t.statusChanged.connect(s);this._statusChangedHandlers[e.id]=s;const r=(e,t)=>{if(t.parent_header.msg_type=="execute_request"&&this._service.isStarted&&!this._service.hasStoppedThreads()){void this._service.displayDefinedVariables()}};const a=this._iopubMessageHandlers[e.id];if(a){t.iopubMessage.disconnect(a)}t.iopubMessage.connect(r);this._iopubMessageHandlers[e.id]=r;this._activeWidget=e;return this.updateWidget(e,t)}async updateContext(e,t){const n=()=>{const{session:n}=t;void this.update(e,n)};const i=this._contextKernelChangedHandlers[e.id];if(i){t.kernelChanged.disconnect(i)}this._contextKernelChangedHandlers[e.id]=n;t.kernelChanged.connect(n);return this.update(e,t.session)}async updateWidget(e,t){var n,i,s,o;if(!this._service.model||!t){return}const r=()=>this._shell.currentWidget===e;const a=()=>{if(!this._handlers[e.id]){e.node.removeAttribute("data-jp-debugger");return}e.node.setAttribute("data-jp-debugger","true")};const l=()=>{if(this._handlers[e.id]){return}switch(this._type){case"notebook":this._handlers[e.id]=new E({debuggerService:this._service,widget:e});break;case"console":this._handlers[e.id]=new j({debuggerService:this._service,widget:e});break;case"file":this._handlers[e.id]=new M({debuggerService:this._service,widget:e});break;default:throw Error(`No handler for the type ${this._type}`)}a()};const d=()=>{var n,i,s,o;const r=this._handlers[e.id];if(!r){return}r.dispose();delete this._handlers[e.id];delete this._kernelChangedHandlers[e.id];delete this._statusChangedHandlers[e.id];delete this._iopubMessageHandlers[e.id];delete this._contextKernelChangedHandlers[e.id];if(((i=(n=this._service.session)===null||n===void 0?void 0:n.connection)===null||i===void 0?void 0:i.path)===(t===null||t===void 0?void 0:t.path)||!((o=(s=this._service.session)===null||s===void 0?void 0:s.connection)===null||o===void 0?void 0:o.kernel)){const e=this._service.model;e.clear()}a()};const c=(t=true)=>{const n=this._iconButtons[e.id];if(!n){this._iconButtons[e.id]=T(e,m,this._service.isStarted,t)}else{D(n,this._service.isStarted,t,m)}};const h=()=>{var e;return this._service.isStarted&&((e=this._previousConnection)===null||e===void 0?void 0:e.id)===(t===null||t===void 0?void 0:t.id)};const u=async()=>{this._service.session.connection=t;await this._service.stop()};const p=async()=>{var e,n;this._service.session.connection=t;this._previousConnection=t;await this._service.restoreState(true);await this._service.displayDefinedVariables();if((n=(e=this._service.session)===null||e===void 0?void 0:e.capabilities)===null||n===void 0?void 0:n.supportsModulesRequest){await this._service.displayModules()}};const m=async()=>{if(!r()){return}const t=this._iconButtons[e.id];if(h()){await u();d();D(t,false)}else{await p();l();D(t,true)}};c(false);e.disposed.connect((async()=>{if(h()){await u()}d();delete this._iconButtons[e.id];delete this._contextKernelChangedHandlers[e.id]}));const g=await this._service.isAvailable(t);if(!g){d();D(this._iconButtons[e.id],false,false);return}if(!this._service.session){this._service.session=new Qe.Session({connection:t,config:this._service.config})}else{this._previousConnection=((n=this._service.session.connection)===null||n===void 0?void 0:n.kernel)?this._service.session.connection:null;this._service.session.connection=t}await this._service.restoreState(false);if(this._service.isStarted&&!this._service.hasStoppedThreads()){await this._service.displayDefinedVariables();if((s=(i=this._service.session)===null||i===void 0?void 0:i.capabilities)===null||s===void 0?void 0:s.supportsModulesRequest){await this._service.displayModules()}}D(this._iconButtons[e.id],this._service.isStarted,true);if(!this._service.isStarted){d();this._service.session.connection=(o=this._previousConnection)!==null&&o!==void 0?o:t;await this._service.restoreState(false);return}l();this._previousConnection=t}}const P='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n  <g class="jp-icon3" fill="#616161">\n    <path d="M16.4805 17.2481C16.8158 16.3972 17 15.4701 17 14.5C17 10.3579 13.6421 7.00001 9.5 7.00001C8.36314 7.00001 7.28536 7.25295 6.31986 7.70564C7.60064 6.0592 9.60074 5 11.8482 5C15.7142 5 18.8482 8.13401 18.8482 12C18.8482 14.0897 17.9325 15.9655 16.4805 17.2481Z" />\n    <path d="M19.1607 14.2481C19.496 13.3971 19.6801 12.4701 19.6801 11.5C19.6801 7.35786 16.3223 4 12.1801 4C11.0433 4 9.9655 4.25295 9.00001 4.70563C10.2808 3.05919 12.2809 2 14.5284 2C18.3944 2 21.5284 5.134 21.5284 9C21.5284 11.0897 20.6127 12.9655 19.1607 14.2481Z" />\n    <path d="M16 15C16 18.866 12.866 22 9 22C5.13401 22 2 18.866 2 15C2 11.134 5.13401 8 9 8C12.866 8 16 11.134 16 15ZM11.7914 11L13 12.2086L10.2086 15L13 17.7914L11.7914 19L9 16.2086L6.20857 19L5 17.7914L7.79143 15L5 12.2086L6.20857 11L9 13.7914L11.7914 11Z" />\n    </g>\n</svg>\n';const A='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<g class="jp-icon3" fill="#616161">\n\t\t<path d="M7.99998 9.53198H8.54198L12.447 5.62698L11.386 4.56698L8.74898 7.17698L8.74898 0.999985H7.99998H7.25098L7.25098 7.17698L4.61398 4.56698L3.55298 5.62698L7.45798 9.53198H7.99998ZM9.95598 13.013C9.95598 14.1175 9.06055 15.013 7.95598 15.013C6.85141 15.013 5.95598 14.1175 5.95598 13.013C5.95598 11.9084 6.85141 11.013 7.95598 11.013C9.06055 11.013 9.95598 11.9084 9.95598 13.013Z"/>\n\t</g>\n</svg>\n';const R='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<g class="jp-icon3" fill="#616161">\n\t\t<path d="M7.99998 1H7.45798L3.55298 4.905L4.61398 5.965L7.25098 3.355V9.532H7.99998H8.74898V3.355L11.386 5.965L12.447 4.905L8.54198 1H7.99998ZM9.95598 13.013C9.95598 14.1176 9.06055 15.013 7.95598 15.013C6.85141 15.013 5.95598 14.1176 5.95598 13.013C5.95598 11.9084 6.85141 11.013 7.95598 11.013C9.06055 11.013 9.95598 11.9084 9.95598 13.013Z"/>\n\t</g>\n</svg>\n';const N='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<g class="jp-icon3" fill="#616161">\n\t\t<path d="M14.25 5.75V1.75H12.75V4.2916C11.605 2.93303 9.83899 2.08334 7.90914 2.08334C4.73316 2.08334 1.98941 4.39036 1.75072 7.48075L1.72992 7.75H3.231L3.25287 7.5241C3.46541 5.32932 5.45509 3.58334 7.90914 3.58334C9.6452 3.58334 11.1528 4.45925 11.9587 5.75H9.12986V7.25H13.292L14.2535 6.27493V5.75H14.25ZM7.99997 14C9.10454 14 9.99997 13.1046 9.99997 12C9.99997 10.8954 9.10454 10 7.99997 10C6.8954 10 5.99997 10.8954 5.99997 12C5.99997 13.1046 6.8954 14 7.99997 14Z"/>\n\t</g>\n</svg>\n';const O='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 4L1 4.5V12.5L1.5 13H4V12H2V5H4V4H1.5ZM14.5 13L15 12.5L15 4.5L14.5 4H12V5L14 5L14 12H12V13H14.5ZM8.79693 5L4.29693 7L4 7.45691V9.95691L4.24275 10.3857L6.74275 11.8857L7.20307 11.9138L11.7031 9.91381L12 9.45691V6.95691L11.7572 6.52816L9.25725 5.02816L8.79693 5ZM5 8.34V9.67381L6.5 10.5738V9.24L5 8.34ZM7.5 9.28184V10.6875L11 9.13197V7.72629L7.5 9.28184ZM10.4178 6.89071L8.96559 6.01936L5.58216 7.52311L7.03441 8.39445L10.4178 6.89071Z" fill="#007ACC"/>\n</svg>\n';const B='<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <g class="jp-icon3" fill="#616161">\n        <path d="m 7,6 h 4 V 18 H 7 Z" />\n        <path d="m 13,6 h 4 v 12 h -4 z" />\n    </g>\n</svg>\n';const F='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g class="jp-icon3" fill="#616161">\n        <path d="M5 2H15L20 7V20C20 20.5304 19.7893 21.0391 19.4142 21.4142C19.0391 21.7893 18.5304 22 18 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V14H4V16L8 13L4 10V12H3V4C3 3.46957 3.21071 2.96086 3.58579 2.58579C3.96086 2.21071 4.46957 2 5 2ZM12 18H16V16H12V18ZM12 14H18V12H12V14ZM12 10H18V8H12V10ZM10 14C10.5523 14 11 13.5523 11 13C11 12.4477 10.5523 12 10 12C9.44771 12 9 12.4477 9 13C9 13.5523 9.44771 14 10 14Z"/>\n        <path d="M3 12V14H1V13V12H3Z"/>\n    </g>\n</svg>\n';const z='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g class="jp-icon3" fill="#616161">\n        <path d="M5 2H15L20 7V20C20 20.5304 19.7893 21.0391 19.4142 21.4142C19.0391 21.7893 18.5304 22 18 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V14H4V16L8 13L4 10V12H3V4C3 3.46957 3.21071 2.96086 3.58579 2.58579C3.96086 2.21071 4.46957 2 5 2ZM12 18H16V16H12V18ZM12 14H18V12H12V14ZM12 10H18V8H12V10ZM10 14C10.5523 14 11 13.5523 11 13C11 12.4477 10.5523 12 10 12C9.44771 12 9 12.4477 9 13C9 13.5523 9.44771 14 10 14Z"/>\n        <path d="M3 12V14H1V13V12H3Z"/>\n    </g>\n</svg>\n';const H='<svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n  <g class="jp-icon3" fill="#616161" transform="matrix(1.1999396,0,0,1.3858273,-2.3726971,-4.6347192)">\n    <path\n      d="M 12.023438,0.30859375 11.158203,1.8085937 -1.2382812,23.285156 l 26.5292972,-0.002 z m 0.002,3.99999995 9.800781,16.9746093 -19.6015626,0.002 z"\n      transform="matrix(0.72509832,0,0,0.7247701,3.2918397,3.480876)"\n    />\n    <path d="m 11.144475,9.117095 h 1.666751 v 7.215906 h -1.666751 z" />\n    <path d="m 11.144475,17.054592 h 1.666751 v 1.443181 h -1.666751 z" />\n  </g>\n</svg>\n';const W=new i.LabIcon({name:"debugger:close-all",svgstr:P});const V=new i.LabIcon({name:"debugger:pause-on-exception",svgstr:H});const U=new i.LabIcon({name:"debugger:pause",svgstr:B});const $=new i.LabIcon({name:"debugger:step-into",svgstr:A});const q=new i.LabIcon({name:"debugger:step-over",svgstr:N});const K=new i.LabIcon({name:"debugger:step-out",svgstr:R});const J=new i.LabIcon({name:"debugger:variable",svgstr:O});const Z=new i.LabIcon({name:"debugger:view-breakpoint",svgstr:F});const G=new i.LabIcon({name:"debugger:open-kernel-source",svgstr:z});class Y{constructor(){this._breakpoints=new Map;this._changed=new _.Signal(this);this._restored=new _.Signal(this);this._clicked=new _.Signal(this)}get changed(){return this._changed}get restored(){return this._restored}get clicked(){return this._clicked}get breakpoints(){return this._breakpoints}setBreakpoints(e,t){this._breakpoints.set(e,t);this._changed.emit(t)}getBreakpoints(e){var t;return(t=this._breakpoints.get(e))!==null&&t!==void 0?t:[]}restoreBreakpoints(e){this._breakpoints=e;this._restored.emit()}}class X{constructor(){this._state=[];this._currentFrame=null;this._framesChanged=new _.Signal(this);this._currentFrameChanged=new _.Signal(this)}get frames(){return this._state}set frames(e){this._state=e;const t=this.frame!==null?Q.getFrameId(this.frame):"";const n=e.find((e=>Q.getFrameId(e)===t));if(!n){this.frame=e[0]}this._framesChanged.emit(e)}get frame(){return this._currentFrame}set frame(e){this._currentFrame=e;this._currentFrameChanged.emit(e)}get framesChanged(){return this._framesChanged}get currentFrameChanged(){return this._currentFrameChanged}}var Q;(function(e){function t(e){var t;return`${(t=e===null||e===void 0?void 0:e.source)===null||t===void 0?void 0:t.path}-${e===null||e===void 0?void 0:e.id}`}e.getFrameId=t})(Q||(Q={}));class ee{constructor(e){this._currentSourceOpened=new _.Signal(this);this._currentSourceChanged=new _.Signal(this);this.currentFrameChanged=e.currentFrameChanged}get currentSourceOpened(){return this._currentSourceOpened}get currentSourceChanged(){return this._currentSourceChanged}get currentSource(){return this._currentSource}set currentSource(e){this._currentSource=e;this._currentSourceChanged.emit(e)}open(){this._currentSourceOpened.emit(this._currentSource)}}var te=n(95905);const ne=500;const ie=(e,t)=>{if(e.name<t.name){return-1}if(e.name>t.name){return 1}return 0};class se{constructor(){this._filteredKernelSources=null;this._filter="";this._isDisposed=false;this._kernelSources=null;this._changed=new _.Signal(this);this._filterChanged=new _.Signal(this);this._kernelSourceOpened=new _.Signal(this);this.refresh=this.refresh.bind(this);this._refreshDebouncer=new te.Debouncer(this.refresh,ne)}get filter(){return this._filter}set filter(e){this._filter=e;this._filterChanged.emit(e);void this._refreshDebouncer.invoke()}get isDisposed(){return this._isDisposed}get kernelSources(){return this._kernelSources}set kernelSources(e){this._kernelSources=e;this.refresh()}get changed(){return this._changed}get filterChanged(){return this._filterChanged}get kernelSourceOpened(){return this._kernelSourceOpened}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._refreshDebouncer.dispose();_.Signal.clearData(this)}open(e){this._kernelSourceOpened.emit(e)}getFilteredKernelSources(){const e=new RegExp(this._filter);return this._kernelSources.filter((t=>e.test(t.name)))}refresh(){if(this._kernelSources){this._filteredKernelSources=this._filter?this.getFilteredKernelSources():this._kernelSources;this._filteredKernelSources.sort(ie)}else{this._kernelSources=new Array;this._filteredKernelSources=new Array}this._changed.emit(this._filteredKernelSources)}}class oe{constructor(){this._selectedVariable=null;this._state=[];this._variableExpanded=new _.Signal(this);this._changed=new _.Signal(this)}get scopes(){return this._state}set scopes(e){this._state=e;this._changed.emit()}get changed(){return this._changed}get variableExpanded(){return this._variableExpanded}get selectedVariable(){return this._selectedVariable}set selectedVariable(e){this._selectedVariable=e}expandVariable(e){this._variableExpanded.emit(e)}}class re{constructor(){this._disposed=new _.Signal(this);this._isDisposed=false;this._hasRichVariableRendering=false;this._supportCopyToGlobals=false;this._stoppedThreads=new Set;this._title="-";this._titleChanged=new _.Signal(this);this.breakpoints=new Y;this.callstack=new X;this.variables=new oe;this.sources=new ee({currentFrameChanged:this.callstack.currentFrameChanged});this.kernelSources=new se}get disposed(){return this._disposed}get hasRichVariableRendering(){return this._hasRichVariableRendering}set hasRichVariableRendering(e){this._hasRichVariableRendering=e}get supportCopyToGlobals(){return this._supportCopyToGlobals}set supportCopyToGlobals(e){this._supportCopyToGlobals=e}get isDisposed(){return this._isDisposed}get stoppedThreads(){return this._stoppedThreads}set stoppedThreads(e){this._stoppedThreads=e}get title(){return this._title}set title(e){if(e===this._title){return}this._title=e!==null&&e!==void 0?e:"-";this._titleChanged.emit(e)}get titleChanged(){return this._titleChanged}dispose(){if(this._isDisposed){return}this._isDisposed=true;this.kernelSources.dispose();this._disposed.emit()}clear(){this._stoppedThreads.clear();const e=new Map;this.breakpoints.restoreBreakpoints(e);this.callstack.frames=[];this.variables.scopes=[];this.sources.currentSource=null;this.kernelSources.kernelSources=null;this.title="-"}}class ae extends c.Panel{constructor(e){super();this._filter=new Set;this._grid=null;this._pending=null;this.commands=e.commands;this.model=e.model;this.themeManager=e.themeManager;this.translator=e.translator;this.model.changed.connect((()=>this.update()),this);this.addClass("jp-DebuggerVariables-body")}get filter(){return this._filter}set filter(e){this._filter=e;this.update()}get scope(){return this._scope}set scope(e){this._scope=e;if(e!=="Globals"){this.addClass("jp-debuggerVariables-local")}else{this.removeClass("jp-debuggerVariables-local")}this.update()}async initialize(){if(this._grid||this._pending){return}const{Grid:e}=await(this._pending=Promise.all([n.e(3472),n.e(3364)]).then(n.bind(n,32938)));const{commands:t,model:i,themeManager:s,translator:o}=this;this._grid=new e({commands:t,model:i,themeManager:s,translator:o});this._grid.addClass("jp-DebuggerVariables-grid");this._pending=null;this.addWidget(this._grid);this.update()}onBeforeShow(e){if(!this._grid&&!this._pending){void this.initialize()}super.onBeforeShow(e)}onUpdateRequest(e){var t;if(this._grid){const{dataModel:e}=this._grid;e.filter=this._filter;e.scope=this._scope;e.setData((t=this.model.scopes)!==null&&t!==void 0?t:[])}super.onUpdateRequest(e)}}var le=n(33112);var de=n(5596);const ce="jp-VariableRendererPanel";const he="jp-VariableRendererPanel-renderer";class ue extends l.MainAreaWidget{constructor(e){const{dataLoader:t,rendermime:n,translator:i}=e;const s=new c.Panel;const o=new de.PromiseDelegate;super({content:s,reveal:Promise.all([t,o.promise])});this.content.addClass(ce);this.trans=(i!==null&&i!==void 0?i:f.nullTranslator).load("jupyterlab");this.dataLoader=t;this.renderMime=n;this._dataHash=null;this.refresh().then((()=>{o.resolve()})).catch((e=>o.reject(e)))}async refresh(e=false){let t=await this.dataLoader();if(Object.keys(t.data).length===0){t={data:{"text/plain":this.trans.__("The variable is undefined in the active context.")},metadata:{}}}if(t.data){const n=r(JSON.stringify(t),17);if(e||this._dataHash!==n){if(this.content.layout){this.content.widgets.forEach((e=>{this.content.layout.removeWidget(e)}))}const e=this.renderMime.preferredMimeType(t.data,"any");if(e){const i=this.renderMime.createRenderer(e);i.addClass(he);const s=new le.MimeModel({...t,trusted:true});this._dataHash=n;await i.renderModel(s);this.content.addWidget(i)}else{this._dataHash=null;return Promise.reject("Unable to determine the preferred mime type.")}}}else{this._dataHash=null;return Promise.reject("Unable to get a view on the variable.")}}}class pe{constructor(e){var t,n;this._eventMessage=new _.Signal(this);this._isDisposed=false;this._sessionChanged=new _.Signal(this);this._pauseOnExceptionChanged=new _.Signal(this);this._config=e.config;this._session=null;this._specsManager=(t=e.specsManager)!==null&&t!==void 0?t:null;this._model=new Qe.Model;this._debuggerSources=(n=e.debuggerSources)!==null&&n!==void 0?n:null;this._trans=(e.translator||f.nullTranslator).load("jupyterlab")}get eventMessage(){return this._eventMessage}get config(){return this._config}get isDisposed(){return this._isDisposed}get isStarted(){var e,t;return(t=(e=this._session)===null||e===void 0?void 0:e.isStarted)!==null&&t!==void 0?t:false}get pauseOnExceptionChanged(){return this._pauseOnExceptionChanged}get model(){return this._model}get session(){return this._session}set session(e){var t;if(this._session===e){return}if(this._session){this._session.dispose()}this._session=e;(t=this._session)===null||t===void 0?void 0:t.eventMessage.connect(((e,t)=>{if(t.event==="stopped"){this._model.stoppedThreads.add(t.body.threadId);void this._getAllFrames()}else if(t.event==="continued"){this._model.stoppedThreads.delete(t.body.threadId);this._clearModel();this._clearSignals()}this._eventMessage.emit(t)}));this._sessionChanged.emit(e)}get sessionChanged(){return this._sessionChanged}dispose(){if(this.isDisposed){return}this._isDisposed=true;_.Signal.clearData(this)}getCodeId(e){var t,n,i,s;try{return this._config.getCodeId(e,(s=(i=(n=(t=this.session)===null||t===void 0?void 0:t.connection)===null||n===void 0?void 0:n.kernel)===null||i===void 0?void 0:i.name)!==null&&s!==void 0?s:"")}catch(o){return""}}hasStoppedThreads(){var e,t;return(t=((e=this._model)===null||e===void 0?void 0:e.stoppedThreads.size)>0)!==null&&t!==void 0?t:false}async isAvailable(e){var t,n,i,s;if(!this._specsManager){return true}await this._specsManager.ready;const o=e===null||e===void 0?void 0:e.kernel;if(!o){return false}const r=o.name;if(!((t=this._specsManager.specs)===null||t===void 0?void 0:t.kernelspecs[r])){return true}return!!((s=(i=(n=this._specsManager.specs.kernelspecs[r])===null||n===void 0?void 0:n.metadata)===null||i===void 0?void 0:i["debugger"])!==null&&s!==void 0?s:false)}async clearBreakpoints(){var e;if(((e=this.session)===null||e===void 0?void 0:e.isStarted)!==true){return}this._model.breakpoints.breakpoints.forEach(((e,t,n)=>{void this._setBreakpoints([],t)}));let t=new Map;this._model.breakpoints.restoreBreakpoints(t)}async continue(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("continue",{threadId:this._currentThread()});this._model.stoppedThreads.delete(this._currentThread());this._clearModel();this._clearSignals()}catch(e){console.error("Error:",e.message)}}async getSource(e){var t,n;if(!this.session){throw new Error("No active debugger session")}const i=await this.session.sendRequest("source",{source:e,sourceReference:(t=e.sourceReference)!==null&&t!==void 0?t:0});return{...i.body,path:(n=e.path)!==null&&n!==void 0?n:""}}async evaluate(e){var t;if(!this.session){throw new Error("No active debugger session")}const n=(t=this.model.callstack.frame)===null||t===void 0?void 0:t.id;const i=await this.session.sendRequest("evaluate",{context:"repl",expression:e,frameId:n});if(!i.success){return null}this._clearModel();await this._getAllFrames();return i.body}async next(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("next",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async inspectRichVariable(e,t){if(!this.session){throw new Error("No active debugger session")}const n=await this.session.sendRequest("richInspectVariables",{variableName:e,frameId:t});if(n.success){return n.body}else{throw new Error(n.message)}}async inspectVariable(e){if(!this.session){throw new Error("No active debugger session")}const t=await this.session.sendRequest("variables",{variablesReference:e});if(t.success){return t.body.variables}else{throw new Error(t.message)}}async copyToGlobals(e){if(!this.session){throw new Error("No active debugger session")}if(!this.model.supportCopyToGlobals){throw new Error('The "copyToGlobals" request is not supported by the kernel')}const t=this.model.callstack.frames;this.session.sendRequest("copyToGlobals",{srcVariableName:e,dstVariableName:e,srcFrameId:t[0].id}).then((async()=>{const e=await this._getScopes(t[0]);const n=await Promise.all(e.map((e=>this._getVariables(e))));const i=this._convertScopes(e,n);this._model.variables.scopes=i})).catch((e=>{console.error(e)}))}async displayDefinedVariables(){if(!this.session){throw new Error("No active debugger session")}const e=await this.session.sendRequest("inspectVariables",{});const t=e.body.variables;const n=[{name:this._trans.__("Globals"),variables:t}];this._model.variables.scopes=n}async displayModules(){if(!this.session){throw new Error("No active debugger session")}const e=await this.session.sendRequest("modules",{});this._model.kernelSources.kernelSources=e.body.modules.map((e=>({name:e.name,path:e.path})))}async restart(){const{breakpoints:e}=this._model.breakpoints;await this.stop();await this.start();await this._restoreBreakpoints(e)}async restoreState(e){var t,n,i,s,o,r,a,l,d,c;if(!this.model||!this.session){return}const h=await this.session.restoreState();const{body:u}=h;const p=this._mapBreakpoints(u.breakpoints);const m=new Set(u.stoppedThreads);this._model.hasRichVariableRendering=u.richRendering===true;this._model.supportCopyToGlobals=u.copyToGlobals===true;this._config.setHashParams({kernel:(s=(i=(n=(t=this.session)===null||t===void 0?void 0:t.connection)===null||n===void 0?void 0:n.kernel)===null||i===void 0?void 0:i.name)!==null&&s!==void 0?s:"",method:u.hashMethod,seed:u.hashSeed});this._config.setTmpFileParams({kernel:(l=(a=(r=(o=this.session)===null||o===void 0?void 0:o.connection)===null||r===void 0?void 0:r.kernel)===null||a===void 0?void 0:a.name)!==null&&l!==void 0?l:"",prefix:u.tmpFilePrefix,suffix:u.tmpFileSuffix});this._model.stoppedThreads=m;if(!this.isStarted&&(e||m.size!==0)){await this.start()}if(this.isStarted||e){this._model.title=this.isStarted?((c=(d=this.session)===null||d===void 0?void 0:d.connection)===null||c===void 0?void 0:c.name)||"-":"-"}if(this._debuggerSources){const e=this._filterBreakpoints(p);this._model.breakpoints.restoreBreakpoints(e)}else{this._model.breakpoints.restoreBreakpoints(p)}if(m.size!==0){await this._getAllFrames()}else if(this.isStarted){this._clearModel();this._clearSignals()}if(this.session.currentExceptionFilters){await this.pauseOnExceptions(this.session.currentExceptionFilters)}}start(){if(!this.session){throw new Error("No active debugger session")}return this.session.start()}async pause(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("pause",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async stepIn(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("stepIn",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async stepOut(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("stepOut",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async stop(){if(!this.session){throw new Error("No active debugger session")}await this.session.stop();if(this._model){this._model.clear()}}async updateBreakpoints(e,t,n){var i;if(!((i=this.session)===null||i===void 0?void 0:i.isStarted)){return}if(!n){n=(await this._dumpCell(e)).body.sourcePath}const s=await this.session.restoreState();const o=t.filter((({line:e})=>typeof e==="number")).map((({line:e})=>({line:e})));const r=this._mapBreakpoints(s.body.breakpoints);if(this._debuggerSources){const e=this._filterBreakpoints(r);this._model.breakpoints.restoreBreakpoints(e)}else{this._model.breakpoints.restoreBreakpoints(r)}let a=new Set;const l=await this._setBreakpoints(o,n);const d=l.body.breakpoints.filter(((e,t,n)=>{const i=n.findIndex((t=>t.line===e.line))>-1;const s=!a.has(e.line);a.add(e.line);return i&&s}));this._model.breakpoints.setBreakpoints(n,d);await this.session.sendRequest("configurationDone",{})}pauseOnExceptionsIsValid(){var e,t;if(this.isStarted){if(((t=(e=this.session)===null||e===void 0?void 0:e.exceptionBreakpointFilters)===null||t===void 0?void 0:t.length)!==0){return true}}return false}async pauseOnExceptionsFilter(e){var t;if(!((t=this.session)===null||t===void 0?void 0:t.isStarted)){return}let n=this.session.currentExceptionFilters;if(this.session.isPausingOnException(e)){const t=n.indexOf(e);n.splice(t,1)}else{n===null||n===void 0?void 0:n.push(e)}await this.pauseOnExceptions(n)}async pauseOnExceptions(e){var t,n;if(!((t=this.session)===null||t===void 0?void 0:t.isStarted)){return}const i=((n=this.session.exceptionBreakpointFilters)===null||n===void 0?void 0:n.map((e=>e.filter)))||[];let s={filters:[]};e.forEach((e=>{if(i.includes(e)){s.filters.push(e)}}));this.session.currentExceptionFilters=s.filters;await this.session.sendRequest("setExceptionBreakpoints",s);this._pauseOnExceptionChanged.emit()}getDebuggerState(){var e,t,n,i,s,o,r;const a=this._model.breakpoints.breakpoints;let l=[];if(this._debuggerSources){for(const d of a.keys()){const a=this._debuggerSources.find({focus:false,kernel:(i=(n=(t=(e=this.session)===null||e===void 0?void 0:e.connection)===null||t===void 0?void 0:t.kernel)===null||n===void 0?void 0:n.name)!==null&&i!==void 0?i:"",path:(r=(o=(s=this._session)===null||s===void 0?void 0:s.connection)===null||o===void 0?void 0:o.path)!==null&&r!==void 0?r:"",source:d});const c=a.map((e=>e.src.getSource()));l=l.concat(c)}}return{cells:l,breakpoints:a}}async restoreDebuggerState(e){var t,n,i,s;await this.start();for(const c of e.cells){await this._dumpCell(c)}const o=new Map;const r=(s=(i=(n=(t=this.session)===null||t===void 0?void 0:t.connection)===null||n===void 0?void 0:n.kernel)===null||i===void 0?void 0:i.name)!==null&&s!==void 0?s:"";const{prefix:a,suffix:l}=this._config.getTmpFileParams(r);for(const c of e.breakpoints){const[e,t]=c;const n=e.substr(0,e.length-l.length);const i=n.substr(n.lastIndexOf("/")+1);const s=a.concat(i).concat(l);o.set(s,t)}await this._restoreBreakpoints(o);const d=await this.session.sendRequest("configurationDone",{});await this.restoreState(false);return d.success}_clearModel(){this._model.callstack.frames=[];this._model.variables.scopes=[]}_clearSignals(){this._model.callstack.currentFrameChanged.disconnect(this._onCurrentFrameChanged,this);this._model.variables.variableExpanded.disconnect(this._onVariableExpanded,this)}_convertScopes(e,t){if(!t||!e){return[]}return e.map(((e,n)=>({name:e.name,variables:t[n].map((e=>({...e})))})))}_currentThread(){return 1}async _dumpCell(e){if(!this.session){throw new Error("No active debugger session")}return this.session.sendRequest("dumpCell",{code:e})}_filterBreakpoints(e){if(!this._debuggerSources){return e}let t=new Map;for(const n of e){const[e,i]=n;i.forEach((()=>{var n,s,o,r,a,l,d;this._debuggerSources.find({focus:false,kernel:(r=(o=(s=(n=this.session)===null||n===void 0?void 0:n.connection)===null||s===void 0?void 0:s.kernel)===null||o===void 0?void 0:o.name)!==null&&r!==void 0?r:"",path:(d=(l=(a=this._session)===null||a===void 0?void 0:a.connection)===null||l===void 0?void 0:l.path)!==null&&d!==void 0?d:"",source:e}).forEach((()=>{if(i.length>0){t.set(e,i)}}))}))}return t}async _getAllFrames(){this._model.callstack.currentFrameChanged.connect(this._onCurrentFrameChanged,this);this._model.variables.variableExpanded.connect(this._onVariableExpanded,this);const e=await this._getFrames(this._currentThread());this._model.callstack.frames=e}async _getFrames(e){if(!this.session){throw new Error("No active debugger session")}const t=await this.session.sendRequest("stackTrace",{threadId:e});const n=t.body.stackFrames;return n}async _getScopes(e){if(!this.session){throw new Error("No active debugger session")}if(!e){return[]}const t=await this.session.sendRequest("scopes",{frameId:e.id});return t.body.scopes}async _getVariables(e){if(!this.session){throw new Error("No active debugger session")}if(!e){return[]}const t=await this.session.sendRequest("variables",{variablesReference:e.variablesReference});return t.body.variables}_mapBreakpoints(e){if(!e.length){return new Map}return e.reduce(((e,t)=>{const{breakpoints:n,source:i}=t;e.set(i,n.map((e=>({...e,source:{path:i},verified:true}))));return e}),new Map)}async _onCurrentFrameChanged(e,t){if(!t){return}const n=await this._getScopes(t);const i=await Promise.all(n.map((e=>this._getVariables(e))));const s=this._convertScopes(n,i);this._model.variables.scopes=s}async _onVariableExpanded(e,t){if(!this.session){throw new Error("No active debugger session")}const n=await this.session.sendRequest("variables",{variablesReference:t.variablesReference});let i={...t,expanded:true};n.body.variables.forEach((e=>{i={[e.name]:e,...i}}));const s=this._model.variables.scopes.map((e=>{const n=e.variables.findIndex((e=>e.variablesReference===t.variablesReference));e.variables[n]=i;return{...e}}));this._model.variables.scopes=[...s];return n.body.variables}async _setBreakpoints(e,t){if(!this.session){throw new Error("No active debugger session")}return await this.session.sendRequest("setBreakpoints",{breakpoints:e,source:{path:t},sourceModified:false})}async _restoreBreakpoints(e){for(const[t,n]of e){await this._setBreakpoints(n.filter((({line:e})=>typeof e==="number")).map((({line:e})=>({line:e}))),t)}this._model.breakpoints.restoreBreakpoints(e)}}class me{constructor(e){this._seq=0;this._ready=new de.PromiseDelegate;this._isDisposed=false;this._isStarted=false;this._exceptionPaths=[];this._exceptionBreakpointFilters=[];this._currentExceptionFilters={};this._disposed=new _.Signal(this);this._eventMessage=new _.Signal(this);this.connection=e.connection;this._config=e.config;this.translator=e.translator||f.nullTranslator}get isDisposed(){return this._isDisposed}get capabilities(){return this._capabilities}get disposed(){return this._disposed}get connection(){return this._connection}set connection(e){var t,n;if(this._connection){this._connection.iopubMessage.disconnect(this._handleEvent,this)}this._connection=e;if(!this._connection){this._isStarted=false;return}this._connection.iopubMessage.connect(this._handleEvent,this);this._ready=new de.PromiseDelegate;const i=(n=(t=this.connection)===null||t===void 0?void 0:t.kernel)===null||n===void 0?void 0:n.requestDebug({type:"request",seq:0,command:"debugInfo"});if(i){i.onReply=e=>{this._ready.resolve();i.dispose()}}}get isStarted(){return this._isStarted}get exceptionPaths(){return this._exceptionPaths}get exceptionBreakpointFilters(){return this._exceptionBreakpointFilters}get currentExceptionFilters(){var e,t,n;const i=(n=(t=(e=this.connection)===null||e===void 0?void 0:e.kernel)===null||t===void 0?void 0:t.name)!==null&&n!==void 0?n:"";if(!i){return[]}const s=this._config.getTmpFileParams(i);if(!s){return[]}let o=s.prefix;if(Object.keys(this._currentExceptionFilters).includes(o)){return this._currentExceptionFilters[o]}return[]}set currentExceptionFilters(e){var t,n,i;const s=(i=(n=(t=this.connection)===null||t===void 0?void 0:t.kernel)===null||n===void 0?void 0:n.name)!==null&&i!==void 0?i:"";if(!s){return}const o=this._config.getTmpFileParams(s);if(!o){return}let r=o.prefix;if(e===null){if(Object.keys(this._currentExceptionFilters).includes(r)){delete this._currentExceptionFilters[r]}}else{this._currentExceptionFilters[r]=e}}get eventMessage(){return this._eventMessage}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._disposed.emit();_.Signal.clearData(this)}async start(){var e,t,n,i;const s=await this.sendRequest("initialize",{clientID:"jupyterlab",clientName:"JupyterLab",adapterID:(n=(t=(e=this.connection)===null||e===void 0?void 0:e.kernel)===null||t===void 0?void 0:t.name)!==null&&n!==void 0?n:"",pathFormat:"path",linesStartAt1:true,columnsStartAt1:true,supportsVariableType:true,supportsVariablePaging:true,supportsRunInTerminalRequest:true,locale:document.documentElement.lang});if(!s.success){throw new Error(`Could not start the debugger: ${s.message}`)}this._capabilities=s.body;this._isStarted=true;this._exceptionBreakpointFilters=(i=s.body)===null||i===void 0?void 0:i.exceptionBreakpointFilters;await this.sendRequest("attach",{})}async stop(){this._isStarted=false;await this.sendRequest("disconnect",{restart:false,terminateDebuggee:false})}async restoreState(){var e;const t=await this.sendRequest("debugInfo",{});this._isStarted=t.body.isStarted;this._exceptionPaths=(e=t.body)===null||e===void 0?void 0:e.exceptionPaths;return t}isPausingOnException(e){var t,n;if(e){return(n=(t=this.currentExceptionFilters)===null||t===void 0?void 0:t.includes(e))!==null&&n!==void 0?n:false}else{return this.currentExceptionFilters.length>0}}async sendRequest(e,t){await this._ready.promise;const n=await this._sendDebugMessage({type:"request",seq:this._seq++,command:e,arguments:t});return n.content}_handleEvent(e,t){const n=t.header.msg_type;if(n!=="debug_event"){return}const i=t.content;this._eventMessage.emit(i)}async _sendDebugMessage(e){var t;const n=(t=this.connection)===null||t===void 0?void 0:t.kernel;if(!n){return Promise.reject(new Error("A kernel is required to send debug messages."))}const i=new de.PromiseDelegate;const s=n.requestDebug(e);s.onReply=e=>{i.resolve(e)};await s.done;return i.promise}}var ge=n(28416);var fe=n.n(ge);class ve extends i.ReactWidget{constructor(e){super();this._model=e;this.addClass("jp-DebuggerBreakpoints-body")}render(){return fe().createElement(_e,{model:this._model})}}const _e=({model:e})=>{const[t,n]=(0,ge.useState)(Array.from(e.breakpoints.entries()));(0,ge.useEffect)((()=>{const t=(t,i)=>{n(Array.from(e.breakpoints.entries()))};const i=t=>{n(Array.from(e.breakpoints.entries()))};e.changed.connect(t);e.restored.connect(i);return()=>{e.changed.disconnect(t);e.restored.disconnect(i)}}));return fe().createElement(fe().Fragment,null,t.map((t=>fe().createElement(be,{key:t[0],breakpoints:t[1],model:e}))))};const be=({breakpoints:e,model:t})=>fe().createElement(fe().Fragment,null,e.sort(((e,t)=>{var n,i;return((n=e.line)!==null&&n!==void 0?n:0)-((i=t.line)!==null&&i!==void 0?i:0)})).map(((e,n)=>{var i,s;return fe().createElement(ye,{key:((s=(i=e.source)===null||i===void 0?void 0:i.path)!==null&&s!==void 0?s:"")+n,breakpoint:e,model:t})})));const ye=({breakpoint:e,model:t})=>{var n,i,s;const o=e=>e[0]==="/"?e.slice(1)+"/":e;return fe().createElement("div",{className:"jp-DebuggerBreakpoint",onClick:()=>t.clicked.emit(e),title:(n=e.source)===null||n===void 0?void 0:n.path},fe().createElement("span",{className:"jp-DebuggerBreakpoint-marker"},""),fe().createElement("span",{className:"jp-DebuggerBreakpoint-source jp-left-truncated"},o((s=(i=e.source)===null||i===void 0?void 0:i.path)!==null&&s!==void 0?s:"")),fe().createElement("span",{className:"jp-DebuggerBreakpoint-line"},e.line))};const we="jp-debugger-pauseOnExceptions";const Ce="jp-PauseOnExceptions";const xe="jp-PauseOnExceptions-menu";class Se extends i.ToolbarButton{constructor(e){super();this.onclick=()=>{this._menu.open(this.node.getBoundingClientRect().left,this.node.getBoundingClientRect().bottom)};this._menu=new ke({service:e.service,commands:{registry:e.commands.registry,pauseOnExceptions:e.commands.pauseOnExceptions}});this.node.className=we;this._props=e;this._props.className=Ce;this._props.service.eventMessage.connect(((e,t)=>{if(t.event==="initialized"||t.event==="terminated"){this.onChange()}}),this);this._props.enabled=this._props.service.pauseOnExceptionsIsValid();this._props.service.pauseOnExceptionChanged.connect(this.onChange,this)}onChange(){var e;const t=this._props.service.session;const n=t===null||t===void 0?void 0:t.exceptionBreakpointFilters;this._props.className=Ce;if(((e=this._props.service.session)===null||e===void 0?void 0:e.isStarted)&&n){if(t.isPausingOnException()){this._props.className+=" lm-mod-toggled"}this._props.enabled=true}else{this._props.enabled=false}this.update()}render(){return ge.createElement(i.ToolbarButtonComponent,{...this._props,onClick:this.onclick})}}class ke extends i.MenuSvg{constructor(e){super({commands:e.commands.registry});this._service=e.service;this._command=e.commands.pauseOnExceptions;e.service.eventMessage.connect(((e,t)=>{if(t.event==="initialized"){this._build()}}),this);this._build();this.addClass(xe)}_build(){var e,t;this.clearItems();const n=(t=(e=this._service.session)===null||e===void 0?void 0:e.exceptionBreakpointFilters)!==null&&t!==void 0?t:[];n.map(((e,t)=>{this.addItem({command:this._command,args:{filter:e.filter,description:e.description}})}))}}class je extends i.PanelWithToolbar{constructor(e){var t;super(e);this.clicked=new _.Signal(this);const{model:n,service:s,commands:o}=e;const r=((t=e.translator)!==null&&t!==void 0?t:f.nullTranslator).load("jupyterlab");this.title.label=r.__("Breakpoints");const a=new ve(n);this.toolbar.addItem("pauseOnException",new Se({service:s,commands:o,icon:V,tooltip:r.__("Pause on exception filter")}));this.toolbar.addItem("closeAll",new i.ToolbarButton({icon:W,onClick:async()=>{if(n.breakpoints.size===0){return}const e=await(0,l.showDialog)({title:r.__("Remove All Breakpoints"),body:r.__("Are you sure you want to remove all breakpoints?"),buttons:[l.Dialog.okButton({label:r.__("Remove breakpoints")}),l.Dialog.cancelButton()],hasClose:true});if(e.button.accept){return s.clearBreakpoints()}},tooltip:r.__("Remove All Breakpoints")}));this.addWidget(a);this.addClass("jp-DebuggerBreakpoints")}}class Me extends i.ReactWidget{constructor(e){super();this._model=e;this.addClass("jp-DebuggerCallstack-body")}render(){return fe().createElement(Ee,{model:this._model})}}const Ee=({model:e})=>{const[t,n]=(0,ge.useState)(e.frames);const[i,s]=(0,ge.useState)(e.frame);const o=t=>{s(t);e.frame=t};(0,ge.useEffect)((()=>{const t=()=>{s(e.frame);n(e.frames)};e.framesChanged.connect(t);return()=>{e.framesChanged.disconnect(t)}}),[e]);const r=e=>{var t;const n=((t=e.source)===null||t===void 0?void 0:t.path)||"";const i=b.PathExt.basename(b.PathExt.dirname(n));const s=b.PathExt.basename(n);const o=b.PathExt.join(i,s);return`${o}:${e.line}`};return fe().createElement("ul",null,t.map((e=>{var t;return fe().createElement("li",{key:e.id,onClick:()=>o(e),className:(i===null||i===void 0?void 0:i.id)===e.id?"selected jp-DebuggerCallstackFrame":"jp-DebuggerCallstackFrame"},fe().createElement("span",{className:"jp-DebuggerCallstackFrame-name"},e.name),fe().createElement("span",{className:"jp-DebuggerCallstackFrame-location",title:(t=e.source)===null||t===void 0?void 0:t.path},r(e)))})))};class Ie extends i.PanelWithToolbar{constructor(e){var t;super(e);const{commands:n,model:s}=e;const o=((t=e.translator)!==null&&t!==void 0?t:f.nullTranslator).load("jupyterlab");this.title.label=o.__("Callstack");const r=new Me(s);this.toolbar.addItem("continue",new i.CommandToolbarButton({commands:n.registry,id:n.continue,label:""}));this.toolbar.addItem("terminate",new i.CommandToolbarButton({commands:n.registry,id:n.terminate,label:""}));this.toolbar.addItem("step-over",new i.CommandToolbarButton({commands:n.registry,id:n.next,label:""}));this.toolbar.addItem("step-in",new i.CommandToolbarButton({commands:n.registry,id:n.stepIn,label:""}));this.toolbar.addItem("step-out",new i.CommandToolbarButton({commands:n.registry,id:n.stepOut,label:""}));this.toolbar.addItem("evaluate",new i.CommandToolbarButton({commands:n.registry,id:n.evaluate,label:""}));this.addWidget(r);this.addClass("jp-DebuggerCallstack")}}const Te=({model:e})=>fe().createElement(i.UseSignal,{signal:e.currentSourceChanged,initialSender:e},(e=>{var t,n;return fe().createElement("span",{onClick:()=>e===null||e===void 0?void 0:e.open(),className:"jp-DebuggerSources-header-path"},(n=(t=e===null||e===void 0?void 0:e.currentSource)===null||t===void 0?void 0:t.path)!==null&&n!==void 0?n:"")}));class De extends c.Widget{constructor(e){super();this._model=e.model;this._debuggerService=e.service;this._mimeTypeService=e.editorServices.mimeTypeService;const t=new Qe.ReadOnlyEditorFactory({editorServices:e.editorServices});this._editor=t.createNewEditor({content:"",mimeType:"",path:""});this._editor.hide();this._model.currentFrameChanged.connect((async(e,t)=>{if(!t){this._clearEditor();return}void this._showSource(t)}));const n=new c.PanelLayout;n.addWidget(this._editor);this.layout=n;this.addClass("jp-DebuggerSources-body")}dispose(){var e;if(this.isDisposed){return}(e=this._editorHandler)===null||e===void 0?void 0:e.dispose();_.Signal.clearData(this);super.dispose()}_clearEditor(){this._model.currentSource=null;this._editor.hide()}async _showSource(e){var t;const n=(t=e.source)===null||t===void 0?void 0:t.path;const i=await this._debuggerService.getSource({sourceReference:0,path:n});if(!(i===null||i===void 0?void 0:i.content)){this._clearEditor();return}if(this._editorHandler){this._editorHandler.dispose()}const{content:s,mimeType:o}=i;const r=o||this._mimeTypeService.getMimeTypeByFilePath(n!==null&&n!==void 0?n:"");this._editor.model.sharedModel.setSource(s);this._editor.model.mimeType=r;this._editorHandler=new S({debuggerService:this._debuggerService,editorReady:()=>Promise.resolve(this._editor.editor),getEditor:()=>this._editor.editor,path:n,src:this._editor.model.sharedModel});this._model.currentSource={content:s,mimeType:r,path:n!==null&&n!==void 0?n:""};requestAnimationFrame((()=>{S.showCurrentLine(this._editor.editor,e.line)}));this._editor.show()}}class Le extends i.PanelWithToolbar{constructor(e){var t;super();const{model:n,service:s,editorServices:o}=e;const r=((t=e.translator)!==null&&t!==void 0?t:f.nullTranslator).load("jupyterlab");this.title.label=r.__("Source");this.toolbar.addClass("jp-DebuggerSources-header");const a=new De({service:s,model:n,editorServices:o});this.toolbar.addItem("open",new i.ToolbarButton({icon:Z,onClick:()=>n.open(),tooltip:r.__("Open in the Main Area")}));const l=i.ReactWidget.create(fe().createElement(Te,{model:n}));this.toolbar.addItem("sourcePath",l);this.addClass("jp-DebuggerSources-header");this.addWidget(a);this.addClass("jp-DebuggerSources")}}const Pe=e=>{const t=t=>{const n=t.target.value;e.model.filter=n};return fe().createElement(i.InputGroup,{type:"text",onChange:t,placeholder:"Filter the kernel sources",value:e.model.filter})};const Ae=e=>fe().createElement(i.UseSignal,{signal:e.model.filterChanged,initialArgs:e.model.filter},(t=>fe().createElement(Pe,{model:e.model})));const Re="jp-DebuggerKernelSource-filterBox";const Ne="jp-DebuggerKernelSource-filterBox-hidden";class Oe extends i.ReactWidget{constructor(e){var t;super();this._showFilter=false;this._model=e.model;this._debuggerService=e.service;this._trans=((t=e.translator)!==null&&t!==void 0?t:f.nullTranslator).load("jupyterlab");this.addClass("jp-DebuggerKernelSources-body")}render(){let e=Re;if(!this._showFilter){e+=" "+Ne}return fe().createElement(fe().Fragment,null,fe().createElement("div",{className:e,key:"filter"},fe().createElement(Ae,{model:this._model})),fe().createElement(i.UseSignal,{signal:this._model.changed},((e,t)=>{const n={};return(t!==null&&t!==void 0?t:[]).map((e=>{var t;const s=e.name;const o=e.path;const r=s+(n[s]=((t=n[s])!==null&&t!==void 0?t:0)+1).toString();const a=fe().createElement(i.ToolbarButtonComponent,{key:r,icon:G,label:s,tooltip:o,onClick:()=>{this._debuggerService.getSource({sourceReference:0,path:o}).then((e=>{this._model.open(e)})).catch((e=>{void(0,l.showErrorMessage)(this._trans.__("Fail to get source"),this._trans.__("Fail to get '%1' source:\n%2",o,e))}))}});return a}))})))}toggleFilterbox(){this._showFilter=!this._showFilter;this.update()}}class Be extends i.PanelWithToolbar{constructor(e){var t;super();const{model:n,service:s}=e;this._model=n;const o=((t=e.translator)!==null&&t!==void 0?t:f.nullTranslator).load("jupyterlab");this.title.label=o.__("Kernel Sources");this.toolbar.addClass("jp-DebuggerKernelSources-header");this._body=new Oe({service:s,model:n,translator:e.translator});this.toolbar.addItem("open-filter",new i.ToolbarButton({icon:i.searchIcon,onClick:async()=>{this._body.toggleFilterbox()},tooltip:o.__("Toggle search filter")}));this.toolbar.addItem("refresh",new i.ToolbarButton({icon:i.refreshIcon,onClick:()=>{this._model.kernelSources=[];void s.displayModules().catch((e=>{void(0,l.showErrorMessage)(o.__("Fail to get kernel sources"),o.__("Fail to get kernel sources:\n%2",e))}))},tooltip:o.__("Refresh kernel sources")}));this.addClass("jp-DebuggerKernelSources-header");this.addWidget(this._body);this.addClass("jp-DebuggerKenelSources")}set filter(e){this._model.filter=e}}const Fe=({model:e,tree:t,grid:n,trans:s})=>{const[o,r]=(0,ge.useState)("-");const a=e.scopes;const l=e=>{const i=e.target.value;r(i);t.scope=i;n.scope=i};return fe().createElement(i.HTMLSelect,{onChange:l,value:o,"aria-label":s.__("Scope")},a.map((e=>fe().createElement("option",{key:e.name,value:e.name},s.__(e.name)))))};class ze extends i.ReactWidget{constructor(e){super();const{translator:t,model:n,tree:i,grid:s}=e;this._model=n;this._tree=i;this._grid=s;this._trans=(t||f.nullTranslator).load("jupyterlab")}render(){return fe().createElement(i.UseSignal,{signal:this._model.changed,initialSender:this._model},(()=>fe().createElement(Fe,{model:this._model,trans:this._trans,tree:this._tree,grid:this._grid})))}}var He=n(58740);const We="jp-DebuggerVariables-buttons";class Ve extends i.ReactWidget{constructor(e){super();this._scope="";this._scopes=[];this._filter=new Set;this._commands=e.commands;this._service=e.service;this._translator=e.translator;this._hoverChanged=new _.Signal(this);const t=this.model=e.model;t.changed.connect(this._updateScopes,this);this.addClass("jp-DebuggerVariables-body")}render(){var e;const t=(e=this._scopes.find((e=>e.name===this._scope)))!==null&&e!==void 0?e:this._scopes[0];const n=e=>{this.model.selectedVariable=e};const s=fe().createElement(i.caretDownEmptyIcon.react,{stylesheet:"menuItem",tag:"span"});if((t===null||t===void 0?void 0:t.name)!=="Globals"){this.addClass("jp-debuggerVariables-local")}else{this.removeClass("jp-debuggerVariables-local")}return t?fe().createElement(fe().Fragment,null,fe().createElement($e,{key:t.name,commands:this._commands,service:this._service,data:t.variables,filter:this._filter,translator:this._translator,handleSelectVariable:n,onHoverChanged:e=>{this._hoverChanged.emit(e)},collapserIcon:s}),fe().createElement(Ue,{commands:this._commands,service:this._service,hoverChanged:this._hoverChanged,handleSelectVariable:n})):fe().createElement("div",null)}set filter(e){this._filter=e;this.update()}set scope(e){this._scope=e;this.update()}_updateScopes(e){if(He.ArrayExt.shallowEqual(this._scopes,e.scopes)){return}this._scopes=e.scopes;this.update()}}const Ue=e=>{var t;const{commands:n,service:s,translator:o,handleSelectVariable:r}=e;const a=(o!==null&&o!==void 0?o:f.nullTranslator).load("jupyterlab");const[l,d]=(0,ge.useState)(0);const[c,h]=(0,ge.useState)(null);let u=0;const p=(0,ge.useCallback)(((e,t)=>{const n=++u;if(!t.variable){if(n!==u){return}const e=t.target;if(e&&e instanceof Element&&e.closest(`.${We}`)){return}h(null)}else{h(t.variable);requestAnimationFrame((()=>{if(n!==u||!t.target){return}d(t.target.offsetTop)}))}}),[]);(0,ge.useEffect)((()=>{e.hoverChanged.connect(p);return()=>{e.hoverChanged.disconnect(p)}}),[p]);return fe().createElement("div",{className:We,style:{transform:`translateY(${l}px)`,opacity:!c||["special variables","protected variables","function variables","class variables"].includes(c.name)?0:1}},fe().createElement("button",{className:"jp-DebuggerVariables-renderVariable",disabled:!c||!s.model.hasRichVariableRendering||!n.isEnabled(Qe.CommandIDs.renderMimeVariable,{name:c.name,frameID:(t=s.model.callstack.frame)===null||t===void 0?void 0:t.id}),onClick:e=>{var t;if(!c||!r){return}e.stopPropagation();r(c);n.execute(Qe.CommandIDs.renderMimeVariable,{name:c.name,frameID:(t=s.model.callstack.frame)===null||t===void 0?void 0:t.id}).catch((e=>{console.error(`Failed to render variable ${c===null||c===void 0?void 0:c.name}`,e)}))},title:a.__("Render variable: %1",c===null||c===void 0?void 0:c.name)},fe().createElement(i.searchIcon.react,{stylesheet:"menuItem",tag:"span"})))};const $e=e=>{const{commands:t,data:n,service:i,filter:s,translator:o,handleSelectVariable:r,onHoverChanged:a,collapserIcon:l}=e;const[d,c]=(0,ge.useState)(n);(0,ge.useEffect)((()=>{c(n)}),[n]);return fe().createElement("ul",{className:"jp-DebuggerVariables-branch"},d.filter((e=>!(s||new Set).has(e.evaluateName||""))).map((e=>{const n=`${e.name}-${e.evaluateName}-${e.type}-${e.value}-${e.variablesReference}`;return fe().createElement(Ke,{key:n,commands:t,data:e,service:i,filter:s,translator:o,onSelect:r,onHoverChanged:a,collapserIcon:l})})))};function qe(e){const t=Ze(e);if(e.type==="float"&&isNaN(t)){return"NaN"}return t}const Ke=e=>{const{commands:t,data:n,service:i,filter:s,translator:o,onSelect:r,onHoverChanged:a,collapserIcon:l}=e;const[d]=(0,ge.useState)(n);const[c,h]=(0,ge.useState)();const[u,p]=(0,ge.useState)();const m=r!==null&&r!==void 0?r:()=>void 0;const g=d.variablesReference!==0||d.type==="function";const f=async e=>{if(!g){return}e.stopPropagation();const t=await i.inspectVariable(d.variablesReference);h(!c);p(t)};return fe().createElement("li",{onClick:e=>f(e),onMouseDown:e=>{e.stopPropagation();m(d)},onMouseOver:e=>{if(a){a({target:e.currentTarget,variable:d});e.stopPropagation()}},onMouseLeave:e=>{if(a){a({target:e.relatedTarget,variable:null});e.stopPropagation()}}},fe().createElement("span",{className:"jp-DebuggerVariables-collapser"+(c?" jp-mod-expanded":"")},g?fe().cloneElement(l):null),fe().createElement("span",{className:"jp-DebuggerVariables-name"},d.name),fe().createElement("span",{className:"jp-DebuggerVariables-detail"},qe(d)),c&&u&&fe().createElement($e,{key:d.name,commands:t,data:u,service:i,filter:s,translator:o,handleSelectVariable:r,onHoverChanged:a,collapserIcon:l}))};class Je extends i.PanelWithToolbar{constructor(e){super(e);const{model:t,service:n,commands:s,themeManager:o}=e;const r=e.translator||f.nullTranslator;const a=r.load("jupyterlab");this.title.label=a.__("Variables");this.toolbar.addClass("jp-DebuggerVariables-toolbar");this._tree=new Ve({model:t,service:n,commands:s,translator:r});this._table=new ae({model:t,commands:s,themeManager:o,translator:r});this._table.hide();this.toolbar.addItem("scope-switcher",new ze({translator:r,model:t,tree:this._tree,grid:this._table}));const l=()=>{if(this._table.isHidden){this._tree.hide();this._table.show();this.node.setAttribute("data-jp-table","true");h("table")}else{this._tree.show();this._table.hide();this.node.removeAttribute("data-jp-table");h("tree")}this.update()};const d=new i.ToolbarButton({icon:i.treeViewIcon,className:"jp-TreeView",onClick:l,tooltip:a.__("Tree View")});const c=new i.ToolbarButton({icon:i.tableRowsIcon,className:"jp-TableView",onClick:l,tooltip:a.__("Table View")});const h=e=>{const t="jp-ViewModeSelected";if(e==="tree"){c.removeClass(t);d.addClass(t)}else{d.removeClass(t);c.addClass(t)}};h(this._table.isHidden?"tree":"table");this.toolbar.addItem("view-VariableTreeView",d);this.toolbar.addItem("view-VariableTableView",c);this.addWidget(this._tree);this.addWidget(this._table);this.addClass("jp-DebuggerVariables")}set filter(e){this._tree.filter=e;this._table.filter=e}onResize(e){super.onResize(e);this._resizeBody(e)}_resizeBody(e){const t=e.height-this.toolbar.node.offsetHeight;this._tree.node.style.height=`${t}px`}}const Ze=e=>{var t,n;const{type:i,value:s}=e;switch(i){case"int":return parseInt(s,10);case"float":return parseFloat(s);case"bool":return s;case"str":if((n=(t=e.presentationHint)===null||t===void 0?void 0:t.attributes)===null||n===void 0?void 0:n.includes("rawString")){return s.slice(1,s.length-1)}else{return s}default:return i!==null&&i!==void 0?i:s}};class Ge extends i.SidePanel{constructor(e){const t=e.translator||f.nullTranslator;super({translator:t});this.id="jp-debugger-sidebar";this.title.icon=i.bugIcon;this.addClass("jp-DebuggerSidebar");const{callstackCommands:n,breakpointsCommands:s,editorServices:o,service:r,themeManager:a}=e;const l=r.model;this.variables=new Je({model:l.variables,commands:n.registry,service:r,themeManager:a,translator:t});this.callstack=new Ie({commands:n,model:l.callstack,translator:t});this.breakpoints=new je({service:r,commands:s,model:l.breakpoints,translator:t});this.sources=new Le({model:l.sources,service:r,editorServices:o,translator:t});this.kernelSources=new Be({model:l.kernelSources,service:r,translator:t});const d=new Ge.Header;this.header.addWidget(d);l.titleChanged.connect(((e,t)=>{d.title.label=t}));this.content.addClass("jp-DebuggerSidebar-body");this.addWidget(this.variables);this.addWidget(this.callstack);this.addWidget(this.breakpoints);this.addWidget(this.sources);this.addWidget(this.kernelSources)}}(function(e){class t extends c.Widget{constructor(){super({node:Ye.createHeader()});this.title.changed.connect((e=>{this.node.textContent=this.title.label}))}}e.Header=t})(Ge||(Ge={}));var Ye;(function(e){function t(){const e=document.createElement("h2");e.textContent="-";e.classList.add("jp-text-truncated");return e}e.createHeader=t})(Ye||(Ye={}));class Xe{constructor(e){var t,n,i;this._config=e.config;this._shell=e.shell;this._notebookTracker=(t=e.notebookTracker)!==null&&t!==void 0?t:null;this._consoleTracker=(n=e.consoleTracker)!==null&&n!==void 0?n:null;this._editorTracker=(i=e.editorTracker)!==null&&i!==void 0?i:null;this._readOnlyEditorTracker=new l.WidgetTracker({namespace:"@jupyterlab/debugger"})}find(e){return[...this._findInConsoles(e),...this._findInEditors(e),...this._findInNotebooks(e),...this._findInReadOnlyEditors(e)]}open(e){const{editorWrapper:t,label:n,caption:s}=e;const o=new l.MainAreaWidget({content:t});o.id=l.DOMUtils.createDomID();o.title.label=n;o.title.closable=true;o.title.caption=s;o.title.icon=i.textEditorIcon;this._shell.add(o,"main",{type:"Debugger Sources"});void this._readOnlyEditorTracker.add(o)}_findInNotebooks(e){if(!this._notebookTracker){return[]}const{focus:t,kernel:n,path:i,source:s}=e;const o=[];this._notebookTracker.forEach((e=>{const r=e.sessionContext;if(i!==r.path){return}const a=e.content;if(t){a.mode="command"}const l=e.content.widgets;l.forEach(((i,r)=>{const l=i.model.sharedModel.getSource();const d=this._getCodeId(l,n);if(!d){return}if(s!==d){return}if(t){a.activeCellIndex=r;if(a.activeCell){a.scrollToItem(a.activeCellIndex).catch((e=>{}))}this._shell.activateById(e.id)}o.push(Object.freeze({get:()=>i.editor,reveal:()=>a.scrollToItem(r),src:i.model.sharedModel}))}))}));return o}_findInConsoles(e){if(!this._consoleTracker){return[]}const{focus:t,kernel:n,path:i,source:s}=e;const o=[];this._consoleTracker.forEach((e=>{const r=e.sessionContext;if(i!==r.path){return}const a=e.console.cells;for(const i of a){const r=i.model.sharedModel.getSource();const a=this._getCodeId(r,n);if(!a){break}if(s!==a){break}o.push(Object.freeze({get:()=>i.editor,reveal:()=>Promise.resolve(this._shell.activateById(e.id)),src:i.model.sharedModel}));if(t){this._shell.activateById(e.id)}}}));return o}_findInEditors(e){if(!this._editorTracker){return[]}const{focus:t,kernel:n,path:i,source:s}=e;const o=[];this._editorTracker.forEach((e=>{const r=e.content;if(i!==r.context.path){return}const a=r.editor;if(!a){return}const l=a.model.sharedModel.getSource();const d=this._getCodeId(l,n);if(!d){return}if(s!==d){return}o.push(Object.freeze({get:()=>a,reveal:()=>Promise.resolve(this._shell.activateById(e.id)),src:r.model.sharedModel}));if(t){this._shell.activateById(e.id)}}));return o}_findInReadOnlyEditors(e){const{focus:t,kernel:n,source:i}=e;const s=[];this._readOnlyEditorTracker.forEach((e=>{var o;const r=(o=e.content)===null||o===void 0?void 0:o.editor;if(!r){return}const a=r.model.sharedModel.getSource();const l=this._getCodeId(a,n);if(!l){return}if(e.title.caption!==i&&i!==l){return}s.push(Object.freeze({get:()=>r,reveal:()=>Promise.resolve(this._shell.activateById(e.id)),src:r.model.sharedModel}));if(t){this._shell.activateById(e.id)}}));return s}_getCodeId(e,t){try{return this._config.getCodeId(e,t)}catch(n){return""}}}var Qe;(function(e){class t extends a{}e.Config=t;class n extends S{}e.EditorHandler=n;class s extends L{}e.Handler=s;class o extends re{}e.Model=o;class r extends g{}e.ReadOnlyEditorFactory=r;class l extends pe{}e.Service=l;class d extends me{}e.Session=d;class c extends Ge{}e.Sidebar=c;class u extends Xe{}e.Sources=u;class p extends ae{}e.VariablesGrid=p;class m extends ue{}e.VariableRenderer=m;let f;(function(e){e.debugContinue="debugger:continue";e.terminate="debugger:terminate";e.next="debugger:next";e.showPanel="debugger:show-panel";e.stepIn="debugger:stepIn";e.stepOut="debugger:stepOut";e.inspectVariable="debugger:inspect-variable";e.renderMimeVariable="debugger:render-mime-variable";e.evaluate="debugger:evaluate";e.restartDebug="debugger:restart-debug";e.pauseOnExceptions="debugger:pause-on-exceptions";e.copyToClipboard="debugger:copy-to-clipboard";e.copyToGlobals="debugger:copy-to-globals"})(f=e.CommandIDs||(e.CommandIDs={}));let v;(function(e){e.closeAllIcon=W;e.evaluateIcon=i.codeIcon;e.continueIcon=i.runIcon;e.pauseIcon=U;e.stepIntoIcon=$;e.stepOutIcon=K;e.stepOverIcon=q;e.terminateIcon=i.stopIcon;e.variableIcon=J;e.viewBreakpointIcon=Z;e.pauseOnExceptionsIcon=U})(v=e.Icons||(e.Icons={}));let _;(function(e){e.getCode=h.getCode})(_=e.Dialogs||(e.Dialogs={}))})(Qe||(Qe={}))},30311:(e,t,n)=>{"use strict";n.r(t);n.d(t,{Debugger:()=>i.q,IDebugger:()=>o,IDebuggerConfig:()=>r,IDebuggerHandler:()=>d,IDebuggerSidebar:()=>l,IDebuggerSources:()=>a});var i=n(24767);var s=n(5596);const o=new s.Token("@jupyterlab/debugger:IDebugger","A debugger user interface.");const r=new s.Token("@jupyterlab/debugger:IDebuggerConfig","A service to handle the debugger configuration.");const a=new s.Token("@jupyterlab/debugger:IDebuggerSources","A service to display sources in debug mode.");const l=new s.Token("@jupyterlab/debugger:IDebuggerSidebar","A service for the debugger sidebar.");const d=new s.Token("@jupyterlab/debugger:IDebuggerHandler","A service for handling notebook debugger.")},32938:(e,t,n)=>{"use strict";n.r(t);n.d(t,{Grid:()=>u,GridModel:()=>p});var i=n(23364);var s=n.n(i);var o=n(71372);var r=n.n(o);var a=n(85448);var l=n.n(a);var d=n(36168);var c=n.n(d);var h=n(24767);class u extends a.Panel{constructor(e){super();const{commands:t,model:n,themeManager:s}=e;this.model=n;const o=new p(e.translator);const r=new i.DataGrid;const a=new m.MouseHandler;a.doubleClicked.connect(((e,n)=>t.execute(h.q.CommandIDs.inspectVariable,{variableReference:o.getVariableReference(n.row),name:o.getVariableName(n.row)})));a.selected.connect(((e,t)=>{const{row:n}=t;this.model.selectedVariable={name:o.getVariableName(n),value:o.data("body",n,1),type:o.data("body",n,2),variablesReference:o.getVariableReference(n)}}));r.dataModel=o;r.keyHandler=new i.BasicKeyHandler;r.mouseHandler=a;r.selectionModel=new i.BasicSelectionModel({dataModel:o});r.stretchLastColumn=true;r.node.style.height="100%";this._grid=r;if(s){s.themeChanged.connect(this._updateStyles,this)}this.addWidget(r)}set filter(e){this._grid.dataModel.filter=e;this.update()}set scope(e){this._grid.dataModel.scope=e;this.update()}get dataModel(){return this._grid.dataModel}onAfterAttach(e){super.onAfterAttach(e);this._updateStyles()}_updateStyles(){const{style:e,textRenderer:t}=m.computeStyle();this._grid.cellRenderers.update({},t);this._grid.style=e}}class p extends i.DataModel{constructor(e){super();this._filter=new Set;this._scope="";this._data={name:[],type:[],value:[],variablesReference:[]};this._trans=(e||d.nullTranslator).load("jupyterlab")}get filter(){return this._filter}set filter(e){this._filter=e}get scope(){return this._scope}set scope(e){this._scope=e}rowCount(e){return e==="body"?this._data.name.length:1}columnCount(e){return e==="body"?2:1}data(e,t,n){if(e==="row-header"){return this._data.name[t]}if(e==="column-header"){return n===1?this._trans.__("Value"):this._trans.__("Type")}if(e==="corner-header"){return this._trans.__("Name")}return n===1?this._data.value[t]:this._data.type[t]}getVariableReference(e){return this._data.variablesReference[e]}getVariableName(e){return this._data.name[e]}setData(e){var t,n;this._clearData();this.emitChanged({type:"model-reset",region:"body"});const i=(t=e.find((e=>e.name===this._scope)))!==null&&t!==void 0?t:e[0];const s=(n=i===null||i===void 0?void 0:i.variables)!==null&&n!==void 0?n:[];const o=s.filter((e=>e.name&&!this._filter.has(e.name)));o.forEach(((e,t)=>{var n;this._data.name[t]=e.name;this._data.type[t]=(n=e.type)!==null&&n!==void 0?n:"";this._data.value[t]=e.value;this._data.variablesReference[t]=e.variablesReference}));this.emitChanged({type:"rows-inserted",region:"body",index:1,span:o.length})}_clearData(){this._data={name:[],type:[],value:[],variablesReference:[]}}}var m;(function(e){function t(){const e=document.createElement("div");e.className="jp-DebuggerVariables-colorPalette";e.innerHTML=`\n        <div class="jp-mod-void"></div>\n        <div class="jp-mod-background"></div>\n        <div class="jp-mod-header-background"></div>\n        <div class="jp-mod-grid-line"></div>\n        <div class="jp-mod-header-grid-line"></div>\n        <div class="jp-mod-selection"></div>\n        <div class="jp-mod-text"></div>\n      `;return e}function n(){const e=t();document.body.appendChild(e);let n;n=e.querySelector(".jp-mod-void");const s=getComputedStyle(n).color;n=e.querySelector(".jp-mod-background");const o=getComputedStyle(n).color;n=e.querySelector(".jp-mod-header-background");const r=getComputedStyle(n).color;n=e.querySelector(".jp-mod-grid-line");const a=getComputedStyle(n).color;n=e.querySelector(".jp-mod-header-grid-line");const l=getComputedStyle(n).color;n=e.querySelector(".jp-mod-selection");const d=getComputedStyle(n).color;n=e.querySelector(".jp-mod-text");const c=getComputedStyle(n).color;document.body.removeChild(e);return{style:{voidColor:s,backgroundColor:o,headerBackgroundColor:r,gridLineColor:a,headerGridLineColor:l,rowBackgroundColor:e=>e%2===0?s:o,selectionFillColor:d},textRenderer:new i.TextRenderer({font:"12px sans-serif",textColor:c,backgroundColor:"",verticalAlignment:"center",horizontalAlignment:"left"})}}e.computeStyle=n;class s extends i.BasicMouseHandler{constructor(){super(...arguments);this._doubleClicked=new o.Signal(this);this._selected=new o.Signal(this)}get doubleClicked(){return this._doubleClicked}get selected(){return this._selected}dispose(){if(this.isDisposed){return}o.Signal.disconnectSender(this);super.dispose()}onMouseDoubleClick(e,t){const n=e.hitTest(t.clientX,t.clientY);this._doubleClicked.emit(n)}onMouseDown(e,t){let{clientX:n,clientY:i}=t;let s=e.hitTest(n,i);this._selected.emit(s);super.onMouseDown(e,t)}onContextMenu(e,t){let{clientX:n,clientY:i}=t;let s=e.hitTest(n,i);this._selected.emit(s)}}e.MouseHandler=s})(m||(m={}))},87144:(e,t,n)=>{"use strict";n.r(t);n.d(t,{ToolbarItems:()=>H,default:()=>z,downloadPlugin:()=>O,openBrowserTabPlugin:()=>B,pathStatusPlugin:()=>N,savingStatusPlugin:()=>R});var i=n(44906);var s=n.n(i);var o=n(90848);var r=n.n(o);var a=n(22873);var l=n.n(a);var d=n(1071);var c=n.n(d);var h=n(51997);var u=n.n(h);var p=n(88478);var m=n.n(p);var g=n(36168);var f=n.n(g);var v=n(52435);var _=n.n(v);var b=n(58740);var y=n.n(b);var w=n(5596);var C=n.n(w);var x=n(71372);var S=n.n(x);var k=n(85448);var j=n.n(k);var M=n(28416);var E=n.n(M);var I;(function(e){e.clone="docmanager:clone";e.deleteFile="docmanager:delete-file";e.newUntitled="docmanager:new-untitled";e.open="docmanager:open";e.openBrowserTab="docmanager:open-browser-tab";e.reload="docmanager:reload";e.rename="docmanager:rename";e.del="docmanager:delete";e.duplicate="docmanager:duplicate";e.restoreCheckpoint="docmanager:restore-checkpoint";e.save="docmanager:save";e.saveAll="docmanager:save-all";e.saveAs="docmanager:save-as";e.download="docmanager:download";e.toggleAutosave="docmanager:toggle-autosave";e.showInFileBrowser="docmanager:show-in-file-browser"})(I||(I={}));const T="@jupyterlab/docmanager-extension:plugin";const D={id:"@jupyterlab/docmanager-extension:opener",description:"Provides the widget opener.",autoStart:true,provides:d.IDocumentWidgetOpener,activate:e=>{const{shell:t}=e;return new class{constructor(){this._opened=new x.Signal(this)}open(e,n){if(!e.id){e.id=`document-manager-${++K.id}`}e.title.dataset={type:"document-title",...e.title.dataset};if(!e.isAttached){t.add(e,"main",n||{})}t.activateById(e.id);this._opened.emit(e)}get opened(){return this._opened}}}};const L={id:"@jupyterlab/docmanager-extension:contexts",description:"Adds the handling of opened documents dirty state.",autoStart:true,requires:[d.IDocumentManager,d.IDocumentWidgetOpener],optional:[i.ILabStatus],activate:(e,t,n,i)=>{const s=new WeakSet;n.opened.connect(((e,n)=>{const o=t.contextForWidget(n);if(o&&!s.has(o)){if(i){q(i,o)}s.add(o)}}))}};const P={id:"@jupyterlab/docmanager-extension:manager",description:"Provides the document manager.",provides:d.IDocumentManager,requires:[d.IDocumentWidgetOpener],optional:[g.ITranslator,i.ILabStatus,o.ISessionContextDialogs,i.JupyterLab.IInfo],activate:(e,t,n,i,s,r)=>{var a;const{serviceManager:l,docRegistry:c}=e;const h=n!==null&&n!==void 0?n:g.nullTranslator;const u=s!==null&&s!==void 0?s:new o.SessionContextDialogs({translator:h});const p=e.restored.then((()=>void 0));const m=new d.DocumentManager({registry:c,manager:l,opener:t,when:p,setBusy:(a=i&&(()=>i.setBusy()))!==null&&a!==void 0?a:undefined,sessionDialogs:u,translator:h!==null&&h!==void 0?h:g.nullTranslator,isConnectedCallback:()=>{if(r){return r.isConnected}return true}});return m}};const A={id:T,description:"Adds commands and settings to the document manager.",autoStart:true,requires:[d.IDocumentManager,d.IDocumentWidgetOpener,h.ISettingRegistry],optional:[g.ITranslator,o.ICommandPalette,i.ILabShell],activate:(e,t,n,i,s,o,r)=>{s=s!==null&&s!==void 0?s:g.nullTranslator;const a=s.load("jupyterlab");const l=e.docRegistry;U(e,t,n,i,s,r,o);const d=n=>{const i=n.get("autosave").composite;t.autosave=i===true||i===false?i:true;e.commands.notifyCommandChanged(I.toggleAutosave);const s=n.get("confirmClosingDocument").composite;t.confirmClosingDocument=s!==null&&s!==void 0?s:true;const o=n.get("autosaveInterval").composite;t.autosaveInterval=o||120;const r=n.get("lastModifiedCheckMargin").composite;t.lastModifiedCheckMargin=r||500;const a=n.get("renameUntitledFileOnSave").composite;t.renameUntitledFileOnSave=a!==null&&a!==void 0?a:true;const d=n.get("defaultViewers").composite;const c={};Object.keys(d).forEach((e=>{if(!l.getFileType(e)){console.warn(`File Type ${e} not found`);return}if(!l.getWidgetFactory(d[e])){console.warn(`Document viewer ${d[e]} not found`)}c[e]=d[e]}));for(const e of l.fileTypes()){try{l.setDefaultWidgetFactory(e.name,c[e.name])}catch(h){console.warn(`Failed to set default viewer ${c[e.name]} for file type ${e.name}`)}}};Promise.all([i.load(T),e.restored]).then((([e])=>{e.changed.connect(d);d(e);const n=(t,n)=>{if(["autosave","autosaveInterval","confirmClosingDocument","lastModifiedCheckMargin","renameUntitledFileOnSave"].includes(n.name)&&e.get(n.name).composite!==n.newValue){e.set(n.name,n.newValue).catch((e=>{console.error(`Failed to set the setting '${n.name}':\n${e}`)}))}};t.stateChanged.connect(n)})).catch((e=>{console.error(e.message)}));i.transform(T,{fetch:e=>{const t=Array.from(l.fileTypes()).map((e=>e.name)).join("    \n");const n=Array.from(l.widgetFactories()).map((e=>e.name)).join("    \n");const i=a.__(`Overrides for the default viewers for file types.\nSpecify a mapping from file type name to document viewer name, for example:\n\ndefaultViewers: {\n  markdown: "Markdown Preview"\n}\n\nIf you specify non-existent file types or viewers, or if a viewer cannot\nopen a given file type, the override will not function.\n\nAvailable viewers:\n%1\n\nAvailable file types:\n%2`,n,t);const s=w.JSONExt.deepCopy(e.schema);s.properties.defaultViewers.description=i;return{...e,schema:s}}});l.changed.connect((()=>i.load(T,true)))}};const R={id:"@jupyterlab/docmanager-extension:saving-status",description:"Adds a saving status indicator.",autoStart:true,requires:[d.IDocumentManager,i.ILabShell],optional:[g.ITranslator,p.IStatusBar],activate:(e,t,n,i,s)=>{if(!s){return}const o=new d.SavingStatus({docManager:t,translator:i!==null&&i!==void 0?i:g.nullTranslator});o.model.widget=n.currentWidget;n.currentChanged.connect((()=>{o.model.widget=n.currentWidget}));s.registerStatusItem(R.id,{item:o,align:"middle",isActive:()=>o.model!==null&&o.model.status!==null,activeStateChanged:o.model.stateChanged})}};const N={id:"@jupyterlab/docmanager-extension:path-status",description:"Adds a file path indicator in the status bar.",autoStart:true,requires:[d.IDocumentManager,i.ILabShell],optional:[p.IStatusBar],activate:(e,t,n,i)=>{if(!i){return}const s=new d.PathStatus({docManager:t});s.model.widget=n.currentWidget;n.currentChanged.connect((()=>{s.model.widget=n.currentWidget}));i.registerStatusItem(N.id,{item:s,align:"right",rank:0})}};const O={id:"@jupyterlab/docmanager-extension:download",description:"Adds command to download files.",autoStart:true,requires:[d.IDocumentManager],optional:[g.ITranslator,o.ICommandPalette],activate:(e,t,n,i)=>{const s=(n!==null&&n!==void 0?n:g.nullTranslator).load("jupyterlab");const{commands:r,shell:a}=e;const l=()=>{const{currentWidget:e}=a;return!!(e&&t.contextForWidget(e))};r.addCommand(I.download,{label:s.__("Download"),caption:s.__("Download the file to your computer"),isEnabled:l,execute:()=>{if(l()){const e=t.contextForWidget(a.currentWidget);if(!e){return(0,o.showDialog)({title:s.__("Cannot Download"),body:s.__("No context found for current widget!"),buttons:[o.Dialog.okButton()]})}return e.download()}}});const d=s.__("File Operations");if(i){i.addItem({command:I.download,category:d})}}};const B={id:"@jupyterlab/docmanager-extension:open-browser-tab",description:"Adds command to open a browser tab.",autoStart:true,requires:[d.IDocumentManager],optional:[g.ITranslator],activate:(e,t,n)=>{const i=(n!==null&&n!==void 0?n:g.nullTranslator).load("jupyterlab");const{commands:s}=e;s.addCommand(I.openBrowserTab,{execute:e=>{const n=typeof e["path"]==="undefined"?"":e["path"];if(!n){return}return t.services.contents.getDownloadUrl(n).then((e=>{const t=window.open();if(t){t.opener=null;t.location.href=e}else{throw new Error("Failed to open new browser tab.")}}))},iconClass:e=>e["icon"]||"",label:()=>i.__("Open in New Browser Tab")})}};const F=[P,A,L,N,R,O,B,D];const z=F;var H;(function(e){function t(e,t){return(0,o.addCommandToolbarButtonClass)(o.ReactWidget.create(M.createElement(o.UseSignal,{signal:t},(()=>M.createElement(o.CommandToolbarButtonComponent,{commands:e,id:I.save,label:"",args:{toolbar:true}})))))}e.createSaveButton=t})(H||(H={}));class W extends k.Widget{constructor(e,t,n="notebook"){super({node:K.createRevertConfirmNode(e,n,t)})}}function V(e,t){if(!e){return"File"}const n=t.contextForWidget(e);if(!n){return""}const i=t.registry.getFileTypesForPath(n.path);return i.length&&i[0].displayName?i[0].displayName:"File"}function U(e,t,n,i,s,r,l){const d=s.load("jupyterlab");const{commands:c,shell:h}=e;const u=d.__("File Operations");const p=()=>{const{currentWidget:e}=h;return!!(e&&t.contextForWidget(e))};const m=()=>{var e;const{currentWidget:n}=h;if(!n){return false}const i=t.contextForWidget(n);return!!((e=i===null||i===void 0?void 0:i.contentsModel)===null||e===void 0?void 0:e.writable)};if(r){$(e,t,r,n,s)}c.addCommand(I.deleteFile,{label:()=>`Delete ${V(h.currentWidget,t)}`,execute:e=>{const n=typeof e["path"]==="undefined"?"":e["path"];if(!n){const e=I.deleteFile;throw new Error(`A non-empty path is required for ${e}.`)}return t.deleteFile(n)}});c.addCommand(I.newUntitled,{execute:e=>{const n=e["error"]||d.__("Error");const i=typeof e["path"]==="undefined"?"":e["path"];const s={type:e["type"],path:i};if(e["type"]==="file"){s.ext=e["ext"]||".txt"}return t.services.contents.newUntitled(s).catch((e=>(0,o.showErrorMessage)(n,e)))},label:e=>e["label"]||`New ${e["type"]}`});c.addCommand(I.open,{execute:e=>{const n=typeof e["path"]==="undefined"?"":e["path"];const i=e["factory"]||void 0;const s=e===null||e===void 0?void 0:e.kernel;const o=e["options"]||void 0;return t.services.contents.get(n,{content:false}).then((()=>t.openOrReveal(n,i,s,o)))},iconClass:e=>e["icon"]||"",label:e=>{var t;return(t=e["label"]||e["factory"])!==null&&t!==void 0?t:d.__("Open the provided `path`.")},mnemonic:e=>e["mnemonic"]||-1});c.addCommand(I.reload,{label:()=>d.__("Reload %1 from Disk",V(h.currentWidget,t)),caption:d.__("Reload contents from disk"),isEnabled:p,execute:()=>{if(!p()){return}const e=t.contextForWidget(h.currentWidget);const n=V(h.currentWidget,t);if(!e){return(0,o.showDialog)({title:d.__("Cannot Reload"),body:d.__("No context found for current widget!"),buttons:[o.Dialog.okButton()]})}if(e.model.dirty){return(0,o.showDialog)({title:d.__("Reload %1 from Disk",n),body:d.__("Are you sure you want to reload the %1 from the disk?",n),buttons:[o.Dialog.cancelButton(),o.Dialog.warnButton({label:d.__("Reload")})]}).then((t=>{if(t.button.accept&&!e.isDisposed){return e.revert()}}))}else{if(!e.isDisposed){return e.revert()}}}});c.addCommand(I.restoreCheckpoint,{label:()=>d.__("Revert %1 to Checkpoint",V(h.currentWidget,t)),caption:d.__("Revert contents to previous checkpoint"),isEnabled:p,execute:()=>{if(!p()){return}const e=t.contextForWidget(h.currentWidget);if(!e){return(0,o.showDialog)({title:d.__("Cannot Revert"),body:d.__("No context found for current widget!"),buttons:[o.Dialog.okButton()]})}return e.listCheckpoints().then((async n=>{const i=V(h.currentWidget,t);if(n.length<1){await(0,o.showErrorMessage)(d.__("No checkpoints"),d.__("No checkpoints are available for this %1.",i));return}const s=n.length===1?n[0]:await K.getTargetCheckpoint(n.reverse(),d);if(!s){return}return(0,o.showDialog)({title:d.__("Revert %1 to checkpoint",i),body:new W(s,d,i),buttons:[o.Dialog.cancelButton(),o.Dialog.warnButton({label:d.__("Revert"),ariaLabel:d.__("Revert to Checkpoint")})]}).then((t=>{if(e.isDisposed){return}if(t.button.accept){if(e.model.readOnly){return e.revert()}return e.restoreCheckpoint(s.id).then((()=>e.revert()))}}))}))}});const g=()=>{if(h.currentWidget){const e=t.contextForWidget(h.currentWidget);if(e===null||e===void 0?void 0:e.model.collaborative){return d.__("In collaborative mode, the document is saved automatically after every change")}}return d.__("Save and create checkpoint")};const f=new WeakSet;c.addCommand(I.save,{label:()=>d.__("Save %1",V(h.currentWidget,t)),caption:g,icon:e=>e.toolbar?v.saveIcon:undefined,isEnabled:m,execute:async()=>{var e,n,s;if(p()){const l=h.currentWidget;const c=t.contextForWidget(l);if(!c){return(0,o.showDialog)({title:d.__("Cannot Save"),body:d.__("No context found for current widget!"),buttons:[o.Dialog.okButton()]})}else{if(f.has(c)){return}if(c.model.readOnly){return(0,o.showDialog)({title:d.__("Cannot Save"),body:d.__("Document is read-only"),buttons:[o.Dialog.okButton()]})}f.add(c);const h=a.PathExt.basename((n=(e=c.contentsModel)===null||e===void 0?void 0:e.path)!==null&&n!==void 0?n:"");let u=h;if(t.renameUntitledFileOnSave&&l.isUntitled===true){const e=await o.InputDialog.getText({title:d.__("Rename file"),okLabel:d.__("Rename"),placeholder:d.__("File name"),text:h,selectionRange:h.length-a.PathExt.extname(h).length,checkbox:{label:d.__("Do not ask me again."),caption:d.__("If checked, you will not be asked to rename future untitled files when saving them.")}});if(e.button.accept){u=(s=e.value)!==null&&s!==void 0?s:h;l.isUntitled=false;if(typeof e.isChecked==="boolean"){const t=(await i.get(T,"renameUntitledFileOnSave")).composite;if(e.isChecked===t){i.set(T,"renameUntitledFileOnSave",!e.isChecked).catch((e=>{console.error(`Fail to set 'renameUntitledFileOnSave:\n${e}`)}))}}}}try{await c.save();if(!(l===null||l===void 0?void 0:l.isDisposed)){return c.createCheckpoint()}}catch(r){if(r.name==="ModalCancelError"){return}throw r}finally{f.delete(c);if(u!==h){await c.rename(u)}}}}}});c.addCommand(I.saveAll,{label:()=>d.__("Save All"),caption:d.__("Save all open documents"),isEnabled:()=>(0,b.some)(h.widgets("main"),(e=>{var n,i,s;return(s=(i=(n=t.contextForWidget(e))===null||n===void 0?void 0:n.contentsModel)===null||i===void 0?void 0:i.writable)!==null&&s!==void 0?s:false})),execute:()=>{const e=[];const n=new Set;for(const i of h.widgets("main")){const s=t.contextForWidget(i);if(s&&!s.model.readOnly&&!n.has(s.path)){n.add(s.path);e.push(s.save())}}return Promise.all(e)}});c.addCommand(I.saveAs,{label:()=>d.__("Save %1 As",V(h.currentWidget,t)),caption:d.__("Save with new path"),isEnabled:p,execute:()=>{if(p()){const e=t.contextForWidget(h.currentWidget);if(!e){return(0,o.showDialog)({title:d.__("Cannot Save"),body:d.__("No context found for current widget!"),buttons:[o.Dialog.okButton()]})}const n=(n,i)=>{if(i.type==="save"&&i.newValue&&i.newValue.path!==e.path){void t.closeFile(e.path);void c.execute(I.open,{path:i.newValue.path})}};t.services.contents.fileChanged.connect(n);e.saveAs().finally((()=>t.services.contents.fileChanged.disconnect(n)))}}});c.addCommand(I.toggleAutosave,{label:d.__("Autosave Documents"),isToggled:()=>t.autosave,execute:()=>{const e=!t.autosave;const n="autosave";return i.set(T,n,e).catch((e=>{console.error(`Failed to set ${T}:${n} - ${e.message}`)}))}});if(l){[I.reload,I.restoreCheckpoint,I.save,I.saveAs,I.toggleAutosave,I.duplicate].forEach((e=>{l.addItem({command:e,category:u})}))}}function $(e,t,n,i,s){const r=s.load("jupyterlab");const{commands:a}=e;const l=()=>{var i;const s=/[Pp]ath:\s?(.*)\n?/;const o=e=>{var t;return!!((t=e["title"])===null||t===void 0?void 0:t.match(s))};const r=e.contextMenuHitTest(o);const a=r===null||r===void 0?void 0:r["title"].match(s);return(i=a&&t.findWidget(a[1],null))!==null&&i!==void 0?i:n.currentWidget};const c=()=>{const{currentWidget:e}=n;return!!(e&&t.contextForWidget(e))};a.addCommand(I.clone,{label:()=>r.__("New View for %1",V(l(),t)),isEnabled:c,execute:e=>{const n=l();const s=e["options"]||{mode:"split-right"};if(!n){return}const o=t.cloneWidget(n);if(o){i.open(o,s)}}});a.addCommand(I.rename,{label:()=>{let e=V(l(),t);if(e){e=" "+e}return r.__("Rename%1",e)},isEnabled:c,execute:()=>{if(c()){const e=t.contextForWidget(l());return(0,d.renameDialog)(t,e)}}});a.addCommand(I.duplicate,{label:()=>r.__("Duplicate %1",V(l(),t)),isEnabled:c,execute:()=>{if(c()){const e=t.contextForWidget(l());if(!e){return}return t.duplicate(e.path)}}});a.addCommand(I.del,{label:()=>r.__("Delete %1",V(l(),t)),isEnabled:c,execute:async()=>{if(c()){const n=t.contextForWidget(l());if(!n){return}const i=await(0,o.showDialog)({title:r.__("Delete"),body:r.__("Are you sure you want to delete %1",n.path),buttons:[o.Dialog.cancelButton(),o.Dialog.warnButton({label:r.__("Delete")})]});if(i.button.accept){await e.commands.execute("docmanager:delete-file",{path:n.path})}}}});a.addCommand(I.showInFileBrowser,{label:()=>r.__("Show in File Browser"),isEnabled:c,execute:async()=>{const e=l();const n=e&&t.contextForWidget(e);if(!n){return}await a.execute("filebrowser:activate",{path:n.path});await a.execute("filebrowser:go-to-path",{path:n.path})}})}function q(e,t){let n=null;const i=(t,i)=>{if(i.name==="dirty"){if(i.newValue===true){if(!n){n=e.setDirty()}}else if(n){n.dispose();n=null}}};void t.ready.then((()=>{t.model.stateChanged.connect(i);if(t.model.dirty){n=e.setDirty()}}));t.disposed.connect((()=>{if(n){n.dispose()}}))}var K;(function(e){e.id=0;function t(e,t,n){const i=document.createElement("div");const s=document.createElement("p");const o=document.createTextNode(n.__("Are you sure you want to revert the %1 to checkpoint? ",t));const r=document.createElement("strong");r.textContent=n.__("This cannot be undone.");s.appendChild(o);s.appendChild(r);const l=document.createElement("p");const d=document.createTextNode(n.__("The checkpoint was last updated at: "));const c=document.createElement("p");const h=new Date(e.last_modified);c.style.textAlign="center";c.textContent=a.Time.format(h)+" ("+a.Time.formatHuman(h)+")";l.appendChild(d);l.appendChild(c);i.appendChild(s);i.appendChild(l);return i}e.createRevertConfirmNode=t;async function n(e,t){const n=".";const i=e.map(((e,t)=>{const i=a.Time.format(e.last_modified);const s=a.Time.formatHuman(e.last_modified);return`${t}${n} ${i} (${s})`}));const s=(await o.InputDialog.getItem({items:i,title:t.__("Choose a checkpoint")})).value;if(!s){return}const r=s.split(n,1)[0];return e[parseInt(r,10)]}e.getTargetCheckpoint=n})(K||(K={}))},38710:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(98328);var r=n(79536);var a=n(94683);var l=n(90516);var d=n(82401)},69993:(e,t,n)=>{"use strict";n.r(t);n.d(t,{DocumentManager:()=>j,DocumentWidgetManager:()=>S,IDocumentManager:()=>O,IDocumentWidgetOpener:()=>B,PathStatus:()=>P,SaveHandler:()=>y,SavingStatus:()=>N,isValidFileName:()=>u,renameDialog:()=>d,renameFile:()=>c,shouldOverwrite:()=>h});var i=n(90848);var s=n(22873);var o=n(36168);var r=n(85448);const a="jp-FileDialog";const l="jp-new-name-title";function d(e,t,n){n=n||o.nullTranslator;const s=n.load("jupyterlab");const r=t.localPath.split("/");const a=r.pop()||t.localPath;return(0,i.showDialog)({title:s.__("Rename File"),body:new p(a),focusNodeSelector:"input",buttons:[i.Dialog.cancelButton(),i.Dialog.okButton({label:s.__("Rename"),ariaLabel:s.__("Rename File")})]}).then((e=>{if(!e.value){return null}if(!u(e.value)){void(0,i.showErrorMessage)(s.__("Rename Error"),Error(s.__('"%1" is not a valid name for a file. Names must have nonzero length, and cannot include "/", "\\", or ":"',e.value)));return null}return t.rename(e.value)}))}function c(e,t,n){return e.rename(t,n).catch((i=>{if(i.response.status!==409){throw i}return h(n).then((i=>{if(i){return e.overwrite(t,n)}return Promise.reject("File not renamed")}))}))}function h(e,t){t=t||o.nullTranslator;const n=t.load("jupyterlab");const s={title:n.__("Overwrite file?"),body:n.__('"%1" already exists, overwrite?',e),buttons:[i.Dialog.cancelButton(),i.Dialog.warnButton({label:n.__("Overwrite"),ariaLabel:n.__("Overwrite Existing File")})]};return(0,i.showDialog)(s).then((e=>Promise.resolve(e.button.accept)))}function u(e){const t=/[\/\\:]/;return e.length>0&&!t.test(e)}class p extends r.Widget{constructor(e){super({node:m.createRenameNode(e)});this.addClass(a);const t=s.PathExt.extname(e);const n=this.inputNode.value=s.PathExt.basename(e);this.inputNode.setSelectionRange(0,n.length-t.length)}get inputNode(){return this.node.getElementsByTagName("input")[0]}getValue(){return this.inputNode.value}}var m;(function(e){function t(e,t){t=t||o.nullTranslator;const n=t.load("jupyterlab");const i=document.createElement("div");const s=document.createElement("label");s.textContent=n.__("File Path");const r=document.createElement("span");r.textContent=e;const a=document.createElement("label");a.textContent=n.__("New Name");a.className=l;const d=document.createElement("input");i.appendChild(s);i.appendChild(r);i.appendChild(a);i.appendChild(d);return i}e.createRenameNode=t})(m||(m={}));var g=n(35788);var f=n(58740);var v=n(5596);var _=n(75379);var b=n(71372);class y{constructor(e){this._autosaveTimer=-1;this._minInterval=-1;this._interval=-1;this._isActive=false;this._inDialog=false;this._isDisposed=false;this._multiplier=10;this._context=e.context;this._isConnectedCallback=e.isConnectedCallback||(()=>true);const t=e.saveInterval||120;this._minInterval=t*1e3;this._interval=this._minInterval;this._context.fileChanged.connect(this._setTimer,this);this._context.disposed.connect(this.dispose,this)}get saveInterval(){return this._interval/1e3}set saveInterval(e){this._minInterval=this._interval=e*1e3;if(this._isActive){this._setTimer()}}get isActive(){return this._isActive}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;clearTimeout(this._autosaveTimer);b.Signal.clearData(this)}start(){this._isActive=true;this._setTimer()}stop(){this._isActive=false;clearTimeout(this._autosaveTimer)}_setTimer(){clearTimeout(this._autosaveTimer);if(!this._isActive){return}this._autosaveTimer=window.setTimeout((()=>{if(this._isConnectedCallback()){this._save()}}),this._interval)}_save(){const e=this._context;this._setTimer();if(!e){return}const t=e.contentsModel&&e.contentsModel.writable;if(!t||!e.model.dirty||this._inDialog){return}const n=(new Date).getTime();e.save().then((()=>{if(this.isDisposed){return}const e=(new Date).getTime()-n;this._interval=Math.max(this._multiplier*e,this._minInterval);this._setTimer()})).catch((e=>{const{name:t}=e;if(t==="ModalCancelError"||t==="ModalDuplicateError"){return}console.error("Error in Auto-Save",e.message)}))}}var w=n(26512);var C=n(28821);const x="jp-Document";class S{constructor(e){this._activateRequested=new b.Signal(this);this._confirmClosingTab=false;this._isDisposed=false;this._stateChanged=new b.Signal(this);this._registry=e.registry;this.translator=e.translator||o.nullTranslator}get activateRequested(){return this._activateRequested}get confirmClosingDocument(){return this._confirmClosingTab}set confirmClosingDocument(e){if(this._confirmClosingTab!==e){const t=this._confirmClosingTab;this._confirmClosingTab=e;this._stateChanged.emit({name:"confirmClosingDocument",oldValue:t,newValue:e})}}get stateChanged(){return this._stateChanged}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;b.Signal.disconnectReceiver(this)}createWidget(e,t){const n=e.createNew(t);this._initializeWidget(n,e,t);return n}_initializeWidget(e,t,n){k.factoryProperty.set(e,t);const i=new w.DisposableSet;for(const s of this._registry.widgetExtensions(t.name)){const t=s.createNew(e,n);if(t){i.add(t)}}k.disposablesProperty.set(e,i);e.disposed.connect(this._onWidgetDisposed,this);this.adoptWidget(n,e);n.fileChanged.connect(this._onFileChanged,this);n.pathChanged.connect(this._onPathChanged,this);void n.ready.then((()=>{void this.setCaption(e)}))}adoptWidget(e,t){const n=k.widgetsProperty.get(e);n.push(t);C.MessageLoop.installMessageHook(t,this);t.addClass(x);t.title.closable=true;t.disposed.connect(this._widgetDisposed,this);k.contextProperty.set(t,e)}findWidget(e,t){const n=k.widgetsProperty.get(e);if(!n){return undefined}return(0,f.find)(n,(e=>{const n=k.factoryProperty.get(e);if(!n){return false}return n.name===t}))}contextForWidget(e){return k.contextProperty.get(e)}cloneWidget(e){const t=k.contextProperty.get(e);if(!t){return undefined}const n=k.factoryProperty.get(e);if(!n){return undefined}const i=n.createNew(t,e);this._initializeWidget(i,n,t);return i}closeWidgets(e){const t=k.widgetsProperty.get(e);return Promise.all(t.map((e=>this.onClose(e)))).then((()=>undefined))}deleteWidgets(e){const t=k.widgetsProperty.get(e);return Promise.all(t.map((e=>this.onDelete(e)))).then((()=>undefined))}messageHook(e,t){switch(t.type){case"close-request":void this.onClose(e);return false;case"activate-request":{const t=this.contextForWidget(e);if(t){this._activateRequested.emit(t.path)}break}default:break}return true}async setCaption(e){const t=this.translator.load("jupyterlab");const n=k.contextProperty.get(e);if(!n){return}const i=n.contentsModel;if(!i){e.title.caption="";return}return n.listCheckpoints().then((o=>{if(e.isDisposed){return}const r=o[o.length-1];const a=r?s.Time.format(r.last_modified):"None";let l=t.__("Name: %1\nPath: %2\n",i.name,i.path);if(n.model.readOnly){l+=t.__("Read-only")}else{l+=t.__("Last Saved: %1\n",s.Time.format(i.last_modified))+t.__("Last Checkpoint: %1",a)}e.title.caption=l}))}async onClose(e){var t;const[n,i]=await this._maybeClose(e,this.translator);if(e.isDisposed){return true}if(n){if(!i){const n=k.contextProperty.get(e);if(!n){return true}if((t=n.contentsModel)===null||t===void 0?void 0:t.writable){await n.save()}else{await n.saveAs()}}if(e.isDisposed){return true}e.dispose()}return n}onDelete(e){e.dispose();return Promise.resolve(void 0)}async _maybeClose(e,t){var n,s;t=t||o.nullTranslator;const r=t.load("jupyterlab");const a=k.contextProperty.get(e);if(!a){return Promise.resolve([true,true])}let l=k.widgetsProperty.get(a);if(!l){return Promise.resolve([true,true])}l=l.filter((e=>{const t=k.factoryProperty.get(e);if(!t){return false}return t.readOnly===false}));const d=e.title.label;const c=k.factoryProperty.get(e);const h=a.model.dirty&&l.length<=1&&!((n=c===null||c===void 0?void 0:c.readOnly)!==null&&n!==void 0?n:true);if(this.confirmClosingDocument){const e=[i.Dialog.cancelButton(),i.Dialog.okButton({label:h?r.__("Close and save"):r.__("Close"),ariaLabel:h?r.__("Close and save Document"):r.__("Close Document")})];if(h){e.splice(1,0,i.Dialog.warnButton({label:r.__("Close without saving"),ariaLabel:r.__("Close Document without saving")}))}const t=await(0,i.showDialog)({title:r.__("Confirmation"),body:r.__('Please confirm you want to close "%1".',d),checkbox:h?null:{label:r.__("Do not ask me again."),caption:r.__("If checked, no confirmation to close a document will be asked in the future.")},buttons:e});if(t.isChecked){this.confirmClosingDocument=false}return Promise.resolve([t.button.accept,h?t.button.displayType==="warn":true])}else{if(!h){return Promise.resolve([true,true])}const e=((s=a.contentsModel)===null||s===void 0?void 0:s.writable)?r.__("Save"):r.__("Save as");const t=await(0,i.showDialog)({title:r.__("Save your work"),body:r.__('Save changes in "%1" before closing?',d),buttons:[i.Dialog.cancelButton(),i.Dialog.warnButton({label:r.__("Discard"),ariaLabel:r.__("Discard changes to file")}),i.Dialog.okButton({label:e})]});return[t.button.accept,t.button.displayType==="warn"]}}_widgetDisposed(e){const t=k.contextProperty.get(e);if(!t){return}const n=k.widgetsProperty.get(t);if(!n){return}f.ArrayExt.removeFirstOf(n,e);if(!n.length){t.dispose()}}_onWidgetDisposed(e){const t=k.disposablesProperty.get(e);t.dispose()}_onFileChanged(e){const t=k.widgetsProperty.get(e);for(const n of t){void this.setCaption(n)}}_onPathChanged(e){const t=k.widgetsProperty.get(e);for(const n of t){void this.setCaption(n)}}}var k;(function(e){e.contextProperty=new _.AttachedProperty({name:"context",create:()=>undefined});e.factoryProperty=new _.AttachedProperty({name:"factory",create:()=>undefined});e.widgetsProperty=new _.AttachedProperty({name:"widgets",create:()=>[]});e.disposablesProperty=new _.AttachedProperty({name:"disposables",create:()=>new w.DisposableSet})})(k||(k={}));class j{constructor(e){var t;this._activateRequested=new b.Signal(this);this._contexts=[];this._isDisposed=false;this._autosave=true;this._autosaveInterval=120;this._lastModifiedCheckMargin=500;this._renameUntitledFileOnSave=true;this._stateChanged=new b.Signal(this);this.translator=e.translator||o.nullTranslator;this.registry=e.registry;this.services=e.manager;this._dialogs=(t=e.sessionDialogs)!==null&&t!==void 0?t:new i.SessionContextDialogs({translator:e.translator});this._isConnectedCallback=e.isConnectedCallback||(()=>true);this._opener=e.opener;this._when=e.when||e.manager.ready;const n=new S({registry:this.registry,translator:this.translator});n.activateRequested.connect(this._onActivateRequested,this);n.stateChanged.connect(this._onWidgetStateChanged,this);this._widgetManager=n;this._setBusy=e.setBusy}get activateRequested(){return this._activateRequested}get autosave(){return this._autosave}set autosave(e){if(this._autosave!==e){const t=this._autosave;this._autosave=e;this._contexts.forEach((t=>{const n=M.saveHandlerProperty.get(t);if(!n){return}if(e===true&&!n.isActive){n.start()}else if(e===false&&n.isActive){n.stop()}}));this._stateChanged.emit({name:"autosave",oldValue:t,newValue:e})}}get autosaveInterval(){return this._autosaveInterval}set autosaveInterval(e){if(this._autosaveInterval!==e){const t=this._autosaveInterval;this._autosaveInterval=e;this._contexts.forEach((t=>{const n=M.saveHandlerProperty.get(t);if(!n){return}n.saveInterval=e||120}));this._stateChanged.emit({name:"autosaveInterval",oldValue:t,newValue:e})}}get confirmClosingDocument(){return this._widgetManager.confirmClosingDocument}set confirmClosingDocument(e){if(this._widgetManager.confirmClosingDocument!==e){const t=this._widgetManager.confirmClosingDocument;this._widgetManager.confirmClosingDocument=e;this._stateChanged.emit({name:"confirmClosingDocument",oldValue:t,newValue:e})}}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(e){if(this._lastModifiedCheckMargin!==e){const t=this._lastModifiedCheckMargin;this._lastModifiedCheckMargin=e;this._contexts.forEach((t=>{t.lastModifiedCheckMargin=e}));this._stateChanged.emit({name:"lastModifiedCheckMargin",oldValue:t,newValue:e})}}get renameUntitledFileOnSave(){return this._renameUntitledFileOnSave}set renameUntitledFileOnSave(e){if(this._renameUntitledFileOnSave!==e){const t=this._renameUntitledFileOnSave;this._renameUntitledFileOnSave=e;this._stateChanged.emit({name:"renameUntitledFileOnSave",oldValue:t,newValue:e})}}get stateChanged(){return this._stateChanged}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;b.Signal.clearData(this);this._contexts.forEach((e=>this._widgetManager.closeWidgets(e)));this._widgetManager.dispose();this._contexts.length=0}cloneWidget(e){return this._widgetManager.cloneWidget(e)}closeAll(){return Promise.all(this._contexts.map((e=>this._widgetManager.closeWidgets(e)))).then((()=>undefined))}closeFile(e){const t=this._contextsForPath(e).map((e=>this._widgetManager.closeWidgets(e)));return Promise.all(t).then((e=>undefined))}contextForWidget(e){return this._widgetManager.contextForWidget(e)}copy(e,t){return this.services.contents.copy(e,t)}createNew(e,t="default",n){return this._createOrOpenDocument("create",e,t,n)}deleteFile(e){return this.services.sessions.stopIfNeeded(e).then((()=>this.services.contents.delete(e))).then((()=>{this._contextsForPath(e).forEach((e=>this._widgetManager.deleteWidgets(e)));return Promise.resolve(void 0)}))}duplicate(e){const t=s.PathExt.dirname(e);return this.services.contents.copy(e,t)}findWidget(e,t="default"){const n=s.PathExt.normalize(e);let i=[t];if(t==="default"){const e=this.registry.defaultWidgetFactory(n);if(!e){return undefined}i=[e.name]}else if(t===null){i=this.registry.preferredWidgetFactories(n).map((e=>e.name))}for(const s of this._contextsForPath(n)){for(const e of i){if(e!==null){const t=this._widgetManager.findWidget(s,e);if(t){return t}}}}return undefined}newUntitled(e){if(e.type==="file"){e.ext=e.ext||".txt"}return this.services.contents.newUntitled(e)}open(e,t="default",n,i){return this._createOrOpenDocument("open",e,t,n,i)}openOrReveal(e,t="default",n,i){const s=this.findWidget(e,t);if(s){this._opener.open(s,{type:t,...i});return s}return this.open(e,t,n,i!==null&&i!==void 0?i:{})}overwrite(e,t){const n=`${t}.${v.UUID.uuid4()}`;const i=()=>this.rename(n,t);return this.rename(e,n).then((()=>this.deleteFile(t))).then(i,i)}rename(e,t){return this.services.contents.rename(e,t)}_findContext(e,t){const n=this.services.contents.normalize(e);return(0,f.find)(this._contexts,(e=>e.path===n&&e.factoryName===t))}_contextsForPath(e){const t=this.services.contents.normalize(e);return this._contexts.filter((e=>e.path===t))}_createContext(e,t,n){const i=(e,t)=>{this._widgetManager.adoptWidget(s,e);this._opener.open(e,t)};const s=new g.Context({opener:i,manager:this.services,factory:t,path:e,kernelPreference:n,setBusy:this._setBusy,sessionDialogs:this._dialogs,lastModifiedCheckMargin:this._lastModifiedCheckMargin,translator:this.translator});const o=new y({context:s,isConnectedCallback:this._isConnectedCallback,saveInterval:this.autosaveInterval});M.saveHandlerProperty.set(s,o);void s.ready.then((()=>{if(this.autosave){o.start()}}));s.disposed.connect(this._onContextDisposed,this);this._contexts.push(s);return s}_onContextDisposed(e){f.ArrayExt.removeFirstOf(this._contexts,e)}_widgetFactoryFor(e,t){const{registry:n}=this;if(t==="default"){const i=n.defaultWidgetFactory(e);if(!i){return undefined}t=i.name}return n.getWidgetFactory(t)}_createOrOpenDocument(e,t,n="default",i,s){const o=this._widgetFactoryFor(t,n);if(!o){return undefined}const r=o.modelName||"text";const a=this.registry.getModelFactory(r);if(!a){return undefined}const l=this.registry.getKernelPreference(t,o.name,i);let d;let c=Promise.resolve(undefined);if(e==="open"){d=this._findContext(t,a.name)||null;if(!d){d=this._createContext(t,a,l);c=this._when.then((()=>d.initialize(false)))}}else if(e==="create"){d=this._createContext(t,a,l);c=this._when.then((()=>d.initialize(true)))}else{throw new Error(`Invalid argument 'which': ${e}`)}const h=this._widgetManager.createWidget(o,d);this._opener.open(h,{type:o.name,...s});c.catch((e=>{console.error(`Failed to initialize the context with '${a.name}' for ${t}`,e);h.close()}));return h}_onActivateRequested(e,t){this._activateRequested.emit(t)}_onWidgetStateChanged(e,t){if(t.name==="confirmClosingDocument"){this._stateChanged.emit(t)}}}var M;(function(e){e.saveHandlerProperty=new _.AttachedProperty({name:"saveHandler",create:()=>undefined})})(M||(M={}));var E=n(88478);var I=n(52435);var T=n(28416);var D=n.n(T);function L(e){return D().createElement(E.TextItem,{source:e.name,title:e.fullPath})}class P extends I.VDomRenderer{constructor(e){super(new P.Model(e.docManager));this.node.title=this.model.path}render(){return D().createElement(L,{fullPath:this.model.path,name:this.model.name})}}(function(e){class t extends I.VDomModel{constructor(e){super();this._onTitleChange=e=>{const t=this._getAllState();this._name=e.label;this._triggerChange(t,this._getAllState())};this._onPathChange=(e,t)=>{const n=this._getAllState();this._path=t;this._name=s.PathExt.basename(t);this._triggerChange(n,this._getAllState())};this._path="";this._name="";this._widget=null;this._docManager=e}get path(){return this._path}get name(){return this._name}get widget(){return this._widget}set widget(e){const t=this._widget;if(t!==null){const e=this._docManager.contextForWidget(t);if(e){e.pathChanged.disconnect(this._onPathChange)}else{t.title.changed.disconnect(this._onTitleChange)}}const n=this._getAllState();this._widget=e;if(this._widget===null){this._path="";this._name=""}else{const e=this._docManager.contextForWidget(this._widget);if(e){this._path=e.path;this._name=s.PathExt.basename(e.path);e.pathChanged.connect(this._onPathChange)}else{this._path="";this._name=this._widget.title.label;this._widget.title.changed.connect(this._onTitleChange)}}this._triggerChange(n,this._getAllState())}_getAllState(){return[this._path,this._name]}_triggerChange(e,t){if(e[0]!==t[0]||e[1]!==t[1]){this.stateChanged.emit(void 0)}}}e.Model=t})(P||(P={}));function A(e){return D().createElement(E.TextItem,{source:e.fileStatus})}const R=2e3;class N extends I.VDomRenderer{constructor(e){super(new N.Model(e.docManager));const t=e.translator||o.nullTranslator;const n=t.load("jupyterlab");this._statusMap={completed:n.__("Saving completed"),started:n.__("Saving started"),failed:n.__("Saving failed")}}render(){if(this.model===null||this.model.status===null){return null}else{return D().createElement(A,{fileStatus:this._statusMap[this.model.status]})}}}(function(e){class t extends I.VDomModel{constructor(e){super();this._onStatusChange=(e,t)=>{this._status=t;if(this._status==="completed"){setTimeout((()=>{this._status=null;this.stateChanged.emit(void 0)}),R);this.stateChanged.emit(void 0)}else{this.stateChanged.emit(void 0)}};this._status=null;this._widget=null;this._status=null;this.widget=null;this._docManager=e}get status(){return this._status}get widget(){return this._widget}set widget(e){var t,n;const i=this._widget;if(i!==null){const e=this._docManager.contextForWidget(i);if(e){e.saveState.disconnect(this._onStatusChange)}else if((t=this._widget.content)===null||t===void 0?void 0:t.saveStateChanged){this._widget.content.saveStateChanged.disconnect(this._onStatusChange)}}this._widget=e;if(this._widget===null){this._status=null}else{const e=this._docManager.contextForWidget(this._widget);if(e){e.saveState.connect(this._onStatusChange)}else if((n=this._widget.content)===null||n===void 0?void 0:n.saveStateChanged){this._widget.content.saveStateChanged.connect(this._onStatusChange)}}}}e.Model=t})(N||(N={}));const O=new v.Token("@jupyterlab/docmanager:IDocumentManager",`A service for the manager for all\n  documents used by the application. Use this if you want to open and close documents,\n  create and delete files, and otherwise interact with the file system.`);const B=new v.Token("@jupyterlab/docmanager:IDocumentWidgetOpener",`A service to open a widget.`)},82401:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(94683)},17454:(e,t,n)=>{"use strict";n.r(t);n.d(t,{ABCWidgetFactory:()=>v,Base64ModelFactory:()=>f,Context:()=>h,DocumentModel:()=>m,DocumentRegistry:()=>M,DocumentWidget:()=>b,MimeContent:()=>w,MimeDocument:()=>C,MimeDocumentFactory:()=>x,TextModelFactory:()=>g});var i=n(90848);var s=n(22873);var o=n(33112);var r=n(36168);var a=n(5596);var l=n(26512);var d=n(71372);var c=n(85448);class h{constructor(e){var t,n;this._isReady=false;this._isDisposed=false;this._isPopulated=false;this._path="";this._lineEnding=null;this._contentsModel=null;this._populatedPromise=new a.PromiseDelegate;this._pathChanged=new d.Signal(this);this._fileChanged=new d.Signal(this);this._saveState=new d.Signal(this);this._disposed=new d.Signal(this);this._lastModifiedCheckMargin=500;this._timeConflictModalIsOpen=false;const l=this._manager=e.manager;this.translator=e.translator||r.nullTranslator;this._trans=this.translator.load("jupyterlab");this._factory=e.factory;this._dialogs=(t=e.sessionDialogs)!==null&&t!==void 0?t:new i.SessionContextDialogs({translator:e.translator});this._opener=e.opener||u.noOp;this._path=this._manager.contents.normalize(e.path);this._lastModifiedCheckMargin=e.lastModifiedCheckMargin||500;const c=this._manager.contents.localPath(this._path);const h=this._factory.preferredLanguage(s.PathExt.basename(c));const p=this._manager.contents.getSharedModelFactory(this._path);const m=p===null||p===void 0?void 0:p.createNew({path:c,format:this._factory.fileFormat,contentType:this._factory.contentType,collaborative:this._factory.collaborative});this._model=this._factory.createNew({languagePreference:h,sharedModel:m,collaborationEnabled:(n=p===null||p===void 0?void 0:p.collaborative)!==null&&n!==void 0?n:false});this._readyPromise=l.ready.then((()=>this._populatedPromise.promise));const g=s.PathExt.extname(this._path);this.sessionContext=new i.SessionContext({sessionManager:l.sessions,specsManager:l.kernelspecs,path:c,type:g===".ipynb"?"notebook":"file",name:s.PathExt.basename(c),kernelPreference:e.kernelPreference||{shouldStart:false},setBusy:e.setBusy});this.sessionContext.propertyChanged.connect(this._onSessionChanged,this);l.contents.fileChanged.connect(this._onFileChanged,this);this.urlResolver=new o.RenderMimeRegistry.UrlResolver({path:this._path,contents:l.contents});this.model.sharedModel.changed.connect(this.onStateChanged,this)}get pathChanged(){return this._pathChanged}get fileChanged(){return this._fileChanged}get saveState(){return this._saveState}get disposed(){return this._disposed}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(e){this._lastModifiedCheckMargin=e}get model(){return this._model}get path(){return this._path}get localPath(){return this._manager.contents.localPath(this._path)}get contentsModel(){return this._contentsModel}get factoryName(){return this.isDisposed?"":this._factory.name}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this.sessionContext.dispose();this._model.dispose();this._model.sharedModel.dispose();this._disposed.emit(void 0);d.Signal.clearData(this)}get isReady(){return this._isReady}get ready(){return this._readyPromise}get canSave(){var e;return!!(((e=this._contentsModel)===null||e===void 0?void 0:e.writable)&&!this._model.collaborative)}async initialize(e){if(e){await this._save()}else{await this._revert()}this.model.sharedModel.clearUndoHistory()}rename(e){return this.ready.then((()=>this._manager.ready.then((()=>this._rename(e)))))}async save(){await this.ready;await this._save()}async saveAs(){await this.ready;const e=this._manager.contents.localPath(this.path);const t=await u.getSavePath(e);if(this.isDisposed||!t){return}const n=this._manager.contents.driveName(this.path);const i=n==""?t:`${n}:${t}`;if(i===this._path){return this.save()}try{await this._manager.ready;await this._manager.contents.get(i);await this._maybeOverWrite(i)}catch(s){if(!s.response||s.response.status!==404){throw s}await this._finishSaveAs(i)}}async download(){const e=await this._manager.contents.getDownloadUrl(this._path);const t=document.createElement("a");t.href=e;t.download="";document.body.appendChild(t);t.click();document.body.removeChild(t);return void 0}async revert(){await this.ready;await this._revert()}createCheckpoint(){const e=this._manager.contents;return this._manager.ready.then((()=>e.createCheckpoint(this._path)))}deleteCheckpoint(e){const t=this._manager.contents;return this._manager.ready.then((()=>t.deleteCheckpoint(this._path,e)))}restoreCheckpoint(e){const t=this._manager.contents;const n=this._path;return this._manager.ready.then((()=>{if(e){return t.restoreCheckpoint(n,e)}return this.listCheckpoints().then((i=>{if(this.isDisposed||!i.length){return}e=i[i.length-1].id;return t.restoreCheckpoint(n,e)}))}))}listCheckpoints(){const e=this._manager.contents;return this._manager.ready.then((()=>e.listCheckpoints(this._path)))}addSibling(e,t={}){const n=this._opener;if(n){n(e,t)}return new l.DisposableDelegate((()=>{e.close()}))}onStateChanged(e,t){if(t.stateChange){t.stateChange.forEach((e=>{if(e.name==="path"){const t=this._manager.contents.driveName(this._path);let n=e.newValue;if(t){n=`${t}:${e.newValue}`}this._updatePath(n)}}))}}_onFileChanged(e,t){var n;if(t.type!=="rename"){return}let i=t.oldValue&&t.oldValue.path;let s=t.newValue&&t.newValue.path;if(s&&this._path.indexOf(i||"")===0){let e=t.newValue;if(i!==this._path){s=this._path.replace(new RegExp(`^${i}/`),`${s}/`);i=this._path;e={last_modified:(n=t.newValue)===null||n===void 0?void 0:n.created,path:s}}this._updateContentsModel({...this._contentsModel,...e});this._updatePath(s)}}_onSessionChanged(e,t){if(t!=="path"){return}this._updatePath(this.sessionContext.session.path)}_updateContentsModel(e){const t=e.writable&&!this._model.collaborative;const n={path:e.path,name:e.name,type:e.type,content:undefined,writable:t,created:e.created,last_modified:e.last_modified,mimetype:e.mimetype,format:e.format};const i=this._contentsModel?this._contentsModel.last_modified:null;this._contentsModel=n;this._model.sharedModel.setState("last_modified",n.last_modified);if(!i||n.last_modified!==i){this._fileChanged.emit(n)}}_updatePath(e){var t,n,i,o;if(this._path===e){return}this._path=e;const r=this._manager.contents.localPath(e);const a=s.PathExt.basename(r);if(((t=this.sessionContext.session)===null||t===void 0?void 0:t.path)!==r){void((n=this.sessionContext.session)===null||n===void 0?void 0:n.setPath(r))}if(((i=this.sessionContext.session)===null||i===void 0?void 0:i.name)!==a){void((o=this.sessionContext.session)===null||o===void 0?void 0:o.setName(a))}if(this.urlResolver.path!==e){this.urlResolver.path=e}if(this._contentsModel&&(this._contentsModel.path!==e||this._contentsModel.name!==a)){const t={...this._contentsModel,name:a,path:e};this._updateContentsModel(t)}if(this._model.sharedModel.getState("path")!==r){this._model.sharedModel.setState("path",r)}this._pathChanged.emit(e)}async _populate(){this._isPopulated=true;this._isReady=true;this._populatedPromise.resolve(void 0);await this._maybeCheckpoint(false);if(this.isDisposed){return}const e=this._model.defaultKernelName||this.sessionContext.kernelPreference.name;this.sessionContext.kernelPreference={...this.sessionContext.kernelPreference,name:e,language:this._model.defaultKernelLanguage};void this.sessionContext.initialize().then((e=>{if(e){void this._dialogs.selectKernel(this.sessionContext)}}))}async _rename(e){var t,n;const i=this.localPath.split("/");i[i.length-1]=e;let o=s.PathExt.join(...i);const r=this._manager.contents.driveName(this.path);if(r){o=`${r}:${o}`}await this._manager.contents.rename(this.path,o);await((t=this.sessionContext.session)===null||t===void 0?void 0:t.setPath(o));await((n=this.sessionContext.session)===null||n===void 0?void 0:n.setName(e));this._path=o;const a=this._manager.contents.localPath(this._path);this.urlResolver.path=o;this._model.sharedModel.setState("path",a);this._pathChanged.emit(o)}async _save(){this._saveState.emit("started");const e=this._createSaveOptions();try{let t;await this._manager.ready;t=await this._maybeSave(e);if(this.isDisposed){return}this._model.dirty=false;this._updateContentsModel(t);if(!this._isPopulated){await this._populate()}this._saveState.emit("completed")}catch(t){const{name:e}=t;if(e==="ModalCancelError"||e==="ModalDuplicateError"){throw t}const n=this._manager.contents.localPath(this._path);const i=s.PathExt.basename(n);void this._handleError(t,this._trans.__("File Save Error for %1",i));this._saveState.emit("failed");throw t}}_revert(e=false){const t={type:this._factory.contentType,content:this._factory.fileFormat!==null,...this._factory.fileFormat!==null?{format:this._factory.fileFormat}:{}};const n=this._path;const i=this._model;return this._manager.ready.then((()=>this._manager.contents.get(n,t))).then((e=>{if(this.isDisposed){return}if(e.content){if(e.format==="json"){i.fromJSON(e.content)}else{let t=e.content;if(t.indexOf("\r\n")!==-1){this._lineEnding="\r\n";t=t.replace(/\r\n/g,"\n")}else if(t.indexOf("\r")!==-1){this._lineEnding="\r";t=t.replace(/\r/g,"\n")}else{this._lineEnding=null}i.fromString(t)}}this._updateContentsModel(e);i.dirty=false;if(!this._isPopulated){return this._populate()}})).catch((async e=>{const t=this._manager.contents.localPath(this._path);const n=s.PathExt.basename(t);void this._handleError(e,this._trans.__("File Load Error for %1",n));throw e}))}_maybeSave(e){const t=this._path;const n=this._manager.contents.get(t,{content:false});return n.then((n=>{var i;if(this.isDisposed){return Promise.reject(new Error("Disposed"))}const s=this._lastModifiedCheckMargin;const o=this._model.sharedModel.getState("last_modified");const r=o||((i=this.contentsModel)===null||i===void 0?void 0:i.last_modified);const a=r?new Date(r):new Date;const l=new Date(n.last_modified);if(r&&l.getTime()-a.getTime()>s){return this._timeConflict(a,n,e)}return this._manager.contents.save(t,e)}),(n=>{if(n.response&&n.response.status===404){return this._manager.contents.save(t,e)}throw n}))}async _handleError(e,t){await(0,i.showErrorMessage)(t,e);return}_maybeCheckpoint(e){let t=Promise.resolve(void 0);if(!this.canSave){return t}if(e){t=this.createCheckpoint().then()}else{t=this.listCheckpoints().then((e=>{if(!this.isDisposed&&!e.length&&this.canSave){return this.createCheckpoint().then()}}))}return t.catch((e=>{if(!e.response||e.response.status!==403){throw e}}))}_timeConflict(e,t,n){const s=new Date(t.last_modified);console.warn(`Last saving performed ${e} `+`while the current file seems to have been saved `+`${s}`);if(this._timeConflictModalIsOpen){const e=new Error("Modal is already displayed");e.name="ModalDuplicateError";return Promise.reject(e)}const o=this._trans.__(`"%1" has changed on disk since the last time it was opened or saved.\nDo you want to overwrite the file on disk with the version open here,\nor load the version on disk (revert)?`,this.path);const r=i.Dialog.okButton({label:this._trans.__("Revert"),actions:["revert"]});const a=i.Dialog.warnButton({label:this._trans.__("Overwrite"),actions:["overwrite"]});this._timeConflictModalIsOpen=true;return(0,i.showDialog)({title:this._trans.__("File Changed"),body:o,buttons:[i.Dialog.cancelButton(),r,a]}).then((e=>{this._timeConflictModalIsOpen=false;if(this.isDisposed){return Promise.reject(new Error("Disposed"))}if(e.button.actions.includes("overwrite")){return this._manager.contents.save(this._path,n)}if(e.button.actions.includes("revert")){return this.revert().then((()=>t))}const i=new Error("Cancel");i.name="ModalCancelError";return Promise.reject(i)}))}_maybeOverWrite(e){const t=this._trans.__('"%1" already exists. Do you want to replace it?',e);const n=i.Dialog.warnButton({label:this._trans.__("Overwrite"),accept:true});return(0,i.showDialog)({title:this._trans.__("File Overwrite?"),body:t,buttons:[i.Dialog.cancelButton(),n]}).then((t=>{if(this.isDisposed){return Promise.reject(new Error("Disposed"))}if(t.button.accept){return this._manager.contents.delete(e).then((()=>this._finishSaveAs(e)))}}))}async _finishSaveAs(e){this._saveState.emit("started");try{await this._manager.ready;const t=this._createSaveOptions();await this._manager.contents.save(e,t);await this._maybeCheckpoint(true);this._saveState.emit("completed")}catch(t){if(t.message==="Cancel"||t.message==="Modal is already displayed"){throw t}const e=this._manager.contents.localPath(this._path);const n=s.PathExt.basename(e);void this._handleError(t,this._trans.__("File Save Error for %1",n));this._saveState.emit("failed");return}}_createSaveOptions(){let e=null;if(this._factory.fileFormat==="json"){e=this._model.toJSON()}else{e=this._model.toString();if(this._lineEnding){e=e.replace(/\n/g,this._lineEnding)}}return{type:this._factory.contentType,format:this._factory.fileFormat,content:e}}}var u;(function(e){function t(e,t){t=t||r.nullTranslator;const n=t.load("jupyterlab");const o=i.Dialog.okButton({label:n.__("Save"),accept:true});return(0,i.showDialog)({title:n.__("Save File As"),body:new s(e),buttons:[i.Dialog.cancelButton(),o]}).then((e=>{var t;if(e.button.accept){return(t=e.value)!==null&&t!==void 0?t:undefined}return}))}e.getSavePath=t;function n(){}e.noOp=n;class s extends c.Widget{constructor(e){super({node:o(e)})}getValue(){return this.node.value}}function o(e){const t=document.createElement("input");t.value=e;return t}})(u||(u={}));var p=n(47391);class m extends p.CodeEditor.Model{constructor(e={}){var t;super({sharedModel:e.sharedModel});this._defaultLang="";this._dirty=false;this._readOnly=false;this._contentChanged=new d.Signal(this);this._stateChanged=new d.Signal(this);this._defaultLang=(t=e.languagePreference)!==null&&t!==void 0?t:"";this._collaborationEnabled=!!e.collaborationEnabled;this.sharedModel.changed.connect(this._onStateChanged,this)}get contentChanged(){return this._contentChanged}get stateChanged(){return this._stateChanged}get dirty(){return this._dirty}set dirty(e){const t=this._dirty;if(e===t){return}this._dirty=e;this.triggerStateChange({name:"dirty",oldValue:t,newValue:e})}get readOnly(){return this._readOnly}set readOnly(e){if(e===this._readOnly){return}const t=this._readOnly;this._readOnly=e;this.triggerStateChange({name:"readOnly",oldValue:t,newValue:e})}get defaultKernelName(){return""}get defaultKernelLanguage(){return this._defaultLang}get collaborative(){return this._collaborationEnabled}toString(){return this.sharedModel.getSource()}fromString(e){this.sharedModel.setSource(e)}toJSON(){return JSON.parse(this.sharedModel.getSource()||"null")}fromJSON(e){this.fromString(JSON.stringify(e))}initialize(){return}triggerStateChange(e){this._stateChanged.emit(e)}triggerContentChange(){this._contentChanged.emit(void 0);this.dirty=true}_onStateChanged(e,t){if(t.sourceChange){this.triggerContentChange()}if(t.stateChange){t.stateChange.forEach((e=>{if(e.name==="dirty"){this.dirty=e.newValue}else if(e.oldValue!==e.newValue){this.triggerStateChange({newValue:undefined,oldValue:undefined,...e})}}))}}}class g{constructor(e){this._isDisposed=false;this._collaborative=e!==null&&e!==void 0?e:true}get name(){return"text"}get contentType(){return"file"}get fileFormat(){return"text"}get collaborative(){return this._collaborative}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed=true}createNew(e={}){const t=e.collaborationEnabled&&this.collaborative;return new m({...e,collaborationEnabled:t})}preferredLanguage(e){return""}}class f extends g{get name(){return"base64"}get contentType(){return"file"}get fileFormat(){return"base64"}}class v{constructor(e){this._isDisposed=false;this._widgetCreated=new d.Signal(this);this._translator=e.translator||r.nullTranslator;this._name=e.name;this._label=e.label||e.name;this._readOnly=e.readOnly===undefined?false:e.readOnly;this._defaultFor=e.defaultFor?e.defaultFor.slice():[];this._defaultRendered=(e.defaultRendered||[]).slice();this._fileTypes=e.fileTypes.slice();this._modelName=e.modelName||"text";this._preferKernel=!!e.preferKernel;this._canStartKernel=!!e.canStartKernel;this._shutdownOnClose=!!e.shutdownOnClose;this._autoStartDefault=!!e.autoStartDefault;this._toolbarFactory=e.toolbarFactory}get widgetCreated(){return this._widgetCreated}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;d.Signal.clearData(this)}get readOnly(){return this._readOnly}get name(){return this._name}get label(){return this._label}get fileTypes(){return this._fileTypes.slice()}get modelName(){return this._modelName}get defaultFor(){return this._defaultFor.slice()}get defaultRendered(){return this._defaultRendered.slice()}get preferKernel(){return this._preferKernel}get canStartKernel(){return this._canStartKernel}get translator(){return this._translator}get shutdownOnClose(){return this._shutdownOnClose}set shutdownOnClose(e){this._shutdownOnClose=e}get autoStartDefault(){return this._autoStartDefault}set autoStartDefault(e){this._autoStartDefault=e}createNew(e,t){var n;const s=this.createNewWidget(e,t);(0,i.setToolbar)(s,(n=this._toolbarFactory)!==null&&n!==void 0?n:this.defaultToolbarFactory.bind(this));this._widgetCreated.emit(s);return s}defaultToolbarFactory(e){return[]}}const _="jp-mod-dirty";class b extends i.MainAreaWidget{constructor(e){e.reveal=Promise.all([e.reveal,e.context.ready]);super(e);this.context=e.context;this.context.pathChanged.connect(this._onPathChanged,this);this._onPathChanged(this.context,this.context.path);this.context.model.stateChanged.connect(this._onModelStateChanged,this);void this.context.ready.then((()=>{this._handleDirtyState()}));this.title.changed.connect(this._onTitleChanged,this)}setFragment(e){}async _onTitleChanged(e){const t=/[\/\\:]/;const n=this.title.label;const i=this.context.localPath.split("/").pop()||this.context.localPath;if(n===i){return}if(n.length>0&&!t.test(n)){const e=this.context.path;await this.context.rename(n);if(this.context.path!==e){return}}this.title.label=i}_onPathChanged(e,t){this.title.label=s.PathExt.basename(e.localPath);this.isUntitled=false}_onModelStateChanged(e,t){if(t.name==="dirty"){this._handleDirtyState()}}_handleDirtyState(){if(this.context.model.dirty&&!this.title.className.includes(_)){this.title.className+=` ${_}`}else{this.title.className=this.title.className.replace(_,"")}}}var y=n(28821);class w extends c.Widget{constructor(e){super();this._changeCallback=e=>{if(!e.data||!e.data[this.mimeType]){return}const t=e.data[this.mimeType];if(typeof t==="string"){if(t!==this._context.model.toString()){this._context.model.fromString(t)}}else if(t!==null&&t!==undefined&&!a.JSONExt.deepEqual(t,this._context.model.toJSON())){this._context.model.fromJSON(t)}};this._fragment="";this._ready=new a.PromiseDelegate;this._isRendering=false;this._renderRequested=false;this.addClass("jp-MimeDocument");this.translator=e.translator||r.nullTranslator;this._trans=this.translator.load("jupyterlab");this.mimeType=e.mimeType;this._dataType=e.dataType||"string";this._context=e.context;this.renderer=e.renderer;const t=this.layout=new c.StackedLayout;t.addWidget(this.renderer);this._context.ready.then((()=>this._render())).then((()=>{if(this.node===document.activeElement){y.MessageLoop.sendMessage(this.renderer,c.Widget.Msg.ActivateRequest)}this._monitor=new s.ActivityMonitor({signal:this._context.model.contentChanged,timeout:e.renderTimeout});this._monitor.activityStopped.connect(this.update,this);this._ready.resolve(undefined)})).catch((e=>{requestAnimationFrame((()=>{this.dispose()}));void(0,i.showErrorMessage)(this._trans.__("Renderer Failure: %1",this._context.path),e)}))}[i.Printing.symbol](){return i.Printing.getPrintFunction(this.renderer)}get ready(){return this._ready.promise}setFragment(e){this._fragment=e;this.update()}dispose(){if(this.isDisposed){return}if(this._monitor){this._monitor.dispose()}this._monitor=null;super.dispose()}onUpdateRequest(e){if(this._context.isReady){void this._render();this._fragment=""}}async _render(){if(this.isDisposed){return}if(this._isRendering){this._renderRequested=true;return}this._renderRequested=false;const e=this._context;const t=e.model;const n={};if(this._dataType==="string"){n[this.mimeType]=t.toString()}else{n[this.mimeType]=t.toJSON()}const s=new o.MimeModel({data:n,callback:this._changeCallback,metadata:{fragment:this._fragment}});try{this._isRendering=true;await this.renderer.renderModel(s);this._isRendering=false;if(this._renderRequested){return this._render()}}catch(r){requestAnimationFrame((()=>{this.dispose()}));void(0,i.showErrorMessage)(this._trans.__("Renderer Failure: %1",e.path),r)}}}class C extends b{setFragment(e){this.content.setFragment(e)}}class x extends v{constructor(e){super(S.createRegistryOptions(e));this._rendermime=e.rendermime;this._renderTimeout=e.renderTimeout||1e3;this._dataType=e.dataType||"string";this._fileType=e.primaryFileType;this._factory=e.factory}createNewWidget(e){var t,n;const i=this._fileType;const s=(i===null||i===void 0?void 0:i.mimeTypes.length)?i.mimeTypes[0]:"text/plain";const o=this._rendermime.clone({resolver:e.urlResolver});let r;if(this._factory&&this._factory.mimeTypes.includes(s)){r=this._factory.createRenderer({mimeType:s,resolver:o.resolver,sanitizer:o.sanitizer,linkHandler:o.linkHandler,latexTypesetter:o.latexTypesetter,markdownParser:o.markdownParser})}else{r=o.createRenderer(s)}const a=new w({context:e,renderer:r,mimeType:s,renderTimeout:this._renderTimeout,dataType:this._dataType});a.title.icon=i===null||i===void 0?void 0:i.icon;a.title.iconClass=(t=i===null||i===void 0?void 0:i.iconClass)!==null&&t!==void 0?t:"";a.title.iconLabel=(n=i===null||i===void 0?void 0:i.iconLabel)!==null&&n!==void 0?n:"";const l=new C({content:a,context:e});return l}}var S;(function(e){function t(e){return{...e,readOnly:true}}e.createRegistryOptions=t})(S||(S={}));var k=n(52435);var j=n(58740);class M{constructor(e={}){this._modelFactories=Object.create(null);this._widgetFactories=Object.create(null);this._defaultWidgetFactory="";this._defaultWidgetFactoryOverrides=Object.create(null);this._defaultWidgetFactories=Object.create(null);this._defaultRenderedWidgetFactories=Object.create(null);this._widgetFactoriesForFileType=Object.create(null);this._fileTypes=[];this._extenders=Object.create(null);this._changed=new d.Signal(this);this._isDisposed=false;const t=e.textModelFactory;this.translator=e.translator||r.nullTranslator;if(t&&t.name!=="text"){throw new Error("Text model factory must have the name `text`")}this._modelFactories["text"]=t||new g(true);const n=e.initialFileTypes||M.getDefaultFileTypes(this.translator);n.forEach((e=>{const t={...M.getFileTypeDefaults(this.translator),...e};this._fileTypes.push(t)}))}get changed(){return this._changed}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;for(const e in this._modelFactories){this._modelFactories[e].dispose()}for(const e in this._widgetFactories){this._widgetFactories[e].dispose()}for(const e in this._extenders){this._extenders[e].length=0}this._fileTypes.length=0;d.Signal.clearData(this)}addWidgetFactory(e){const t=e.name.toLowerCase();if(!t||t==="default"){throw Error("Invalid factory name")}if(this._widgetFactories[t]){console.warn(`Duplicate registered factory ${t}`);return new l.DisposableDelegate(E.noOp)}this._widgetFactories[t]=e;for(const n of e.defaultFor||[]){if(e.fileTypes.indexOf(n)===-1){continue}if(n==="*"){this._defaultWidgetFactory=t}else{this._defaultWidgetFactories[n]=t}}for(const n of e.defaultRendered||[]){if(e.fileTypes.indexOf(n)===-1){continue}this._defaultRenderedWidgetFactories[n]=t}for(const n of e.fileTypes){if(!this._widgetFactoriesForFileType[n]){this._widgetFactoriesForFileType[n]=[]}this._widgetFactoriesForFileType[n].push(t)}this._changed.emit({type:"widgetFactory",name:t,change:"added"});return new l.DisposableDelegate((()=>{delete this._widgetFactories[t];if(this._defaultWidgetFactory===t){this._defaultWidgetFactory=""}for(const e of Object.keys(this._defaultWidgetFactories)){if(this._defaultWidgetFactories[e]===t){delete this._defaultWidgetFactories[e]}}for(const e of Object.keys(this._defaultRenderedWidgetFactories)){if(this._defaultRenderedWidgetFactories[e]===t){delete this._defaultRenderedWidgetFactories[e]}}for(const e of Object.keys(this._widgetFactoriesForFileType)){j.ArrayExt.removeFirstOf(this._widgetFactoriesForFileType[e],t);if(this._widgetFactoriesForFileType[e].length===0){delete this._widgetFactoriesForFileType[e]}}for(const e of Object.keys(this._defaultWidgetFactoryOverrides)){if(this._defaultWidgetFactoryOverrides[e]===t){delete this._defaultWidgetFactoryOverrides[e]}}this._changed.emit({type:"widgetFactory",name:t,change:"removed"})}))}addModelFactory(e){const t=e.name.toLowerCase();if(this._modelFactories[t]){console.warn(`Duplicate registered factory ${t}`);return new l.DisposableDelegate(E.noOp)}this._modelFactories[t]=e;this._changed.emit({type:"modelFactory",name:t,change:"added"});return new l.DisposableDelegate((()=>{delete this._modelFactories[t];this._changed.emit({type:"modelFactory",name:t,change:"removed"})}))}addWidgetExtension(e,t){e=e.toLowerCase();if(!(e in this._extenders)){this._extenders[e]=[]}const n=this._extenders[e];const i=j.ArrayExt.firstIndexOf(n,t);if(i!==-1){console.warn(`Duplicate registered extension for ${e}`);return new l.DisposableDelegate(E.noOp)}this._extenders[e].push(t);this._changed.emit({type:"widgetExtension",name:e,change:"added"});return new l.DisposableDelegate((()=>{j.ArrayExt.removeFirstOf(this._extenders[e],t);this._changed.emit({type:"widgetExtension",name:e,change:"removed"})}))}addFileType(e,t){const n={...M.getFileTypeDefaults(this.translator),...e,...!(e.icon||e.iconClass)&&{icon:k.fileIcon}};this._fileTypes.push(n);if(t){const e=n.name.toLowerCase();t.map((e=>e.toLowerCase())).forEach((t=>{if(!this._widgetFactoriesForFileType[e]){this._widgetFactoriesForFileType[e]=[]}if(!this._widgetFactoriesForFileType[e].includes(t)){this._widgetFactoriesForFileType[e].push(t)}}));if(!this._defaultWidgetFactories[e]){this._defaultWidgetFactories[e]=this._widgetFactoriesForFileType[e][0]}}this._changed.emit({type:"fileType",name:n.name,change:"added"});return new l.DisposableDelegate((()=>{j.ArrayExt.removeFirstOf(this._fileTypes,n);if(t){const e=n.name.toLowerCase();for(const n of t.map((e=>e.toLowerCase()))){j.ArrayExt.removeFirstOf(this._widgetFactoriesForFileType[e],n)}if(this._defaultWidgetFactories[e]===t[0].toLowerCase()){delete this._defaultWidgetFactories[e]}}this._changed.emit({type:"fileType",name:e.name,change:"removed"})}))}preferredWidgetFactories(e){const t=new Set;const n=this.getFileTypesForPath(s.PathExt.basename(e));n.forEach((e=>{if(e.name in this._defaultWidgetFactoryOverrides){t.add(this._defaultWidgetFactoryOverrides[e.name])}}));n.forEach((e=>{if(e.name in this._defaultWidgetFactories){t.add(this._defaultWidgetFactories[e.name])}}));n.forEach((e=>{if(e.name in this._defaultRenderedWidgetFactories){t.add(this._defaultRenderedWidgetFactories[e.name])}}));if(this._defaultWidgetFactory){t.add(this._defaultWidgetFactory)}for(const s of n){if(s.name in this._widgetFactoriesForFileType){for(const e of this._widgetFactoriesForFileType[s.name]){t.add(e)}}}if("*"in this._widgetFactoriesForFileType){for(const e of this._widgetFactoriesForFileType["*"]){t.add(e)}}const i=[];for(const s of t){const e=this._widgetFactories[s];if(!e){continue}const t=e.modelName||"text";if(t in this._modelFactories){i.push(e)}}return i}defaultRenderedWidgetFactory(e){const t=this.getFileTypesForPath(s.PathExt.basename(e)).map((e=>e.name));for(const n in t){if(n in this._defaultWidgetFactoryOverrides){return this._widgetFactories[this._defaultWidgetFactoryOverrides[n]]}}for(const n in t){if(n in this._defaultRenderedWidgetFactories){return this._widgetFactories[this._defaultRenderedWidgetFactories[n]]}}return this.defaultWidgetFactory(e)}defaultWidgetFactory(e){if(!e){return this._widgetFactories[this._defaultWidgetFactory]}return this.preferredWidgetFactories(e)[0]}setDefaultWidgetFactory(e,t){e=e.toLowerCase();if(!this.getFileType(e)){throw Error(`Cannot find file type ${e}`)}if(!t){if(this._defaultWidgetFactoryOverrides[e]){delete this._defaultWidgetFactoryOverrides[e]}return}if(!this.getWidgetFactory(t)){throw Error(`Cannot find widget factory ${t}`)}t=t.toLowerCase();const n=this._widgetFactoriesForFileType[e];if(t!==this._defaultWidgetFactory&&!(n&&n.includes(t))){throw Error(`Factory ${t} cannot view file type ${e}`)}this._defaultWidgetFactoryOverrides[e]=t}*widgetFactories(){for(const e in this._widgetFactories){yield this._widgetFactories[e]}}*modelFactories(){for(const e in this._modelFactories){yield this._modelFactories[e]}}*widgetExtensions(e){e=e.toLowerCase();if(e in this._extenders){for(const t of this._extenders[e]){yield t}}}*fileTypes(){for(const e of this._fileTypes){yield e}}getWidgetFactory(e){return this._widgetFactories[e.toLowerCase()]}getModelFactory(e){return this._modelFactories[e.toLowerCase()]}getFileType(e){e=e.toLowerCase();return(0,j.find)(this._fileTypes,(t=>t.name.toLowerCase()===e))}getKernelPreference(e,t,n){t=t.toLowerCase();const i=this._widgetFactories[t];if(!i){return void 0}const o=this.getModelFactory(i.modelName||"text");if(!o){return void 0}const r=o.preferredLanguage(s.PathExt.basename(e));const a=n&&n.name;const l=n&&n.id;return{id:l,name:a,language:r,shouldStart:i.preferKernel,canStart:i.canStartKernel,shutdownOnDispose:i.shutdownOnClose,autoStartDefault:i.autoStartDefault}}getFileTypeForModel(e){switch(e.type){case"directory":return(0,j.find)(this._fileTypes,(e=>e.contentType==="directory"))||M.getDefaultDirectoryFileType(this.translator);case"notebook":return(0,j.find)(this._fileTypes,(e=>e.contentType==="notebook"))||M.getDefaultNotebookFileType(this.translator);default:if(e.name||e.path){const t=e.name||s.PathExt.basename(e.path);const n=this.getFileTypesForPath(t);if(n.length>0){return n[0]}}return this.getFileType("text")||M.getDefaultTextFileType(this.translator)}}getFileTypesForPath(e){const t=[];const n=s.PathExt.basename(e);let i=(0,j.find)(this._fileTypes,(e=>!!(e.pattern&&n.match(e.pattern)!==null)));if(i){t.push(i)}let o=E.extname(n);while(o.length>1){const e=this._fileTypes.filter((e=>e.extensions.map((e=>e.toLowerCase())).includes(o)));t.push(...e);o="."+o.split(".").slice(2).join(".")}return t}}(function(e){function t(e){e=e||r.nullTranslator;const t=e===null||e===void 0?void 0:e.load("jupyterlab");return{name:"default",displayName:t.__("default"),extensions:[],mimeTypes:[],contentType:"file",fileFormat:"text"}}e.getFileTypeDefaults=t;function n(e){e=e||r.nullTranslator;const n=e===null||e===void 0?void 0:e.load("jupyterlab");const i=t(e);return{...i,name:"text",displayName:n.__("Text"),mimeTypes:["text/plain"],extensions:[".txt"],icon:k.fileIcon}}e.getDefaultTextFileType=n;function i(e){e=e||r.nullTranslator;const n=e===null||e===void 0?void 0:e.load("jupyterlab");return{...t(e),name:"notebook",displayName:n.__("Notebook"),mimeTypes:["application/x-ipynb+json"],extensions:[".ipynb"],contentType:"notebook",fileFormat:"json",icon:k.notebookIcon}}e.getDefaultNotebookFileType=i;function s(e){e=e||r.nullTranslator;const n=e===null||e===void 0?void 0:e.load("jupyterlab");return{...t(e),name:"directory",displayName:n.__("Directory"),extensions:[],mimeTypes:["text/directory"],contentType:"directory",icon:k.folderIcon}}e.getDefaultDirectoryFileType=s;function o(e){e=e||r.nullTranslator;const t=e===null||e===void 0?void 0:e.load("jupyterlab");return[n(e),i(e),s(e),{name:"markdown",displayName:t.__("Markdown File"),extensions:[".md"],mimeTypes:["text/markdown"],icon:k.markdownIcon},{name:"PDF",displayName:t.__("PDF File"),extensions:[".pdf"],mimeTypes:["application/pdf"],icon:k.pdfIcon},{name:"python",displayName:t.__("Python File"),extensions:[".py"],mimeTypes:["text/x-python"],icon:k.pythonIcon},{name:"json",displayName:t.__("JSON File"),extensions:[".json"],mimeTypes:["application/json"],icon:k.jsonIcon},{name:"julia",displayName:t.__("Julia File"),extensions:[".jl"],mimeTypes:["text/x-julia"],icon:k.juliaIcon},{name:"csv",displayName:t.__("CSV File"),extensions:[".csv"],mimeTypes:["text/csv"],icon:k.spreadsheetIcon},{name:"tsv",displayName:t.__("TSV File"),extensions:[".tsv"],mimeTypes:["text/csv"],icon:k.spreadsheetIcon},{name:"r",displayName:t.__("R File"),mimeTypes:["text/x-rsrc"],extensions:[".R"],icon:k.rKernelIcon},{name:"yaml",displayName:t.__("YAML File"),mimeTypes:["text/x-yaml","text/yaml"],extensions:[".yaml",".yml"],icon:k.yamlIcon},{name:"svg",displayName:t.__("Image"),mimeTypes:["image/svg+xml"],extensions:[".svg"],icon:k.imageIcon,fileFormat:"base64"},{name:"tiff",displayName:t.__("Image"),mimeTypes:["image/tiff"],extensions:[".tif",".tiff"],icon:k.imageIcon,fileFormat:"base64"},{name:"jpeg",displayName:t.__("Image"),mimeTypes:["image/jpeg"],extensions:[".jpg",".jpeg"],icon:k.imageIcon,fileFormat:"base64"},{name:"gif",displayName:t.__("Image"),mimeTypes:["image/gif"],extensions:[".gif"],icon:k.imageIcon,fileFormat:"base64"},{name:"png",displayName:t.__("Image"),mimeTypes:["image/png"],extensions:[".png"],icon:k.imageIcon,fileFormat:"base64"},{name:"bmp",displayName:t.__("Image"),mimeTypes:["image/bmp"],extensions:[".bmp"],icon:k.imageIcon,fileFormat:"base64"},{name:"webp",displayName:t.__("Image"),mimeTypes:["image/webp"],extensions:[".webp"],icon:k.imageIcon,fileFormat:"base64"}]}e.getDefaultFileTypes=o})(M||(M={}));var E;(function(e){function t(e){const t=s.PathExt.basename(e).split(".");t.shift();const n="."+t.join(".");return n.toLowerCase()}e.extname=t;function n(){}e.noOp=n})(E||(E={}))},94683:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(93379);var a=n.n(r);var l=n(7795);var d=n.n(l);var c=n(90569);var h=n.n(c);var u=n(3565);var p=n.n(u);var m=n(19216);var g=n.n(m);var f=n(44589);var v=n.n(f);var _=n(98491);var b={};b.styleTagTransform=v();b.setAttributes=p();b.insert=h().bind(null,"head");b.domAPI=d();b.insertStyleElement=g();var y=a()(_.Z,b);const w=_.Z&&_.Z.locals?_.Z.locals:undefined},25649:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>b});var i=n(44906);var s=n.n(i);var o=n(90848);var r=n.n(o);var a=n(15645);var l=n.n(a);var d=n(51997);var c=n.n(d);var h=n(36168);var u=n.n(h);var p=n(85448);var m=n.n(p);const g="jp-mod-searchable";var f;(function(e){e.search="documentsearch:start";e.searchAndReplace="documentsearch:startWithReplace";e.findNext="documentsearch:highlightNext";e.findPrevious="documentsearch:highlightPrevious";e.end="documentsearch:end"})(f||(f={}));const v={id:"@jupyterlab/documentsearch-extension:labShellWidgetListener",description:"Active search on valid document",requires:[i.ILabShell,a.ISearchProviderRegistry],autoStart:true,activate:(e,t,n)=>{const i=e=>{if(!e){return}if(n.hasProvider(e)){e.addClass(g)}else{e.removeClass(g)}};n.changed.connect((()=>i(t.activeWidget)));t.activeChanged.connect(((e,t)=>{const n=t.oldValue;if(n){n.removeClass(g)}i(t.newValue)}))}};const _={id:"@jupyterlab/documentsearch-extension:plugin",description:"Provides the document search registry.",provides:a.ISearchProviderRegistry,requires:[h.ITranslator],optional:[o.ICommandPalette,d.ISettingRegistry],autoStart:true,activate:(e,t,n,i)=>{const s=t.load("jupyterlab");let r=500;const l=new a.SearchProviderRegistry(t);const d=new Map;if(i){const t=i.load(_.id);const n=e=>{r=e.get("searchDebounceTime").composite};Promise.all([t,e.restored]).then((([e])=>{n(e);e.changed.connect((e=>{n(e)}))})).catch((e=>{console.error(e.message)}))}const c=()=>{const t=e.shell.currentWidget;if(!t){return false}return l.hasProvider(t)};const h=n=>{if(!n){return}const i=n.id;let s=d.get(i);if(!s){const o=l.getProvider(n);if(!o){return}const c=new a.SearchDocumentModel(o,r);const h=new a.SearchDocumentView(c,t);d.set(i,h);[f.findNext,f.findPrevious,f.end].forEach((t=>{e.commands.notifyCommandChanged(t)}));h.closed.connect((()=>{if(!n.isDisposed){n.activate()}}));h.disposed.connect((()=>{if(!n.isDisposed){n.activate()}d.delete(i);[f.findNext,f.findPrevious,f.end].forEach((t=>{e.commands.notifyCommandChanged(t)}))}));n.disposed.connect((()=>{h.dispose();c.dispose();o.dispose()}));s=h}if(!s.isAttached){p.Widget.attach(s,n.node);if(n instanceof o.MainAreaWidget){s.node.style.top=`${n.toolbar.node.getBoundingClientRect().height+n.contentHeader.node.getBoundingClientRect().height}px`}if(s.model.searchExpression){s.model.refresh()}}return s};e.commands.addCommand(f.search,{label:s.__("Find"),isEnabled:c,execute:t=>{const n=h(e.shell.currentWidget);if(n){const e=t["searchText"];if(e){n.setSearchText(e)}else{n.setSearchText(n.model.suggestedInitialQuery)}n.focusSearchInput()}}});e.commands.addCommand(f.searchAndReplace,{label:s.__("Find and Replace"),isEnabled:c,execute:t=>{const n=h(e.shell.currentWidget);if(n){const e=t["searchText"];if(e){n.setSearchText(e)}else{n.setSearchText(n.model.suggestedInitialQuery)}const i=t["replaceText"];if(i){n.setReplaceText(i)}n.showReplace();n.focusSearchInput()}}});e.commands.addCommand(f.findNext,{label:s.__("Find Next"),isEnabled:()=>!!e.shell.currentWidget&&d.has(e.shell.currentWidget.id),execute:async()=>{var t;const n=e.shell.currentWidget;if(!n){return}await((t=d.get(n.id))===null||t===void 0?void 0:t.model.highlightNext())}});e.commands.addCommand(f.findPrevious,{label:s.__("Find Previous"),isEnabled:()=>!!e.shell.currentWidget&&d.has(e.shell.currentWidget.id),execute:async()=>{var t;const n=e.shell.currentWidget;if(!n){return}await((t=d.get(n.id))===null||t===void 0?void 0:t.model.highlightPrevious())}});e.commands.addCommand(f.end,{label:s.__("End Search"),isEnabled:()=>!!e.shell.currentWidget&&d.has(e.shell.currentWidget.id),execute:async()=>{var t;const n=e.shell.currentWidget;if(!n){return}(t=d.get(n.id))===null||t===void 0?void 0:t.close()}});if(n){[f.search,f.findNext,f.findPrevious,f.end].forEach((e=>{n.addItem({command:e,category:s.__("Main Area")})}))}return l}};const b=[_,v]},81554:(e,t,n)=>{"use strict";var i=n(32902);var s=n(79536);var o=n(90516);var r=n(38613)},4239:(e,t,n)=>{"use strict";n.r(t);n.d(t,{FOUND_CLASSES:()=>a,GenericSearchProvider:()=>c,HTMLSearchEngine:()=>d,ISearchProviderRegistry:()=>ne,SearchDocumentModel:()=>g,SearchDocumentView:()=>X,SearchProvider:()=>o,SearchProviderRegistry:()=>ee,TextSearchEngine:()=>u});var i=n(85448);var s=n(71372);class o{constructor(e){this.widget=e;this._stateChanged=new s.Signal(this);this._filtersChanged=new s.Signal(this);this._disposed=false}get stateChanged(){return this._stateChanged}get filtersChanged(){return this._filtersChanged}get currentMatchIndex(){return null}get isDisposed(){return this._disposed}get matchesCount(){return null}dispose(){if(this._disposed){return}this._disposed=true;s.Signal.clearData(this)}getInitialQuery(){return""}getFilters(){return{}}static preserveCase(e,t){if(e.toUpperCase()===e){return t.toUpperCase()}if(e.toLowerCase()===e){return t.toLowerCase()}if(r(e)===e){return r(t)}return t}}function r([e="",...t]){return e.toUpperCase()+""+t.join("").toLowerCase()}const a=["cm-string","cm-overlay","cm-searching"];const l=["CodeMirror-selectedtext"];class d{static search(e,t){if(!(t instanceof Node)){console.warn("Unable to search with HTMLSearchEngine the provided object.",t);return Promise.resolve([])}if(!e.global){e=new RegExp(e.source,e.flags+"g")}const n=[];const i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:n=>{let i=n.parentElement;while(i!==t){if(i.nodeName in d.UNSUPPORTED_ELEMENTS){return NodeFilter.FILTER_REJECT}i=i.parentElement}return e.test(n.textContent)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let s=null;while((s=i.nextNode())!==null){e.lastIndex=0;let t=null;while((t=e.exec(s.textContent))!==null){n.push({text:t[0],position:t.index,node:s})}}return Promise.resolve(n)}}d.UNSUPPORTED_ELEMENTS={BASE:true,HEAD:true,LINK:true,META:true,STYLE:true,TITLE:true,BODY:true,AREA:true,AUDIO:true,IMG:true,MAP:true,TRACK:true,VIDEO:true,APPLET:true,EMBED:true,IFRAME:true,NOEMBED:true,OBJECT:true,PARAM:true,PICTURE:true,SOURCE:true,CANVAS:true,NOSCRIPT:true,SCRIPT:true,SVG:true};class c extends o{constructor(){super(...arguments);this.isReadOnly=true;this._matches=[];this._mutationObserver=new MutationObserver(this._onWidgetChanged.bind(this));this._markNodes=new Array}static isApplicable(e){return e instanceof i.Widget}static createNew(e,t,n){return new c(e)}get currentMatchIndex(){return this._currentMatchIndex>=0?this._currentMatchIndex:null}get currentMatch(){var e;return(e=this._matches[this._currentMatchIndex])!==null&&e!==void 0?e:null}get matches(){return this._matches?this._matches.map((e=>Object.assign({},e))):this._matches}get matchesCount(){return this._matches.length}clearHighlight(){if(this._currentMatchIndex>=0){const e=this._markNodes[this._currentMatchIndex];e.classList.remove(...l)}this._currentMatchIndex=-1;return Promise.resolve()}dispose(){if(this.isDisposed){return}this.endQuery().catch((e=>{console.error(`Failed to end search query.`,e)}));super.dispose()}async highlightNext(e){var t;return(t=this._highlightNext(false,e!==null&&e!==void 0?e:true))!==null&&t!==void 0?t:undefined}async highlightPrevious(e){var t;return(t=this._highlightNext(true,e!==null&&e!==void 0?e:true))!==null&&t!==void 0?t:undefined}async replaceCurrentMatch(e,t){return Promise.resolve(false)}async replaceAllMatches(e){return Promise.resolve(false)}async startQuery(e,t={}){await this.endQuery();this._query=e;if(e===null){return Promise.resolve()}const n=await d.search(e,this.widget.node);let i=0;while(i<n.length){let e=n[i].node;let t=e.parentNode;let s=[n[i]];while(++i<n.length&&n[i].node===e){s.unshift(n[i])}const o=s.map((n=>{const i=document.createElement("mark");i.classList.add(...a);i.textContent=n.text;const s=e.splitText(n.position);s.textContent=s.textContent.slice(n.text.length);t.insertBefore(i,s);return i}));for(let n=o.length-1;n>=0;n--){this._markNodes.push(o[n])}}this._mutationObserver.observe(this.widget.node,{attributes:false,characterData:true,childList:true,subtree:true});this._matches=n}async endQuery(){this._mutationObserver.disconnect();this._markNodes.forEach((e=>{const t=e.parentNode;t.replaceChild(document.createTextNode(e.textContent),e);t.normalize()}));this._markNodes=[];this._matches=[];this._currentMatchIndex=-1}_highlightNext(e,t){if(this._matches.length===0){return null}if(this._currentMatchIndex===-1){this._currentMatchIndex=e?this.matches.length-1:0}else{const n=this._markNodes[this._currentMatchIndex];n.classList.remove(...l);this._currentMatchIndex=e?this._currentMatchIndex-1:this._currentMatchIndex+1;if(t&&(this._currentMatchIndex<0||this._currentMatchIndex>=this._matches.length)){this._currentMatchIndex=(this._currentMatchIndex+this._matches.length)%this._matches.length}}if(this._currentMatchIndex>=0&&this._currentMatchIndex<this._matches.length){const t=this._markNodes[this._currentMatchIndex];t.classList.add(...l);if(!h(t)){t.scrollIntoView(e)}t.focus();return this._matches[this._currentMatchIndex]}else{this._currentMatchIndex=-1;return null}}async _onWidgetChanged(e,t){this._currentMatchIndex=-1;await this.startQuery(this._query);this._stateChanged.emit()}}function h(e){const t=e.getBoundingClientRect();return t.top>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.left>=0&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}const u={search(e,t){if(typeof t!=="string"){try{t=JSON.stringify(t)}catch(s){console.warn("Unable to search with TextSearchEngine non-JSON serializable object.",s,t);return Promise.resolve([])}}if(!e.global){e=new RegExp(e.source,e.flags+"g")}const n=new Array;let i=null;while((i=e.exec(t))!==null){n.push({text:i[0],position:i.index})}return Promise.resolve(n)}};var p=n(52435);var m=n(95905);class g extends p.VDomModel{constructor(e,t){super();this.searchProvider=e;this._caseSensitive=false;this._disposed=new s.Signal(this);this._parsingError="";this._preserveCase=false;this._initialQuery="";this._filters={};this._replaceText="";this._searchExpression="";this._useRegex=false;this._wholeWords=false;this._filters={};if(this.searchProvider.getFilters){const e=this.searchProvider.getFilters();for(const t in e){this._filters[t]=e[t].default}}e.stateChanged.connect(this.refresh,this);this._searchDebouncer=new m.Debouncer((()=>{this._updateSearch().catch((e=>{console.error("Failed to update search on document.",e)}))}),t)}get caseSensitive(){return this._caseSensitive}set caseSensitive(e){if(this._caseSensitive!==e){this._caseSensitive=e;this.stateChanged.emit();this.refresh()}}get currentIndex(){return this.searchProvider.currentMatchIndex}get disposed(){return this._disposed}get filters(){return this._filters}get filtersDefinition(){var e,t,n;return(n=(t=(e=this.searchProvider).getFilters)===null||t===void 0?void 0:t.call(e))!==null&&n!==void 0?n:{}}get filtersDefinitionChanged(){return this.searchProvider.filtersChanged||null}get initialQuery(){return this._initialQuery}set initialQuery(e){if(e){this._initialQuery=e}else{this._initialQuery=this._searchExpression}}get suggestedInitialQuery(){return this.searchProvider.getInitialQuery()}get isReadOnly(){return this.searchProvider.isReadOnly}get replaceOptionsSupport(){return this.searchProvider.replaceOptionsSupport}get parsingError(){return this._parsingError}get preserveCase(){return this._preserveCase}set preserveCase(e){if(this._preserveCase!==e){this._preserveCase=e;this.stateChanged.emit();this.refresh()}}get replaceText(){return this._replaceText}set replaceText(e){if(this._replaceText!==e){this._replaceText=e;this.stateChanged.emit()}}get searchExpression(){return this._searchExpression}set searchExpression(e){if(this._searchExpression!==e){this._searchExpression=e;this.stateChanged.emit();this.refresh()}}get totalMatches(){return this.searchProvider.matchesCount}get useRegex(){return this._useRegex}set useRegex(e){if(this._useRegex!==e){this._useRegex=e;this.stateChanged.emit();this.refresh()}}get wholeWords(){return this._wholeWords}set wholeWords(e){if(this._wholeWords!==e){this._wholeWords=e;this.stateChanged.emit();this.refresh()}}dispose(){if(this.isDisposed){return}if(this._searchExpression){this.endQuery().catch((e=>{console.error(`Failed to end query '${this._searchExpression}.`,e)}))}this.searchProvider.stateChanged.disconnect(this.refresh,this);this._searchDebouncer.dispose();super.dispose()}async endQuery(){await this.searchProvider.endQuery();this.stateChanged.emit()}async highlightNext(){await this.searchProvider.highlightNext();this.stateChanged.emit()}async highlightPrevious(){await this.searchProvider.highlightPrevious();this.stateChanged.emit()}refresh(){this._searchDebouncer.invoke().catch((e=>{console.error("Failed to invoke search document debouncer.",e)}))}async replaceAllMatches(){await this.searchProvider.replaceAllMatches(this._replaceText,{preserveCase:this.preserveCase,regularExpression:this.useRegex});this.stateChanged.emit()}async replaceCurrentMatch(){await this.searchProvider.replaceCurrentMatch(this._replaceText,true,{preserveCase:this.preserveCase,regularExpression:this.useRegex});this.stateChanged.emit()}async setFilter(e,t){if(this._filters[e]!==t){if(this.searchProvider.validateFilter){this._filters[e]=await this.searchProvider.validateFilter(e,t);if(this._filters[e]===t){this.stateChanged.emit();this.refresh()}}else{this._filters[e]=t;this.stateChanged.emit();this.refresh()}}}async _updateSearch(){if(this._parsingError){this._parsingError="";this.stateChanged.emit()}try{const e=this.searchExpression?f.parseQuery(this.searchExpression,this.caseSensitive,this.useRegex,this.wholeWords):null;if(e){await this.searchProvider.startQuery(e,this._filters);this.stateChanged.emit()}}catch(e){this._parsingError=e.toString();this.stateChanged.emit();console.error(`Failed to parse expression ${this.searchExpression}`,e)}}}var f;(function(e){function t(e,t,n,i){const s=t?"gm":"gim";let o=n?e:e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");if(i){o="\\b"+o+"\\b"}const r=new RegExp(o,s);if(r.test("")){return null}return r}e.parseQuery=t})(f||(f={}));var v=n(36168);var _=n(90848);var b=n(28416);const y="jp-DocumentSearch-overlay";const w="jp-DocumentSearch-overlay-row";const C="jp-DocumentSearch-input";const x="jp-DocumentSearch-input-wrapper";const S="jp-DocumentSearch-input-button-off";const k="jp-DocumentSearch-input-button-on";const j="jp-DocumentSearch-index-counter";const M="jp-DocumentSearch-up-down-wrapper";const E="jp-DocumentSearch-up-down-button";const I="jp-DocumentSearch-filter-button";const T="jp-DocumentSearch-filter-button-enabled";const D="jp-DocumentSearch-regex-error";const L="jp-DocumentSearch-search-options";const P="jp-DocumentSearch-search-filter-disabled";const A="jp-DocumentSearch-search-filter";const R="jp-DocumentSearch-replace-button";const N="jp-DocumentSearch-replace-button-wrapper";const O="jp-DocumentSearch-replace-wrapper-class";const B="jp-DocumentSearch-replace-toggle";const F="jp-DocumentSearch-toggle-wrapper";const z="jp-DocumentSearch-toggle-placeholder";const H="jp-DocumentSearch-button-content";const W="jp-DocumentSearch-button-wrapper";const V="jp-DocumentSearch-spacer";function U(e){const[t,n]=(0,b.useState)(1);const i=(0,b.useCallback)((t=>{var i;const s=t?t.target:(i=e.inputRef)===null||i===void 0?void 0:i.current;if(s){n(s.value.split(/\n/).length)}}),[]);(0,b.useEffect)((()=>{var t,n;(n=(t=e.inputRef)===null||t===void 0?void 0:t.current)===null||n===void 0?void 0:n.select();i()}),[e.initialValue]);return b.createElement("textarea",{placeholder:e.placeholder,className:C,rows:t,onChange:t=>{e.onChange(t);i(t)},onKeyDown:t=>{e.onKeyDown(t);i(t)},key:e.autoUpdate?e.initialValue:null,tabIndex:0,ref:e.inputRef,title:e.title,defaultValue:e.initialValue,autoFocus:e.autoFocus})}function $(e){var t;const n=((t=e.translator)!==null&&t!==void 0?t:v.nullTranslator).load("jupyterlab");const i=(0,p.classes)(e.caseSensitive?k:S,H);const s=(0,p.classes)(e.useRegex?k:S,H);const o=(0,p.classes)(e.wholeWords?k:S,H);const r=x;return b.createElement("div",{className:r},b.createElement(U,{placeholder:n.__("Find"),onChange:t=>e.onChange(t),onKeyDown:t=>e.onKeydown(t),inputRef:e.inputRef,initialValue:e.initialSearchText,title:n.__("Find"),autoFocus:true,autoUpdate:true}),b.createElement("button",{className:W,onClick:()=>{e.onCaseSensitiveToggled()},tabIndex:0,title:n.__("Match Case")},b.createElement(p.caseSensitiveIcon.react,{className:i,tag:"span"})),b.createElement("button",{className:W,onClick:()=>e.onWordToggled(),tabIndex:0,title:n.__("Match Whole Word")},b.createElement(p.wordIcon.react,{className:o,tag:"span"})),b.createElement("button",{className:W,onClick:()=>e.onRegexToggled(),tabIndex:0,title:n.__("Use Regular Expression")},b.createElement(p.regexIcon.react,{className:s,tag:"span"})))}function q(e){var t,n,i;const s=((t=e.translator)!==null&&t!==void 0?t:v.nullTranslator).load("jupyterlab");const o=(0,p.classes)(e.preserveCase?k:S,H);return b.createElement("div",{className:O},b.createElement("div",{className:x},b.createElement(U,{placeholder:s.__("Replace"),initialValue:(n=e.replaceText)!==null&&n!==void 0?n:"",onKeyDown:t=>e.onReplaceKeydown(t),onChange:t=>e.onChange(t),title:s.__("Replace"),autoFocus:false,autoUpdate:false}),((i=e.replaceOptionsSupport)===null||i===void 0?void 0:i.preserveCase)?b.createElement("button",{className:W,onClick:()=>e.onPreserveCaseToggled(),tabIndex:0,title:s.__("Preserve Case")},b.createElement(p.caseSensitiveIcon.react,{className:o,tag:"span"})):null),b.createElement("button",{className:N,onClick:()=>e.onReplaceCurrent(),tabIndex:0},b.createElement("span",{className:`${R} ${H}`,tabIndex:0},s.__("Replace"))),b.createElement("button",{className:N,tabIndex:0,onClick:()=>e.onReplaceAll()},b.createElement("span",{className:`${R} ${H}`,tabIndex:-1},s.__("Replace All"))))}function K(e){return b.createElement("div",{className:M},b.createElement("button",{className:W,onClick:()=>e.onHighlightPrevious(),tabIndex:0,title:e.trans.__("Previous Match")},b.createElement(p.caretUpEmptyThinIcon.react,{className:(0,p.classes)(E,H),tag:"span"})),b.createElement("button",{className:W,onClick:()=>e.onHighlightNext(),tabIndex:0,title:e.trans.__("Next Match")},b.createElement(p.caretDownEmptyThinIcon.react,{className:(0,p.classes)(E,H),tag:"span"})))}function J(e){return b.createElement("div",{className:j},e.totalMatches===0?"-/-":`${e.currentIndex===null?"-":e.currentIndex+1}/${e.totalMatches}`)}function Z(e){let t=`${I} ${H}`;if(e.visible){t=`${t} ${T}`}const n=e.anyEnabled?p.filterDotIcon:p.filterIcon;return b.createElement("button",{className:W,onClick:()=>e.toggleVisible(),tabIndex:0,title:e.visible?e.trans.__("Hide Search Filters"):e.trans.__("Show Search Filters")},b.createElement(n.react,{className:t,tag:"span",height:"20px",width:"20px"}))}function G(e){return b.createElement("label",{className:e.isEnabled?A:`${A} ${P}`,title:e.description},b.createElement("input",{type:"checkbox",className:"jp-mod-styled",disabled:!e.isEnabled,checked:e.value,onChange:e.onToggle}),e.title)}class Y extends b.Component{constructor(e){super(e);this.translator=e.translator||v.nullTranslator}_onSearchChange(e){const t=e.target.value;this.props.onSearchChanged(t)}_onSearchKeydown(e){if(e.keyCode===13){e.stopPropagation();e.preventDefault();if(e.ctrlKey){const t=e.target;this._insertNewLine(t);this.props.onSearchChanged(t.value)}else{e.shiftKey?this.props.onHighlightPrevious():this.props.onHighlightNext()}}}_onReplaceKeydown(e){if(e.keyCode===13){e.stopPropagation();e.preventDefault();if(e.ctrlKey){this._insertNewLine(e.target)}else{this.props.onReplaceCurrent()}}}_insertNewLine(e){const[t,n]=[e.selectionStart,e.selectionEnd];e.setRangeText("\n",t,n,"end")}_onClose(){this.props.onClose()}_onReplaceToggled(){if(!this.props.replaceEntryVisible){for(const e in this.props.filtersDefinition){const t=this.props.filtersDefinition[e];if(!t.supportReplace){this.props.onFilterChanged(e,false).catch((e=>{console.error(`Fail to update filter value for ${t.title}:\n${e}`)}))}}}this.props.onReplaceEntryShown(!this.props.replaceEntryVisible)}_toggleFiltersVisibility(){this.props.onFiltersVisibilityChanged(!this.props.filtersVisible)}render(){var e;const t=this.translator.load("jupyterlab");const n=!this.props.isReadOnly&&this.props.replaceEntryVisible;const i=this.props.filtersDefinition;const s=Object.keys(i).length>0;const o=s?b.createElement(Z,{visible:this.props.filtersVisible,anyEnabled:Object.keys(i).some((e=>{var t;const n=i[e];return(t=this.props.filters[e])!==null&&t!==void 0?t:n.default})),toggleVisible:()=>this._toggleFiltersVisibility(),trans:t}):null;const r=s?b.createElement("div",{className:L},Object.keys(i).map((e=>{var t;const s=i[e];return b.createElement(G,{key:e,title:s.title,description:s.description,isEnabled:!n||s.supportReplace,onToggle:async()=>{await this.props.onFilterChanged(e,!this.props.filters[e])},value:(t=this.props.filters[e])!==null&&t!==void 0?t:s.default})}))):null;const a=this.props.replaceEntryVisible?p.caretDownIcon:p.caretRightIcon;return b.createElement(b.Fragment,null,b.createElement("div",{className:w},this.props.isReadOnly?b.createElement("div",{className:z}):b.createElement("button",{className:F,onClick:()=>this._onReplaceToggled(),tabIndex:0,title:t.__("Toggle Replace")},b.createElement(a.react,{className:`${B} ${H}`,tag:"span",elementPosition:"center",height:"20px",width:"20px"})),b.createElement($,{inputRef:this.props.searchInputRef,useRegex:this.props.useRegex,caseSensitive:this.props.caseSensitive,wholeWords:this.props.wholeWords,onCaseSensitiveToggled:this.props.onCaseSensitiveToggled,onRegexToggled:this.props.onRegexToggled,onWordToggled:this.props.onWordToggled,onKeydown:e=>this._onSearchKeydown(e),onChange:e=>this._onSearchChange(e),initialSearchText:this.props.initialSearchText,translator:this.translator}),o,b.createElement(J,{currentIndex:this.props.currentIndex,totalMatches:(e=this.props.totalMatches)!==null&&e!==void 0?e:0}),b.createElement(K,{onHighlightPrevious:()=>{this.props.onHighlightPrevious()},onHighlightNext:()=>{this.props.onHighlightNext()},trans:t}),b.createElement("button",{className:W,onClick:()=>this._onClose(),tabIndex:0},b.createElement(p.closeIcon.react,{className:"jp-icon-hover",elementPosition:"center",height:"16px",width:"16px"}))),b.createElement("div",{className:w},n?b.createElement(b.Fragment,null,b.createElement(q,{onPreserveCaseToggled:this.props.onPreserveCaseToggled,onReplaceKeydown:e=>this._onReplaceKeydown(e),onChange:e=>this.props.onReplaceChanged(e.target.value),onReplaceCurrent:()=>this.props.onReplaceCurrent(),onReplaceAll:()=>this.props.onReplaceAll(),replaceOptionsSupport:this.props.replaceOptionsSupport,replaceText:this.props.replaceText,preserveCase:this.props.preserveCase,translator:this.translator}),b.createElement("div",{className:V})):null),this.props.filtersVisible?r:null,!!this.props.errorMessage&&b.createElement("div",{className:D},this.props.errorMessage))}}class X extends p.VDomRenderer{constructor(e,t){super(e);this.translator=t;this._showReplace=false;this._showFilters=false;this._closed=new s.Signal(this);this.addClass(y);this._searchInput=b.createRef()}get closed(){return this._closed}focusSearchInput(){var e;(e=this._searchInput.current)===null||e===void 0?void 0:e.select()}setSearchText(e){this.model.initialQuery=e;if(e){this.model.searchExpression=e}}setReplaceText(e){this.model.replaceText=e}showReplace(){this.setReplaceInputVisibility(true)}onCloseRequest(e){super.onCloseRequest(e);this._closed.emit();void this.model.endQuery()}setReplaceInputVisibility(e){if(this._showReplace!==e){this._showReplace=e;this.update()}}setFiltersVisibility(e){if(this._showFilters!==e){this._showFilters=e;this.update()}}render(){return this.model.filtersDefinitionChanged?b.createElement(_.UseSignal,{signal:this.model.filtersDefinitionChanged},(()=>this._renderOverlay())):this._renderOverlay()}_renderOverlay(){return b.createElement(Y,{caseSensitive:this.model.caseSensitive,currentIndex:this.model.currentIndex,isReadOnly:this.model.isReadOnly,errorMessage:this.model.parsingError,filters:this.model.filters,filtersDefinition:this.model.filtersDefinition,preserveCase:this.model.preserveCase,replaceEntryVisible:this._showReplace,filtersVisible:this._showFilters,replaceOptionsSupport:this.model.replaceOptionsSupport,replaceText:this.model.replaceText,initialSearchText:this.model.initialQuery,searchInputRef:this._searchInput,totalMatches:this.model.totalMatches,translator:this.translator,useRegex:this.model.useRegex,wholeWords:this.model.wholeWords,onCaseSensitiveToggled:()=>{this.model.caseSensitive=!this.model.caseSensitive},onRegexToggled:()=>{this.model.useRegex=!this.model.useRegex},onWordToggled:()=>{this.model.wholeWords=!this.model.wholeWords},onFilterChanged:async(e,t)=>{await this.model.setFilter(e,t)},onFiltersVisibilityChanged:e=>{this.setFiltersVisibility(e)},onHighlightNext:()=>{void this.model.highlightNext()},onHighlightPrevious:()=>{void this.model.highlightPrevious()},onPreserveCaseToggled:()=>{this.model.preserveCase=!this.model.preserveCase},onSearchChanged:e=>{this.model.searchExpression=e},onClose:()=>{this.close()},onReplaceEntryShown:e=>{this.setReplaceInputVisibility(e)},onReplaceChanged:e=>{this.model.replaceText=e},onReplaceCurrent:()=>{void this.model.replaceCurrentMatch()},onReplaceAll:()=>{void this.model.replaceAllMatches()}})}}var Q=n(26512);class ee{constructor(e=v.nullTranslator){this.translator=e;this._changed=new s.Signal(this);this._providerMap=new Map}add(e,t){this._providerMap.set(e,t);this._changed.emit();return new Q.DisposableDelegate((()=>{this._providerMap.delete(e);this._changed.emit()}))}getProvider(e){for(const t of this._providerMap.values()){if(t.isApplicable(e)){return t.createNew(e,this.translator)}}return undefined}hasProvider(e){for(const t of this._providerMap.values()){if(t.isApplicable(e)){return true}}return false}get changed(){return this._changed}}var te=n(5596);const ne=new te.Token("@jupyterlab/documentsearch:ISearchProviderRegistry",`A service for a registry of search\n  providers for the application. Plugins can register their UI elements with this registry\n  to provide find/replace support.`)},38613:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(93379);var a=n.n(r);var l=n(7795);var d=n.n(l);var c=n(90569);var h=n.n(c);var u=n(3565);var p=n.n(u);var m=n(19216);var g=n.n(m);var f=n(44589);var v=n.n(f);var _=n(52215);var b={};b.styleTagTransform=v();b.setAttributes=p();b.insert=h().bind(null,"head");b.domAPI=d();b.insertStyleElement=g();var y=a()(_.Z,b);const w=_.Z&&_.Z.locals?_.Z.locals:undefined},32601:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>_});var i=n(44906);var s=n.n(i);var o=n(90848);var r=n.n(o);var a=n(46946);var l=n.n(a);var d=n(51997);var c=n.n(d);var h=n(36168);var u=n.n(h);var p=n(52435);var m=n.n(p);const g="@jupyterlab/extensionmanager-extension:plugin";var f;(function(e){e.showPanel="extensionmanager:show-panel";e.toggle="extensionmanager:toggle"})(f||(f={}));const v={id:g,description:"Adds the extension manager plugin.",autoStart:true,requires:[d.ISettingRegistry],optional:[h.ITranslator,i.ILayoutRestorer,o.ICommandPalette],activate:async(e,t,n,i,s)=>{const{commands:o,shell:r,serviceManager:l}=e;n=n!==null&&n!==void 0?n:h.nullTranslator;const d=n.load("jupyterlab");const c=new a.ListModel(l,n);const u=()=>{const e=new a.ExtensionsPanel({model:c,translator:n});e.id="extensionmanager.main-view";e.title.icon=p.extensionIcon;e.title.caption=d.__("Extension Manager");e.node.setAttribute("role","region");e.node.setAttribute("aria-label",d.__("Extension Manager section"));if(i){i.add(e,e.id)}r.add(e,"left",{rank:1e3});return e};let m=u();Promise.all([e.restored,t.load(g)]).then((([,t])=>{c.isDisclaimed=t.get("disclaimed").composite;c.isEnabled=t.get("enabled").composite;c.stateChanged.connect((()=>{if(c.isDisclaimed!==t.get("disclaimed").composite){t.set("disclaimed",c.isDisclaimed).catch((e=>{console.error(`Failed to set setting 'disclaimed'.\n${e}`)}))}if(c.isEnabled!==t.get("enabled").composite){t.set("enabled",c.isEnabled).catch((e=>{console.error(`Failed to set setting 'enabled'.\n${e}`)}))}}));if(c.isEnabled){m=m!==null&&m!==void 0?m:u()}else{m===null||m===void 0?void 0:m.dispose();m=null}t.changed.connect((async()=>{c.isDisclaimed=t.get("disclaimed").composite;c.isEnabled=t.get("enabled").composite;e.commands.notifyCommandChanged(f.toggle);if(c.isEnabled){if(m===null||!m.isAttached){const e=await b.showWarning(d);if(!e){void t.set("enabled",false);return}}m=m!==null&&m!==void 0?m:u()}else{m===null||m===void 0?void 0:m.dispose();m=null}}))})).catch((e=>{console.error(`Something went wrong when reading the settings.\n${e}`)}));o.addCommand(f.showPanel,{label:d.__("Extension Manager"),execute:()=>{if(m){r.activateById(m.id)}},isVisible:()=>c.isEnabled});o.addCommand(f.toggle,{label:d.__("Enable Extension Manager"),execute:()=>{if(t){void t.set(v.id,"enabled",!c.isEnabled)}},isToggled:()=>c.isEnabled});if(s){s.addItem({command:f.toggle,category:d.__("Extension Manager")})}}};const _=v;var b;(function(e){async function t(e){const t=await(0,o.showDialog)({title:e.__("Enable Extension Manager?"),body:e.__(`Thanks for trying out JupyterLab's extension manager.\nThe JupyterLab development team is excited to have a robust\nthird-party extension community.\nHowever, we cannot vouch for every extension,\nand some may introduce security risks.\nDo you want to continue?`),buttons:[o.Dialog.cancelButton({label:e.__("Disable")}),o.Dialog.warnButton({label:e.__("Enable")})]});return t.button.accept}e.showWarning=t})(b||(b={}))},67014:(e,t,n)=>{"use strict";var i=n(34849);var s=n(79536);var o=n(90516);var r=n(32902);var a=n(93379);var l=n.n(a);var d=n(7795);var c=n.n(d);var h=n(90569);var u=n.n(h);var p=n(3565);var m=n.n(p);var g=n(19216);var f=n.n(g);var v=n(44589);var _=n.n(v);var b=n(11988);var y={};y.styleTagTransform=_();y.setAttributes=m();y.insert=u().bind(null,"head");y.domAPI=c();y.insertStyleElement=f();var w=l()(b.Z,y);const C=b.Z&&b.Z.locals?b.Z.locals:undefined},83127:(e,t,n)=>{"use strict";n.r(t);n.d(t,{ExtensionsPanel:()=>M,ListModel:()=>p});var i=n(90848);var s=n(22873);var o=n(74513);var r=n(36168);var a=n(52435);var l=n(95905);var d=n(81249);var c=n(28416);function h(e,t,n){n=n||r.nullTranslator;const s=n.load("jupyterlab");const o=[];o.push(c.createElement("p",null,s.__(`An error occurred installing "${e}".`)));if(t){o.push(c.createElement("p",null,c.createElement("span",{className:"jp-extensionmanager-dialog-subheader"},s.__("Error message:"))),c.createElement("pre",null,t.trim()))}const a=c.createElement("div",{className:"jp-extensionmanager-dialog"},o);void(0,i.showDialog)({title:s.__("Extension Installation Error"),body:a,buttons:[i.Dialog.warnButton({label:s.__("Ok")})]})}const u="lab/api/extensions";class p extends a.VDomModel{constructor(e,t){super();this.actionError=null;this.installedError=null;this.searchError=null;this.promptReload=false;this._isDisclaimed=false;this._isEnabled=false;this._isLoadingInstalledExtensions=false;this._isSearching=false;this._query="";this._page=1;this._pagination=30;this._lastPage=1;this._pendingActions=[];const n=JSON.parse(s.PageConfig.getOption("extensionManager")||"{}");this.name=n.name;this.canInstall=n.can_install;this.installPath=n.install_path;this.translator=t||r.nullTranslator;this._installed=[];this._lastSearchResult=[];this.serviceManager=e;this._debouncedSearch=new l.Debouncer(this.search.bind(this),1e3)}get installed(){return this._installed}get isDisclaimed(){return this._isDisclaimed}set isDisclaimed(e){if(e!==this._isDisclaimed){this._isDisclaimed=e;this.stateChanged.emit();void this._debouncedSearch.invoke()}}get isEnabled(){return this._isEnabled}set isEnabled(e){if(e!==this._isEnabled){this._isEnabled=e;this.stateChanged.emit()}}get isLoadingInstalledExtensions(){return this._isLoadingInstalledExtensions}get isSearching(){return this._isSearching}get searchResult(){return this._lastSearchResult}get query(){return this._query}set query(e){if(this._query!==e){this._query=e;this._page=1;void this._debouncedSearch.invoke()}}get page(){return this._page}set page(e){if(this._page!==e){this._page=e;void this._debouncedSearch.invoke()}}get pagination(){return this._pagination}set pagination(e){if(this._pagination!==e){this._pagination=e;void this._debouncedSearch.invoke()}}get lastPage(){return this._lastPage}dispose(){if(this.isDisposed){return}this._debouncedSearch.dispose();super.dispose()}hasPendingActions(){return this._pendingActions.length>0}async install(e){await this.performAction("install",e).then((t=>{if(t.status!=="ok"){h(e.name,t.message,this.translator)}return this.update(true)}))}async uninstall(e){if(!e.installed){throw new Error(`Not installed, cannot uninstall: ${e.name}`)}await this.performAction("uninstall",e);return this.update(true)}async enable(e){if(e.enabled){throw new Error(`Already enabled: ${e.name}`)}await this.performAction("enable",e);await this.refreshInstalled(true)}async disable(e){if(!e.enabled){throw new Error(`Already disabled: ${e.name}`)}await this.performAction("disable",e);await this.refreshInstalled(true)}async refreshInstalled(e=false){this.installedError=null;this._isLoadingInstalledExtensions=true;this.stateChanged.emit();try{const[t]=await m.requestAPI({refresh:e?1:0});this._installed=t.sort(m.comparator)}catch(t){this.installedError=t.toString()}finally{this._isLoadingInstalledExtensions=false;this.stateChanged.emit()}}async search(e=false){var t,n;if(!this.isDisclaimed){return Promise.reject("Installation warning is not disclaimed.")}this.searchError=null;this._isSearching=true;this.stateChanged.emit();try{const[i,o]=await m.requestAPI({query:(t=this.query)!==null&&t!==void 0?t:"",page:this.page,per_page:this.pagination,refresh:e?1:0});const r=o["last"];if(r){const e=s.URLExt.queryStringToObject((n=s.URLExt.parse(r).search)!==null&&n!==void 0?n:"")["page"];if(e){this._lastPage=parseInt(e,10)}}const a=this._installed.map((e=>e.name));this._lastSearchResult=i.filter((e=>!a.includes(e.name))).sort(m.comparator)}catch(i){this.searchError=i.toString()}finally{this._isSearching=false;this.stateChanged.emit()}}async update(e=false){if(this.isDisclaimed){await this.refreshInstalled(e);await this.search()}}performAction(e,t){const n=m.requestAPI({},{method:"POST",body:JSON.stringify({cmd:e,extension_name:t.name})});n.then((([e])=>{const t=this.translator.load("jupyterlab");if(e.needs_restart.includes("server")){void(0,i.showDialog)({title:t.__("Information"),body:t.__("You will need to restart JupyterLab to apply the changes."),buttons:[i.Dialog.okButton({label:t.__("Ok")})]})}else{const n=[];if(e.needs_restart.includes("frontend")){n.push(window.isElectron?t.__("reload JupyterLab"):t.__("refresh the web page"))}if(e.needs_restart.includes("kernel")){n.push(t.__("install the extension in all kernels and restart them"))}void(0,i.showDialog)({title:t.__("Information"),body:t.__("You will need to %1 to apply the changes.",n.join(t.__(" and "))),buttons:[i.Dialog.okButton({label:t.__("Ok")})]})}this.actionError=null}),(e=>{this.actionError=e.toString()}));this.addPendingAction(n);return n.then((([e])=>e))}addPendingAction(e){this._pendingActions.push(e);const t=()=>{const t=this._pendingActions.indexOf(e);this._pendingActions.splice(t,1);this.stateChanged.emit(undefined)};e.then(t,t);this.stateChanged.emit(undefined)}}(function(e){function t(e){if(!e.installed||!e.latest_version){return false}return d.lt(e.installed_version,e.latest_version)}e.entryHasUpdate=t})(p||(p={}));var m;(function(e){function t(e,t){if(e.name===t.name){return 0}else{return e.name>t.name?1:-1}}e.comparator=t;const n=/<([^>]+)>; rel="([^"]+)",?/g;async function i(e={},t={}){var i;const r=o.ServerConnection.makeSettings();const a=s.URLExt.join(r.baseUrl,u);let l;try{l=await o.ServerConnection.makeRequest(a+s.URLExt.objectToQueryString(e),t,r)}catch(m){throw new o.ServerConnection.NetworkError(m)}let d=await l.text();if(d.length>0){try{d=JSON.parse(d)}catch(m){console.log("Not a JSON response body.",l)}}if(!l.ok){throw new o.ServerConnection.ResponseError(l,d.message||d)}const c=(i=l.headers.get("Link"))!==null&&i!==void 0?i:"";const h={};let p=null;while((p=n.exec(c))!==null){h[p[2]]=p[1]}return[d,h]}e.requestAPI=i})(m||(m={}));var g=n(11358);var f=n.n(g);const v=32;const _=Math.floor(devicePixelRatio*v);function b(e){if(e.homepage_url&&e.homepage_url.startsWith("https://github.com/")){return e.homepage_url.split("/")[3]}else if(e.repository_url&&e.repository_url.startsWith("https://github.com/")){return e.repository_url.split("/")[3]}return null}function y(e){const{canFetch:t,entry:n,supportInstallation:i,trans:s}=e;const o=[];if(n.status&&["ok","warning","error"].indexOf(n.status)!==-1){o.push(`jp-extensionmanager-entry-${n.status}`)}const r=t?b(n):null;if(!n.allowed){o.push(`jp-extensionmanager-entry-should-be-uninstalled`)}return c.createElement("li",{className:`jp-extensionmanager-entry ${o.join(" ")}`,style:{display:"flex"}},c.createElement("div",{style:{marginRight:"8px"}},r?c.createElement("img",{src:`https://github.com/${r}.png?size=${_}`,style:{width:"32px",height:"32px"}}):c.createElement("div",{style:{width:`${v}px`,height:`${v}px`}})),c.createElement("div",{className:"jp-extensionmanager-entry-description"},c.createElement("div",{className:"jp-extensionmanager-entry-title"},c.createElement("div",{className:"jp-extensionmanager-entry-name"},n.homepage_url?c.createElement("a",{href:n.homepage_url,target:"_blank",rel:"noopener noreferrer",title:s.__("%1 extension home page",n.name)},n.name):c.createElement("div",null,n.name)),c.createElement("div",{className:"jp-extensionmanager-entry-version"},c.createElement("div",{title:s.__("Version: %1",n.installed_version)},n.installed_version)),n.installed&&!n.allowed&&c.createElement(a.ToolbarButtonComponent,{icon:a.infoIcon,iconLabel:s.__("%1 extension is not allowed anymore. Please uninstall it immediately or contact your administrator.",n.name),onClick:()=>window.open("https://jupyterlab.readthedocs.io/en/stable/user/extensions.html")}),n.approved&&c.createElement(a.jupyterIcon.react,{className:"jp-extensionmanager-is-approved",top:"1px",height:"auto",width:"1em",title:s.__("This extension is approved by your security team.")})),c.createElement("div",{className:"jp-extensionmanager-entry-content"},c.createElement("div",{className:"jp-extensionmanager-entry-description"},n.description),e.performAction&&c.createElement("div",{className:"jp-extensionmanager-entry-buttons"},n.installed?c.createElement(c.Fragment,null,i&&c.createElement(c.Fragment,null,p.entryHasUpdate(n)&&c.createElement(a.Button,{onClick:()=>e.performAction("install",n),title:s.__('Update "%1" to "%2"',n.name,n.latest_version),minimal:true,small:true},s.__("Update to %1",n.latest_version)),c.createElement(a.Button,{onClick:()=>e.performAction("uninstall",n),title:s.__('Uninstall "%1"',n.name),minimal:true,small:true},s.__("Uninstall"))),n.enabled?c.createElement(a.Button,{onClick:()=>e.performAction("disable",n),title:s.__('Disable "%1"',n.name),minimal:true,small:true},s.__("Disable")):c.createElement(a.Button,{onClick:()=>e.performAction("enable",n),title:s.__('Enable "%1"',n.name),minimal:true,small:true},s.__("Enable"))):i&&c.createElement(a.Button,{onClick:()=>e.performAction("install",n),title:s.__('Install "%1"',n.name),minimal:true,small:true},s.__("Install"))))))}function w(e){var t;const{canFetch:n,performAction:i,supportInstallation:s,trans:o}=e;return c.createElement("div",{className:"jp-extensionmanager-listview-wrapper"},e.entries.length>0?c.createElement("ul",{className:"jp-extensionmanager-listview"},e.entries.map((e=>c.createElement(y,{key:e.name,canFetch:n,entry:e,performAction:i,supportInstallation:s,trans:o})))):c.createElement("div",{key:"message",className:"jp-extensionmanager-listview-message"},o.__("No entries")),e.numPages>1&&c.createElement("div",{className:"jp-extensionmanager-pagination"},c.createElement(f(),{previousLabel:"<",nextLabel:">",breakLabel:"...",breakClassName:"break",initialPage:((t=e.initialPage)!==null&&t!==void 0?t:1)-1,pageCount:e.numPages,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:t=>e.onPage(t.selected+1),activeClassName:"active"})))}function C(e){return c.createElement("div",{className:"jp-extensionmanager-error"},e.children)}class x extends a.ReactWidget{constructor(e,t,n){super();this.model=e;this.trans=t;this.searchInputRef=n;e.stateChanged.connect(this.update,this);this.addClass("jp-extensionmanager-header")}render(){return c.createElement(c.Fragment,null,c.createElement("div",{className:"jp-extensionmanager-title"},c.createElement("span",null,this.trans.__("%1 Manager",this.model.name)),this.model.installPath&&c.createElement(a.infoIcon.react,{className:"jp-extensionmanager-path",tag:"span",title:this.trans.__("Extension installation path: %1",this.model.installPath)})),c.createElement(a.FilterBox,{placeholder:this.trans.__("Search"),disabled:!this.model.isDisclaimed,updateFilter:(e,t)=>{this.model.query=t!==null&&t!==void 0?t:""},useFuzzyFilter:false,inputRef:this.searchInputRef}),c.createElement("div",{className:`jp-extensionmanager-pending ${this.model.hasPendingActions()?"jp-mod-hasPending":""}`}),this.model.actionError&&c.createElement(C,null,c.createElement("p",null,this.trans.__("Error when performing an action.")),c.createElement("p",null,this.trans.__("Reason given:")),c.createElement("pre",null,this.model.actionError)))}}class S extends a.ReactWidget{constructor(e,t){super();this.model=e;this.trans=t;this.addClass("jp-extensionmanager-disclaimer");e.stateChanged.connect(this.update,this)}render(){return c.createElement(c.Fragment,null,c.createElement("p",null,this.trans.__(`The JupyterLab development team is excited to have a robust\nthird-party extension community. However, we do not review\nthird-party extensions, and some extensions may introduce security\nrisks or contain malicious code that runs on your machine. Moreover in order\nto work, this panel needs to fetch data from web services. Do you agree to\nactivate this feature?`),c.createElement("br",null),c.createElement("a",{href:"https://jupyterlab.readthedocs.io/en/stable/privacy_policies.html",target:"_blank",rel:"noreferrer"},this.trans.__("Please read the privacy policy."))),this.model.isDisclaimed?c.createElement(a.Button,{className:"jp-extensionmanager-disclaimer-disable",onClick:e=>{this.model.isDisclaimed=false},title:this.trans.__("This will withdraw your consent.")},this.trans.__("No")):c.createElement("div",null,c.createElement(a.Button,{className:"jp-extensionmanager-disclaimer-enable",onClick:()=>{this.model.isDisclaimed=true}},this.trans.__("Yes")),c.createElement(a.Button,{className:"jp-extensionmanager-disclaimer-disable",onClick:()=>{this.model.isEnabled=false},title:this.trans.__("This will disable the extension manager panel; including the listing of installed extension.")},this.trans.__("No, disable"))))}}class k extends a.ReactWidget{constructor(e,t){super();this.model=e;this.trans=t;e.stateChanged.connect(this.update,this)}render(){return c.createElement(c.Fragment,null,this.model.installedError!==null?c.createElement(C,null,`Error querying installed extensions${this.model.installedError?`: ${this.model.installedError}`:"."}`):this.model.isLoadingInstalledExtensions?c.createElement("div",{className:"jp-extensionmanager-loader"},this.trans.__("Updating extensions list")):c.createElement(w,{canFetch:this.model.isDisclaimed,entries:this.model.installed.filter((e=>new RegExp(this.model.query.toLowerCase()).test(e.name))),numPages:1,trans:this.trans,onPage:e=>{},performAction:this.model.isDisclaimed?this.onAction.bind(this):null,supportInstallation:this.model.canInstall&&this.model.isDisclaimed}))}onAction(e,t){switch(e){case"install":return this.model.install(t);case"uninstall":return this.model.uninstall(t);case"enable":return this.model.enable(t);case"disable":return this.model.disable(t);default:throw new Error(`Invalid action: ${e}`)}}}class j extends a.ReactWidget{constructor(e,t){super();this.model=e;this.trans=t;e.stateChanged.connect(this.update,this)}onPage(e){this.model.page=e}onAction(e,t){switch(e){case"install":return this.model.install(t);case"uninstall":return this.model.uninstall(t);case"enable":return this.model.enable(t);case"disable":return this.model.disable(t);default:throw new Error(`Invalid action: ${e}`)}}render(){return c.createElement(c.Fragment,null,this.model.searchError!==null?c.createElement(C,null,`Error searching for extensions${this.model.searchError?`: ${this.model.searchError}`:"."}`):this.model.isSearching?c.createElement("div",{className:"jp-extensionmanager-loader"},this.trans.__("Updating extensions list")):c.createElement(w,{canFetch:this.model.isDisclaimed,entries:this.model.searchResult,initialPage:this.model.page,numPages:this.model.lastPage,onPage:e=>{this.onPage(e)},performAction:this.model.isDisclaimed?this.onAction.bind(this):null,supportInstallation:this.model.canInstall&&this.model.isDisclaimed,trans:this.trans}))}update(){this.title.label=this.model.query?this.trans.__("Search Results"):this.trans.__("Discover");super.update()}}class M extends a.SidePanel{constructor(e){const{model:t,translator:n}=e;super({translator:n});this._wasInitialized=false;this._wasDisclaimed=true;this.model=t;this._searchInputRef=c.createRef();this.addClass("jp-extensionmanager-view");this.trans=n.load("jupyterlab");this.header.addWidget(new x(t,this.trans,this._searchInputRef));const i=new S(t,this.trans);i.title.label=this.trans.__("Warning");this.addWidget(i);const s=new a.PanelWithToolbar;s.addClass("jp-extensionmanager-installedlist");s.title.label=this.trans.__("Installed");s.toolbar.addItem("refresh",new a.ToolbarButton({icon:a.refreshIcon,onClick:()=>{t.refreshInstalled(true).catch((e=>{console.error(`Failed to refresh the installed extensions list:\n${e}`)}))},tooltip:this.trans.__("Refresh extensions list")}));s.addWidget(new k(t,this.trans));this.addWidget(s);if(this.model.canInstall){const e=new j(t,this.trans);e.addClass("jp-extensionmanager-searchresults");this.addWidget(e)}this._wasDisclaimed=this.model.isDisclaimed;if(this.model.isDisclaimed){this.content.collapse(0);this.content.layout.setRelativeSizes([0,1,1])}else{this.content.expand(0);this.content.collapse(1);this.content.collapse(2)}this.model.stateChanged.connect(this._onStateChanged,this)}dispose(){if(this.isDisposed){return}this.model.stateChanged.disconnect(this._onStateChanged,this);super.dispose()}handleEvent(e){switch(e.type){case"focus":case"blur":this._toggleFocused();break;default:break}}onBeforeAttach(e){this.node.addEventListener("focus",this,true);this.node.addEventListener("blur",this,true);super.onBeforeAttach(e)}onBeforeShow(e){if(!this._wasInitialized){this._wasInitialized=true;this.model.refreshInstalled().catch((e=>{console.log(`Failed to refresh installed extension list:\n${e}`)}))}}onAfterDetach(e){super.onAfterDetach(e);this.node.removeEventListener("focus",this,true);this.node.removeEventListener("blur",this,true)}onActivateRequest(e){if(this.isAttached){const e=this._searchInputRef.current;if(e){e.focus();e.select()}}super.onActivateRequest(e)}_onStateChanged(){if(!this._wasDisclaimed&&this.model.isDisclaimed){this.content.collapse(0);this.content.expand(1);this.content.expand(2)}this._wasDisclaimed=this.model.isDisclaimed}_toggleFocused(){const e=document.activeElement===this._searchInputRef.current;this.toggleClass("lm-mod-focused",e)}}},90053:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>U,fileUploadStatus:()=>z});var i=n(44906);var s=n.n(i);var o=n(90848);var r=n.n(o);var a=n(22873);var l=n.n(a);var d=n(1071);var c=n.n(d);var h=n(30796);var u=n.n(h);var p=n(51997);var m=n.n(p);var g=n(9682);var f=n.n(g);var v=n(88478);var _=n.n(v);var b=n(36168);var y=n.n(b);var w=n(52435);var C=n.n(w);var x=n(58740);var S=n.n(x);var k=n(6682);var j=n.n(k);const M="FileBrowser";const E="@jupyterlab/filebrowser-extension:browser";const I="jp-FileBrowser-filterBox";var T;(function(e){e.copy="filebrowser:copy";e.copyDownloadLink="filebrowser:copy-download-link";e.cut="filebrowser:cut";e.del="filebrowser:delete";e.download="filebrowser:download";e.duplicate="filebrowser:duplicate";e.hideBrowser="filebrowser:hide-main";e.goToPath="filebrowser:go-to-path";e.goUp="filebrowser:go-up";e.openPath="filebrowser:open-path";e.openUrl="filebrowser:open-url";e.open="filebrowser:open";e.openBrowserTab="filebrowser:open-browser-tab";e.paste="filebrowser:paste";e.createNewDirectory="filebrowser:create-new-directory";e.createNewFile="filebrowser:create-new-file";e.createNewMarkdownFile="filebrowser:create-new-markdown-file";e.refresh="filebrowser:refresh";e.rename="filebrowser:rename";e.copyShareableLink="filebrowser:share-main";e.copyPath="filebrowser:copy-path";e.showBrowser="filebrowser:activate";e.shutdown="filebrowser:shutdown";e.toggleBrowser="filebrowser:toggle-main";e.toggleNavigateToCurrentDirectory="filebrowser:toggle-navigate-to-current-directory";e.toggleLastModified="filebrowser:toggle-last-modified";e.toggleFileSize="filebrowser:toggle-file-size";e.toggleSortNotebooksFirst="filebrowser:toggle-sort-notebooks-first";e.search="filebrowser:search";e.toggleHiddenFiles="filebrowser:toggle-hidden-files";e.toggleFileCheckboxes="filebrowser:toggle-file-checkboxes"})(T||(T={}));const D="filebrowser";const L={id:E,description:"Set up the default file browser (commands, settings,...).",requires:[h.IDefaultFileBrowser,h.IFileBrowserFactory,b.ITranslator],optional:[i.ILayoutRestorer,p.ISettingRegistry,i.ITreePathUpdater,o.ICommandPalette],provides:h.IFileBrowserCommands,autoStart:true,activate:async(e,t,n,i,s,o,r,l)=>{const d=t;if(s){s.add(d,D)}const c=a.PageConfig.getOption("preferredPath");if(c){await d.model.cd(c)}W(e,d,n,i,o,l);return void Promise.all([e.restored,d.model.restored]).then((()=>{if(r){d.model.pathChanged.connect(((e,t)=>{r(t.newValue)}))}if(o){void o.load(E).then((e=>{const t={navigateToCurrentDirectory:false,showLastModifiedColumn:true,showFileSizeColumn:false,showHiddenFiles:false,showFileCheckboxes:false,sortNotebooksFirst:false};const n={filterDirectories:true};function i(e){let i;for(i in t){const n=e.get(i).composite;t[i]=n;d[i]=n}const s=e.get("filterDirectories").composite;n.filterDirectories=s;d.model.filterDirectories=s}e.changed.connect(i);i(e)}))}}))}};const P={id:"@jupyterlab/filebrowser-extension:factory",description:"Provides the file browser factory.",provides:h.IFileBrowserFactory,requires:[d.IDocumentManager,b.ITranslator],optional:[g.IStateDB,i.JupyterLab.IInfo],activate:async(e,t,n,i,s)=>{const r=new o.WidgetTracker({namespace:D});const a=(e,o={})=>{var a;const l=new h.FilterFileBrowserModel({translator:n,auto:(a=o.auto)!==null&&a!==void 0?a:true,manager:t,driveName:o.driveName||"",refreshInterval:o.refreshInterval,refreshStandby:()=>{if(s){return!s.isConnected||"when-hidden"}return"when-hidden"},state:o.state===null?undefined:o.state||i||undefined});const d=o.restore;const c=new h.FileBrowser({id:e,model:l,restore:d,translator:n});void r.add(c);return c};return{createFileBrowser:a,tracker:r}}};const A={id:"@jupyterlab/filebrowser-extension:default-file-browser",description:"Provides the default file browser",provides:h.IDefaultFileBrowser,requires:[h.IFileBrowserFactory],optional:[i.IRouter,i.JupyterFrontEnd.ITreeResolver,i.ILabShell],activate:async(e,t,n,i,s)=>{const{commands:o}=e;const r=t.createFileBrowser("filebrowser",{auto:false,restore:false});void $.restoreBrowser(r,o,n,i,e,s);return r}};const R={id:"@jupyterlab/filebrowser-extension:download",description:"Adds the download file commands. Disabling this plugin will NOT disable downloading files from the server, if the user enters the appropriate download URLs.",requires:[h.IFileBrowserFactory,b.ITranslator],autoStart:true,activate:(e,t,n)=>{const i=n.load("jupyterlab");const{commands:s}=e;const{tracker:r}=t;s.addCommand(T.download,{execute:()=>{const e=r.currentWidget;if(e){return e.download()}},icon:w.downloadIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Download")});s.addCommand(T.copyDownloadLink,{execute:()=>{const e=r.currentWidget;if(!e){return}return e.model.manager.services.contents.getDownloadUrl(e.selectedItems().next().value.path).then((e=>{o.Clipboard.copyToSystem(e)}))},isVisible:()=>!!r.currentWidget&&Array.from(r.currentWidget.selectedItems()).length===1,icon:w.copyIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Copy Download Link"),mnemonic:0})}};const N={id:"@jupyterlab/filebrowser-extension:widget",description:"Adds the file browser to the application shell.",requires:[d.IDocumentManager,h.IDefaultFileBrowser,h.IFileBrowserFactory,p.ISettingRegistry,o.IToolbarWidgetRegistry,b.ITranslator,i.ILabShell,h.IFileBrowserCommands],optional:[o.ICommandPalette],autoStart:true,activate:(e,t,n,i,s,r,a,l,d,c)=>{const{commands:u}=e;const{tracker:p}=i;const m=a.load("jupyterlab");n.node.setAttribute("role","region");n.node.setAttribute("aria-label",m.__("File Browser Section"));n.title.icon=w.folderIcon;const g=()=>{const t=(0,x.find)(e.commands.keyBindings,(e=>e.command===T.toggleBrowser));if(t){const e=t.keys.map(k.CommandRegistry.formatKeystroke).join(", ");n.title.caption=m.__("File Browser (%1)",e)}else{n.title.caption=m.__("File Browser")}};g();e.commands.keyBindingChanged.connect((()=>{g()}));r.addFactory(M,"uploader",(e=>new h.Uploader({model:e.model,translator:a})));r.addFactory(M,"fileNameSearcher",(e=>{const t=(0,w.FilenameSearcher)({updateFilter:(t,n)=>{e.model.setFilter((e=>t(e.name.toLowerCase())))},useFuzzyFilter:true,placeholder:m.__("Filter files by name"),forceRefresh:true});t.addClass(I);return t}));(0,o.setToolbar)(n,(0,o.createToolbarFactory)(r,s,M,N.id,a));l.add(n,"left",{rank:100,type:"File Browser"});u.addCommand(T.toggleBrowser,{label:m.__("File Browser"),execute:()=>{if(n.isHidden){return u.execute(T.showBrowser,void 0)}return u.execute(T.hideBrowser,void 0)}});u.addCommand(T.showBrowser,{label:m.__("Open the file browser for the provided `path`."),execute:e=>{const t=e.path||"";const s=$.getBrowserForPath(t,n,i);if(!s){return}if(n===s){l.activateById(n.id);return}else{const e=["left","right"];for(const t of e){for(const e of l.widgets(t)){if(e.contains(s)){l.activateById(e.id);return}}}}}});u.addCommand(T.hideBrowser,{label:m.__("Hide the file browser."),execute:()=>{const e=p.currentWidget;if(e&&!e.isHidden){l.collapseLeft()}}});u.addCommand(T.toggleNavigateToCurrentDirectory,{label:m.__("Show Active File in File Browser"),isToggled:()=>n.navigateToCurrentDirectory,execute:()=>{const e=!n.navigateToCurrentDirectory;const t="navigateToCurrentDirectory";return s.set(E,t,e).catch((e=>{console.error(`Failed to set navigateToCurrentDirectory setting`)}))}});if(c){c.addItem({command:T.toggleNavigateToCurrentDirectory,category:m.__("File Operations")})}void l.restored.then((e=>{if(e.fresh&&l.mode!=="single-document"){void u.execute(T.showBrowser,void 0)}}));void Promise.all([e.restored,n.model.restored]).then((()=>{l.currentChanged.connect((async(e,s)=>{if(n.navigateToCurrentDirectory&&s.newValue){const{newValue:e}=s;const r=t.contextForWidget(e);if(r){const{path:e}=r;try{await $.navigateToPath(e,n,i,a)}catch(o){console.warn(`${T.goToPath} failed to open: ${e}`,o)}}}}))}))}};const O={id:"@jupyterlab/filebrowser-extension:share-file",description:'Adds the "Copy Shareable Link" command; useful for JupyterHub deployment for example.',requires:[h.IFileBrowserFactory,b.ITranslator],autoStart:true,activate:(e,t,n)=>{const i=n.load("jupyterlab");const{commands:s}=e;const{tracker:r}=t;s.addCommand(T.copyShareableLink,{execute:()=>{const e=r.currentWidget;const t=e===null||e===void 0?void 0:e.selectedItems().next();if(t===undefined||t.done){return}o.Clipboard.copyToSystem(a.PageConfig.getUrl({workspace:a.PageConfig.defaultWorkspace,treePath:t.value.path,toShare:true}))},isVisible:()=>!!r.currentWidget&&Array.from(r.currentWidget.selectedItems()).length===1,icon:w.linkIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Copy Shareable Link")})}};const B={id:"@jupyterlab/filebrowser-extension:open-with",description:"Adds the open-with feature allowing an user to pick the non-preferred document viewer.",requires:[h.IFileBrowserFactory],autoStart:true,activate:(e,t)=>{const{docRegistry:n}=e;const{tracker:i}=t;let s=[];function o(e){var t,o;const r=(o=(t=e.menu.items.find((e=>{var t;return e.type==="submenu"&&((t=e.submenu)===null||t===void 0?void 0:t.id)==="jp-contextmenu-open-with"})))===null||t===void 0?void 0:t.submenu)!==null&&o!==void 0?o:null;if(!r){return}s.forEach((e=>e.dispose()));s.length=0;r.clearItems();const a=i.currentWidget?$.OpenWith.intersection((0,x.map)(i.currentWidget.selectedItems(),(e=>$.OpenWith.getFactories(n,e)))):new Set;s=[...a].map((e=>r.addItem({args:{factory:e.name,label:e.label||e.name},command:T.open})))}e.contextMenu.opened.connect(o)}};const F={id:"@jupyterlab/filebrowser-extension:open-browser-tab",description:"Adds the open-in-new-browser-tab features.",requires:[h.IFileBrowserFactory,b.ITranslator],autoStart:true,activate:(e,t,n)=>{const{commands:i}=e;const s=n.load("jupyterlab");const{tracker:o}=t;i.addCommand(T.openBrowserTab,{execute:e=>{const t=o.currentWidget;if(!t){return}const n=e["mode"];return Promise.all(Array.from((0,x.map)(t.selectedItems(),(e=>{if(n==="single-document"){const t=a.PageConfig.getUrl({mode:"single-document",treePath:e.path});const n=window.open();if(n){n.opener=null;n.location.href=t}else{throw new Error("Failed to open new browser tab.")}}else{return i.execute("docmanager:open-browser-tab",{path:e.path})}}))))},icon:w.addIcon.bindprops({stylesheet:"menuItem"}),label:e=>e["mode"]==="single-document"?s.__("Open in Simple Mode"):s.__("Open in New Browser Tab"),mnemonic:0})}};const z={id:"@jupyterlab/filebrowser-extension:file-upload-status",description:"Adds a file upload status widget.",autoStart:true,requires:[h.IFileBrowserFactory,b.ITranslator],optional:[v.IStatusBar],activate:(e,t,n,i)=>{if(!i){return}const s=new h.FileUploadStatus({tracker:t.tracker,translator:n});i.registerStatusItem("@jupyterlab/filebrowser-extension:file-upload-status",{item:s,align:"middle",isActive:()=>!!s.model&&s.model.items.length>0,activeStateChanged:s.model.stateChanged})}};const H={id:"@jupyterlab/filebrowser-extension:open-url",description:'Adds the feature "Open files from remote URLs".',autoStart:true,requires:[h.IDefaultFileBrowser,b.ITranslator],optional:[o.ICommandPalette],activate:(e,t,n,i)=>{const{commands:s}=e;const r=n.load("jupyterlab");const l=T.openUrl;s.addCommand(l,{label:e=>e.url?r.__("Open %1",e.url):r.__("Open from URL"),caption:e=>e.url?r.__("Open %1",e.url):r.__("Open from URL"),execute:async e=>{var n,i,l;let d=(n=e===null||e===void 0?void 0:e.url)!==null&&n!==void 0?n:"";if(!d){d=(i=(await o.InputDialog.getText({label:r.__("URL"),placeholder:"https://example.com/path/to/file",title:r.__("Open URL"),okLabel:r.__("Open")})).value)!==null&&i!==void 0?i:undefined}if(!d){return}let c="";let h;try{const e=await fetch(d);h=await e.blob();c=(l=e.headers.get("Content-Type"))!==null&&l!==void 0?l:""}catch(u){if(u.response&&u.response.status!==200){u.message=r.__("Could not open URL: %1",d)}return(0,o.showErrorMessage)(r.__("Cannot fetch"),u)}try{const e=a.PathExt.basename(d);const n=new File([h],e,{type:c});const i=await t.model.upload(n);return s.execute("docmanager:open",{path:i.path})}catch(p){return(0,o.showErrorMessage)(r._p("showErrorMessage","Upload Error"),p)}}});if(i){i.addItem({command:l,category:r.__("File Operations")})}}};function W(e,t,n,i,s,r){const l=i.load("jupyterlab");const{docRegistry:d,commands:c}=e;const{tracker:h}=n;c.addCommand(T.del,{execute:()=>{const e=h.currentWidget;if(e){return e.delete()}},icon:w.closeIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Delete"),mnemonic:0});c.addCommand(T.copy,{execute:()=>{const e=h.currentWidget;if(e){return e.copy()}},icon:w.copyIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Copy"),mnemonic:0});c.addCommand(T.cut,{execute:()=>{const e=h.currentWidget;if(e){return e.cut()}},icon:w.cutIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Cut")});c.addCommand(T.duplicate,{execute:()=>{const e=h.currentWidget;if(e){return e.duplicate()}},icon:w.copyIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Duplicate")});c.addCommand(T.goToPath,{label:l.__("Update the file browser to display the provided `path`."),execute:async e=>{var s;const o=e.path||"";const r=!((s=e===null||e===void 0?void 0:e.dontShowBrowser)!==null&&s!==void 0?s:false);try{const e=await $.navigateToPath(o,t,n,i);if(e.type!=="directory"&&r){const e=$.getBrowserForPath(o,t,n);if(e){e.clearSelectedItems();const t=o.split("/");const n=t[t.length-1];if(n){await e.selectItemByName(n)}}}}catch(a){console.warn(`${T.goToPath} failed to go to: ${o}`,a)}if(r){return c.execute(T.showBrowser,{path:o})}}});c.addCommand(T.goUp,{label:"go up",execute:async()=>{const e=$.getBrowserForPath("",t,n);if(!e){return}const{model:i}=e;await i.restored;void e.goUp()}});c.addCommand(T.openPath,{label:e=>e.path?l.__("Open %1",e.path):l.__("Open from Path"),caption:e=>e.path?l.__("Open %1",e.path):l.__("Open from path"),execute:async e=>{var i;let s;if(e===null||e===void 0?void 0:e.path){s=e.path}else{s=(i=(await o.InputDialog.getText({label:l.__("Path"),placeholder:"/path/relative/to/jlab/root",title:l.__("Open Path"),okLabel:l.__("Open")})).value)!==null&&i!==void 0?i:undefined}if(!s){return}try{const i=s!=="/"&&s.endsWith("/");if(i){s=s.slice(0,s.length-1)}const o=$.getBrowserForPath(s,t,n);const{services:r}=o.model.manager;const a=await r.contents.get(s,{content:false});if(i&&a.type!=="directory"){throw new Error(`Path ${s}/ is not a directory`)}await c.execute(T.goToPath,{path:s,dontShowBrowser:e.dontShowBrowser});if(a.type==="directory"){return}return c.execute("docmanager:open",{path:s})}catch(r){if(r.response&&r.response.status===404){r.message=l.__("Could not find path: %1",s)}return(0,o.showErrorMessage)(l.__("Cannot open"),r)}}});if(r){r.addItem({command:T.openPath,category:l.__("File Operations")})}c.addCommand(T.open,{execute:e=>{const t=e["factory"]||void 0;const n=h.currentWidget;if(!n){return}const{contents:i}=n.model.manager.services;return Promise.all(Array.from((0,x.map)(n.selectedItems(),(e=>{if(e.type==="directory"){const t=i.localPath(e.path);return n.model.cd(`/${t}`)}return c.execute("docmanager:open",{factory:t,path:e.path})}))))},icon:e=>{var t;const n=e["factory"]||void 0;if(n){const e=d.getFileType(n);return(t=e===null||e===void 0?void 0:e.icon)===null||t===void 0?void 0:t.bindprops({stylesheet:"menuItem"})}else{return w.folderIcon.bindprops({stylesheet:"menuItem"})}},label:e=>e["label"]||e["factory"]||l.__("Open"),mnemonic:0});c.addCommand(T.paste,{execute:()=>{const e=h.currentWidget;if(e){return e.paste()}},icon:w.pasteIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Paste"),mnemonic:0});c.addCommand(T.createNewDirectory,{execute:()=>{const e=h.currentWidget;if(e){return e.createNewDirectory()}},icon:w.newFolderIcon.bindprops({stylesheet:"menuItem"}),label:l.__("New Folder")});c.addCommand(T.createNewFile,{execute:()=>{const e=h.currentWidget;if(e){return e.createNewFile({ext:"txt"})}},icon:w.textEditorIcon.bindprops({stylesheet:"menuItem"}),label:l.__("New File")});c.addCommand(T.createNewMarkdownFile,{execute:()=>{const e=h.currentWidget;if(e){return e.createNewFile({ext:"md"})}},icon:w.markdownIcon.bindprops({stylesheet:"menuItem"}),label:l.__("New Markdown File")});c.addCommand(T.refresh,{execute:e=>{const t=h.currentWidget;if(t){return t.model.refresh()}},icon:w.refreshIcon.bindprops({stylesheet:"menuItem"}),caption:l.__("Refresh the file browser."),label:l.__("Refresh File List")});c.addCommand(T.rename,{execute:e=>{const t=h.currentWidget;if(t){return t.rename()}},isVisible:()=>!!h.currentWidget&&Array.from(h.currentWidget.selectedItems()).length===1,icon:w.editIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Rename"),mnemonic:0});c.addCommand(T.copyPath,{execute:()=>{const e=h.currentWidget;if(!e){return}const t=e.selectedItems().next();if(t.done){return}o.Clipboard.copyToSystem(t.value.path)},isVisible:()=>!!h.currentWidget&&Array.from(h.currentWidget.selectedItems()).length===1,icon:w.fileIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Copy Path")});c.addCommand(T.shutdown,{execute:()=>{const e=h.currentWidget;if(e){return e.shutdownKernels()}},icon:w.stopIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Shut Down Kernel")});c.addCommand(T.toggleLastModified,{label:l.__("Show Last Modified Column"),isToggled:()=>t.showLastModifiedColumn,execute:()=>{const e=!t.showLastModifiedColumn;const n="showLastModifiedColumn";if(s){return s.set(E,n,e).catch((e=>{console.error(`Failed to set ${n} setting`)}))}}});c.addCommand(T.toggleSortNotebooksFirst,{label:l.__("Sort Notebooks Above Files"),isToggled:()=>t.sortNotebooksFirst,execute:()=>{const e=!t.sortNotebooksFirst;const n="sortNotebooksFirst";if(s){return s.set(E,n,e).catch((e=>{console.error(`Failed to set ${n} setting`)}))}}});c.addCommand(T.toggleFileSize,{label:l.__("Show File Size Column"),isToggled:()=>t.showFileSizeColumn,execute:()=>{const e=!t.showFileSizeColumn;const n="showFileSizeColumn";if(s){return s.set(E,n,e).catch((e=>{console.error(`Failed to set ${n} setting`)}))}}});c.addCommand(T.toggleHiddenFiles,{label:l.__("Show Hidden Files"),isToggled:()=>t.showHiddenFiles,isVisible:()=>a.PageConfig.getOption("allow_hidden_files")==="true",execute:()=>{const e=!t.showHiddenFiles;const n="showHiddenFiles";if(s){return s.set(E,n,e).catch((e=>{console.error(`Failed to set showHiddenFiles setting`)}))}}});c.addCommand(T.toggleFileCheckboxes,{label:l.__("Show File Checkboxes"),isToggled:()=>t.showFileCheckboxes,execute:()=>{const e=!t.showFileCheckboxes;const n="showFileCheckboxes";if(s){return s.set(E,n,e).catch((e=>{console.error(`Failed to set showFileCheckboxes setting`)}))}}});c.addCommand(T.search,{label:l.__("Search on File Names"),execute:()=>alert("search")})}const V=[P,A,L,O,z,R,N,B,F,H];const U=V;var $;(function(e){function t(e,t,n){const{tracker:i}=n;const s=t.model.manager.services.contents.driveName(e);if(s){const t=i.find((e=>e.model.driveName===s));if(!t){console.warn(`${T.goToPath} failed to find filebrowser for path: ${e}`);return}return t}return t}e.getBrowserForPath=t;async function n(t,n,i,s){const o=s.load("jupyterlab");const r=e.getBrowserForPath(t,n,i);if(!r){throw new Error(o.__("No browser for path"))}const{services:l}=r.model.manager;const d=l.contents.localPath(t);await l.ready;const c=await l.contents.get(t,{content:false});const{model:h}=r;await h.restored;if(c.type==="directory"){await h.cd(`/${d}`)}else{await h.cd(`/${a.PathExt.dirname(d)}`)}return c}e.navigateToPath=n;async function i(e,t,n,i,s,o){const r="jp-mod-restoring";e.addClass(r);if(!n){await e.model.restore(e.id);await e.model.refresh();e.removeClass(r);return}const a=async()=>{n.routed.disconnect(a);const s=await(i===null||i===void 0?void 0:i.paths);if((s===null||s===void 0?void 0:s.file)||(s===null||s===void 0?void 0:s.browser)){await e.model.restore(e.id,false);if(s.file){await t.execute(T.openPath,{path:s.file,dontShowBrowser:true})}if(s.browser){await t.execute(T.openPath,{path:s.browser,dontShowBrowser:true})}}else{await e.model.restore(e.id);await e.model.refresh()}e.removeClass(r);if(o===null||o===void 0?void 0:o.isEmpty("main")){void t.execute("launcher:create")}};n.routed.connect(a)}e.restoreBrowser=i;let s;(function(e){function t(e,t){const n=e.preferredWidgetFactories(t.path);const i=e.getWidgetFactory("notebook");if(i&&t.type==="notebook"&&n.indexOf(i)===-1){n.unshift(i)}return n}e.getFactories=t;function n(e){let t=undefined;for(const n of e){if(t===undefined){t=new Set(n);continue}if(t.size===0){return t}let e=new Set;for(const i of n){if(t.has(i)){e.add(i)}}t=e}return t!==null&&t!==void 0?t:new Set}e.intersection=n})(s=e.OpenWith||(e.OpenWith={}))})($||($={}))},77552:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(98328);var r=n(79536);var a=n(94683);var l=n(90516);var d=n(82401);var c=n(59240);var h=n(93379);var u=n.n(h);var p=n(7795);var m=n.n(p);var g=n(90569);var f=n.n(g);var v=n(3565);var _=n.n(v);var b=n(19216);var y=n.n(b);var w=n(44589);var C=n.n(w);var x=n(4409);var S={};S.styleTagTransform=C();S.setAttributes=_();S.insert=f().bind(null,"head");S.domAPI=m();S.insertStyleElement=y();var k=u()(x.Z,S);const j=x.Z&&x.Z.locals?x.Z.locals:undefined},34635:(e,t,n)=>{"use strict";n.r(t);n.d(t,{BreadCrumbs:()=>b,CHUNK_SIZE:()=>ve,DirListing:()=>re,FileBrowser:()=>pe,FileBrowserModel:()=>_e,FileDialog:()=>Ce,FileUploadStatus:()=>Ne,FilterFileBrowserModel:()=>ye,IDefaultFileBrowser:()=>je,IFileBrowserCommands:()=>Me,IFileBrowserFactory:()=>ke,LARGE_FILE_SIZE:()=>fe,TogglableHiddenFileBrowserModel:()=>be,Uploader:()=>Ee});var i=n(90848);var s=n(74513);var o=n(36168);var r=n(52435);var a=n(85448);var l=n(22873);var d=n(1071);var c=n(58740);var h=n(36044);const u="jp-BreadCrumbs";const p="jp-BreadCrumbs-home";const m="jp-BreadCrumbs-preferred";const g="jp-BreadCrumbs-item";const f=["/","../../","../",""];const v="application/x-jupyter-icontents";const _="jp-mod-dropTarget";class b extends a.Widget{constructor(e){super();this.translator=e.translator||o.nullTranslator;this._trans=this.translator.load("jupyterlab");this._model=e.model;this.addClass(u);this._crumbs=y.createCrumbs();this._crumbSeps=y.createCrumbSeparators();const t=l.PageConfig.getOption("preferredPath");this._hasPreferred=t&&t!=="/"?true:false;if(this._hasPreferred){this.node.appendChild(this._crumbs[y.Crumb.Preferred])}this.node.appendChild(this._crumbs[y.Crumb.Home]);this._model.refreshed.connect(this.update,this)}handleEvent(e){switch(e.type){case"click":this._evtClick(e);break;case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;default:return}}onAfterAttach(e){super.onAfterAttach(e);this.update();const t=this.node;t.addEventListener("click",this);t.addEventListener("lm-dragenter",this);t.addEventListener("lm-dragleave",this);t.addEventListener("lm-dragover",this);t.addEventListener("lm-drop",this)}onBeforeDetach(e){super.onBeforeDetach(e);const t=this.node;t.removeEventListener("click",this);t.removeEventListener("lm-dragenter",this);t.removeEventListener("lm-dragleave",this);t.removeEventListener("lm-dragover",this);t.removeEventListener("lm-drop",this)}onUpdateRequest(e){const t=this._model.manager.services.contents;const n=t.localPath(this._model.path);y.updateCrumbs(this._crumbs,this._crumbSeps,n,this._hasPreferred)}_evtClick(e){if(e.button!==0){return}let t=e.target;while(t&&t!==this.node){if(t.classList.contains(m)){this._model.cd(l.PageConfig.getOption("preferredPath")).catch((e=>(0,i.showErrorMessage)(this._trans.__("Open Error"),e)));e.preventDefault();e.stopPropagation();return}if(t.classList.contains(g)||t.classList.contains(p)){const n=c.ArrayExt.findFirstIndex(this._crumbs,(e=>e===t));this._model.cd(f[n]).catch((e=>(0,i.showErrorMessage)(this._trans.__("Open Error"),e)));e.preventDefault();e.stopPropagation();return}t=t.parentElement}}_evtDragEnter(e){if(e.mimeData.hasData(v)){const t=c.ArrayExt.findFirstIndex(this._crumbs,(t=>h.ElementExt.hitTest(t,e.clientX,e.clientY)));if(t!==-1){if(t!==y.Crumb.Current){this._crumbs[t].classList.add(_);e.preventDefault();e.stopPropagation()}}}}_evtDragLeave(e){e.preventDefault();e.stopPropagation();const t=i.DOMUtils.findElement(this.node,_);if(t){t.classList.remove(_)}}_evtDragOver(e){e.preventDefault();e.stopPropagation();e.dropAction=e.proposedAction;const t=i.DOMUtils.findElement(this.node,_);if(t){t.classList.remove(_)}const n=c.ArrayExt.findFirstIndex(this._crumbs,(t=>h.ElementExt.hitTest(t,e.clientX,e.clientY)));if(n!==-1){this._crumbs[n].classList.add(_)}}_evtDrop(e){e.preventDefault();e.stopPropagation();if(e.proposedAction==="none"){e.dropAction="none";return}if(!e.mimeData.hasData(v)){return}e.dropAction=e.proposedAction;let t=e.target;while(t&&t.parentElement){if(t.classList.contains(_)){t.classList.remove(_);break}t=t.parentElement}const n=c.ArrayExt.findFirstIndex(this._crumbs,(e=>e===t));if(n===-1){return}const s=this._model;const o=l.PathExt.resolve(s.path,f[n]);const r=s.manager;const a=[];const h=e.mimeData.getData(v);for(const i of h){const e=r.services.contents.localPath(i);const t=l.PathExt.basename(e);const n=l.PathExt.join(o,t);a.push((0,d.renameFile)(r,i,n))}void Promise.all(a).catch((e=>(0,i.showErrorMessage)(this._trans.__("Move Error"),e)))}}var y;(function(e){let t;(function(e){e[e["Home"]=0]="Home";e[e["Ellipsis"]=1]="Ellipsis";e[e["Parent"]=2]="Parent";e[e["Current"]=3]="Current";e[e["Preferred"]=4]="Preferred"})(t=e.Crumb||(e.Crumb={}));function n(e,n,i,s){const o=e[0].parentNode;const r=o.firstChild;while(r&&r.nextSibling){o.removeChild(r.nextSibling)}if(s){o.appendChild(e[t.Home]);o.appendChild(n[0])}else{o.appendChild(n[0])}const a=i.split("/");if(a.length>2){o.appendChild(e[t.Ellipsis]);const i=a.slice(0,a.length-2).join("/");e[t.Ellipsis].title=i;o.appendChild(n[1])}if(i){if(a.length>=2){e[t.Parent].textContent=a[a.length-2];o.appendChild(e[t.Parent]);const i=a.slice(0,a.length-1).join("/");e[t.Parent].title=i;o.appendChild(n[2])}e[t.Current].textContent=a[a.length-1];o.appendChild(e[t.Current]);e[t.Current].title=i;o.appendChild(n[3])}}e.updateCrumbs=n;function i(){const e=r.folderIcon.element({className:p,tag:"span",title:l.PageConfig.getOption("serverRoot")||"Jupyter Server Root",stylesheet:"breadCrumb"});const t=r.ellipsesIcon.element({className:g,tag:"span",stylesheet:"breadCrumb"});const n=document.createElement("span");n.className=g;const i=document.createElement("span");i.className=g;const s=r.homeIcon.element({className:m,tag:"span",title:l.PageConfig.getOption("preferredPath")||"Jupyter Preferred Path",stylesheet:"breadCrumb"});return[e,t,n,i,s]}e.createCrumbs=i;function s(){const e=[];const t=2;for(let n=0;n<t+2;n++){const t=document.createElement("span");t.textContent="/";e.push(t)}return e}e.createCrumbSeparators=s})(y||(y={}));var w=n(35788);var C=n(5596);var x=n(21299);var S=n(28821);var k=n(71372);var j=n(90502);const M="jp-DirListing";const E="jp-DirListing-header";const I="jp-DirListing-headerItem";const T="jp-DirListing-headerItemText";const D="jp-DirListing-headerItemIcon";const L="jp-DirListing-content";const P="jp-DirListing-item";const A="jp-DirListing-itemText";const R="jp-DirListing-itemIcon";const N="jp-DirListing-itemModified";const O="jp-DirListing-itemFileSize";const B="jp-DirListing-checkboxWrapper";const F="jp-DirListing-editor";const z="jp-id-name";const H="jp-id-modified";const W="jp-id-filesize";const V="jp-id-narrow";const U="jp-LastModified-hidden";const $="jp-FileSize-hidden";const q="application/x-jupyter-icontents";const K="application/x-jupyter-icontentsrich";const J="jp-mod-dropTarget";const Z="jp-mod-selected";const G="jp-DragIcon";const Y="jp-mod-clipboard";const X="jp-mod-cut";const Q="jp-mod-multiSelected";const ee="jp-mod-running";const te="jp-mod-descending";const ne=1e3;const ie=5;const se=!!navigator.platform.match(/Mac/i);const oe="application/vnd.lumino.widget-factory";class re extends a.Widget{constructor(e){super({node:(e.renderer||re.defaultRenderer).createNode()});this._items=[];this._sortedItems=[];this._sortState={direction:"ascending",key:"name"};this._onItemOpened=new k.Signal(this);this._drag=null;this._dragData=null;this._selectTimer=-1;this._isCut=false;this._prevPath="";this._clipboard=[];this._softSelection="";this.selection=Object.create(null);this._searchPrefix="";this._searchPrefixTimer=-1;this._inRename=false;this._isDirty=false;this._hiddenColumns=new Set;this._sortNotebooksFirst=false;this._focusIndex=0;this.addClass(M);this.translator=e.translator||o.nullTranslator;this._trans=this.translator.load("jupyterlab");this._model=e.model;this._model.fileChanged.connect(this._onFileChanged,this);this._model.refreshed.connect(this._onModelRefreshed,this);this._model.pathChanged.connect(this._onPathChanged,this);this._editNode=document.createElement("input");this._editNode.className=F;this._manager=this._model.manager;this._renderer=e.renderer||re.defaultRenderer;const t=i.DOMUtils.findElement(this.node,E);this._hiddenColumns.add("file_size");this._renderer.populateHeaderNode(t,this.translator,this._hiddenColumns);this._manager.activateRequested.connect(this._onActivateRequested,this)}dispose(){this._items.length=0;this._sortedItems.length=0;this._clipboard.length=0;super.dispose()}get model(){return this._model}get headerNode(){return i.DOMUtils.findElement(this.node,E)}get contentNode(){return i.DOMUtils.findElement(this.node,L)}get renderer(){return this._renderer}get sortState(){return this._sortState}get onItemOpened(){return this._onItemOpened}selectedItems(){const e=this._sortedItems;return(0,c.filter)(e,(e=>this.selection[e.path]))}sortedItems(){return this._sortedItems[Symbol.iterator]()}sort(e){this._sortedItems=ae.sort(this.model.items(),e,this._sortNotebooksFirst);this._sortState=e;this.update()}rename(){return this._doRename()}cut(){this._isCut=true;this._copy();this.update()}copy(){this._copy()}paste(){if(!this._clipboard.length){this._isCut=false;return Promise.resolve(undefined)}const e=this._model.path;const t=[];for(const n of this._clipboard){if(this._isCut){const i=this._manager.services.contents.localPath(n);const s=i.split("/");const o=s[s.length-1];const r=l.PathExt.join(e,o);t.push(this._model.manager.rename(n,r))}else{t.push(this._model.manager.copy(n,e))}}for(const n of this._items){n.classList.remove(X)}this._clipboard.length=0;this._isCut=false;this.removeClass(Y);return Promise.all(t).then((()=>undefined)).catch((e=>{void(0,i.showErrorMessage)(this._trans._p("showErrorMessage","Paste Error"),e)}))}async delete(){const e=this._sortedItems.filter((e=>this.selection[e.path]));if(!e.length){return}const t=e.length===1?this._trans.__("Are you sure you want to permanently delete: %1?",e[0].name):this._trans._n("Are you sure you want to permanently delete the %1 selected item?","Are you sure you want to permanently delete the %1 selected items?",e.length);const n=await(0,i.showDialog)({title:this._trans.__("Delete"),body:t,buttons:[i.Dialog.cancelButton({label:this._trans.__("Cancel")}),i.Dialog.warnButton({label:this._trans.__("Delete")})],defaultButton:0});if(!this.isDisposed&&n.button.accept){await this._delete(e.map((e=>e.path)))}let s=this._focusIndex;const o=this._sortedItems.length-e.length-1;if(s>o){s=Math.max(0,o)}this._focusItem(s)}duplicate(){const e=this._model.path;const t=[];for(const n of this.selectedItems()){if(n.type!=="directory"){t.push(this._model.manager.copy(n.path,e))}}return Promise.all(t).then((()=>undefined)).catch((e=>{void(0,i.showErrorMessage)(this._trans._p("showErrorMessage","Duplicate file"),e)}))}async download(){await Promise.all(Array.from(this.selectedItems()).filter((e=>e.type!=="directory")).map((e=>this._model.download(e.path))))}shutdownKernels(){const e=this._model;const t=this._sortedItems;const n=t.map((e=>e.path));const s=Array.from(this._model.sessions()).filter((e=>{const i=c.ArrayExt.firstIndexOf(n,e.path);return this.selection[t[i].path]})).map((t=>e.manager.services.sessions.shutdown(t.id)));return Promise.all(s).then((()=>undefined)).catch((e=>{void(0,i.showErrorMessage)(this._trans._p("showErrorMessage","Shut down kernel"),e)}))}selectNext(e=false){let t=-1;const n=Object.keys(this.selection);const i=this._sortedItems;if(n.length===1||e){const e=n[n.length-1];t=c.ArrayExt.findFirstIndex(i,(t=>t.path===e));t+=1;if(t===this._items.length){t=0}}else if(n.length===0){t=0}else{const e=n[n.length-1];t=c.ArrayExt.findFirstIndex(i,(t=>t.path===e))}if(t!==-1){this._selectItem(t,e);h.ElementExt.scrollIntoViewIfNeeded(this.contentNode,this._items[t])}}selectPrevious(e=false){let t=-1;const n=Object.keys(this.selection);const i=this._sortedItems;if(n.length===1||e){const e=n[0];t=c.ArrayExt.findFirstIndex(i,(t=>t.path===e));t-=1;if(t===-1){t=this._items.length-1}}else if(n.length===0){t=this._items.length-1}else{const e=n[0];t=c.ArrayExt.findFirstIndex(i,(t=>t.path===e))}if(t!==-1){this._selectItem(t,e);h.ElementExt.scrollIntoViewIfNeeded(this.contentNode,this._items[t])}}selectByPrefix(){const e=this._searchPrefix.toLowerCase();const t=this._sortedItems;const n=c.ArrayExt.findFirstIndex(t,(t=>t.name.toLowerCase().substr(0,e.length)===e));if(n!==-1){this._selectItem(n,false);h.ElementExt.scrollIntoViewIfNeeded(this.contentNode,this._items[n])}}isSelected(e){const t=this._sortedItems;return Array.from((0,c.filter)(t,(t=>t.name===e&&this.selection[t.path]))).length!==0}modelForClick(e){const t=this._sortedItems;const n=ae.hitTestNodes(this._items,e);if(n!==-1){return t[n]}return undefined}clearSelectedItems(){this.selection=Object.create(null)}async selectItemByName(e,t=false){await this.model.refresh();if(this.isDisposed){throw new Error("File browser is disposed.")}const n=this._sortedItems;const i=c.ArrayExt.findFirstIndex(n,(t=>t.name===e));if(i===-1){throw new Error("Item does not exist.")}this._selectItem(i,false,t);S.MessageLoop.sendMessage(this,a.Widget.Msg.UpdateRequest);h.ElementExt.scrollIntoViewIfNeeded(this.contentNode,this._items[i])}handleEvent(e){switch(e.type){case"mousedown":this._evtMousedown(e);break;case"mouseup":this._evtMouseup(e);break;case"mousemove":this._evtMousemove(e);break;case"keydown":this.evtKeydown(e);break;case"click":this._evtClick(e);break;case"dblclick":this.evtDblClick(e);break;case"dragenter":case"dragover":this.addClass("jp-mod-native-drop");e.preventDefault();break;case"dragleave":case"dragend":this.removeClass("jp-mod-native-drop");break;case"drop":this.removeClass("jp-mod-native-drop");this.evtNativeDrop(e);break;case"scroll":this._evtScroll(e);break;case"lm-dragenter":this.evtDragEnter(e);break;case"lm-dragleave":this.evtDragLeave(e);break;case"lm-dragover":this.evtDragOver(e);break;case"lm-drop":this.evtDrop(e);break;default:break}}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;const n=i.DOMUtils.findElement(t,L);t.addEventListener("mousedown",this);t.addEventListener("keydown",this);t.addEventListener("click",this);t.addEventListener("dblclick",this);n.addEventListener("dragenter",this);n.addEventListener("dragover",this);n.addEventListener("dragleave",this);n.addEventListener("dragend",this);n.addEventListener("drop",this);n.addEventListener("scroll",this);n.addEventListener("lm-dragenter",this);n.addEventListener("lm-dragleave",this);n.addEventListener("lm-dragover",this);n.addEventListener("lm-drop",this)}onBeforeDetach(e){super.onBeforeDetach(e);const t=this.node;const n=i.DOMUtils.findElement(t,L);t.removeEventListener("mousedown",this);t.removeEventListener("keydown",this);t.removeEventListener("click",this);t.removeEventListener("dblclick",this);n.removeEventListener("scroll",this);n.removeEventListener("dragover",this);n.removeEventListener("dragover",this);n.removeEventListener("dragleave",this);n.removeEventListener("dragend",this);n.removeEventListener("drop",this);n.removeEventListener("lm-dragenter",this);n.removeEventListener("lm-dragleave",this);n.removeEventListener("lm-dragover",this);n.removeEventListener("lm-drop",this);document.removeEventListener("mousemove",this,true);document.removeEventListener("mouseup",this,true)}onAfterShow(e){if(this._isDirty){this.sort(this.sortState);this.update()}}onUpdateRequest(e){var t;this._isDirty=false;const n=this._sortedItems;const s=this._items;const o=i.DOMUtils.findElement(this.node,L);const r=this._renderer;this.removeClass(Q);this.removeClass(Z);while(s.length>n.length){o.removeChild(s.pop())}while(s.length<n.length){const e=r.createItemNode(this._hiddenColumns);e.classList.add(P);s.push(e);o.appendChild(e)}s.forEach(((e,t)=>{e.classList.remove(Z);e.classList.remove(ee);e.classList.remove(X);const n=r.getCheckboxNode(e);if(n){n.checked=false}const i=r.getNameNode(e);if(i){i.tabIndex=t===this._focusIndex?0:-1}}));const a=r.getCheckboxNode(this.headerNode);if(a){const e=Object.keys(this.selection).length;const t=n.length>0&&e===n.length;const i=!t&&e>0;a.checked=t;a.indeterminate=i;a.dataset.checked=String(t);a.dataset.indeterminate=String(i);const s=this.translator.load("jupyterlab");a===null||a===void 0?void 0:a.setAttribute("aria-label",t||i?s.__("Deselect all files and directories"):s.__("Select all files and directories"))}n.forEach(((e,t)=>{const n=s[t];const i=this._manager.registry.getFileTypeForModel(e);r.updateItemNode(n,e,i,this.translator,this._hiddenColumns,this.selection[e.path]);if(this.selection[e.path]&&this._isCut&&this._model.path===this._prevPath){n.classList.add(X)}n.setAttribute("data-isdir",e.type==="directory"?"true":"false")}));const l=Object.keys(this.selection).length;if(l){this.addClass(Z);if(l>1){this.addClass(Q)}}const d=n.map((e=>e.path));for(const i of this._model.sessions()){const e=c.ArrayExt.firstIndexOf(d,i.path);const n=s[e];if(n){let e=(t=i.kernel)===null||t===void 0?void 0:t.name;const s=this._model.specs;n.classList.add(ee);if(s&&e){const t=s.kernelspecs[e];e=t?t.display_name:this._trans.__("unknown")}n.title=this._trans.__("%1\nKernel: %2",n.title,e)}}this._prevPath=this._model.path}onResize(e){const{width:t}=e.width===-1?this.node.getBoundingClientRect():e;this.toggleClass("jp-DirListing-narrow",t<250)}setColumnVisibility(e,t){if(t){this._hiddenColumns.delete(e)}else{this._hiddenColumns.add(e)}this.headerNode.innerHTML="";this._renderer.populateHeaderNode(this.headerNode,this.translator,this._hiddenColumns)}setNotebooksFirstSorting(e){let t=this._sortNotebooksFirst;this._sortNotebooksFirst=e;if(this._sortNotebooksFirst!==t){this.sort(this._sortState)}}isWithinCheckboxHitArea(e){let t=e.target;while(t){if(t.classList.contains(B)){return true}t=t.parentElement}return false}_evtClick(e){const t=e.target;const n=this.headerNode;const i=this._renderer;if(n.contains(t)){const t=i.getCheckboxNode(n);if(t&&this.isWithinCheckboxHitArea(e)){const e=t.dataset.indeterminate==="false"&&t.dataset.checked==="false";if(e){this._sortedItems.forEach((e=>this.selection[e.path]=true))}else{this.clearSelectedItems()}this.update()}else{const t=this.renderer.handleHeaderClick(n,e);if(t){this.sort(t)}}return}else{this._focusItem(this._focusIndex)}}_evtScroll(e){this.headerNode.scrollLeft=this.contentNode.scrollLeft}_evtMousedown(e){if(e.target===this._editNode){return}if(this._editNode.parentNode){if(this._editNode!==e.target){this._editNode.focus();this._editNode.blur();clearTimeout(this._selectTimer)}else{return}}let t=ae.hitTestNodes(this._items,e);if(t===-1){return}this.handleFileSelect(e);if(e.button!==0){clearTimeout(this._selectTimer)}const n=se&&e.ctrlKey||e.button===2;if(n){return}if(e.button===0){this._dragData={pressX:e.clientX,pressY:e.clientY,index:t};document.addEventListener("mouseup",this,true);document.addEventListener("mousemove",this,true)}}_evtMouseup(e){if(this._softSelection){const t=e.metaKey||e.shiftKey||e.ctrlKey;if(!t&&e.button===0){this.clearSelectedItems();this.selection[this._softSelection]=true;this.update()}this._softSelection=""}if(e.button===0){this._focusItem(this._focusIndex)}if(e.button!==0||!this._drag){document.removeEventListener("mousemove",this,true);document.removeEventListener("mouseup",this,true);return}e.preventDefault();e.stopPropagation()}_evtMousemove(e){e.preventDefault();e.stopPropagation();if(this._drag||!this._dragData){return}const t=this._dragData;const n=Math.abs(e.clientX-t.pressX);const i=Math.abs(e.clientY-t.pressY);if(n<ie&&i<ie){return}this._startDrag(t.index,e.clientX,e.clientY)}handleOpen(e){this._onItemOpened.emit(e);if(e.type==="directory"){const t=this._manager.services.contents.localPath(e.path);this._model.cd(`/${t}`).catch((e=>(0,i.showErrorMessage)(this._trans._p("showErrorMessage","Open directory"),e)))}else{const t=e.path;this._manager.openOrReveal(t)}}_getNextFocusIndex(e,t){const n=e+t;if(n===-1||n===this._items.length){return e}else{return n}}_handleArrowY(e,t){if(e.altKey||e.metaKey){return}if(!this._items.length){return}if(!e.target.classList.contains(A)){return}e.stopPropagation();e.preventDefault();const n=this._focusIndex;let i=this._getNextFocusIndex(n,t);if(t>0&&n===0&&!e.ctrlKey&&Object.keys(this.selection).length===0){i=0}if(e.shiftKey){this._handleMultiSelect(i)}else if(!e.ctrlKey){this._selectItem(i,e.shiftKey,false)}this._focusItem(i);this.update()}async goUp(){const e=this.model;if(e.path===e.rootPath){return}try{await e.cd("..")}catch(t){console.warn(`Failed to go to parent directory of ${e.path}`,t)}}evtKeydown(e){if(this._inRename){return}switch(e.keyCode){case 13:{if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey){return}e.preventDefault();e.stopPropagation();for(const e of this.selectedItems()){this.handleOpen(e)}return}case 38:this._handleArrowY(e,-1);return;case 40:this._handleArrowY(e,1);return;case 32:{if(e.ctrlKey){if(e.metaKey||e.shiftKey||e.altKey){return}const t=this._items[this._focusIndex];if(!(t.contains(e.target)&&t.contains(document.activeElement))){return}e.stopPropagation();e.preventDefault();const{path:n}=this._sortedItems[this._focusIndex];if(this.selection[n]){delete this.selection[n]}else{this.selection[n]=true}this.update();return}break}}if(e.key!==undefined&&e.key.length===1&&!((e.key===" "||e.keyCode===32)&&e.target.type==="checkbox")){if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey){return}this._searchPrefix+=e.key;clearTimeout(this._searchPrefixTimer);this._searchPrefixTimer=window.setTimeout((()=>{this._searchPrefix=""}),ne);this.selectByPrefix();e.stopPropagation();e.preventDefault()}}evtDblClick(e){if(e.button!==0){return}if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey){return}if(this.isWithinCheckboxHitArea(e)){return}e.preventDefault();e.stopPropagation();clearTimeout(this._selectTimer);this._editNode.blur();const t=e.target;const n=c.ArrayExt.findFirstIndex(this._items,(e=>e.contains(t)));if(n===-1){return}const i=this._sortedItems[n];this.handleOpen(i)}evtNativeDrop(e){var t,n,s;const o=(t=e.dataTransfer)===null||t===void 0?void 0:t.files;if(!o||o.length===0){return}const r=(n=e.dataTransfer)===null||n===void 0?void 0:n.items.length;if(!r){return}for(let a=0;a<r;a++){let t=(s=e.dataTransfer)===null||s===void 0?void 0:s.items[a].webkitGetAsEntry();if(t===null||t===void 0?void 0:t.isDirectory){console.log("currently not supporting drag + drop for folders");void(0,i.showDialog)({title:this._trans.__("Error Uploading Folder"),body:this._trans.__("Drag and Drop is currently not supported for folders"),buttons:[i.Dialog.cancelButton({label:this._trans.__("Close")})]})}}e.preventDefault();for(let i=0;i<o.length;i++){void this._model.upload(o[i])}}evtDragEnter(e){if(e.mimeData.hasData(q)){const t=ae.hitTestNodes(this._items,e);if(t===-1){return}const n=this._sortedItems[t];if(n.type!=="directory"||this.selection[n.path]){return}const i=e.target;i.classList.add(J);e.preventDefault();e.stopPropagation()}}evtDragLeave(e){e.preventDefault();e.stopPropagation();const t=i.DOMUtils.findElement(this.node,J);if(t){t.classList.remove(J)}}evtDragOver(e){e.preventDefault();e.stopPropagation();e.dropAction=e.proposedAction;const t=i.DOMUtils.findElement(this.node,J);if(t){t.classList.remove(J)}const n=ae.hitTestNodes(this._items,e);this._items[n].classList.add(J)}evtDrop(e){e.preventDefault();e.stopPropagation();clearTimeout(this._selectTimer);if(e.proposedAction==="none"){e.dropAction="none";return}if(!e.mimeData.hasData(q)){return}let t=e.target;while(t&&t.parentElement){if(t.classList.contains(J)){t.classList.remove(J);break}t=t.parentElement}const n=c.ArrayExt.firstIndexOf(this._items,t);const s=this._sortedItems;let o=this._model.path;if(s[n].type==="directory"){o=l.PathExt.join(o,s[n].name)}const r=this._manager;const a=[];const h=e.mimeData.getData(q);if(e.ctrlKey&&e.proposedAction==="move"){e.dropAction="copy"}else{e.dropAction=e.proposedAction}for(const i of h){const t=r.services.contents.localPath(i);const n=l.PathExt.basename(t);const s=l.PathExt.join(o,n);if(s===i){continue}if(e.dropAction==="copy"){a.push(r.copy(i,o))}else{a.push((0,d.renameFile)(r,i,s))}}Promise.all(a).catch((e=>{void(0,i.showErrorMessage)(this._trans._p("showErrorMessage","Error while copying/moving files"),e)}))}_startDrag(e,t,n){let i=Object.keys(this.selection);const s=this._items[e];const o=this._sortedItems;let r;let a;if(!s.classList.contains(Z)){a=o[e];i=[a.path];r=[a]}else{const e=i[0];a=o.find((t=>t.path===e));r=this.selectedItems()}if(!a){return}const l=this._manager.registry.getFileTypeForModel(a);const d=this.renderer.createDragImage(s,i.length,this._trans,l);this._drag=new x.Drag({dragImage:d,mimeData:new C.MimeData,supportedActions:"move",proposedAction:"move"});this._drag.mimeData.setData(q,i);const c=this.model.manager.services;for(const h of r){this._drag.mimeData.setData(K,{model:h,withContent:async()=>await c.contents.get(h.path)})}if(a&&a.type!=="directory"){const e=i.slice(1).reverse();this._drag.mimeData.setData(oe,(()=>{if(!a){return}const t=a.path;let n=this._manager.findWidget(t);if(!n){n=this._manager.open(a.path)}if(e.length){const t=new C.PromiseDelegate;void t.promise.then((()=>{let t=n;e.forEach((e=>{const n={ref:t===null||t===void 0?void 0:t.id,mode:"tab-after"};t=this._manager.openOrReveal(e,void 0,void 0,n);this._manager.openOrReveal(a.path)}))}));t.resolve(void 0)}return n}))}document.removeEventListener("mousemove",this,true);document.removeEventListener("mouseup",this,true);clearTimeout(this._selectTimer);void this._drag.start(t,n).then((e=>{this._drag=null;clearTimeout(this._selectTimer)}))}handleFileSelect(e){const t=this._sortedItems;const n=ae.hitTestNodes(this._items,e);clearTimeout(this._selectTimer);if(n===-1){return}this._softSelection="";const i=t[n].path;const s=Object.keys(this.selection);const o=e.button===0&&!(se&&e.ctrlKey)&&this.isWithinCheckboxHitArea(e);if(se&&e.metaKey||!se&&e.ctrlKey||o){if(this.selection[i]){delete this.selection[i]}else{this.selection[i]=true}this._focusItem(n)}else if(e.shiftKey){this._handleMultiSelect(n);this._focusItem(n)}else if(i in this.selection&&s.length>1){this._softSelection=i}else{return this._selectItem(n,false,true)}this.update()}_focusItem(e){const t=this._items;if(t.length===0){this._focusIndex=0;this.node.focus();return}this._focusIndex=e;const n=t[e];const i=this.renderer.getNameNode(n);if(i){i.tabIndex=0;i.focus()}}_allSelectedBetween(e,t){if(e===t){return}const[n,i]=e<t?[e+1,t]:[t+1,e];return this._sortedItems.slice(n,i).reduce(((e,t)=>e&&this.selection[t.path]),true)}_handleMultiSelect(e){const t=this._sortedItems;const n=this._focusIndex;const i=t[e];let s=true;if(e===n){this.selection[i.path]=true;return}if(this.selection[i.path]){if(Math.abs(e-n)===1){const i=t[n];const s=t[n+(e<n?1:-1)];if(this.selection[i.path]&&(!s||!this.selection[s.path])){delete this.selection[i.path]}}else if(this._allSelectedBetween(n,e)){s=false}}const o=n<e?1:-1;for(let r=n;r!==e+o;r+=o){if(s){if(r===n){continue}this.selection[t[r].path]=true}else{if(r===e){continue}delete this.selection[t[r].path]}}}_copy(){this._clipboard.length=0;for(const e of this.selectedItems()){this._clipboard.push(e.path)}}async _delete(e){await Promise.all(e.map((e=>this._model.manager.deleteFile(e).catch((e=>{void(0,i.showErrorMessage)(this._trans._p("showErrorMessage","Delete Failed"),e)})))))}async _doRename(){this._inRename=true;const e=Object.keys(this.selection);if(e.length===0){this._inRename=false;return Promise.resolve("")}const t=this._sortedItems;let{path:n}=t[this._focusIndex];if(!this.selection[n]){n=e.slice(-1)[0]}const s=c.ArrayExt.findFirstIndex(t,(e=>e.path===n));const o=this._items[s];const r=t[s];const a=this.renderer.getNameNode(o);const h=r.name;this._editNode.value=h;this._selectItem(s,false,true);const u=await ae.userInputForRename(a,this._editNode,h);if(this.isDisposed){this._inRename=false;throw new Error("File browser is disposed.")}let p=u;if(!u||u===h){p=h}else if(!(0,d.isValidFileName)(u)){void(0,i.showErrorMessage)(this._trans.__("Rename Error"),Error(this._trans._p("showErrorMessage",'"%1" is not a valid name for a file. Names must have nonzero length, and cannot include "/", "\\", or ":"',u)));p=h}else{const e=this._manager;const t=l.PathExt.join(this._model.path,h);const n=l.PathExt.join(this._model.path,u);try{await(0,d.renameFile)(e,t,n)}catch(m){if(m!=="File not renamed"){void(0,i.showErrorMessage)(this._trans._p("showErrorMessage","Rename Error"),m)}p=h}if(this.isDisposed){this._inRename=false;throw new Error("File browser is disposed.")}}if(!this.isDisposed&&Object.keys(this.selection).length===1&&this.selection[r.path]){try{await this.selectItemByName(p,true)}catch(g){console.warn("After rename, failed to select file",p)}}this._inRename=false;return p}_selectItem(e,t,n=true){const i=this._sortedItems;if(!t){this.clearSelectedItems()}const s=i[e].path;this.selection[s]=true;if(n){this._focusItem(e)}this.update()}_onModelRefreshed(){const e=Object.keys(this.selection);this.clearSelectedItems();for(const t of this._model.items()){const n=t.path;if(e.indexOf(n)!==-1){this.selection[n]=true}}if(this.isVisible){this.sort(this.sortState)}else{this._isDirty=true}}_onPathChanged(){this.clearSelectedItems();this.sort(this.sortState);requestAnimationFrame((()=>{this._focusItem(0)}))}_onFileChanged(e,t){const n=t.newValue;if(!n){return}const i=n.name;if(t.type!=="new"||!i){return}void this.selectItemByName(i).catch((()=>{}))}_onActivateRequested(e,t){const n=l.PathExt.dirname(t);if(n!==this._model.path){return}const i=l.PathExt.basename(t);this.selectItemByName(i).catch((()=>{}))}}(function(e){class t{createNode(){const e=document.createElement("div");const t=document.createElement("div");const n=document.createElement("ul");n.className=L;t.className=E;e.appendChild(t);e.appendChild(n);e.tabIndex=-1;return e}populateHeaderNode(e,t,n){t=t||o.nullTranslator;const s=t.load("jupyterlab");const r=this.createHeaderItemNode(s.__("Name"));const a=document.createElement("div");const l=this.createHeaderItemNode(s.__("Last Modified"));const d=this.createHeaderItemNode(s.__("File Size"));r.classList.add(z);r.classList.add(Z);l.classList.add(H);d.classList.add(W);a.classList.add(V);a.textContent="...";if(!(n===null||n===void 0?void 0:n.has("is_selected"))){const t=this.createCheckboxWrapperNode({alwaysVisible:true});e.appendChild(t)}e.appendChild(r);e.appendChild(a);e.appendChild(l);e.appendChild(d);if(n===null||n===void 0?void 0:n.has("last_modified")){l.classList.add(U)}else{l.classList.remove(U)}if(n===null||n===void 0?void 0:n.has("file_size")){d.classList.add($)}else{d.classList.remove($)}ae.updateCaret(i.DOMUtils.findElement(r,D),"right","up")}handleHeaderClick(e,t){const n=i.DOMUtils.findElement(e,z);const s=i.DOMUtils.findElement(e,H);const o=i.DOMUtils.findElement(e,W);const r={direction:"ascending",key:"name"};const a=t.target;const l=i.DOMUtils.findElement(s,D);const d=i.DOMUtils.findElement(o,D);const c=i.DOMUtils.findElement(n,D);if(n.contains(a)){if(n.classList.contains(Z)){if(!n.classList.contains(te)){r.direction="descending";n.classList.add(te);ae.updateCaret(c,"right","down")}else{n.classList.remove(te);ae.updateCaret(c,"right","up")}}else{n.classList.remove(te);ae.updateCaret(c,"right","up")}n.classList.add(Z);s.classList.remove(Z);s.classList.remove(te);o.classList.remove(Z);o.classList.remove(te);ae.updateCaret(l,"left");ae.updateCaret(d,"left");return r}if(s.contains(a)){r.key="last_modified";if(s.classList.contains(Z)){if(!s.classList.contains(te)){r.direction="descending";s.classList.add(te);ae.updateCaret(l,"left","down")}else{s.classList.remove(te);ae.updateCaret(l,"left","up")}}else{s.classList.remove(te);ae.updateCaret(l,"left","up")}s.classList.add(Z);n.classList.remove(Z);n.classList.remove(te);o.classList.remove(Z);o.classList.remove(te);ae.updateCaret(c,"right");ae.updateCaret(d,"left");return r}if(o.contains(a)){r.key="file_size";if(o.classList.contains(Z)){if(!o.classList.contains(te)){r.direction="descending";o.classList.add(te);ae.updateCaret(d,"left","down")}else{o.classList.remove(te);ae.updateCaret(d,"left","up")}}else{o.classList.remove(te);ae.updateCaret(d,"left","up")}o.classList.add(Z);n.classList.remove(Z);n.classList.remove(te);s.classList.remove(Z);s.classList.remove(te);ae.updateCaret(c,"right");ae.updateCaret(l,"left");return r}return r}createItemNode(e){const t=document.createElement("li");const n=document.createElement("span");const i=document.createElement("span");const s=document.createElement("span");const o=document.createElement("span");n.className=R;i.className=A;s.className=N;o.className=O;if(!(e===null||e===void 0?void 0:e.has("is_selected"))){const e=this.createCheckboxWrapperNode();t.appendChild(e)}t.appendChild(n);t.appendChild(i);t.appendChild(s);t.appendChild(o);if(e===null||e===void 0?void 0:e.has("last_modified")){s.classList.add(U)}else{s.classList.remove(U)}if(e===null||e===void 0?void 0:e.has("file_size")){o.classList.add($)}else{o.classList.remove($)}return t}createCheckboxWrapperNode(e){const t=document.createElement("label");t.classList.add(B);const n=document.createElement("input");n.type="checkbox";n.addEventListener("click",(e=>{e.preventDefault()}));if(e===null||e===void 0?void 0:e.alwaysVisible){t.classList.add("jp-mod-visible")}else{n.tabIndex=-1}t.appendChild(n);return t}updateItemNode(e,t,n,s,a,d){if(d){e.classList.add(Z)}n=n||w.DocumentRegistry.getDefaultTextFileType(s);const{icon:h,iconClass:u,name:p}=n;s=s||o.nullTranslator;const m=s.load("jupyterlab");const g=i.DOMUtils.findElement(e,R);const f=i.DOMUtils.findElement(e,A);const v=i.DOMUtils.findElement(e,N);const _=i.DOMUtils.findElement(e,O);const b=i.DOMUtils.findElement(e,B);const y=!(a===null||a===void 0?void 0:a.has("is_selected"));if(b&&!y){e.removeChild(b)}else if(y&&!b){const t=this.createCheckboxWrapperNode();e.insertBefore(t,g)}if(a===null||a===void 0?void 0:a.has("last_modified")){v.classList.add(U)}else{v.classList.remove(U)}if(a===null||a===void 0?void 0:a.has("file_size")){_.classList.add($)}else{_.classList.remove($)}r.LabIcon.resolveElement({icon:h,iconClass:(0,r.classes)(u,"jp-Icon"),container:g,className:R,stylesheet:"listing"});let C=m.__("Name: %1",t.name);if(t.size!==null&&t.size!==undefined){const e=ae.formatFileSize(t.size,1,1024);_.textContent=e;C+=m.__("\nSize: %1",ae.formatFileSize(t.size,1,1024))}else{_.textContent=""}if(t.path){const e=l.PathExt.dirname(t.path);if(e){C+=m.__("\nPath: %1",e.substr(0,50));if(e.length>50){C+="..."}}}if(t.created){C+=m.__("\nCreated: %1",l.Time.format(new Date(t.created)))}if(t.last_modified){C+=m.__("\nModified: %1",l.Time.format(new Date(t.last_modified)))}C+=m.__("\nWritable: %1",t.writable);e.title=C;e.setAttribute("data-file-type",p);if(t.name.startsWith(".")){e.setAttribute("data-is-dot","true")}else{e.removeAttribute("data-is-dot")}const x=!t.indices?[]:t.indices;let S=c.StringExt.highlight(t.name,x,j.h.mark);if(f){j.VirtualDOM.render(j.h.span(S),f)}const k=b===null||b===void 0?void 0:b.querySelector('input[type="checkbox"]');if(k){let e;if(n.contentType==="directory"){e=d?m.__('Deselect directory "%1"',S):m.__('Select directory "%1"',S)}else{e=d?m.__('Deselect file "%1"',S):m.__('Select file "%1"',S)}k.setAttribute("aria-label",e);k.checked=d!==null&&d!==void 0?d:false}let M="";let E="";if(t.last_modified){M=l.Time.formatHuman(new Date(t.last_modified));E=l.Time.format(new Date(t.last_modified))}v.textContent=M;v.title=E}getNameNode(e){return i.DOMUtils.findElement(e,A)}getCheckboxNode(e){return e.querySelector(`.${B} input[type=checkbox]`)}createDragImage(e,t,n,s){const o=e.cloneNode(true);const r=i.DOMUtils.findElement(o,N);const a=i.DOMUtils.findElement(o,R);o.removeChild(r);if(!s){a.textContent="";a.className=""}else{a.textContent=s.iconLabel||"";a.className=s.iconClass||""}a.classList.add(G);if(t>1){const e=i.DOMUtils.findElement(o,A);e.textContent=n._n("%1 Item","%1 Items",t)}return o}createHeaderItemNode(e){const t=document.createElement("div");const n=document.createElement("span");const i=document.createElement("span");t.className=I;n.className=T;i.className=D;n.textContent=e;t.appendChild(n);t.appendChild(i);return t}}e.Renderer=t;e.defaultRenderer=new t})(re||(re={}));var ae;(function(e){function t(e,t,n){const i=e.parentElement;i.replaceChild(t,e);t.focus();const s=t.value.lastIndexOf(".");if(s===-1){t.setSelectionRange(0,t.value.length)}else{t.setSelectionRange(0,s)}return new Promise((s=>{t.onblur=()=>{i.replaceChild(e,t);s(t.value)};t.onkeydown=i=>{switch(i.keyCode){case 13:i.stopPropagation();i.preventDefault();t.blur();break;case 27:i.stopPropagation();i.preventDefault();t.value=n;t.blur();e.focus();break;default:break}}}))}e.userInputForRename=t;function n(e,t,n=false){const i=Array.from(e);const s=t.direction==="descending"?1:-1;function o(e,t){if(n){return e.type!==t.type}return e.type==="directory"!==(t.type==="directory")}function r(e){if(e.type==="directory"){return 2}if(e.type==="notebook"&&n){return 1}return 0}function a(e){return(t,n)=>{if(o(t,n)){return r(n)-r(t)}const i=e(t,n);if(i!==0){return i*s}return t.name.localeCompare(n.name)}}if(t.key==="last_modified"){i.sort(a(((e,t)=>new Date(e.last_modified).getTime()-new Date(t.last_modified).getTime())))}else if(t.key==="file_size"){i.sort(a(((e,t)=>{var n,i;return((n=e.size)!==null&&n!==void 0?n:0)-((i=t.size)!==null&&i!==void 0?i:0)})))}else{i.sort(a(((e,t)=>t.name.localeCompare(e.name))))}return i}e.sort=n;function i(e,t){return c.ArrayExt.findFirstIndex(e,(e=>h.ElementExt.hitTest(e,t.clientX,t.clientY)||t.target===e))}e.hitTestNodes=i;function s(e,t,n){if(e===0){return"0 B"}const i=t||2;const s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];const o=Math.floor(Math.log(e)/Math.log(n));if(o>=0&&o<s.length){return parseFloat((e/Math.pow(n,o)).toFixed(i))+" "+s[o]}else{return String(e)}}e.formatFileSize=s;function o(e,t,n){if(n){(n==="down"?r.caretDownIcon:r.caretUpIcon).element({container:e,tag:"span",stylesheet:"listingHeaderItem",float:t})}else{r.LabIcon.remove(e);e.className=D}}e.updateCaret=o})(ae||(ae={}));const le="jp-FileBrowser";const de="jp-FileBrowser-Panel";const ce="jp-FileBrowser-crumbs";const he="jp-FileBrowser-toolbar";const ue="jp-FileBrowser-listing";class pe extends r.SidePanel{constructor(e){var t;super({content:new a.Panel,translator:e.translator});this._directoryPending=null;this._filePending=null;this._showLastModifiedColumn=true;this._showFileSizeColumn=false;this._showHiddenFiles=false;this._showFileCheckboxes=false;this._sortNotebooksFirst=false;this.addClass(le);this.toolbar.addClass(he);this.id=e.id;const n=this.translator=(t=e.translator)!==null&&t!==void 0?t:o.nullTranslator;const i=this.model=e.model;const s=e.renderer;i.connectionFailure.connect(this._onConnectionFailure,this);this._manager=i.manager;this.toolbar.node.setAttribute("role","navigation");this.toolbar.node.setAttribute("aria-label",this._trans.__("file browser"));this.mainPanel=new a.Panel;this.mainPanel.addClass(de);this.mainPanel.title.label=this._trans.__("File Browser");this.crumbs=new b({model:i,translator:n});this.crumbs.addClass(ce);this.listing=this.createDirListing({model:i,renderer:s,translator:n});this.listing.addClass(ue);this.mainPanel.addWidget(this.crumbs);this.mainPanel.addWidget(this.listing);this.addWidget(this.mainPanel);if(e.restore!==false){void i.restore(this.id)}}get navigateToCurrentDirectory(){return this._navigateToCurrentDirectory}set navigateToCurrentDirectory(e){this._navigateToCurrentDirectory=e}get showLastModifiedColumn(){return this._showLastModifiedColumn}set showLastModifiedColumn(e){if(this.listing.setColumnVisibility){this.listing.setColumnVisibility("last_modified",e);this._showLastModifiedColumn=e}else{console.warn("Listing does not support toggling column visibility")}}get showFileSizeColumn(){return this._showFileSizeColumn}set showFileSizeColumn(e){if(this.listing.setColumnVisibility){this.listing.setColumnVisibility("file_size",e);this._showFileSizeColumn=e}else{console.warn("Listing does not support toggling column visibility")}}get showHiddenFiles(){return this._showHiddenFiles}set showHiddenFiles(e){this.model.showHiddenFiles(e);this._showHiddenFiles=e}get showFileCheckboxes(){return this._showFileCheckboxes}set showFileCheckboxes(e){if(this.listing.setColumnVisibility){this.listing.setColumnVisibility("is_selected",e);this._showFileCheckboxes=e}else{console.warn("Listing does not support toggling column visibility")}}get sortNotebooksFirst(){return this._sortNotebooksFirst}set sortNotebooksFirst(e){if(this.listing.setNotebooksFirstSorting){this.listing.setNotebooksFirstSorting(e);this._sortNotebooksFirst=e}else{console.warn("Listing does not support sorting notebooks first")}}selectedItems(){return this.listing.selectedItems()}async selectItemByName(e){await this.listing.selectItemByName(e)}clearSelectedItems(){this.listing.clearSelectedItems()}rename(){return this.listing.rename()}cut(){this.listing.cut()}copy(){this.listing.copy()}paste(){return this.listing.paste()}async _createNew(e){try{const t=await this._manager.newUntitled(e);await this.listing.selectItemByName(t.name,true);await this.rename();return t}catch(t){void(0,i.showErrorMessage)(this._trans.__("Error"),t);throw t}}async createNewDirectory(){if(this._directoryPending){return this._directoryPending}this._directoryPending=this._createNew({path:this.model.path,type:"directory"});try{return await this._directoryPending}finally{this._directoryPending=null}}async createNewFile(e){if(this._filePending){return this._filePending}this._filePending=this._createNew({path:this.model.path,type:"file",ext:e.ext});try{return await this._filePending}finally{this._filePending=null}}delete(){return this.listing.delete()}duplicate(){return this.listing.duplicate()}download(){return this.listing.download()}async goUp(){return this.listing.goUp()}shutdownKernels(){return this.listing.shutdownKernels()}selectNext(){this.listing.selectNext()}selectPrevious(){this.listing.selectPrevious()}modelForClick(e){return this.listing.modelForClick(e)}createDirListing(e){return new re(e)}_onConnectionFailure(e,t){if(t instanceof s.ServerConnection.ResponseError&&t.response.status===404){const e=this._trans.__("Directory not found");t.message=this._trans.__('Directory not found: "%1"',this.model.path);void(0,i.showErrorMessage)(e,t)}}}var me=n(95905);const ge=1e4;const fe=15*1024*1024;const ve=1024*1024;class _e{constructor(e){var t;this._connectionFailure=new k.Signal(this);this._fileChanged=new k.Signal(this);this._items=[];this._key="";this._pathChanged=new k.Signal(this);this._paths=new Set;this._pending=null;this._pendingPath=null;this._refreshed=new k.Signal(this);this._sessions=[];this._state=null;this._isDisposed=false;this._restored=new C.PromiseDelegate;this._uploads=[];this._uploadChanged=new k.Signal(this);this.manager=e.manager;this.translator=e.translator||o.nullTranslator;this._trans=this.translator.load("jupyterlab");this._driveName=e.driveName||"";this._model={path:this.rootPath,name:l.PathExt.basename(this.rootPath),type:"directory",content:undefined,writable:false,created:"unknown",last_modified:"unknown",mimetype:"text/plain",format:"text"};this._state=e.state||null;const n=e.refreshInterval||ge;const{services:i}=e.manager;i.contents.fileChanged.connect(this.onFileChanged,this);i.sessions.runningChanged.connect(this.onRunningChanged,this);this._unloadEventListener=e=>{if(this._uploads.length>0){const t=this._trans.__("Files still uploading");e.returnValue=t;return t}};window.addEventListener("beforeunload",this._unloadEventListener);this._poll=new me.Poll({auto:(t=e.auto)!==null&&t!==void 0?t:true,name:"@jupyterlab/filebrowser:Model",factory:()=>this.cd("."),frequency:{interval:n,backoff:true,max:300*1e3},standby:e.refreshStandby||"when-hidden"})}get connectionFailure(){return this._connectionFailure}get driveName(){return this._driveName}get restored(){return this._restored.promise}get fileChanged(){return this._fileChanged}get path(){return this._model?this._model.path:""}get rootPath(){return this._driveName?this._driveName+":":""}get pathChanged(){return this._pathChanged}get refreshed(){return this._refreshed}get specs(){return this.manager.services.kernelspecs.specs}get isDisposed(){return this._isDisposed}get uploadChanged(){return this._uploadChanged}uploads(){return this._uploads[Symbol.iterator]()}dispose(){if(this.isDisposed){return}window.removeEventListener("beforeunload",this._unloadEventListener);this._isDisposed=true;this._poll.dispose();this._sessions.length=0;this._items.length=0;k.Signal.clearData(this)}items(){return this._items[Symbol.iterator]()}sessions(){return this._sessions[Symbol.iterator]()}async refresh(){await this._poll.refresh();await this._poll.tick;this._refreshed.emit(void 0)}async cd(e="."){if(e!=="."){e=this.manager.services.contents.resolvePath(this._model.path,e)}else{e=this._pendingPath||this._model.path}if(this._pending){if(e===this._pendingPath){return this._pending}await this._pending}const t=this.path;const n={content:true};this._pendingPath=e;if(t!==e){this._sessions.length=0}const i=this.manager.services;this._pending=i.contents.get(e,n).then((n=>{if(this.isDisposed){return}this.handleContents(n);this._pendingPath=null;this._pending=null;if(t!==e){if(this._state&&this._key){void this._state.save(this._key,{path:e})}this._pathChanged.emit({name:"path",oldValue:t,newValue:e})}this.onRunningChanged(i.sessions,i.sessions.running());this._refreshed.emit(void 0)})).catch((t=>{this._pendingPath=null;this._pending=null;if(t.response&&t.response.status===404&&e!=="/"){t.message=this._trans.__('Directory not found: "%1"',this._model.path);console.error(t);this._connectionFailure.emit(t);return this.cd("/")}else{this._connectionFailure.emit(t)}}));return this._pending}async download(e){const t=await this.manager.services.contents.getDownloadUrl(e);const n=document.createElement("a");n.href=t;n.download="";document.body.appendChild(n);n.click();document.body.removeChild(n);return void 0}async restore(e,t=true){const{manager:n}=this;const i=`file-browser-${e}:cwd`;const s=this._state;const o=!!this._key;if(o){return}this._key=i;if(!t||!s){this._restored.resolve(undefined);return}await n.services.ready;try{const e=await s.fetch(i);if(!e){this._restored.resolve(undefined);return}const t=e["path"];if(t){await this.cd("/")}const o=n.services.contents.localPath(t);await n.services.contents.get(t);await this.cd(o)}catch(r){await s.remove(i)}this._restored.resolve(undefined)}async upload(e){const t=l.PageConfig.getNotebookVersion();const n=t<[4,0,0]||t>=[5,1,0];const i=e.size>fe;if(i&&!n){const t=this._trans.__("Cannot upload file (>%1 MB). %2",fe/(1024*1024),e.name);console.warn(t);throw t}const s="File not uploaded";if(i&&!(await this._shouldUploadLarge(e))){throw"Cancelled large file upload"}await this._uploadCheckDisposed();await this.refresh();await this._uploadCheckDisposed();if(this._items.find((t=>t.name===e.name))&&!(await(0,d.shouldOverwrite)(e.name))){throw s}await this._uploadCheckDisposed();const o=n&&e.size>ve;return await this._upload(e,o)}async _shouldUploadLarge(e){const{button:t}=await(0,i.showDialog)({title:this._trans.__("Large file size warning"),body:this._trans.__("The file size is %1 MB. Do you still want to upload it?",Math.round(e.size/(1024*1024))),buttons:[i.Dialog.cancelButton({label:this._trans.__("Cancel")}),i.Dialog.warnButton({label:this._trans.__("Upload")})]});return t.accept}async _upload(e,t){let n=this._model.path;n=n?n+"/"+e.name:e.name;const i=e.name;const s="file";const o="base64";const r=async(t,r)=>{await this._uploadCheckDisposed();const a=new FileReader;a.readAsDataURL(t);await new Promise(((t,n)=>{a.onload=t;a.onerror=t=>n(`Failed to upload "${e.name}":`+t)}));await this._uploadCheckDisposed();const l=a.result.split(",")[1];const d={type:s,format:o,name:i,chunk:r,content:l};return await this.manager.services.contents.save(n,d)};if(!t){try{return await r(e)}catch(d){c.ArrayExt.removeFirstWhere(this._uploads,(t=>e.name===t.path));throw d}}let a;let l={path:n,progress:0};this._uploadChanged.emit({name:"start",newValue:l,oldValue:null});for(let h=0;!a;h+=ve){const t=h+ve;const i=t>=e.size;const s=i?-1:t/ve;const o={path:n,progress:h/e.size};this._uploads.splice(this._uploads.indexOf(l));this._uploads.push(o);this._uploadChanged.emit({name:"update",newValue:o,oldValue:l});l=o;let u;try{u=await r(e.slice(h,t),s)}catch(d){c.ArrayExt.removeFirstWhere(this._uploads,(t=>e.name===t.path));this._uploadChanged.emit({name:"failure",newValue:l,oldValue:null});throw d}if(i){a=u}}this._uploads.splice(this._uploads.indexOf(l));this._uploadChanged.emit({name:"finish",newValue:null,oldValue:l});return a}_uploadCheckDisposed(){if(this.isDisposed){return Promise.reject("Filemanager disposed. File upload canceled")}return Promise.resolve()}handleContents(e){this._model={name:e.name,path:e.path,type:e.type,content:undefined,writable:e.writable,created:e.created,last_modified:e.last_modified,size:e.size,mimetype:e.mimetype,format:e.format};this._items=e.content;this._paths.clear();e.content.forEach((e=>{this._paths.add(e.path)}))}onRunningChanged(e,t){this._populateSessions(t);this._refreshed.emit(void 0)}onFileChanged(e,t){const n=this._model.path;const{sessions:i}=this.manager.services;const{oldValue:s,newValue:o}=t;const r=s&&s.path&&l.PathExt.dirname(s.path)===n?s:o&&o.path&&l.PathExt.dirname(o.path)===n?o:undefined;if(r){void this._poll.refresh();this._populateSessions(i.running());this._fileChanged.emit(t);return}}_populateSessions(e){this._sessions.length=0;for(const t of e){if(this._paths.has(t.path)){this._sessions.push(t)}}}}class be extends _e{constructor(e){super(e);this._includeHiddenFiles=e.includeHiddenFiles||false}items(){return this._includeHiddenFiles?super.items():(0,c.filter)(super.items(),(e=>!e.name.startsWith(".")))}showHiddenFiles(e){this._includeHiddenFiles=e;void this.refresh()}}class ye extends be{constructor(e){var t,n;super(e);this._filter=(t=e.filter)!==null&&t!==void 0?t:e=>({});this._filterDirectories=(n=e.filterDirectories)!==null&&n!==void 0?n:true}get filterDirectories(){return this._filterDirectories}set filterDirectories(e){this._filterDirectories=e}items(){return(0,c.filter)(super.items(),(e=>{if(!this._filterDirectories&&e.type==="directory"){return true}else{const t=this._filter(e);e.indices=t===null||t===void 0?void 0:t.indices;return!!t}}))}setFilter(e){this._filter=e;void this.refresh()}}const we="jp-Open-Dialog";var Ce;(function(e){function t(e){const t=e.translator||o.nullTranslator;const n=t.load("jupyterlab");const s={title:e.title,buttons:[i.Dialog.cancelButton(),i.Dialog.okButton({label:n.__("Select")})],focusNodeSelector:e.focusNodeSelector,host:e.host,renderer:e.renderer,body:new xe(e.manager,e.filter,t)};const r=new i.Dialog(s);return r.launch()}e.getOpenFiles=t;function n(e){return t({...e,filter:e=>e.type==="directory"?{}:null})}e.getExistingDirectory=n})(Ce||(Ce={}));class xe extends a.Widget{constructor(e,t,n,s){super();n=n!==null&&n!==void 0?n:o.nullTranslator;const l=n.load("jupyterlab");this.addClass(we);this._browser=Se.createFilteredFileBrowser("filtered-file-browser-dialog",e,t,{},n,s);(0,i.setToolbar)(this._browser,(e=>[{name:"new-folder",widget:new i.ToolbarButton({icon:r.newFolderIcon,onClick:()=>{void e.createNewDirectory()},tooltip:l.__("New Folder")})},{name:"refresher",widget:new i.ToolbarButton({icon:r.refreshIcon,onClick:()=>{e.model.refresh().catch((e=>{console.error("Failed to refresh file browser in open dialog.",e)}))},tooltip:l.__("Refresh File List")})}]));const d=new a.PanelLayout;d.addWidget(this._browser);this.layout=d}getValue(){const e=Array.from(this._browser.selectedItems());if(e.length===0){return[{path:this._browser.model.path,name:l.PathExt.basename(this._browser.model.path),type:"directory",content:undefined,writable:false,created:"unknown",last_modified:"unknown",mimetype:"text/plain",format:"text"}]}else{return e}}}var Se;(function(e){e.createFilteredFileBrowser=(e,t,n,i={},s,r)=>{s=s||o.nullTranslator;const a=new ye({manager:t,filter:n,translator:s,driveName:i.driveName,refreshInterval:i.refreshInterval,filterDirectories:r});const l=new pe({id:e,model:a,translator:s});return l}})(Se||(Se={}));const ke=new C.Token("@jupyterlab/filebrowser:IFileBrowserFactory",`A factory object that creates file browsers.\n  Use this if you want to create your own file browser (e.g., for a custom storage backend),\n  or to interact with other file browsers that have been created by extensions.`);const je=new C.Token("@jupyterlab/filebrowser:IDefaultFileBrowser","A service for the default file browser.");const Me=new C.Token("@jupyterlab/filebrowser:IFileBrowserCommands","A token to ensure file browser commands are loaded.");class Ee extends r.ToolbarButton{constructor(e){super({icon:r.fileUploadIcon,label:e.label,onClick:()=>{this._input.click()},tooltip:Ie.translateToolTip(e.translator)});this._onInputChanged=()=>{const e=Array.prototype.slice.call(this._input.files);const t=e.map((e=>this.fileBrowserModel.upload(e)));void Promise.all(t).catch((e=>{void(0,i.showErrorMessage)(this._trans._p("showErrorMessage","Upload Error"),e)}))};this._onInputClicked=()=>{this._input.value=""};this._input=Ie.createUploadInput();this.fileBrowserModel=e.model;this.translator=e.translator||o.nullTranslator;this._trans=this.translator.load("jupyterlab");this._input.onclick=this._onInputClicked;this._input.onchange=this._onInputChanged;this.addClass("jp-id-upload")}}var Ie;(function(e){function t(){const e=document.createElement("input");e.type="file";e.multiple=true;return e}e.createUploadInput=t;function n(e){e=e||o.nullTranslator;const t=e.load("jupyterlab");return t.__("Upload Files")}e.translateToolTip=n})(Ie||(Ie={}));var Te=n(88478);var De=n(28416);var Le=n.n(De);const Pe=4;function Ae(e){const t=e.translator||o.nullTranslator;const n=t.load("jupyterlab");return Le().createElement(Te.GroupItem,{spacing:Pe},Le().createElement(Te.TextItem,{source:n.__("Uploading")}),Le().createElement(Te.ProgressBar,{percentage:e.upload}))}const Re=2e3;class Ne extends r.VDomRenderer{constructor(e){super(new Ne.Model(e.tracker.currentWidget&&e.tracker.currentWidget.model));this._onBrowserChange=(e,t)=>{if(t===null){this.model.browserModel=null}else{this.model.browserModel=t.model}};this.translator=e.translator||o.nullTranslator;this._trans=this.translator.load("jupyterlab");this._tracker=e.tracker;this._tracker.currentChanged.connect(this._onBrowserChange)}render(){const e=this.model.items;if(e.length>0){const e=this.model.items[0];if(e.complete){return Le().createElement(Te.TextItem,{source:this._trans.__("Complete!")})}else{return Le().createElement(Ae,{upload:this.model.items[0].progress,translator:this.translator})}}else{return Le().createElement(Ae,{upload:100,translator:this.translator})}}dispose(){super.dispose();this._tracker.currentChanged.disconnect(this._onBrowserChange)}}(function(e){class t extends r.VDomModel{constructor(e){super();this._uploadChanged=(e,t)=>{if(t.name==="start"){this._items.push({path:t.newValue.path,progress:t.newValue.progress*100,complete:false})}else if(t.name==="update"){const e=c.ArrayExt.findFirstIndex(this._items,(e=>e.path===t.oldValue.path));if(e!==-1){this._items[e].progress=t.newValue.progress*100}}else if(t.name==="finish"){const e=c.ArrayExt.findFirstValue(this._items,(e=>e.path===t.oldValue.path));if(e){e.complete=true;setTimeout((()=>{c.ArrayExt.removeFirstOf(this._items,e);this.stateChanged.emit(void 0)}),Re)}}else if(t.name==="failure"){c.ArrayExt.removeFirstWhere(this._items,(e=>e.path===t.newValue.path))}this.stateChanged.emit(void 0)};this._items=[];this._browserModel=null;this.browserModel=e}get items(){return this._items}get browserModel(){return this._browserModel}set browserModel(e){const t=this._browserModel;if(t){t.uploadChanged.disconnect(this._uploadChanged)}this._browserModel=e;this._items=[];if(this._browserModel!==null){this._browserModel.uploadChanged.connect(this._uploadChanged)}this.stateChanged.emit(void 0)}}e.Model=t})(Ne||(Ne={}))},59240:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(22748);var a=n(94683);var l=n(82401);var d=n(93379);var c=n.n(d);var h=n(7795);var u=n.n(h);var p=n(90569);var m=n.n(p);var g=n(3565);var f=n.n(g);var v=n(19216);var _=n.n(v);var b=n(44589);var y=n.n(b);var w=n(36033);var C={};C.styleTagTransform=y();C.setAttributes=f();C.insert=m().bind(null,"head");C.domAPI=u();C.insertStyleElement=_();var x=c()(w.Z,C);const S=w.Z&&w.Z.locals?w.Z.locals:undefined},18167:(e,t,n)=>{"use strict";n.r(t);n.d(t,{Commands:()=>E,default:()=>O,tabSpaceStatus:()=>D});var i=n(44906);var s=n(90848);var o=n(47391);var r=n(96912);var a=n(83408);var l=n(85257);var d=n(15645);var c=n(30796);var h=n(2e3);var u=n(9036);var p=n(75900);var m=n(46054);var g=n(51997);var f=n(88478);var v=n(85147);var _=n(36168);var b=n(52435);var y=n(58740);var w=n(45026);var C=n(52993);var x=n(22873);const S="notebook:toggle-autoclosing-brackets";const k="console:toggle-autoclosing-brackets";var j;(function(e){e.createNew="fileeditor:create-new";e.createNewMarkdown="fileeditor:create-new-markdown-file";e.changeFontSize="fileeditor:change-font-size";e.lineNumbers="fileeditor:toggle-line-numbers";e.currentLineNumbers="fileeditor:toggle-current-line-numbers";e.lineWrap="fileeditor:toggle-line-wrap";e.currentLineWrap="fileeditor:toggle-current-line-wrap";e.changeTabs="fileeditor:change-tabs";e.matchBrackets="fileeditor:toggle-match-brackets";e.currentMatchBrackets="fileeditor:toggle-current-match-brackets";e.autoClosingBrackets="fileeditor:toggle-autoclosing-brackets";e.autoClosingBracketsUniversal="fileeditor:toggle-autoclosing-brackets-universal";e.createConsole="fileeditor:create-console";e.replaceSelection="fileeditor:replace-selection";e.restartConsole="fileeditor:restart-console";e.runCode="fileeditor:run-code";e.runAllCode="fileeditor:run-all";e.markdownPreview="fileeditor:markdown-preview";e.undo="fileeditor:undo";e.redo="fileeditor:redo";e.cut="fileeditor:cut";e.copy="fileeditor:copy";e.paste="fileeditor:paste";e.selectAll="fileeditor:select-all";e.invokeCompleter="completer:invoke-file";e.selectCompleter="completer:select-file";e.openCodeViewer="code-viewer:open";e.changeTheme="fileeditor:change-theme";e.changeLanguage="fileeditor:change-language";e.find="fileeditor:find";e.goToLine="fileeditor:go-to-line"})(j||(j={}));const M="Editor";var E;(function(e){let t={};let n=true;function i(e,t){return async function n(i,s){var o,r,a;const l=s||{};const d=await e.execute("console:create",{activate:l["activate"],name:(o=i.context.contentsModel)===null||o===void 0?void 0:o.name,path:i.context.path,preferredLanguage:i.context.model.defaultKernelLanguage||((a=(r=t.findByFileName(i.context.path))===null||r===void 0?void 0:r.name)!==null&&a!==void 0?a:""),ref:i.id,insertMode:"split-bottom"});i.context.pathChanged.connect(((e,t)=>{var n;d.session.setPath(t);d.session.setName((n=i.context.contentsModel)===null||n===void 0?void 0:n.name)}))}}function r(e,i){var s;t=(s=e.get("editorConfig").composite)!==null&&s!==void 0?s:{};n=e.get("scrollPasteEnd").composite;i.notifyCommandChanged(j.lineNumbers);i.notifyCommandChanged(j.currentLineNumbers);i.notifyCommandChanged(j.lineWrap);i.notifyCommandChanged(j.currentLineWrap);i.notifyCommandChanged(j.changeTabs);i.notifyCommandChanged(j.matchBrackets);i.notifyCommandChanged(j.currentMatchBrackets);i.notifyCommandChanged(j.autoClosingBrackets);i.notifyCommandChanged(j.changeLanguage)}e.updateSettings=r;function a(e){e.forEach((e=>{l(e.content)}))}e.updateTracker=a;function l(e){const i=e.editor;i.setOptions({...t,scrollPastEnd:n})}e.updateWidget=l;function d(e,n,o,r,a,l,d,c,m,g,f){e.addCommand(j.changeFontSize,{execute:e=>{var i;const s=Number(e["delta"]);if(Number.isNaN(s)){console.error(`${j.changeFontSize}: delta arg must be a number`);return}const o=window.getComputedStyle(document.documentElement);const a=parseInt(o.getPropertyValue("--jp-code-font-size"),10);const l=((i=t["customStyles"]["fontSize"])!==null&&i!==void 0?i:c.baseConfiguration["customStyles"]["fontSize"])||a;t.fontSize=l+s;return n.set(r,"editorConfig",t).catch((e=>{console.error(`Failed to set ${r}: ${e.message}`)}))},label:e=>{const t=Number(e["delta"]);if(Number.isNaN(t)){console.error(`${j.changeFontSize}: delta arg must be a number`)}if(t>0){return e.isMenu?o.__("Increase Text Editor Font Size"):o.__("Increase Font Size")}else{return e.isMenu?o.__("Decrease Text Editor Font Size"):o.__("Decrease Font Size")}}});e.addCommand(j.lineNumbers,{execute:async()=>{var e;t.lineNumbers=!((e=t.lineNumbers)!==null&&e!==void 0?e:c.baseConfiguration.lineNumbers);try{return await n.set(r,"editorConfig",t)}catch(i){console.error(`Failed to set ${r}: ${i.message}`)}},isEnabled:a,isToggled:()=>{var e;return(e=t.lineNumbers)!==null&&e!==void 0?e:c.baseConfiguration.lineNumbers},label:o.__("Show Line Numbers")});e.addCommand(j.currentLineNumbers,{label:o.__("Show Line Numbers"),caption:o.__("Show the line numbers for the current file."),execute:()=>{const e=l.currentWidget;if(!e){return}const t=!e.content.editor.getOption("lineNumbers");e.content.editor.setOption("lineNumbers",t)},isEnabled:a,isToggled:()=>{var e;const t=l.currentWidget;return(e=t===null||t===void 0?void 0:t.content.editor.getOption("lineNumbers"))!==null&&e!==void 0?e:false}});e.addCommand(j.lineWrap,{execute:async e=>{var i;t.lineWrap=(i=e["mode"])!==null&&i!==void 0?i:false;try{return await n.set(r,"editorConfig",t)}catch(s){console.error(`Failed to set ${r}: ${s.message}`)}},isEnabled:a,isToggled:e=>{var n,i;const s=(n=e["mode"])!==null&&n!==void 0?n:false;return s===((i=t.lineWrap)!==null&&i!==void 0?i:c.baseConfiguration.lineWrap)},label:o.__("Word Wrap")});e.addCommand(j.currentLineWrap,{label:o.__("Wrap Words"),caption:o.__("Wrap words for the current file."),execute:()=>{const e=l.currentWidget;if(!e){return}const t=e.content.editor.getOption("lineWrap");e.content.editor.setOption("lineWrap",!t)},isEnabled:a,isToggled:()=>{var e;const t=l.currentWidget;return(e=t===null||t===void 0?void 0:t.content.editor.getOption("lineWrap"))!==null&&e!==void 0?e:false}});e.addCommand(j.changeTabs,{label:e=>{var t;if(e.size){return o._p("v4","Spaces: %1",(t=e.size)!==null&&t!==void 0?t:"")}else{return o.__("Indent with Tab")}},execute:async e=>{var i;t.indentUnit=e["size"]!==undefined?((i=e["size"])!==null&&i!==void 0?i:"4").toString():"Tab";try{return await n.set(r,"editorConfig",t)}catch(s){console.error(`Failed to set ${r}: ${s.message}`)}},isToggled:e=>{var n;const i=(n=t.indentUnit)!==null&&n!==void 0?n:c.baseConfiguration.indentUnit;return e["size"]?e["size"]===i:"Tab"==i}});e.addCommand(j.matchBrackets,{execute:async()=>{var e;t.matchBrackets=!((e=t.matchBrackets)!==null&&e!==void 0?e:c.baseConfiguration.matchBrackets);try{return await n.set(r,"editorConfig",t)}catch(i){console.error(`Failed to set ${r}: ${i.message}`)}},label:o.__("Match Brackets"),isEnabled:a,isToggled:()=>{var e;return(e=t.matchBrackets)!==null&&e!==void 0?e:c.baseConfiguration.matchBrackets}});e.addCommand(j.currentMatchBrackets,{label:o.__("Match Brackets"),caption:o.__("Change match brackets for the current file."),execute:()=>{const e=l.currentWidget;if(!e){return}const t=!e.content.editor.getOption("matchBrackets");e.content.editor.setOption("matchBrackets",t)},isEnabled:a,isToggled:()=>{var e;const t=l.currentWidget;return(e=t===null||t===void 0?void 0:t.content.editor.getOption("matchBrackets"))!==null&&e!==void 0?e:false}});e.addCommand(j.autoClosingBrackets,{execute:async e=>{var i,s;t.autoClosingBrackets=!!((i=e["force"])!==null&&i!==void 0?i:!((s=t.autoClosingBrackets)!==null&&s!==void 0?s:c.baseConfiguration.autoClosingBrackets));try{return await n.set(r,"editorConfig",t)}catch(o){console.error(`Failed to set ${r}: ${o.message}`)}},label:o.__("Auto Close Brackets in Text Editor"),isToggled:()=>{var e;return(e=t.autoClosingBrackets)!==null&&e!==void 0?e:c.baseConfiguration.autoClosingBrackets}});e.addCommand(j.autoClosingBracketsUniversal,{execute:()=>{const t=e.isToggled(j.autoClosingBrackets)||e.isToggled(S)||e.isToggled(k);if(t){void e.execute(j.autoClosingBrackets,{force:false});void e.execute(S,{force:false});void e.execute(k,{force:false})}else{void e.execute(j.autoClosingBrackets,{force:true});void e.execute(S,{force:true});void e.execute(k,{force:true})}},label:o.__("Auto Close Brackets"),isToggled:()=>e.isToggled(j.autoClosingBrackets)||e.isToggled(S)||e.isToggled(k)});e.addCommand(j.changeTheme,{label:e=>{var n,i,s,r;return(r=(s=(i=(n=e.displayName)!==null&&n!==void 0?n:e.theme)!==null&&i!==void 0?i:t.theme)!==null&&s!==void 0?s:c.baseConfiguration.theme)!==null&&r!==void 0?r:o.__("Editor Theme")},execute:async e=>{var i;t.theme=(i=e["theme"])!==null&&i!==void 0?i:t.theme;try{return await n.set(r,"editorConfig",t)}catch(s){console.error(`Failed to set theme - ${s.message}`)}},isToggled:e=>{var n;return e["theme"]===((n=t.theme)!==null&&n!==void 0?n:c.baseConfiguration.theme)}});e.addCommand(j.find,{label:o.__("Find"),execute:()=>{const e=l.currentWidget;if(!e){return}const t=e.content.editor;t.execCommand(C.findNext)},isEnabled:a});e.addCommand(j.goToLine,{label:o.__("Go to Line"),execute:e=>{const t=l.currentWidget;if(!t){return}const n=t.content.editor;const i=e["line"];const s=e["column"];if(i!==undefined||s!==undefined){n.setCursorPosition({line:(i!==null&&i!==void 0?i:1)-1,column:(s!==null&&s!==void 0?s:1)-1})}else{n.execCommand(C.gotoLine)}},isEnabled:a});e.addCommand(j.changeLanguage,{label:e=>{var t,n;return(n=(t=e["displayName"])!==null&&t!==void 0?t:e["name"])!==null&&n!==void 0?n:o.__("Change editor language.")},execute:e=>{const t=e["name"];const n=l.currentWidget;if(t&&n){const e=m.findByName(t);if(e){n.content.model.mimeType=e.mime}}},isEnabled:a,isToggled:e=>{const t=l.currentWidget;if(!t){return false}const n=t.content.model.mimeType;const i=m.findByMIME(n);const s=i&&i.name;return e["name"]===s}});e.addCommand(j.replaceSelection,{execute:e=>{var t,n;const i=e["text"]||"";const s=l.currentWidget;if(!s){return}(n=(t=s.content.editor).replaceSelection)===null||n===void 0?void 0:n.call(t,i)},isEnabled:a,label:o.__("Replace Selection in Editor")});e.addCommand(j.createConsole,{execute:t=>{const n=l.currentWidget;if(!n){return}return i(e,m)(n,t)},isEnabled:a,icon:b.consoleIcon,label:o.__("Create Console for Editor")});e.addCommand(j.restartConsole,{execute:async()=>{var e;const t=(e=l.currentWidget)===null||e===void 0?void 0:e.content;if(!t||g===null){return}const n=g.find((e=>{var n;return((n=e.sessionContext.session)===null||n===void 0?void 0:n.path)===t.context.path}));if(n){return f.restart(n.sessionContext)}},label:o.__("Restart Kernel"),isEnabled:()=>g!==null&&a()});e.addCommand(j.runCode,{execute:()=>{var t;const n=(t=l.currentWidget)===null||t===void 0?void 0:t.content;if(!n){return}let i="";const s=n.editor;const o=n.context.path;const r=x.PathExt.extname(o);const a=s.getSelection();const{start:d,end:c}=a;let h=d.column!==c.column||d.line!==c.line;if(h){const e=s.getOffsetAt(a.start);const t=s.getOffsetAt(a.end);i=s.model.sharedModel.getSource().substring(e,t)}else if(x.MarkdownCodeBlocks.isMarkdown(r)){const e=s.model.sharedModel.getSource();const t=x.MarkdownCodeBlocks.findMarkdownCodeBlocks(e);for(const n of t){if(n.startLine<=d.line&&d.line<=n.endLine){i=n.code;h=true;break}}}if(!h){i=s.getLine(a.start.line);const e=s.getCursorPosition();if(e.line+1===s.lineCount){const e=s.model.sharedModel.getSource();s.model.sharedModel.setSource(e+"\n")}s.setCursorPosition({line:e.line+1,column:e.column})}const u=false;if(i){return e.execute("console:inject",{activate:u,code:i,path:o})}else{return Promise.resolve(void 0)}},isEnabled:a,label:o.__("Run Selected Code")});e.addCommand(j.runAllCode,{execute:()=>{var t;const n=(t=l.currentWidget)===null||t===void 0?void 0:t.content;if(!n){return}let i="";const s=n.editor;const o=s.model.sharedModel.getSource();const r=n.context.path;const a=x.PathExt.extname(r);if(x.MarkdownCodeBlocks.isMarkdown(a)){const e=x.MarkdownCodeBlocks.findMarkdownCodeBlocks(o);for(const t of e){i+=t.code}}else{i=o}const d=false;if(i){return e.execute("console:inject",{activate:d,code:i,path:r})}else{return Promise.resolve(void 0)}},isEnabled:a,label:o.__("Run All Code")});e.addCommand(j.markdownPreview,{execute:()=>{const t=l.currentWidget;if(!t){return}const n=t.context.path;return e.execute("markdownviewer:open",{path:n,options:{mode:"split-right"}})},isVisible:()=>{const e=l.currentWidget;return e&&x.PathExt.extname(e.context.path)===".md"||false},icon:b.markdownIcon,label:o.__("Show Markdown Preview")});e.addCommand(j.createNew,{label:e=>{var t,n;if(e.isPalette){return(t=e.paletteLabel)!==null&&t!==void 0?t:o.__("New Text File")}return(n=e.launcherLabel)!==null&&n!==void 0?n:o.__("Text File")},caption:e=>{var t;return(t=e.caption)!==null&&t!==void 0?t:o.__("Create a new text file")},icon:e=>{var t;return e.isPalette?undefined:b.LabIcon.resolve({icon:(t=e.iconName)!==null&&t!==void 0?t:b.textEditorIcon})},execute:t=>{var n;const i=t.cwd||d.model.path;return p(e,i,(n=t.fileExt)!==null&&n!==void 0?n:"txt")}});e.addCommand(j.createNewMarkdown,{label:e=>e["isPalette"]?o.__("New Markdown File"):o.__("Markdown File"),caption:o.__("Create a new markdown file"),icon:e=>e["isPalette"]?undefined:b.markdownIcon,execute:t=>{const n=t["cwd"]||d.model.path;return p(e,n,"md")}});e.addCommand(j.undo,{execute:()=>{var e;const t=(e=l.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return}t.editor.undo()},isEnabled:()=>{var e;if(!a()){return false}const t=(e=l.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return false}return true},icon:b.undoIcon.bindprops({stylesheet:"menuItem"}),label:o.__("Undo")});e.addCommand(j.redo,{execute:()=>{var e;const t=(e=l.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return}t.editor.redo()},isEnabled:()=>{var e;if(!a()){return false}const t=(e=l.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return false}return true},icon:b.redoIcon.bindprops({stylesheet:"menuItem"}),label:o.__("Redo")});e.addCommand(j.cut,{execute:()=>{var e;const t=(e=l.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return}const n=t.editor;const i=u(n);s.Clipboard.copyToSystem(i);n.replaceSelection&&n.replaceSelection("")},isEnabled:()=>{var e;if(!a()){return false}const t=(e=l.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return false}return h(t.editor)},icon:b.cutIcon.bindprops({stylesheet:"menuItem"}),label:o.__("Cut")});e.addCommand(j.copy,{execute:()=>{var e;const t=(e=l.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return}const n=t.editor;const i=u(n);s.Clipboard.copyToSystem(i)},isEnabled:()=>{var e;if(!a()){return false}const t=(e=l.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return false}return h(t.editor)},icon:b.copyIcon.bindprops({stylesheet:"menuItem"}),label:o.__("Copy")});e.addCommand(j.paste,{execute:async()=>{var e;const t=(e=l.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return}const n=t.editor;const i=window.navigator.clipboard;const s=await i.readText();if(s){n.replaceSelection&&n.replaceSelection(s)}},isEnabled:()=>{var e;return Boolean(a()&&((e=l.currentWidget)===null||e===void 0?void 0:e.content))},icon:b.pasteIcon.bindprops({stylesheet:"menuItem"}),label:o.__("Paste")});e.addCommand(j.selectAll,{execute:()=>{var e;const t=(e=l.currentWidget)===null||e===void 0?void 0:e.content;if(!t){return}const n=t.editor;n.execCommand(w.selectAll)},isEnabled:()=>{var e;return Boolean(a()&&((e=l.currentWidget)===null||e===void 0?void 0:e.content))},label:o.__("Select All")})}e.addCommands=d;function c(e,t,n,i){const s=(i!==null&&i!==void 0?i:_.nullTranslator).load("jupyterlab");e.addCommand(j.invokeCompleter,{label:s.__("Display the completion helper."),execute:()=>{const e=t.currentWidget&&t.currentWidget.id;if(e){return n.invoke(e)}}});e.addCommand(j.selectCompleter,{label:s.__("Select the completion suggestion."),execute:()=>{const e=t.currentWidget&&t.currentWidget.id;if(e){return n.select(e)}}});e.addKeyBinding({command:j.selectCompleter,keys:["Enter"],selector:".jp-FileEditor .jp-mod-completer-active"})}e.addCompleterCommands=c;function h(e){const t=e.getSelection();const{start:n,end:i}=t;const s=n.column!==i.column||n.line!==i.line;return s}function u(e){const t=e.getSelection();const n=e.getOffsetAt(t.start);const i=e.getOffsetAt(t.end);const s=e.model.sharedModel.getSource().substring(n,i);return s}async function p(e,t,n="txt"){const i=await e.execute("docmanager:new-untitled",{path:t,type:"file",ext:n});if(i!=undefined){const t=await e.execute("docmanager:open",{path:i.path,factory:M});t.isUntitled=true;return t}}function m(e,t){g(e,t);f(e,t)}e.addLauncherItems=m;function g(e,t){e.add({command:j.createNew,category:t.__("Other"),rank:1})}e.addCreateNewToLauncher=g;function f(e,t){e.add({command:j.createNewMarkdown,category:t.__("Other"),rank:2})}e.addCreateNewMarkdownToLauncher=f;function v(e,t,n){for(let i of n){e.add({command:j.createNew,category:t.__("Other"),rank:3,args:i})}}e.addKernelLanguageLauncherItems=v;function E(e,t){I(e,t);T(e,t);D(e,t);L(e,t)}e.addPaletteItems=E;function I(e,t){const n=t.__("Text Editor");const i={size:4};const s=j.changeTabs;e.addItem({command:s,args:i,category:n});for(const o of[1,2,4,8]){const t={size:o};e.addItem({command:s,args:t,category:n})}}e.addChangeTabsCommandsToPalette=I;function T(e,t){const n=t.__("Text Editor");e.addItem({command:j.createNew,args:{isPalette:true},category:n})}e.addCreateNewCommandToPalette=T;function D(e,t){const n=t.__("Text Editor");e.addItem({command:j.createNewMarkdown,args:{isPalette:true},category:n})}e.addCreateNewMarkdownCommandToPalette=D;function L(e,t){const n=t.__("Text Editor");const i=j.changeFontSize;let s={delta:1};e.addItem({command:i,args:s,category:n});s={delta:-1};e.addItem({command:i,args:s,category:n})}e.addChangeFontSizeCommandsToPalette=L;function P(e,t,n){const i=t.__("Text Editor");for(let s of n){e.addItem({command:j.createNew,args:{...s,isPalette:true},category:i})}}e.addKernelLanguagePaletteItems=P;function A(e,t,n,i){e.editMenu.undoers.redo.add({id:j.redo,isEnabled:i});e.editMenu.undoers.undo.add({id:j.undo,isEnabled:i});e.viewMenu.editorViewers.toggleLineNumbers.add({id:j.currentLineNumbers,isEnabled:i});e.viewMenu.editorViewers.toggleMatchBrackets.add({id:j.currentMatchBrackets,isEnabled:i});e.viewMenu.editorViewers.toggleWordWrap.add({id:j.currentLineWrap,isEnabled:i});e.fileMenu.consoleCreators.add({id:j.createConsole,isEnabled:i});if(n){N(e,n)}}e.addMenuItems=A;function R(e,t){for(let n of t){e.fileMenu.newMenu.addItem({command:j.createNew,args:n,rank:31})}}e.addKernelLanguageMenuItems=R;function N(e,t){const n=e=>e.context&&!!t.find((t=>{var n;return((n=t.sessionContext.session)===null||n===void 0?void 0:n.path)===e.context.path}));e.runMenu.codeRunners.restart.add({id:j.restartConsole,isEnabled:n});e.runMenu.codeRunners.run.add({id:j.runCode,isEnabled:n});e.runMenu.codeRunners.runAll.add({id:j.runAllCode,isEnabled:n})}e.addCodeRunnersToRunMenu=N;function O(e,t,n,i){const r=async r=>{var a;const l=t.factoryService.newDocumentEditor;const d=e=>l(e);let c=r.mimeType;if(!c&&r.extension){c=t.mimeTypeService.getMimeTypeByFilePath(`temp.${r.extension.replace(/\\.$/,"")}`)}const h=o.CodeViewerWidget.createCodeViewer({factory:d,content:r.content,mimeType:c});h.title.label=r.label||i.__("Code Viewer");h.title.caption=h.title.label;const u=(0,y.find)(e.docRegistry.fileTypes(),(e=>c?e.mimeTypes.includes(c):false));h.title.icon=(a=u===null||u===void 0?void 0:u.icon)!==null&&a!==void 0?a:b.textEditorIcon;if(r.widgetId){h.id=r.widgetId}const p=new s.MainAreaWidget({content:h});await n.add(p);e.shell.add(p,"main");return h};e.commands.addCommand(j.openCodeViewer,{label:i.__("Open Code Viewer"),execute:e=>r(e)})}e.addOpenCodeViewerCommand=O})(E||(E={}));const I={id:"@jupyterlab/fileeditor-extension:editor-syntax-status",description:"Adds a file editor syntax status widget.",autoStart:true,requires:[h.IEditorTracker,r.IEditorLanguageRegistry,i.ILabShell,_.ITranslator],optional:[f.IStatusBar],activate:(e,t,n,i,s,o)=>{if(!o){return}const r=new h.EditorSyntaxStatus({commands:e.commands,languages:n,translator:s});i.currentChanged.connect((()=>{const e=i.currentWidget;if(e&&t.has(e)&&r.model){r.model.editor=e.content.editor}}));o.registerStatusItem(I.id,{item:r,align:"left",rank:0,isActive:()=>!!i.currentWidget&&!!t.currentWidget&&i.currentWidget===t.currentWidget})}};const T={activate:B,id:"@jupyterlab/fileeditor-extension:plugin",description:"Provides the file editor widget tracker.",requires:[o.IEditorServices,r.IEditorExtensionRegistry,r.IEditorLanguageRegistry,r.IEditorThemeRegistry,c.IDefaultFileBrowser,g.ISettingRegistry],optional:[l.IConsoleTracker,s.ICommandPalette,u.ILauncher,m.IMainMenu,i.ILayoutRestorer,s.ISessionContextDialogs,v.ITableOfContentsRegistry,s.IToolbarWidgetRegistry,_.ITranslator,b.IFormRendererRegistry],provides:h.IEditorTracker,autoStart:true};const D={id:"@jupyterlab/fileeditor-extension:tab-space-status",description:"Adds a file editor indentation status widget.",autoStart:true,requires:[h.IEditorTracker,r.IEditorExtensionRegistry,g.ISettingRegistry,_.ITranslator],optional:[f.IStatusBar],activate:(e,t,n,i,s,o)=>{const r=s.load("jupyterlab");if(!o){return}const a=new b.MenuSvg({commands:e.commands});const l="fileeditor:change-tabs";const{shell:d}=e;const c={name:r.__("Indent with Tab")};a.addItem({command:l,args:c});for(const h of["1","2","4","8"]){const e={size:h,name:r._p("v4","Spaces: %1",h)};a.addItem({command:l,args:e})}const u=new h.TabSpaceStatus({menu:a,translator:s});const p=e=>{var t,i,s;u.model.indentUnit=(s=(i=(t=e.get("editorConfig").composite)===null||t===void 0?void 0:t.indentUnit)!==null&&i!==void 0?i:n.baseConfiguration.indentUnit)!==null&&s!==void 0?s:null};void Promise.all([i.load("@jupyterlab/fileeditor-extension:plugin"),e.restored]).then((([e])=>{p(e);e.changed.connect(p)}));o.registerStatusItem("@jupyterlab/fileeditor-extension:tab-space-status",{item:u,align:"right",rank:1,isActive:()=>!!d.currentWidget&&t.has(d.currentWidget)})}};const L={id:"@jupyterlab/fileeditor-extension:cursor-position",description:"Adds a file editor cursor position status widget.",activate:(e,t,n)=>{n.addEditorProvider((e=>Promise.resolve(e&&t.has(e)?e.content.editor:null)))},requires:[h.IEditorTracker,o.IPositionModel],autoStart:true};const P={id:"@jupyterlab/fileeditor-extension:completer",description:"Adds the completer capability to the file editor.",requires:[h.IEditorTracker],optional:[a.ICompletionProviderManager,_.ITranslator,s.ISanitizer],activate:F,autoStart:true};const A={id:"@jupyterlab/fileeditor-extension:search",description:"Adds search capability to the file editor.",requires:[d.ISearchProviderRegistry],autoStart:true,activate:(e,t)=>{t.add("jp-fileeditorSearchProvider",h.FileEditorSearchProvider)}};const R={id:"@jupyterlab/fileeditor-extension:language-server",description:"Adds Language Server capability to the file editor.",requires:[h.IEditorTracker,p.ILSPDocumentConnectionManager,p.ILSPFeatureManager,p.ILSPCodeExtractorsManager],activate:z,autoStart:true};const N=[T,L,P,R,A,I,D];const O=N;function B(e,t,n,i,o,r,a,l,d,c,u,p,m,g,f,v,b){const y=T.id;const w=v!==null&&v!==void 0?v:_.nullTranslator;const C=m!==null&&m!==void 0?m:new s.SessionContextDialogs({translator:w});const x=w.load("jupyterlab");const S="editor";let k;if(f){k=(0,s.createToolbarFactory)(f,a,M,y,w)}const I=new h.FileEditorFactory({editorServices:t,factoryOptions:{name:M,label:x.__("Editor"),fileTypes:["markdown","*"],defaultFor:["markdown","*"],toolbarFactory:k,translator:w}});const{commands:D,restored:L,shell:P}=e;const A=new s.WidgetTracker({namespace:S});const R=()=>A.currentWidget!==null&&A.currentWidget===P.currentWidget;const N=new Map([["python",[{fileExt:"py",iconName:"ui-components:python",launcherLabel:x.__("Python File"),paletteLabel:x.__("New Python File"),caption:x.__("Create a new Python file")}]],["julia",[{fileExt:"jl",iconName:"ui-components:julia",launcherLabel:x.__("Julia File"),paletteLabel:x.__("New Julia File"),caption:x.__("Create a new Julia file")}]],["R",[{fileExt:"r",iconName:"ui-components:r-kernel",launcherLabel:x.__("R File"),paletteLabel:x.__("New R File"),caption:x.__("Create a new R file")}]]]);const O=async()=>{var t,n;const i=e.serviceManager.kernelspecs;await i.ready;let s=new Set;const o=(n=(t=i.specs)===null||t===void 0?void 0:t.kernelspecs)!==null&&n!==void 0?n:{};Object.keys(o).forEach((e=>{const t=o[e];if(t){const e=N.get(t.language);e===null||e===void 0?void 0:e.forEach((e=>s.add(e)))}}));return s};if(p){void p.restore(A,{command:"docmanager:open",args:e=>({path:e.context.path,factory:M}),name:e=>e.context.path})}Promise.all([a.load(y),L]).then((([e])=>{var t,n,s;if(u){const e=(t=u.viewMenu.items.find((e=>{var t;return e.type==="submenu"&&((t=e.submenu)===null||t===void 0?void 0:t.id)==="jp-mainmenu-view-codemirror-language"})))===null||t===void 0?void 0:t.submenu;if(e){i.getLanguages().sort(((e,t)=>{const n=e.name;const i=t.name;return n.localeCompare(i)})).forEach((t=>{if(t.name.toLowerCase().indexOf("brainf")===0){return}e.addItem({command:j.changeLanguage,args:{...t}})}))}const r=(n=u.settingsMenu.items.find((e=>{var t;return e.type==="submenu"&&((t=e.submenu)===null||t===void 0?void 0:t.id)==="jp-mainmenu-settings-codemirror-theme"})))===null||n===void 0?void 0:n.submenu;if(r){for(const e of o.themes){r.addItem({command:j.changeTheme,args:{theme:e.name,displayName:(s=e.displayName)!==null&&s!==void 0?s:e.name}})}}u.editMenu.goToLiners.add({id:j.goToLine,isEnabled:e=>A.currentWidget!==null&&A.has(e)})}E.updateSettings(e,D);E.updateTracker(A);e.changed.connect((()=>{E.updateSettings(e,D);E.updateTracker(A)}))})).catch((e=>{console.error(e.message);E.updateTracker(A)}));if(b){const e=b.getRenderer("@jupyterlab/codemirror-extension:plugin.defaultConfig");if(e){b.addRenderer("@jupyterlab/fileeditor-extension:plugin.editorConfig",e)}}I.widgetCreated.connect(((e,t)=>{t.context.pathChanged.connect((()=>{void A.save(t)}));void A.add(t);E.updateWidget(t.content)}));e.docRegistry.addWidgetFactory(I);A.widgetAdded.connect(((e,t)=>{E.updateWidget(t.content)}));E.addCommands(e.commands,a,x,y,R,A,r,n,i,l,C);const B=new s.WidgetTracker({namespace:"codeviewer"});if(p){void p.restore(B,{command:j.openCodeViewer,args:e=>({content:e.content.content,label:e.content.title.label,mimeType:e.content.mimeType,widgetId:e.content.id}),name:e=>e.content.id})}E.addOpenCodeViewerCommand(e,t,B,x);if(c){E.addLauncherItems(c,x)}if(d){E.addPaletteItems(d,x)}if(u){E.addMenuItems(u,A,l,R)}O().then((e=>{if(c){E.addKernelLanguageLauncherItems(c,x,e)}if(d){E.addKernelLanguagePaletteItems(d,x,e)}if(u){E.addKernelLanguageMenuItems(u,e)}})).catch((e=>{console.error(e.message)}));if(g){g.add(new h.LaTeXTableOfContentsFactory(A));g.add(new h.MarkdownTableOfContentsFactory(A));g.add(new h.PythonTableOfContentsFactory(A))}return A}function F(e,t,n,i,o){if(!n){return}E.addCompleterCommands(e.commands,t,n,i);const r=e.serviceManager.sessions;const a=o!==null&&o!==void 0?o:new s.Sanitizer;const l=new Map;const d=async(e,t)=>{const i={editor:t.content.editor,widget:t};await n.updateCompleter(i);const s=(e,i)=>{const s=l.get(t.id);const o=(0,y.find)(i,(e=>e.path===t.context.path));if(o){if(s&&s.id===o.id){return}if(s){l.delete(t.id);s.dispose()}const e=r.connectTo({model:o});const i={editor:t.content.editor,widget:t,session:e,sanitizer:a};n.updateCompleter(i).catch(console.error);l.set(t.id,e)}else{if(s){l.delete(t.id);s.dispose()}}};s(r,Array.from(r.running()));r.runningChanged.connect(s);t.disposed.connect((()=>{r.runningChanged.disconnect(s);const e=l.get(t.id);if(e){l.delete(t.id);e.dispose()}}))};t.widgetAdded.connect(d);n.activeProvidersChanged.connect((()=>{t.forEach((e=>{d(t,e).catch(console.error)}))}))}function z(e,t,n,i,s){t.widgetAdded.connect((async(t,o)=>{const r=new h.FileEditorAdapter(o,{connectionManager:n,featureManager:i,foreignCodeExtractorsManager:s,docRegistry:e.docRegistry});n.registerAdapter(o.context.path,r)}))}},71821:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(98328);var r=n(79536);var a=n(49914);var l=n(94683);var d=n(90516);var c=n(38613);var h=n(37935);var u=n(64431);var p=n(59240);var m=n(99434);var g=n(42650);var f=n(51734);var v=n(33379);var _=n(52812);var b=n(74518)},84877:(e,t,n)=>{"use strict";n.r(t);n.d(t,{EditorSyntaxStatus:()=>C,EditorTableOfContentsFactory:()=>j,FileEditor:()=>m,FileEditorAdapter:()=>o,FileEditorFactory:()=>g,FileEditorSearchProvider:()=>f,IEditorTracker:()=>N,LaTeXTableOfContentsFactory:()=>T,LaTeXTableOfContentsModel:()=>I,MarkdownTableOfContentsFactory:()=>L,MarkdownTableOfContentsModel:()=>D,PythonTableOfContentsFactory:()=>R,PythonTableOfContentsModel:()=>A,TabSpaceStatus:()=>S});var i=n(75900);var s=n(5596);class o extends i.WidgetLSPAdapter{constructor(e,t){const{docRegistry:n,...i}=t;super(e,i);this._readyDelegate=new s.PromiseDelegate;this.editor=e.content;this._docRegistry=n;this._virtualEditor=Object.freeze({getEditor:()=>this.editor.editor,ready:()=>Promise.resolve(this.editor.editor),reveal:()=>Promise.resolve(this.editor.editor)});Promise.all([this.editor.context.ready,this.connectionManager.ready]).then((async()=>{await this.initOnceReady();this._readyDelegate.resolve()})).catch(console.error)}get ready(){return this._readyDelegate.promise}get documentPath(){return this.widget.context.path}get mimeType(){var e;const t=this.editor.model.mimeType;const n=Array.isArray(t)?(e=t[0])!==null&&e!==void 0?e:"text/plain":t;const i=this.editor.context.contentsModel;if(n!="text/plain"){return n}else if(i){let e=this._docRegistry.getFileTypeForModel(i);return e.mimeTypes[0]}else{return n}}get languageFileExtension(){let e=this.documentPath.split(".");return e[e.length-1]}get ceEditor(){return this.editor.editor}get activeEditor(){return this._virtualEditor}get wrapperElement(){return this.widget.node}get path(){return this.widget.context.path}get editors(){var e,t;return[{ceEditor:this._virtualEditor,type:"code",value:(t=(e=this.editor)===null||e===void 0?void 0:e.model.sharedModel.getSource())!==null&&t!==void 0?t:""}]}dispose(){if(this.isDisposed){return}this.editor.model.mimeTypeChanged.disconnect(this.reloadConnection);super.dispose()}createVirtualDocument(){return new i.VirtualDocument({language:this.language,foreignCodeExtractors:this.options.foreignCodeExtractorsManager,path:this.documentPath,fileExtension:this.languageFileExtension,standalone:true,hasLspSupportedFile:true})}getEditorIndexAt(e){return 0}getEditorIndex(e){return 0}getEditorWrapper(e){return this.wrapperElement}async initOnceReady(){this.initVirtual();await this.connectDocument(this.virtualDocument,false);this.editor.model.mimeTypeChanged.connect(this.reloadConnection,this)}}var r=n(90848);var a=n(96912);var l=n(47391);var d=n(35788);var c=n(52435);var h=n(85448);const u="jpCodeRunner";const p="jpUndoer";class m extends h.Widget{constructor(e){super();this._ready=new s.PromiseDelegate;this.addClass("jp-FileEditor");const t=this._context=e.context;this._mimeTypeService=e.mimeTypeService;const n=this._editorWidget=new l.CodeEditorWrapper({factory:e.factory,model:t.model,editorOptions:{config:m.defaultEditorConfig}});this._editorWidget.addClass("jp-FileEditorCodeWrapper");this._editorWidget.node.dataset[u]="true";this._editorWidget.node.dataset[p]="true";this.editor=n.editor;this.model=n.model;void t.ready.then((()=>{this._onContextReady()}));this._onPathChanged();t.pathChanged.connect(this._onPathChanged,this);const i=this.layout=new h.StackedLayout;i.addWidget(n)}get context(){return this._context}get ready(){return this._ready.promise}handleEvent(e){if(!this.model){return}switch(e.type){case"mousedown":this._ensureFocus();break;default:break}}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;t.addEventListener("mousedown",this)}onBeforeDetach(e){const t=this.node;t.removeEventListener("mousedown",this)}onActivateRequest(e){this._ensureFocus()}_ensureFocus(){if(!this.editor.hasFocus()){this.editor.focus()}}_onContextReady(){if(this.isDisposed){return}this.editor.clearHistory();this._ready.resolve(undefined)}_onPathChanged(){const e=this.editor;const t=this._context.localPath;e.model.mimeType=this._mimeTypeService.getMimeTypeByFilePath(t)}}(function(e){e.defaultEditorConfig={lineNumbers:true,scrollPastEnd:true}})(m||(m={}));class g extends d.ABCWidgetFactory{constructor(e){super(e.factoryOptions);this._services=e.editorServices}createNewWidget(e){const t=this._services.factoryService.newDocumentEditor;const n=e=>t(e);const i=new m({factory:n,context:e,mimeTypeService:this._services.mimeTypeService});i.title.icon=c.textEditorIcon;const s=new d.DocumentWidget({content:i,context:e});return s}}class f extends a.EditorSearchProvider{constructor(e){super();this.widget=e}get isReadOnly(){return this.editor.getOption("readOnly")}get replaceOptionsSupport(){return{preserveCase:true}}get editor(){return this.widget.content.editor}get model(){return this.widget.content.model}async startQuery(e,t){await super.startQuery(e,t);await this.highlightNext(true,{from:"selection-start",scroll:false,select:false})}static createNew(e,t){return new f(e)}static isApplicable(e){return e instanceof r.MainAreaWidget&&e.content instanceof m&&e.content.editor instanceof a.CodeMirrorEditor}getInitialQuery(){const e=this.editor;const t=e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to);return t}}var v=n(88478);var _=n(36168);var b=n(28416);var y=n.n(b);function w(e){return y().createElement(v.TextItem,{source:e.language,onClick:e.handleClick})}class C extends c.VDomRenderer{constructor(e){var t;super(new C.Model(e.languages));this._handleClick=()=>{const e=new h.Menu({commands:this._commands});const t="fileeditor:change-language";if(this._popup){this._popup.dispose()}this.model.languages.getLanguages().sort(((e,t)=>{var n,i;const s=(n=e.displayName)!==null&&n!==void 0?n:e.name;const o=(i=t.displayName)!==null&&i!==void 0?i:t.name;return s.localeCompare(o)})).forEach((n=>{var i;if(n.name.toLowerCase().indexOf("brainf")===0){return}const s={name:n.name,displayName:(i=n.displayName)!==null&&i!==void 0?i:n.name};e.addItem({command:t,args:s})}));this._popup=(0,v.showPopup)({body:e,anchor:this,align:"left"})};this._popup=null;this._commands=e.commands;this.translator=(t=e.translator)!==null&&t!==void 0?t:_.nullTranslator;const n=this.translator.load("jupyterlab");this.addClass("jp-mod-highlighted");this.title.caption=n.__("Change text editor syntax highlighting")}render(){if(!this.model){return null}return y().createElement(w,{language:this.model.language,handleClick:this._handleClick})}}(function(e){class t extends c.VDomModel{constructor(e){super();this.languages=e;this._onMIMETypeChange=(e,t)=>{var n;const i=this._language;const s=this.languages.findByMIME(t.newValue);this._language=(n=s===null||s===void 0?void 0:s.name)!==null&&n!==void 0?n:l.IEditorMimeTypeService.defaultMimeType;this._triggerChange(i,this._language)};this._language="";this._editor=null}get language(){return this._language}get editor(){return this._editor}set editor(e){var t;const n=this._editor;if(n!==null){n.model.mimeTypeChanged.disconnect(this._onMIMETypeChange)}const i=this._language;this._editor=e;if(this._editor===null){this._language=""}else{const e=this.languages.findByMIME(this._editor.model.mimeType);this._language=(t=e===null||e===void 0?void 0:e.name)!==null&&t!==void 0?t:l.IEditorMimeTypeService.defaultMimeType;this._editor.model.mimeTypeChanged.connect(this._onMIMETypeChange)}this._triggerChange(i,this._language)}_triggerChange(e,t){if(e!==t){this.stateChanged.emit(void 0)}}}e.Model=t})(C||(C={}));function x(e){const t=e.translator||_.nullTranslator;const n=t.load("jupyterlab");const i=typeof e.tabSpace==="number"?n.__("Spaces"):n.__("Tab Indent");return y().createElement(v.TextItem,{onClick:e.handleClick,source:typeof e.tabSpace==="number"?`${i}: ${e.tabSpace}`:i,title:n.__("Change the indentation")})}class S extends c.VDomRenderer{constructor(e){super(new S.Model);this._popup=null;this._menu=e.menu;this.translator=e.translator||_.nullTranslator;this.addClass("jp-mod-highlighted")}render(){var e;if(!((e=this.model)===null||e===void 0?void 0:e.indentUnit)){return null}else{const e=this.model.indentUnit==="Tab"?null:parseInt(this.model.indentUnit,10);return y().createElement(x,{tabSpace:e,handleClick:()=>this._handleClick(),translator:this.translator})}}_handleClick(){const e=this._menu;if(this._popup){this._popup.dispose()}e.aboutToClose.connect(this._menuClosed,this);this._popup=(0,v.showPopup)({body:e,anchor:this,align:"right"});e.update()}_menuClosed(){this.removeClass("jp-mod-clicked")}}(function(e){class t extends c.VDomModel{get indentUnit(){return this._indentUnit}set indentUnit(e){if(e!==this._indentUnit){this._indentUnit=e;this.stateChanged.emit()}}}e.Model=t})(S||(S={}));var k=n(85147);class j extends k.TableOfContentsFactory{createNew(e,t){const n=super.createNew(e,t);const i=(t,n)=>{if(n){e.content.editor.setCursorPosition({line:n.line,column:0})}};n.activeHeadingChanged.connect(i);e.disposed.connect((()=>{n.activeHeadingChanged.disconnect(i)}));return n}}const M={part:1,chapter:1,section:1,subsection:2,subsubsection:3,paragraph:4,subparagraph:5};const E=/^\s*\\(section|subsection|subsubsection){(.+)}/;class I extends k.TableOfContentsModel{get documentType(){return"latex"}get supportedOptions(){return["maximalDepth","numberHeaders"]}getHeadings(){if(!this.isActive){return Promise.resolve(null)}const e=this.widget.content.model.sharedModel.getSource().split("\n");const t=new Array;let n=t.length;const i=new Array;for(let s=0;s<e.length;s++){const o=e[s].match(E);if(o){const e=M[o[1]];if(e<=this.configuration.maximalDepth){const r=k.TableOfContentsUtils.getPrefix(e,n,t,{...this.configuration,baseNumbering:1,numberingH1:true});n=e;i.push({text:o[2],prefix:r,level:e,line:s})}}}return Promise.resolve(i)}}class T extends j{isApplicable(e){var t,n;const i=super.isApplicable(e);if(i){let i=(n=(t=e.content)===null||t===void 0?void 0:t.model)===null||n===void 0?void 0:n.mimeType;return i&&(i==="text/x-latex"||i==="text/x-stex")}return false}_createNew(e,t){return new I(e,t)}}class D extends k.TableOfContentsModel{get documentType(){return"markdown"}getHeadings(){if(!this.isActive){return Promise.resolve(null)}const e=this.widget.content.model.sharedModel.getSource();const t=k.TableOfContentsUtils.filterHeadings(k.TableOfContentsUtils.Markdown.getHeadings(e),{...this.configuration,numberHeaders:false});return Promise.resolve(t)}}class L extends j{isApplicable(e){var t,n;const i=super.isApplicable(e);if(i){let i=(n=(t=e.content)===null||t===void 0?void 0:t.model)===null||n===void 0?void 0:n.mimeType;return i&&k.TableOfContentsUtils.Markdown.isMarkdown(i)}return false}_createNew(e,t){return new D(e,t)}}let P;try{P=new RegExp("^\\s*(class |def |from |import )","d")}catch(O){P=new RegExp("^\\s*(class |def |from |import )")}class A extends k.TableOfContentsModel{get documentType(){return"python"}async getHeadings(){if(!this.isActive){return Promise.resolve(null)}const e=this.widget.content.model.sharedModel.getSource().split("\n");let t=new Array;let i=false;let s=1;let o=-1;for(const r of e){o++;let e;if(P.flags.includes("d")){e=P.exec(r)}else{const{default:t}=await n.e(7451).then(n.t.bind(n,77451,23));e=t(P,r)}if(e){const[n]=e.indices[1];if(s===1&&n>0){s=n}const a=["from ","import "].includes(e[1]);if(a&&i){continue}i=a;const l=1+n/s;if(l>this.configuration.maximalDepth){continue}t.push({text:r.slice(n),level:l,line:o})}}return Promise.resolve(t)}}class R extends j{isApplicable(e){var t,n;const i=super.isApplicable(e);if(i){let i=(n=(t=e.content)===null||t===void 0?void 0:t.model)===null||n===void 0?void 0:n.mimeType;return i&&(i==="application/x-python-code"||i==="text/x-python")}return false}_createNew(e,t){return new A(e,t)}}const N=new s.Token("@jupyterlab/fileeditor:IEditorTracker",`A widget tracker for file editors.\n  Use this if you want to be able to iterate over and interact with file editors\n  created by the application.`)},33379:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(49914);var a=n(38613);var l=n(37935);var d=n(94683);var c=n(51734);var h=n(99434);var u=n(93379);var p=n.n(u);var m=n(7795);var g=n.n(m);var f=n(90569);var v=n.n(f);var _=n(3565);var b=n.n(_);var y=n(19216);var w=n.n(y);var C=n(44589);var x=n.n(C);var S=n(5751);var k={};k.styleTagTransform=x();k.setAttributes=b();k.insert=v().bind(null,"head");k.domAPI=g();k.insertStyleElement=w();var j=p()(S.Z,k);const M=S.Z&&S.Z.locals?S.Z.locals:undefined},16783:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>k});var i=n(44906);var s=n(90848);var o=n(22873);var r=n(46054);var a=n(36168);var l=n(52435);var d=n(28416);var c=n(74513);var h=n(5596);var u=n(71372);var p=n(90502);var m=n(85448);const g="jp-Licenses-Filters-title";class f extends m.SplitPanel{constructor(e){super();this.addClass("jp-Licenses");this.model=e.model;this.initLeftPanel();this.initFilters();this.initBundles();this.initGrid();this.initLicenseText();this.setRelativeSizes([1,2,3]);void this.model.initLicenses().then((()=>this._updateBundles()));this.model.trackerDataChanged.connect((()=>{this.title.label=this.model.title}))}dispose(){if(this.isDisposed){return}this._bundles.currentChanged.disconnect(this.onBundleSelected,this);this.model.dispose();super.dispose()}initLeftPanel(){this._leftPanel=new m.Panel;this._leftPanel.addClass("jp-Licenses-FormArea");this.addWidget(this._leftPanel);m.SplitPanel.setStretch(this._leftPanel,1)}initFilters(){this._filters=new f.Filters(this.model);m.SplitPanel.setStretch(this._filters,1);this._leftPanel.addWidget(this._filters)}initBundles(){this._bundles=new m.TabBar({orientation:"vertical",renderer:new f.BundleTabRenderer(this.model)});this._bundles.addClass("jp-Licenses-Bundles");m.SplitPanel.setStretch(this._bundles,1);this._leftPanel.addWidget(this._bundles);this._bundles.currentChanged.connect(this.onBundleSelected,this);this.model.stateChanged.connect((()=>this._bundles.update()))}initGrid(){this._grid=new f.Grid(this.model);m.SplitPanel.setStretch(this._grid,1);this.addWidget(this._grid)}initLicenseText(){this._licenseText=new f.FullText(this.model);m.SplitPanel.setStretch(this._grid,1);this.addWidget(this._licenseText)}onBundleSelected(){var e;if((e=this._bundles.currentTitle)===null||e===void 0?void 0:e.label){this.model.currentBundleName=this._bundles.currentTitle.label}}_updateBundles(){this._bundles.clearTabs();let e=0;const{currentBundleName:t}=this.model;let n=0;for(const i of this.model.bundleNames){const s=new m.Widget;s.title.label=i;if(i===t){n=e}this._bundles.insertTab(++e,s.title)}this._bundles.currentIndex=n}}(function(e){e.REPORT_FORMATS={markdown:{id:"markdown",title:"Markdown",icon:l.markdownIcon},csv:{id:"csv",title:"CSV",icon:l.spreadsheetIcon},json:{id:"csv",title:"JSON",icon:l.jsonIcon}};e.DEFAULT_FORMAT="markdown";class t extends l.VDomModel{constructor(e){super();this._selectedPackageChanged=new u.Signal(this);this._trackerDataChanged=new u.Signal(this);this._currentPackageIndex=0;this._licensesReady=new h.PromiseDelegate;this._packageFilter={};this._trans=e.trans;this._licensesUrl=e.licensesUrl;this._serverSettings=e.serverSettings||c.ServerConnection.makeSettings();if(e.currentBundleName){this._currentBundleName=e.currentBundleName}if(e.packageFilter){this._packageFilter=e.packageFilter}if(e.currentPackageIndex){this._currentPackageIndex=e.currentPackageIndex}}async initLicenses(){try{const e=await c.ServerConnection.makeRequest(this._licensesUrl,{},this._serverSettings);this._serverResponse=await e.json();this._licensesReady.resolve();this.stateChanged.emit(void 0)}catch(e){this._licensesReady.reject(e)}}async download(e){const t=`${this._licensesUrl}?format=${e.format}&download=1`;const n=document.createElement("a");n.href=t;n.download="";document.body.appendChild(n);n.click();document.body.removeChild(n);return void 0}get selectedPackageChanged(){return this._selectedPackageChanged}get trackerDataChanged(){return this._trackerDataChanged}get bundleNames(){var e;return Object.keys(((e=this._serverResponse)===null||e===void 0?void 0:e.bundles)||{})}get currentBundleName(){if(this._currentBundleName){return this._currentBundleName}if(this.bundleNames.length){return this.bundleNames[0]}return null}set currentBundleName(e){if(this._currentBundleName!==e){this._currentBundleName=e;this.stateChanged.emit(void 0);this._trackerDataChanged.emit(void 0)}}get licensesReady(){return this._licensesReady.promise}get bundles(){var e;return((e=this._serverResponse)===null||e===void 0?void 0:e.bundles)||{}}get currentPackageIndex(){return this._currentPackageIndex}set currentPackageIndex(e){if(this._currentPackageIndex===e){return}this._currentPackageIndex=e;this._selectedPackageChanged.emit(void 0);this.stateChanged.emit(void 0);this._trackerDataChanged.emit(void 0)}get currentPackage(){var e;if(this.currentBundleName&&this.bundles&&this._currentPackageIndex!=null){return this.getFilteredPackages(((e=this.bundles[this.currentBundleName])===null||e===void 0?void 0:e.packages)||[])[this._currentPackageIndex]}return null}get trans(){return this._trans}get title(){return`${this._currentBundleName||""} ${this._trans.__("Licenses")}`.trim()}get packageFilter(){return this._packageFilter}set packageFilter(e){this._packageFilter=e;this.stateChanged.emit(void 0);this._trackerDataChanged.emit(void 0)}getFilteredPackages(e){let t=[];let n=Object.entries(this._packageFilter).filter((([e,t])=>t&&`${t}`.trim().length)).map((([e,t])=>[e,`${t}`.toLowerCase().trim().split(" ")]));for(const i of e){let e=0;for(const[t,s]of n){let n=0;let o=`${i[t]}`.toLowerCase();for(const e of s){if(o.includes(e)){n+=1}}if(n){e+=1}}if(e===n.length){t.push(i)}}return Object.values(t)}}e.Model=t;class n extends l.VDomRenderer{constructor(e){super(e);this.renderFilter=e=>{const t=this.model.packageFilter[e]||"";return d.createElement("input",{type:"text",name:e,defaultValue:t,className:"jp-mod-styled",onInput:this.onFilterInput})};this.onFilterInput=e=>{const t=e.currentTarget;const{name:n,value:i}=t;this.model.packageFilter={...this.model.packageFilter,[n]:i}};this.addClass("jp-Licenses-Filters");this.addClass("jp-RenderedHTMLCommon")}render(){const{trans:e}=this.model;return d.createElement("div",null,d.createElement("label",null,d.createElement("strong",{className:g},e.__("Filter Licenses By"))),d.createElement("ul",null,d.createElement("li",null,d.createElement("label",null,e.__("Package")),this.renderFilter("name")),d.createElement("li",null,d.createElement("label",null,e.__("Version")),this.renderFilter("versionInfo")),d.createElement("li",null,d.createElement("label",null,e.__("License")),this.renderFilter("licenseId"))),d.createElement("label",null,d.createElement("strong",{className:g},e.__("Distributions"))))}}e.Filters=n;class i extends m.TabBar.Renderer{constructor(e){super();this.closeIconSelector=".lm-TabBar-tabCloseIcon";this.model=e}renderTab(e){let t=e.title.caption;let n=this.createTabKey(e);let i=this.createTabStyle(e);let s=this.createTabClass(e);let o=this.createTabDataset(e);return p.h.li({key:n,className:s,title:t,style:i,dataset:o},this.renderIcon(e),this.renderLabel(e),this.renderCountBadge(e))}renderCountBadge(e){const t=e.title.label;const{bundles:n}=this.model;const i=this.model.getFilteredPackages((n&&t?n[t].packages:[])||[]);return p.h.label({},`${i.length}`)}}e.BundleTabRenderer=i;class s extends l.VDomRenderer{constructor(e){super(e);this.renderRow=(e,t)=>{const n=t===this.model.currentPackageIndex;const i=()=>this.model.currentPackageIndex=t;return d.createElement("tr",{key:e.name,className:n?"jp-mod-selected":"",onClick:i},d.createElement("td",null,d.createElement("input",{type:"radio",name:"show-package-license",value:t,onChange:i,checked:n})),d.createElement("th",null,e.name),d.createElement("td",null,d.createElement("code",null,e.versionInfo)),d.createElement("td",null,d.createElement("code",null,e.licenseId)))};this.addClass("jp-Licenses-Grid");this.addClass("jp-RenderedHTMLCommon")}render(){var e;const{bundles:t,currentBundleName:n,trans:i}=this.model;const s=this.model.getFilteredPackages(t&&n?((e=t[n])===null||e===void 0?void 0:e.packages)||[]:[]);if(!s.length){return d.createElement("blockquote",null,d.createElement("em",null,i.__("No Packages found")))}return d.createElement("form",null,d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement("td",null),d.createElement("th",null,i.__("Package")),d.createElement("th",null,i.__("Version")),d.createElement("th",null,i.__("License")))),d.createElement("tbody",null,s.map(this.renderRow))))}}e.Grid=s;class o extends l.VDomRenderer{constructor(e){super(e);this.addClass("jp-Licenses-Text");this.addClass("jp-RenderedHTMLCommon");this.addClass("jp-RenderedMarkdown")}render(){const{currentPackage:e,trans:t}=this.model;let n="";let i=t.__("No Package selected");let s="";if(e){const{name:o,versionInfo:r,licenseId:a,extractedText:l}=e;n=`${o} v${r}`;i=`${t.__("License")}: ${a||t.__("No License ID found")}`;s=l||t.__("No License Text found")}return[d.createElement("h1",{key:"h1"},n),d.createElement("blockquote",{key:"quote"},d.createElement("em",null,i)),d.createElement("code",{key:"code"},s)]}}e.FullText=o})(f||(f={}));var v;(function(e){e.open="help:open";e.about="help:about";e.activate="help:activate";e.close="help:close";e.show="help:show";e.hide="help:hide";e.jupyterForum="help:jupyter-forum";e.licenses="help:licenses";e.licenseReport="help:license-report";e.refreshLicenses="help:licenses-refresh"})(v||(v={}));const _=window.location.protocol==="https:";const b="jp-Help";const y={id:"@jupyterlab/help-extension:about",description:'Adds a "About" dialog feature.',autoStart:true,requires:[a.ITranslator],optional:[s.ICommandPalette],activate:(e,t,n)=>{const{commands:i}=e;const o=t.load("jupyterlab");const r=o.__("Help");i.addCommand(v.about,{label:o.__("About %1",e.name),execute:()=>{const t=o.__("Version %1",e.version);const n=d.createElement("span",{className:"jp-About-version-info"},d.createElement("span",{className:"jp-About-version"},t));const i=d.createElement("span",{className:"jp-About-header"},d.createElement(l.jupyterIcon.react,{margin:"7px 9.5px",height:"auto",width:"58px"}),d.createElement("div",{className:"jp-About-header-info"},d.createElement(l.jupyterlabWordmarkIcon.react,{height:"auto",width:"196px"}),n));const r="https://jupyter.org/about.html";const a="https://github.com/jupyterlab/jupyterlab/graphs/contributors";const c=d.createElement("span",{className:"jp-About-externalLinks"},d.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"jp-Button-flat"},o.__("CONTRIBUTOR LIST")),d.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"jp-Button-flat"},o.__("ABOUT PROJECT JUPYTER")));const h=d.createElement("span",{className:"jp-About-copyright"},o.__(" 2015-2023 Project Jupyter Contributors"));const u=d.createElement("div",{className:"jp-About-body"},c,h);return(0,s.showDialog)({title:i,body:u,buttons:[s.Dialog.createButton({label:o.__("Dismiss"),className:"jp-About-button jp-mod-reject jp-mod-styled"})]})}});if(n){n.addItem({command:v.about,category:r})}}};const w={id:"@jupyterlab/help-extension:jupyter-forum",description:"Adds command to open the Jupyter Forum website.",autoStart:true,requires:[a.ITranslator],optional:[s.ICommandPalette],activate:(e,t,n)=>{const{commands:i}=e;const s=t.load("jupyterlab");const o=s.__("Help");i.addCommand(v.jupyterForum,{label:s.__("Jupyter Forum"),execute:()=>{window.open("https://discourse.jupyter.org/c/jupyterlab")}});if(n){n.addItem({command:v.jupyterForum,category:o})}}};const C={id:"@jupyterlab/help-extension:resources",description:"Adds commands to Jupyter reference documentation websites.",autoStart:true,requires:[r.IMainMenu,a.ITranslator],optional:[i.ILabShell,s.ICommandPalette,i.ILayoutRestorer],activate:(e,t,n,i,r,a)=>{const c=n.load("jupyterlab");let h=0;const u=c.__("Help");const p="help-doc";const{commands:m,shell:g,serviceManager:f}=e;const y=new s.WidgetTracker({namespace:p});const w=[{text:c.__("JupyterLab Reference"),url:"https://jupyterlab.readthedocs.io/en/stable/"},{text:c.__("JupyterLab FAQ"),url:"https://jupyterlab.readthedocs.io/en/stable/getting_started/faq.html"},{text:c.__("Jupyter Reference"),url:"https://jupyter.org/documentation"},{text:c.__("Markdown Reference"),url:"https://commonmark.org/help/"}];w.sort(((e,t)=>e.text.localeCompare(t.text)));function C(e,t){const n=new l.IFrame({sandbox:["allow-scripts","allow-forms"]});n.url=e;n.addClass(b);n.title.label=t;n.id=`${p}-${++h}`;const i=new s.MainAreaWidget({content:n});i.addClass("jp-Help");return i}m.addCommand(v.open,{label:e=>{var t;return(t=e["text"])!==null&&t!==void 0?t:c.__("Open the provided `url` in a tab.")},execute:e=>{const t=e["url"];const n=e["text"];const i=e["newBrowserTab"]||false;if(i||_&&o.URLExt.parse(t).protocol!=="https:"){window.open(t);return}const s=C(t,n);void y.add(s);g.add(s,"main");return s}});if(a){void a.restore(y,{command:v.open,args:e=>({url:e.content.url,text:e.content.title.label}),name:e=>e.content.url})}const x=t.helpMenu;const S=w.map((e=>({args:e,command:v.open})));x.addGroup(S,10);const k=new Map;const j=(e,t)=>{var n;if(!t.length){return}const o=t[t.length-1];if(!o.kernel||k.has(o.kernel.name)){return}const r=f.sessions.connectTo({model:o,kernelConnectionOptions:{handleComms:false}});void((n=r.kernel)===null||n===void 0?void 0:n.info.then((e=>{var t,n;const o=r.kernel.name;if(k.has(o)){return}const a=(n=(t=f.kernelspecs)===null||t===void 0?void 0:t.specs)===null||n===void 0?void 0:n.kernelspecs[o];if(!a){return}k.set(o,e);let l=false;const h=async()=>{const e=await m.execute("helpmenu:get-kernel");l=(e===null||e===void 0?void 0:e.name)===o};h().catch((e=>{console.error("Failed to get the kernel for the current widget.",e)}));if(i){i.currentChanged.connect(h)}const u=()=>l;const p=`help-menu-${o}:banner`;const g=a.display_name;const _=a.resources["logo-svg"]||a.resources["logo-64x64"];m.addCommand(p,{label:c.__("About the %1 Kernel",g),isVisible:u,isEnabled:u,execute:()=>{const t=d.createElement("img",{src:_});const n=d.createElement("span",{className:"jp-About-header"},t,d.createElement("div",{className:"jp-About-header-info"},g));const i=d.createElement("pre",null,e.banner);const o=d.createElement("div",{className:"jp-About-body"},i);return(0,s.showDialog)({title:n,body:o,buttons:[s.Dialog.createButton({label:c.__("Dismiss"),className:"jp-About-button jp-mod-reject jp-mod-styled"})]})}});x.addGroup([{command:p}],20);const b=[];(e.help_links||[]).forEach((e=>{const t=`help-menu-${o}:${e.text}`;m.addCommand(t,{label:m.label(v.open,e),isVisible:u,isEnabled:u,execute:()=>m.execute(v.open,e)});b.push({command:t})}));x.addGroup(b,21)})).then((()=>{r.dispose()})))};for(const s of f.sessions.running()){j(f.sessions,[s])}f.sessions.runningChanged.connect(j);if(r){w.forEach((e=>{r.addItem({args:e,command:v.open,category:u})}));r.addItem({args:{reload:true},command:"apputils:reset",category:u})}}};const x={id:"@jupyterlab/help-extension:licenses",description:"Adds licenses used report tools.",autoStart:true,requires:[a.ITranslator],optional:[r.IMainMenu,s.ICommandPalette,i.ILayoutRestorer],activate:(e,t,n,i,r)=>{if(!o.PageConfig.getOption("licensesUrl")){return}const{commands:a,shell:d}=e;const c=t.load("jupyterlab");const h=c.__("Help");const u=c.__("Download All Licenses as");const p=c.__("Licenses");const m=c.__("Refresh Licenses");let g=0;const _=o.URLExt.join(o.PageConfig.getBaseUrl(),o.PageConfig.getOption("licensesUrl"))+"/";const b="help-licenses";const y=new s.WidgetTracker({namespace:b});function w(e){return f.REPORT_FORMATS[e]||f.REPORT_FORMATS[f.DEFAULT_FORMAT]}function C(t){const n=new f.Model({...t,licensesUrl:_,trans:c,serverSettings:e.serviceManager.serverSettings});const i=new f({model:n});i.id=`${b}-${++g}`;i.title.label=p;i.title.icon=l.copyrightIcon;const o=new s.MainAreaWidget({content:i,reveal:n.licensesReady});o.toolbar.addItem("refresh-licenses",new l.CommandToolbarButton({id:v.refreshLicenses,args:{noLabel:1},commands:a}));o.toolbar.addItem("spacer",l.Toolbar.createSpacerItem());for(const e of Object.keys(f.REPORT_FORMATS)){const t=new l.CommandToolbarButton({id:v.licenseReport,args:{format:e,noLabel:1},commands:a});o.toolbar.addItem(`download-${e}`,t)}return o}a.addCommand(v.licenses,{label:p,execute:e=>{const t=C(e);d.add(t,"main",{type:"Licenses"});void y.add(t);t.content.model.trackerDataChanged.connect((()=>{void y.save(t)}));return t}});a.addCommand(v.refreshLicenses,{label:e=>e.noLabel?"":m,caption:m,icon:l.refreshIcon,execute:async()=>{var e;return(e=y.currentWidget)===null||e===void 0?void 0:e.content.model.initLicenses()}});a.addCommand(v.licenseReport,{label:e=>{if(e.noLabel){return""}const t=w(`${e.format}`);return`${u} ${t.title}`},caption:e=>{const t=w(`${e.format}`);return`${u} ${t.title}`},icon:e=>{const t=w(`${e.format}`);return t.icon},execute:async e=>{var t;const n=w(`${e.format}`);return await((t=y.currentWidget)===null||t===void 0?void 0:t.content.model.download({format:n.id}))}});if(i){i.addItem({command:v.licenses,category:h})}if(n){const e=n.helpMenu;e.addGroup([{command:v.licenses}],0)}if(r){void r.restore(y,{command:v.licenses,name:e=>"licenses",args:e=>{const{currentBundleName:t,currentPackageIndex:n,packageFilter:i}=e.content.model;const s={currentBundleName:t,currentPackageIndex:n,packageFilter:i};return s}})}}};const S=[y,w,C,x];const k=S},13313:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(74518);var a=n(93379);var l=n.n(a);var d=n(7795);var c=n.n(d);var h=n(90569);var u=n.n(h);var p=n(3565);var m=n.n(p);var g=n(19216);var f=n.n(g);var v=n(44589);var _=n.n(v);var b=n(30277);var y={};y.styleTagTransform=_();y.setAttributes=m();y.insert=u().bind(null,"head");y.domAPI=c();y.insertStyleElement=f();var w=l()(b.Z,y);const C=b.Z&&b.Z.locals?b.Z.locals:undefined},39899:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>y});var i=n(44906);var s=n.n(i);var o=n(90848);var r=n.n(o);var a=n(28181);var l=n.n(a);var d=n(51997);var c=n.n(d);var h=n(36168);var u=n.n(h);var p=n(52435);var m=n.n(p);const g="@jupyterlab/htmlviewer-extension:plugin";const f="HTML Viewer";var v;(function(e){e.trustHTML="htmlviewer:trust-html"})(v||(v={}));const _={activate:b,id:g,description:"Adds HTML file viewer and provides its tracker.",provides:a.IHTMLViewerTracker,requires:[h.ITranslator],optional:[o.ICommandPalette,i.ILayoutRestorer,d.ISettingRegistry,o.IToolbarWidgetRegistry],autoStart:true};function b(e,t,n,i,s,r){let l;const d=t.load("jupyterlab");if(r){r.addFactory(f,"refresh",(e=>a.ToolbarItems.createRefreshButton(e,t)));r.addFactory(f,"trust",(e=>a.ToolbarItems.createTrustButton(e,t)));if(s){l=(0,o.createToolbarFactory)(r,s,f,_.id,t)}}const c={name:"html",contentType:"file",fileFormat:"text",displayName:d.__("HTML File"),extensions:[".html"],mimeTypes:["text/html"],icon:p.html5Icon};e.docRegistry.addFileType(c);const h=new a.HTMLViewerFactory({name:f,label:d.__("HTML Viewer"),fileTypes:["html"],defaultFor:["html"],readOnly:true,toolbarFactory:l,translator:t});const u=new o.WidgetTracker({namespace:"htmlviewer"});if(i){void i.restore(u,{command:"docmanager:open",args:e=>({path:e.context.path,factory:"HTML Viewer"}),name:e=>e.context.path})}let m=false;if(s){const t=s.load(g);const n=e=>{m=e.get("trustByDefault").composite};Promise.all([t,e.restored]).then((([e])=>{n(e);e.changed.connect((e=>{n(e)}))})).catch((e=>{console.error(e.message)}))}e.docRegistry.addWidgetFactory(h);h.widgetCreated.connect(((t,n)=>{var i,s;void u.add(n);n.context.pathChanged.connect((()=>{void u.save(n)}));n.trustedChanged.connect((()=>{e.commands.notifyCommandChanged(v.trustHTML)}));n.trusted=m;n.title.icon=c.icon;n.title.iconClass=(i=c.iconClass)!==null&&i!==void 0?i:"";n.title.iconLabel=(s=c.iconLabel)!==null&&s!==void 0?s:""}));e.commands.addCommand(v.trustHTML,{label:d.__("Trust HTML File"),caption:d.__(`Whether the HTML file is trusted.\n    Trusting the file allows scripts to run in it,\n    which may result in security risks.\n    Only enable for files you trust.`),isEnabled:()=>!!u.currentWidget,isToggled:()=>{const e=u.currentWidget;if(!e){return false}const t=e.content.sandbox;return t.indexOf("allow-scripts")!==-1},execute:()=>{const e=u.currentWidget;if(!e){return}e.trusted=!e.trusted}});if(n){n.addItem({command:v.trustHTML,category:d.__("File Operations")})}return u}const y=_},23454:(e,t,n)=>{"use strict";var i=n(34849);var s=n(79536);var o=n(94683);var r=n(90516);var a=n(32902);var l=n(93379);var d=n.n(l);var c=n(7795);var h=n.n(c);var u=n(90569);var p=n.n(u);var m=n(3565);var g=n.n(m);var f=n(19216);var v=n.n(f);var _=n(44589);var b=n.n(_);var y=n(37468);var w={};w.styleTagTransform=b();w.setAttributes=g();w.insert=p().bind(null,"head");w.domAPI=h();w.insertStyleElement=v();var C=d()(y.Z,w);const x=y.Z&&y.Z.locals?y.Z.locals:undefined},51902:(e,t,n)=>{"use strict";n.r(t);n.d(t,{HTMLViewer:()=>p,HTMLViewerFactory:()=>m,IHTMLViewerTracker:()=>s,ToolbarItems:()=>g});var i=n(5596);const s=new i.Token("@jupyterlab/htmlviewer:IHTMLViewerTracker",`A widget tracker for rendered HTML documents.\n  Use this if you want to be able to iterate over and interact with HTML documents\n  viewed by the application.`);var o=n(22873);var r=n(35788);var a=n(36168);var l=n(52435);var d=n(71372);var c=n(28416);const h=1e3;const u="jp-HTMLViewer";class p extends r.DocumentWidget{constructor(e){super({...e,content:new l.IFrame({sandbox:["allow-same-origin"]})});this._renderPending=false;this._parser=new DOMParser;this._monitor=null;this._objectUrl="";this._trustedChanged=new d.Signal(this);this.translator=e.translator||a.nullTranslator;this.content.addClass(u);void this.context.ready.then((()=>{this.update();this._monitor=new o.ActivityMonitor({signal:this.context.model.contentChanged,timeout:h});this._monitor.activityStopped.connect(this.update,this)}))}get trusted(){return this.content.sandbox.indexOf("allow-scripts")!==-1}set trusted(e){if(this.trusted===e){return}if(e){this.content.sandbox=f.trusted}else{this.content.sandbox=f.untrusted}this.content.url=this.content.url;this._trustedChanged.emit(e)}get trustedChanged(){return this._trustedChanged}dispose(){if(this._objectUrl){try{URL.revokeObjectURL(this._objectUrl)}catch(e){}}super.dispose()}onUpdateRequest(){if(this._renderPending){return}this._renderPending=true;void this._renderModel().then((()=>this._renderPending=false))}async _renderModel(){let e=this.context.model.toString();e=await this._setBase(e);const t=new Blob([e],{type:"text/html"});const n=this._objectUrl;this._objectUrl=URL.createObjectURL(t);this.content.url=this._objectUrl;if(n){try{URL.revokeObjectURL(n)}catch(i){}}return}async _setBase(e){const t=this._parser.parseFromString(e,"text/html");let n=t.querySelector("base");if(!n){n=t.createElement("base");t.head.insertBefore(n,t.head.firstChild)}const i=this.context.path;const s=await this.context.urlResolver.getDownloadUrl(i);n.href=s;n.target="_self";return t.documentElement.innerHTML}}class m extends r.ABCWidgetFactory{createNewWidget(e){return new p({context:e})}defaultToolbarFactory(e){return[{name:"refresh",widget:g.createRefreshButton(e,this.translator)},{name:"trust",widget:g.createTrustButton(e,this.translator)}]}}var g;(function(e){function t(e,t){const n=(t!==null&&t!==void 0?t:a.nullTranslator).load("jupyterlab");return new l.ToolbarButton({icon:l.refreshIcon,onClick:async()=>{if(!e.context.model.dirty){await e.context.revert();e.update()}},tooltip:n.__("Rerender HTML Document")})}e.createRefreshButton=t;function n(e,t){return l.ReactWidget.create(c.createElement(f.TrustButtonComponent,{htmlDocument:e,translator:t}))}e.createTrustButton=n})(g||(g={}));var f;(function(e){e.untrusted=[];e.trusted=["allow-scripts"];function t(e){const t=e.translator||a.nullTranslator;const n=t.load("jupyterlab");return c.createElement(l.UseSignal,{signal:e.htmlDocument.trustedChanged,initialSender:e.htmlDocument},(()=>c.createElement(l.ToolbarButtonComponent,{className:"",onClick:()=>e.htmlDocument.trusted=!e.htmlDocument.trusted,tooltip:n.__(`Whether the HTML file is trusted.\nTrusting the file allows scripts to run in it,\nwhich may result in security risks.\nOnly enable for files you trust.`),label:e.htmlDocument.trusted?n.__("Distrust HTML"):n.__("Trust HTML")})))}e.TrustButtonComponent=t})(f||(f={}))},10313:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CommandIDs:()=>h,default:()=>f});var i=n(44906);var s=n.n(i);var o=n(90848);var r=n.n(o);var a=n(22873);var l=n.n(a);var d=n(36168);var c=n.n(d);var h;(function(e){e.controlPanel="hub:control-panel";e.logout="hub:logout";e.restart="hub:restart"})(h||(h={}));function u(e,t,n,i){const s=n.load("jupyterlab");const o=t.urls.hubHost||"";const r=t.urls.hubPrefix||"";const l=t.urls.hubUser||"";const d=t.urls.hubServerName||"";const c=t.urls.base;if(!r){return}console.debug("hub-extension: Found configuration ",{hubHost:o,hubPrefix:r});const u=d?o+a.URLExt.join(r,"spawn",l,d):o+a.URLExt.join(r,"spawn");const{commands:p}=e;p.addCommand(h.restart,{label:s.__("Restart Server"),caption:s.__("Request that the Hub restart this server"),execute:()=>{window.open(u,"_blank")}});p.addCommand(h.controlPanel,{label:s.__("Hub Control Panel"),caption:s.__("Open the Hub control panel in a new browser tab"),execute:()=>{window.open(o+a.URLExt.join(r,"home"),"_blank")}});p.addCommand(h.logout,{label:s.__("Log Out"),caption:s.__("Log out of the Hub"),execute:()=>{window.location.href=o+a.URLExt.join(c,"logout")}});if(i){const e=s.__("Hub");i.addItem({category:e,command:h.controlPanel});i.addItem({category:e,command:h.logout})}}const p={activate:u,id:"@jupyterlab/hub-extension:plugin",description:"Registers commands related to the hub server",requires:[i.JupyterFrontEnd.IPaths,d.ITranslator],optional:[o.ICommandPalette],autoStart:true};const m={activate:()=>void 0,id:"@jupyterlab/hub-extension:menu",description:"Adds hub related commands to the menu.",autoStart:true};const g={id:"@jupyterlab/hub-extension:connectionlost",description:"Provides a service to be notified when the connection to the hub server is lost.",requires:[i.JupyterFrontEnd.IPaths,d.ITranslator],optional:[i.JupyterLab.IInfo],activate:(e,t,n,s)=>{const r=n.load("jupyterlab");const a=t.urls.hubPrefix||"";const l=t.urls.base;if(!a){return i.ConnectionLost}let d=false;const c=async(t,n)=>{if(d){return}d=true;if(s){s.isConnected=false}const i=await(0,o.showDialog)({title:r.__("Server unavailable or unreachable"),body:r.__("Your server at %1 is not running.\nWould you like to restart it?",l),buttons:[o.Dialog.okButton({label:r.__("Restart")}),o.Dialog.cancelButton({label:r.__("Dismiss")})]});if(s){s.isConnected=true}d=false;if(i.button.accept){await e.commands.execute(h.restart)}};return c},autoStart:true,provides:i.IConnectionLost};const f=[p,m,g]},34802:(e,t,n)=>{"use strict";var i=n(79536);var s=n(90516)},15453:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>_});var i=n(44906);var s=n.n(i);var o=n(90848);var r=n.n(o);var a=n(33344);var l=n.n(a);var d=n(36168);var c=n.n(d);var h;(function(e){e.resetImage="imageviewer:reset-image";e.zoomIn="imageviewer:zoom-in";e.zoomOut="imageviewer:zoom-out";e.flipHorizontal="imageviewer:flip-horizontal";e.flipVertical="imageviewer:flip-vertical";e.rotateClockwise="imageviewer:rotate-clockwise";e.rotateCounterclockwise="imageviewer:rotate-counterclockwise";e.invertColors="imageviewer:invert-colors"})(h||(h={}));const u=["png","gif","jpeg","bmp","ico","tiff"];const p="Image";const m="Image (Text)";const g=["svg","xbm"];const f=new RegExp(`[.](${g.join("|")})$`);const v={activate:b,description:"Adds image viewer and provide its tracker.",id:"@jupyterlab/imageviewer-extension:plugin",provides:a.IImageTracker,requires:[d.ITranslator],optional:[o.ICommandPalette,i.ILayoutRestorer],autoStart:true};const _=v;function b(e,t,n,i){const s=t.load("jupyterlab");const r="image-widget";function l(t,n){var i,s;n.context.pathChanged.connect((()=>{void v.save(n)}));void v.add(n);const o=e.docRegistry.getFileTypesForPath(n.context.path);if(o.length>0){n.title.icon=o[0].icon;n.title.iconClass=(i=o[0].iconClass)!==null&&i!==void 0?i:"";n.title.iconLabel=(s=o[0].iconLabel)!==null&&s!==void 0?s:""}}const d=new a.ImageViewerFactory({name:p,label:s.__("Image"),modelName:"base64",fileTypes:[...u,...g],defaultFor:u,readOnly:true});const c=new a.ImageViewerFactory({name:m,label:s.__("Image (Text)"),modelName:"text",fileTypes:g,defaultFor:g,readOnly:true});[d,c].forEach((t=>{e.docRegistry.addWidgetFactory(t);t.widgetCreated.connect(l)}));const v=new o.WidgetTracker({namespace:r});if(i){void i.restore(v,{command:"docmanager:open",args:e=>({path:e.context.path,factory:f.test(e.context.path)?m:p}),name:e=>e.context.path})}y(e,v,t);if(n){const e=s.__("Image Viewer");[h.zoomIn,h.zoomOut,h.resetImage,h.rotateClockwise,h.rotateCounterclockwise,h.flipHorizontal,h.flipVertical,h.invertColors].forEach((t=>{n.addItem({command:t,category:e})}))}return v}function y(e,t,n){const i=n.load("jupyterlab");const{commands:s,shell:o}=e;function r(){return t.currentWidget!==null&&t.currentWidget===o.currentWidget}s.addCommand("imageviewer:zoom-in",{execute:a,label:i.__("Zoom In"),isEnabled:r});s.addCommand("imageviewer:zoom-out",{execute:l,label:i.__("Zoom Out"),isEnabled:r});s.addCommand("imageviewer:reset-image",{execute:d,label:i.__("Reset Image"),isEnabled:r});s.addCommand("imageviewer:rotate-clockwise",{execute:c,label:i.__("Rotate Clockwise"),isEnabled:r});s.addCommand("imageviewer:rotate-counterclockwise",{execute:h,label:i.__("Rotate Counterclockwise"),isEnabled:r});s.addCommand("imageviewer:flip-horizontal",{execute:u,label:i.__("Flip image horizontally"),isEnabled:r});s.addCommand("imageviewer:flip-vertical",{execute:p,label:i.__("Flip image vertically"),isEnabled:r});s.addCommand("imageviewer:invert-colors",{execute:m,label:i.__("Invert Colors"),isEnabled:r});function a(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.scale=n.scale>1?n.scale+.5:n.scale*2}}function l(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.scale=n.scale>1?n.scale-.5:n.scale/2}}function d(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.scale=1;n.colorinversion=0;n.resetRotationFlip()}}function c(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.rotateClockwise()}}function h(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.rotateCounterclockwise()}}function u(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.flipHorizontal()}}function p(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.flipVertical()}}function m(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.colorinversion+=1;n.colorinversion%=2}}}},42584:(e,t,n)=>{"use strict";var i=n(79536);var s=n(94683);var o=n(90516);var r=n(32902);var a=n(93379);var l=n.n(a);var d=n(7795);var c=n.n(d);var h=n(90569);var u=n.n(h);var p=n(3565);var m=n.n(p);var g=n(19216);var f=n.n(g);var v=n(44589);var _=n.n(v);var b=n(5235);var y={};y.styleTagTransform=_();y.setAttributes=m();y.insert=u().bind(null,"head");y.domAPI=c();y.insertStyleElement=f();var w=l()(b.Z,y);const C=b.Z&&b.Z.locals?b.Z.locals:undefined},32067:(e,t,n)=>{"use strict";n.r(t);n.d(t,{IImageTracker:()=>s,ImageViewer:()=>c,ImageViewerFactory:()=>h});var i=n(5596);const s=new i.Token("@jupyterlab/imageviewer:IImageTracker",`A widget tracker for images.\n  Use this if you want to be able to iterate over and interact with images\n  viewed by the application.`);var o=n(22873);var r=n(90848);var a=n(35788);var l=n(85448);const d="jp-ImageViewer";class c extends l.Widget{constructor(e){super();this._scale=1;this._matrix=[1,0,0,1];this._colorinversion=0;this._ready=new i.PromiseDelegate;this.context=e;this.node.tabIndex=0;this.addClass(d);this._img=document.createElement("img");this.node.appendChild(this._img);this._onTitleChanged();e.pathChanged.connect(this._onTitleChanged,this);void e.ready.then((()=>{if(this.isDisposed){return}const t=e.contentsModel;this._mimeType=t.mimetype;this._render();e.model.contentChanged.connect(this.update,this);e.fileChanged.connect(this.update,this);this._ready.resolve(void 0)}))}[r.Printing.symbol](){return()=>r.Printing.printWidget(this)}get ready(){return this._ready.promise}get scale(){return this._scale}set scale(e){if(e===this._scale){return}this._scale=e;this._updateStyle()}get colorinversion(){return this._colorinversion}set colorinversion(e){if(e===this._colorinversion){return}this._colorinversion=e;this._updateStyle()}dispose(){if(this._img.src){URL.revokeObjectURL(this._img.src||"")}super.dispose()}resetRotationFlip(){this._matrix=[1,0,0,1];this._updateStyle()}rotateCounterclockwise(){this._matrix=u.prod(this._matrix,u.rotateCounterclockwiseMatrix);this._updateStyle()}rotateClockwise(){this._matrix=u.prod(this._matrix,u.rotateClockwiseMatrix);this._updateStyle()}flipHorizontal(){this._matrix=u.prod(this._matrix,u.flipHMatrix);this._updateStyle()}flipVertical(){this._matrix=u.prod(this._matrix,u.flipVMatrix);this._updateStyle()}onUpdateRequest(e){if(this.isDisposed||!this.context.isReady){return}this._render()}onActivateRequest(e){this.node.focus()}_onTitleChanged(){this.title.label=o.PathExt.basename(this.context.localPath)}_render(){const e=this.context;const t=e.contentsModel;if(!t){return}const n=this._img.src||"";let i=e.model.toString();if(t.format==="base64"){this._img.src=`data:${this._mimeType};base64,${i}`}else{const e=new Blob([i],{type:this._mimeType});this._img.src=URL.createObjectURL(e)}URL.revokeObjectURL(n)}_updateStyle(){const[e,t,n,i]=this._matrix;const[s,o]=u.prodVec(this._matrix,[1,1]);const r=`matrix(${e}, ${t}, ${n}, ${i}, 0, 0) translate(${s<0?-100:0}%, ${o<0?-100:0}%) `;this._img.style.transform=`scale(${this._scale}) ${r}`;this._img.style.filter=`invert(${this._colorinversion})`}}class h extends a.ABCWidgetFactory{createNewWidget(e){const t=new c(e);const n=new a.DocumentWidget({content:t,context:e});return n}}var u;(function(e){function t([e,t,n,i],[s,o,r,a]){return[e*s+t*r,e*o+t*a,n*s+i*r,n*o+i*a]}e.prod=t;function n([e,t,n,i],[s,o]){return[e*s+t*o,n*s+i*o]}e.prodVec=n;e.rotateClockwiseMatrix=[0,1,-1,0];e.rotateCounterclockwiseMatrix=[0,-1,1,0];e.flipHMatrix=[-1,0,0,1];e.flipVMatrix=[1,0,0,-1]})(u||(u={}))},77407:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>S});var i=n(44906);var s=n.n(i);var o=n(90848);var r=n.n(o);var a=n(85257);var l=n.n(a);var d=n(91880);var c=n.n(d);var h=n(9036);var u=n.n(h);var p=n(74202);var m=n.n(p);var g=n(36168);var f=n.n(g);var v=n(52435);var _=n.n(v);var b;(function(e){e.open="inspector:open";e.close="inspector:close";e.toggle="inspector:toggle"})(b||(b={}));const y={id:"@jupyterlab/inspector-extension:inspector",description:"Provides the code introspection widget.",requires:[g.ITranslator],optional:[o.ICommandPalette,h.ILauncher,i.ILayoutRestorer],provides:d.IInspector,autoStart:true,activate:(e,t,n,i,s)=>{const r=t.load("jupyterlab");const{commands:a,shell:l}=e;const c=r.__("Live updating code documentation from the active kernel");const h=r.__("Contextual Help");const u="inspector";const p="jpInspector";const m=new o.WidgetTracker({namespace:u});function g(){return _&&!_.isDisposed}let f=null;let _;function y(e){var n;if(!g()){_=new o.MainAreaWidget({content:new d.InspectorPanel({translator:t})});_.id="jp-inspector";_.title.label=h;_.title.icon=v.inspectorIcon;void m.add(_);f=f&&!f.isDisposed?f:null;_.content.source=f;(n=_.content.source)===null||n===void 0?void 0:n.onEditorChange(e)}if(!_.isAttached){l.add(_,"main",{activate:false,mode:"split-right",type:"Inspector"})}l.activateById(_.id);document.body.dataset[p]="open";return _}function w(){_.dispose();delete document.body.dataset[p]}const C=r.__("Show Contextual Help");a.addCommand(b.open,{caption:c,isEnabled:()=>!_||_.isDisposed||!_.isAttached||!_.isVisible,label:C,icon:e=>e.isLauncher?v.inspectorIcon:undefined,execute:e=>{var t;const n=e&&e.text;const i=e&&e.refresh;if(g()&&i)(t=_.content.source)===null||t===void 0?void 0:t.onEditorChange(n);else y(n)}});const x=r.__("Hide Contextual Help");a.addCommand(b.close,{caption:c,isEnabled:()=>g(),label:x,icon:e=>e.isLauncher?v.inspectorIcon:undefined,execute:()=>w()});const S=r.__("Show Contextual Help");a.addCommand(b.toggle,{caption:c,label:S,isToggled:()=>g(),execute:e=>{if(g()){w()}else{const t=e&&e.text;y(t)}}});if(i){i.add({command:b.open,args:{isLauncher:true}})}if(n){n.addItem({command:b.toggle,category:S})}if(s){void s.restore(m,{command:b.toggle,name:()=>"inspector"})}const k=Object.defineProperty({},"source",{get:()=>!_||_.isDisposed?null:_.content.source,set:e=>{f=e&&!e.isDisposed?e:null;if(_&&!_.isDisposed){_.content.source=f}}});return k}};const w={id:"@jupyterlab/inspector-extension:consoles",description:"Adds code introspection support to consoles.",requires:[d.IInspector,a.IConsoleTracker,i.ILabShell],autoStart:true,activate:(e,t,n,i,s)=>{const o={};n.widgetAdded.connect(((e,t)=>{const n=t.console.sessionContext;const i=t.console.rendermime;const s=new d.KernelConnector({sessionContext:n});const r=new d.InspectionHandler({connector:s,rendermime:i});o[t.id]=r;const a=t.console.promptCell;r.editor=a&&a.editor;t.console.promptCellCreated.connect(((e,t)=>{r.editor=t&&t.editor}));t.disposed.connect((()=>{delete o[t.id];r.dispose()}))}));const r=e=>{if(e&&n.has(e)&&o[e.id]){t.source=o[e.id]}};i.currentChanged.connect(((e,t)=>r(t.newValue)));void e.restored.then((()=>r(i.currentWidget)))}};const C={id:"@jupyterlab/inspector-extension:notebooks",description:"Adds code introspection to notebooks.",requires:[d.IInspector,p.INotebookTracker,i.ILabShell],autoStart:true,activate:(e,t,n,i)=>{const s={};n.widgetAdded.connect(((e,t)=>{const n=t.sessionContext;const i=t.content.rendermime;const o=new d.KernelConnector({sessionContext:n});const r=new d.InspectionHandler({connector:o,rendermime:i});s[t.id]=r;const a=t.content.activeCell;r.editor=a&&a.editor;t.content.activeCellChanged.connect(((e,n)=>{void(n===null||n===void 0?void 0:n.ready.then((()=>{if(n===t.content.activeCell){r.editor=n.editor}})))}));t.disposed.connect((()=>{delete s[t.id];r.dispose()}))}));const o=e=>{if(e&&n.has(e)&&s[e.id]){t.source=s[e.id]}};i.currentChanged.connect(((e,t)=>o(t.newValue)));void e.restored.then((()=>o(i.currentWidget)))}};const x=[y,w,C];const S=x},54244:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(90516);var a=n(42650);var l=n(70637);var d=n(52812);var c=n(88164)},55091:(e,t,n)=>{"use strict";n.r(t);n.d(t,{IInspector:()=>_,InspectionHandler:()=>l,InspectorPanel:()=>g,KernelConnector:()=>v});var i=n(22873);var s=n(33112);var o=n(5596);var r=n(95905);var a=n(71372);class l{constructor(e){this._cleared=new a.Signal(this);this._disposed=new a.Signal(this);this._editor=null;this._inspected=new a.Signal(this);this._isDisposed=false;this._pending=0;this._standby=true;this._lastInspectedReply=null;this._connector=e.connector;this._rendermime=e.rendermime;this._debouncer=new r.Debouncer(this.onEditorChange.bind(this),250)}get cleared(){return this._cleared}get disposed(){return this._disposed}get inspected(){return this._inspected}get editor(){return this._editor}set editor(e){if(e===this._editor){return}a.Signal.disconnectReceiver(this);const t=this._editor=e;if(t){this._cleared.emit(void 0);this.onEditorChange();t.model.selections.changed.connect(this._onChange,this);t.model.sharedModel.changed.connect(this._onChange,this)}}get standby(){return this._standby}set standby(e){this._standby=e}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this._debouncer.dispose();this._disposed.emit(void 0);a.Signal.clearData(this)}onEditorChange(e){if(this._standby){return}const t=this.editor;if(!t){return}const n=e?e:t.model.sharedModel.getSource();const r=t.getCursorPosition();const a=i.Text.jsIndexToCharIndex(t.getOffsetAt(r),n);const l={content:null};const d=++this._pending;void this._connector.fetch({offset:a,text:n}).then((e=>{if(!e||this.isDisposed||d!==this._pending){this._lastInspectedReply=null;this._inspected.emit(l);return}const{data:t}=e;if(this._lastInspectedReply&&o.JSONExt.deepEqual(this._lastInspectedReply,t)){return}const n=this._rendermime.preferredMimeType(t);if(n){const e=this._rendermime.createRenderer(n);const i=new s.MimeModel({data:t});void e.renderModel(i);l.content=e}this._lastInspectedReply=e.data;this._inspected.emit(l)})).catch((e=>{this._lastInspectedReply=null;this._inspected.emit(l)}))}_onChange(){void this._debouncer.invoke()}}var d=n(90848);var c=n(36168);var h=n(85448);const u="jp-Inspector";const p="jp-Inspector-content";const m="jp-Inspector-default-content";class g extends h.Panel{constructor(e={}){super();this._source=null;this.translator=e.translator||c.nullTranslator;this._trans=this.translator.load("jupyterlab");if(e.initialContent instanceof h.Widget){this._content=e.initialContent}else if(typeof e.initialContent==="string"){this._content=g._generateContentWidget(`<p>${e.initialContent}</p>`)}else{this._content=g._generateContentWidget("<p>"+this._trans.__("Click on a function to see documentation.")+"</p>")}this.addClass(u);this.layout.addWidget(this._content)}[d.Printing.symbol](){return()=>d.Printing.printWidget(this)}get source(){return this._source}set source(e){if(this._source===e){return}if(this._source){this._source.standby=true;this._source.inspected.disconnect(this.onInspectorUpdate,this);this._source.disposed.disconnect(this.onSourceDisposed,this)}if(e&&e.isDisposed){e=null}this._source=e;if(this._source){this._source.standby=false;this._source.inspected.connect(this.onInspectorUpdate,this);this._source.disposed.connect(this.onSourceDisposed,this)}}dispose(){if(this.isDisposed){return}this.source=null;super.dispose()}onInspectorUpdate(e,t){const{content:n}=t;if(!n||n===this._content){return}this._content.dispose();this._content=n;n.addClass(p);this.layout.addWidget(n)}onSourceDisposed(e,t){this.source=null}static _generateContentWidget(e){const t=new h.Widget;t.node.innerHTML=e;t.addClass(p);t.addClass(m);return t}}var f=n(9682);class v extends f.DataConnector{constructor(e){super();this._sessionContext=e.sessionContext}fetch(e){var t;const n=(t=this._sessionContext.session)===null||t===void 0?void 0:t.kernel;if(!n){return Promise.reject(new Error("Inspection fetch requires a kernel."))}const i={code:e.text,cursor_pos:e.offset,detail_level:1};return n.requestInspect(i).then((e=>{const t=e.content;if(t.status!=="ok"||!t.found){throw new Error("Inspection fetch failed to return successfully.")}return{data:t.data,metadata:t.metadata}}))}}const _=new o.Token("@jupyterlab/inspector:IInspector",`A service for adding contextual help to widgets (visible using "Show Contextual Help" from the Help menu).\n  Use this to hook into the contextual help system in your extension.`)},70637:(e,t,n)=>{"use strict";var i=n(32902);var s=n(79536);var o=n(49914);var r=n(98896);var a=n(93379);var l=n.n(a);var d=n(7795);var c=n.n(d);var h=n(90569);var u=n.n(h);var p=n(3565);var m=n.n(p);var g=n(19216);var f=n.n(g);var v=n(44589);var _=n.n(v);var b=n(28279);var y={};y.styleTagTransform=_();y.setAttributes=m();y.insert=u().bind(null,"head");y.domAPI=c();y.insertStyleElement=f();var w=l()(b.Z,y);const C=b.Z&&b.Z.locals?b.Z.locals:undefined},48105:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{APPLICATION_JAVASCRIPT_MIMETYPE:()=>APPLICATION_JAVASCRIPT_MIMETYPE,ExperimentalRenderedJavascript:()=>ExperimentalRenderedJavascript,TEXT_JAVASCRIPT_MIMETYPE:()=>TEXT_JAVASCRIPT_MIMETYPE,default:()=>__WEBPACK_DEFAULT_EXPORT__,rendererFactory:()=>rendererFactory});var _jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(33112);var _jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0__);const TEXT_JAVASCRIPT_MIMETYPE="text/javascript";const APPLICATION_JAVASCRIPT_MIMETYPE="application/javascript";function evalInContext(code,element,document,window){return eval(code)}class ExperimentalRenderedJavascript extends _jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0__.RenderedJavaScript{render(e){const t=this.translator.load("jupyterlab");const n=()=>{try{const t=e.data[this.mimeType];if(t){evalInContext(t,this.node,document,window)}return Promise.resolve()}catch(t){return Promise.reject(t)}};if(!e.trusted){const e=document.createElement("pre");e.textContent=t.__("Are you sure that you want to run arbitrary Javascript within your JupyterLab session?");const i=document.createElement("button");i.textContent=t.__("Run");this.node.appendChild(e);this.node.appendChild(i);i.onclick=e=>{this.node.textContent="";void n()};return Promise.resolve()}return n()}}const rendererFactory={safe:false,mimeTypes:[TEXT_JAVASCRIPT_MIMETYPE,APPLICATION_JAVASCRIPT_MIMETYPE],createRenderer:e=>new ExperimentalRenderedJavascript(e)};const extension={id:"@jupyterlab/javascript-extension:factory",description:"Adds renderer for JavaScript content.",rendererFactory,rank:0,dataType:"string"};const __WEBPACK_DEFAULT_EXPORT__=extension},93814:(e,t,n)=>{"use strict";var i=n(98896);var s=n(93379);var o=n.n(s);var r=n(7795);var a=n.n(r);var l=n(90569);var d=n.n(l);var c=n(3565);var h=n.n(c);var u=n(19216);var p=n.n(u);var m=n(44589);var g=n.n(m);var f=n(11096);var v={};v.styleTagTransform=g();v.setAttributes=h();v.insert=d().bind(null,"head");v.domAPI=a();v.insertStyleElement=p();var _=o()(f.Z,v);const b=f.Z&&f.Z.locals?f.Z.locals:undefined},91641:(e,t,n)=>{"use strict";n.r(t);n.d(t,{Component:()=>C});var i=n(96912);var s=n.n(i);var o=n(36168);var r=n.n(o);var a=n(52435);var l=n.n(a);var d=n(6016);var c=n.n(d);var h=n(5596);var u=n.n(h);var p=n(28416);var m=n.n(p);var g=n(59139);var f=n.n(g);var v=n(84976);var _=n.n(v);var b=n(67737);var y=n.n(b);function w(e){var t;return(t=i.jupyterHighlightStyle.style([e]))!==null&&t!==void 0?t:""}class C extends p.Component{constructor(){super(...arguments);this.state={filter:"",value:""};this.timer=0;this.handleChange=e=>{const{value:t}=e.target;this.setState({value:t});window.clearTimeout(this.timer);this.timer=window.setTimeout((()=>{this.setState({filter:t})}),300)}}componentDidMount(){b.StyleModule.mount(document,i.jupyterHighlightStyle.module)}render(){const e=this.props.translator||o.nullTranslator;const t=e.load("jupyterlab");const{data:n,metadata:i,forwardedRef:s}=this.props;const r=i&&i.root?i.root:"root";const l=this.state.filter?k(n,this.state.filter,[r]):[r];return p.createElement("div",{className:"container",ref:s},p.createElement(a.InputGroup,{className:"filter",type:"text",placeholder:t.__("Filter"),onChange:this.handleChange,value:this.state.value,rightIcon:"ui-components:search"}),p.createElement(v.JSONTree,{data:n,collectionLimit:100,theme:{extend:x,valueLabel:w(d.tags.variableName),valueText:w(d.tags.string),nestedNodeItemString:w(d.tags.comment)},invertTheme:false,keyPath:[r],getItemString:(e,t,n,i)=>Array.isArray(t)?p.createElement("span",null,n," ",i):Object.keys(t).length===0?p.createElement("span",null,n):null,labelRenderer:([e,t])=>p.createElement("span",{className:w(d.tags.keyword)},p.createElement(f(),{searchWords:[this.state.filter],textToHighlight:`${e}`,highlightClassName:"jp-mod-selected"})),valueRenderer:e=>{let t=w(d.tags.string);if(typeof e==="number"){t=w(d.tags.number)}if(e==="true"||e==="false"){t=w(d.tags.keyword)}return p.createElement("span",{className:t},p.createElement(f(),{searchWords:[this.state.filter],textToHighlight:`${e}`,highlightClassName:"jp-mod-selected"}))},shouldExpandNodeInitially:(e,t,n)=>i&&i.expanded?true:l.join(",").includes(e.join(","))}))}}const x={scheme:"jupyter",base00:"invalid",base01:"invalid",base02:"invalid",base03:"invalid",base04:"invalid",base05:"invalid",base06:"invalid",base07:"invalid",base08:"invalid",base09:"invalid",base0A:"invalid",base0B:"invalid",base0C:"invalid",base0D:"invalid",base0E:"invalid",base0F:"invalid",author:"invalid"};function S(e,t){return JSON.stringify(e).includes(t)}function k(e,t,n=["root"]){if(h.JSONExt.isArray(e)){return e.reduce(((e,i,s)=>{if(i&&typeof i==="object"&&S(i,t)){return[...e,[s,...n].join(","),...k(i,t,[s,...n])]}return e}),[])}if(h.JSONExt.isObject(e)){return Object.keys(e).reduce(((i,s)=>{const o=e[s];if(o&&typeof o==="object"&&(s.includes(t)||S(o,t))){return[...i,[s,...n].join(","),...k(o,t,[s,...n])]}return i}),[])}return[]}},34222:(e,t,n)=>{"use strict";n.r(t);n.d(t,{MIME_TYPE:()=>p,RenderedJSON:()=>m,default:()=>v,rendererFactory:()=>g});var i=n(90848);var s=n.n(i);var o=n(36168);var r=n.n(o);var a=n(85448);var l=n.n(a);var d=n(28416);var c=n.n(d);var h=n(20745);const u="jp-RenderedJSON";const p="application/json";class m extends a.Widget{constructor(e){super();this._rootDOM=null;this.addClass(u);this.addClass("CodeMirror");this._mimeType=e.mimeType;this.translator=e.translator||o.nullTranslator}[i.Printing.symbol](){return()=>i.Printing.printWidget(this)}async renderModel(e){const{Component:t}=await Promise.all([n.e(3472),n.e(5596),n.e(2435),n.e(6912),n.e(6016),n.e(7737),n.e(5317)]).then(n.bind(n,91641));const i=e.data[this._mimeType]||{};const s=e.metadata[this._mimeType]||{};if(this._rootDOM===null){this._rootDOM=(0,h.s)(this.node)}return new Promise(((e,n)=>{this._rootDOM.render(d.createElement(t,{data:i,metadata:s,translator:this.translator,forwardedRef:()=>e()}))}))}onBeforeDetach(e){if(this._rootDOM){this._rootDOM.unmount();this._rootDOM=null}}}const g={safe:true,mimeTypes:[p],createRenderer:e=>new m(e)};const f=[{id:"@jupyterlab/json-extension:factory",description:"Adds renderer for JSON content.",rendererFactory:g,rank:0,dataType:"json",documentWidgetFactoryOptions:{name:"JSON",primaryFileType:"json",fileTypes:["json","notebook","geojson"],defaultFor:["json"]}}];const v=f},64897:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(37935);var a=n(93379);var l=n.n(a);var d=n(7795);var c=n.n(d);var h=n(90569);var u=n.n(h);var p=n(3565);var m=n.n(p);var g=n(19216);var f=n.n(g);var v=n(44589);var _=n.n(v);var b=n(2837);var y={};y.styleTagTransform=_();y.setAttributes=m();y.insert=u().bind(null,"head");y.domAPI=c();y.insertStyleElement=f();var w=l()(b.Z,y);const C=b.Z&&b.Z.locals?b.Z.locals:undefined},65392:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>b});var i=n(44906);var s=n.n(i);var o=n(90848);var r=n.n(o);var a=n(30796);var l=n.n(a);var d=n(9036);var c=n.n(d);var h=n(36168);var u=n.n(h);var p=n(52435);var m=n.n(p);var g=n(58740);var f=n.n(g);var v;(function(e){e.create="launcher:create"})(v||(v={}));const _={activate:y,id:"@jupyterlab/launcher-extension:plugin",description:"Provides the launcher tab service.",requires:[h.ITranslator],optional:[i.ILabShell,o.ICommandPalette,a.IDefaultFileBrowser,a.IFileBrowserFactory],provides:d.ILauncher,autoStart:true};const b=_;function y(e,t,n,i,s,r){const{commands:a,shell:l}=e;const c=t.load("jupyterlab");const h=new d.LauncherModel;a.addCommand(v.create,{label:c.__("New Launcher"),icon:e=>e.toolbar?p.addIcon:undefined,execute:e=>{var i,r;const u=(r=(i=e["cwd"])!==null&&i!==void 0?i:s===null||s===void 0?void 0:s.model.path)!==null&&r!==void 0?r:"";const m=`launcher-${w.id++}`;const f=e=>{if((0,g.find)(l.widgets("main"),(t=>t===e))){l.add(e,"main",{ref:m});v.dispose()}};const v=new d.Launcher({model:h,cwd:u,callback:f,commands:a,translator:t});v.model=h;v.title.icon=p.launcherIcon;v.title.label=c.__("Launcher");const _=new o.MainAreaWidget({content:v});_.title.closable=!!Array.from(l.widgets("main")).length;_.id=m;l.add(_,"main",{activate:e["activate"],ref:e["ref"]});if(n){n.layoutModified.connect((()=>{_.title.closable=Array.from(n.widgets("main")).length>1}),_)}if(s){const e=e=>{v.cwd=e.path};s.model.pathChanged.connect(e);v.disposed.connect((()=>{s.model.pathChanged.disconnect(e)}))}return _}});if(n){void Promise.all([e.restored,s===null||s===void 0?void 0:s.model.restored]).then((()=>{function e(){if(n.isEmpty("main")){void a.execute(v.create)}}n.layoutModified.connect((()=>{e()}))}))}if(i){i.addItem({command:v.create,category:c.__("Launcher")})}if(n){n.addButtonEnabled=true;n.addRequested.connect(((e,t)=>{var n;const i=((n=t.currentTitle)===null||n===void 0?void 0:n.owner.id)||t.titles[t.titles.length-1].owner.id;return a.execute(v.create,{ref:i})}))}return h}var w;(function(e){e.id=0})(w||(w={}))},94679:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(90516);var a=n(59240);var l=n(52812);var d=n(93379);var c=n.n(d);var h=n(7795);var u=n.n(h);var p=n(90569);var m=n.n(p);var g=n(3565);var f=n.n(g);var v=n(19216);var _=n.n(v);var b=n(44589);var y=n.n(b);var w=n(83602);var C={};C.styleTagTransform=y();C.setAttributes=f();C.insert=m().bind(null,"head");C.domAPI=u();C.insertStyleElement=_();var x=c()(w.Z,C);const S=w.Z&&w.Z.locals?w.Z.locals:undefined},9:(e,t,n)=>{"use strict";n.r(t);n.d(t,{ILauncher:()=>s,Launcher:()=>g,LauncherModel:()=>m});var i=n(5596);const s=new i.Token("@jupyterlab/launcher:ILauncher",`A service for the application activity launcher.\n  Use this to add your extension activities to the launcher panel.`);var o=n(90848);var r=n(36168);var a=n(52435);var l=n(58740);var d=n(26512);var c=n(75379);var h=n(85448);var u=n(28416);const p="jp-Launcher";class m extends a.VDomModel{constructor(){super(...arguments);this.itemsList=[]}add(e){const t=v.createItem(e);this.itemsList.push(t);this.stateChanged.emit(void 0);return new d.DisposableDelegate((()=>{l.ArrayExt.removeFirstOf(this.itemsList,t);this.stateChanged.emit(void 0)}))}items(){return this.itemsList[Symbol.iterator]()}}class g extends a.VDomRenderer{constructor(e){super(e.model);this._pending=false;this._cwd="";this._cwd=e.cwd;this.translator=e.translator||r.nullTranslator;this._trans=this.translator.load("jupyterlab");this._callback=e.callback;this._commands=e.commands;this.addClass(p)}get cwd(){return this._cwd}set cwd(e){this._cwd=e;this.update()}get pending(){return this._pending}set pending(e){this._pending=e}render(){if(!this.model){return null}const e=[this._trans.__("Notebook"),this._trans.__("Console"),this._trans.__("Other")];const t=[this._trans.__("Notebook"),this._trans.__("Console")];const n=Object.create(null);for(const r of this.model.items()){const e=r.category||this._trans.__("Other");if(!(e in n)){n[e]=[]}n[e].push(r)}for(const r in n){n[r]=n[r].sort(((e,t)=>v.sortCmp(e,t,this._cwd,this._commands)))}const i=[];let s;const o=[];for(const r of e){o.push(r)}for(const r in n){if(e.indexOf(r)===-1){o.push(r)}}o.forEach((e=>{if(!n[e]){return}const o=n[e][0];const r={...o.args,cwd:this.cwd};const d=t.indexOf(e)>-1;const c=this._commands.iconClass(o.command,r);const h=this._commands.icon(o.command,r);if(e in n){s=u.createElement("div",{className:"jp-Launcher-section",key:e},u.createElement("div",{className:"jp-Launcher-sectionHeader"},u.createElement(a.LabIcon.resolveReact,{icon:h,iconClass:(0,a.classes)(c,"jp-Icon-cover"),stylesheet:"launcherSection"}),u.createElement("h2",{className:"jp-Launcher-sectionTitle"},e)),u.createElement("div",{className:"jp-Launcher-cardContainer"},Array.from((0,l.map)(n[e],(e=>f(d,e,this,this._commands,this._trans,this._callback))))));i.push(s)}}));return u.createElement("div",{className:"jp-Launcher-body"},u.createElement("div",{className:"jp-Launcher-content"},u.createElement("div",{className:"jp-Launcher-cwd"},u.createElement("h3",null,this.cwd)),i))}}function f(e,t,n,i,s,r){const l=t.command;const d={...t.args,cwd:n.cwd};const c=i.caption(l,d);const p=i.label(l,d);const m=e?p:c||p;const g=()=>{if(n.pending===true){return}n.pending=true;void i.execute(l,{...t.args,cwd:n.cwd}).then((e=>{n.pending=false;if(e instanceof h.Widget){r(e)}})).catch((e=>{console.error(e);n.pending=false;void(0,o.showErrorMessage)(s._p("Error","Launcher Error"),e)}))};const f=e=>{if(e.key==="Enter"){g()}};const _=i.iconClass(l,d);const b=i.icon(l,d);return u.createElement("div",{className:"jp-LauncherCard",title:m,onClick:g,onKeyPress:f,tabIndex:0,"data-category":t.category||s.__("Other"),key:v.keyProperty.get(t)},u.createElement("div",{className:"jp-LauncherCard-icon"},e?t.kernelIconUrl?u.createElement("img",{src:t.kernelIconUrl,className:"jp-Launcher-kernelIcon"}):u.createElement("div",{className:"jp-LauncherCard-noKernelIcon"},p[0].toUpperCase()):u.createElement(a.LabIcon.resolveReact,{icon:b,iconClass:(0,a.classes)(_,"jp-Icon-cover"),stylesheet:"launcherCard"})),u.createElement("div",{className:"jp-LauncherCard-label",title:m},u.createElement("p",null,p)))}var v;(function(e){let t=0;e.keyProperty=new c.AttachedProperty({name:"key",create:()=>t++});function n(e){return{...e,category:e.category||"",rank:e.rank!==undefined?e.rank:Infinity}}e.createItem=n;function i(e,t,n,i){const s=e.rank;const o=t.rank;if(s!==o&&s!==undefined&&o!==undefined){return s<o?-1:1}const r=i.label(e.command,{...e.args,cwd:n});const a=i.label(t.command,{...t.args,cwd:n});return r.localeCompare(a)}e.sortCmp=i})(v||(v={}))},52812:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(93379);var a=n.n(r);var l=n(7795);var d=n.n(l);var c=n(90569);var h=n.n(c);var u=n(3565);var p=n.n(u);var m=n(19216);var g=n.n(m);var f=n(44589);var v=n.n(f);var _=n(41802);var b={};b.styleTagTransform=v();b.setAttributes=p();b.insert=h().bind(null,"head");b.domAPI=d();b.insertStyleElement=g();var y=a()(_.Z,b);const w=_.Z&&_.Z.locals?_.Z.locals:undefined},54780:(e,t,n)=>{"use strict";n.r(t);n.d(t,{LogLevelSwitcher:()=>w,default:()=>C});var i=n(44906);var s=n(90848);var o=n(47215);var r=n(33112);var a=n(51997);var l=n(88478);var d=n(36168);var c=n(52435);var h=n(5596);var u=n(28416);var p=n.n(u);var m=n(71372);function g(e){const t=e.translator||d.nullTranslator;const n=t.load("jupyterlab");let i="";if(e.newMessages>0){i=n.__("%1 new messages, %2 log entries for %3",e.newMessages,e.logEntries,e.source)}else{i+=n.__("%1 log entries for %2",e.logEntries,e.source)}return p().createElement(l.GroupItem,{spacing:0,onClick:e.handleClick,title:i},p().createElement(c.listIcon.react,{top:"2px",stylesheet:"statusBar"}),e.newMessages>0?p().createElement(l.TextItem,{source:e.newMessages}):p().createElement(p().Fragment,null))}class f extends c.VDomRenderer{constructor(e){super(new f.Model(e.loggerRegistry));this.translator=e.translator||d.nullTranslator;this._handleClick=e.handleClick;this.addClass("jp-mod-highlighted");this.addClass("jp-LogConsoleStatusItem")}render(){if(this.model===null||this.model.version===0){return null}const{flashEnabled:e,messages:t,source:n,version:i,versionDisplayed:s,versionNotified:o}=this.model;if(n!==null&&e&&i>o){this._flashHighlight();this.model.sourceNotified(n,i)}else if(n!==null&&e&&i>s){this._showHighlighted()}else{this._clearHighlight()}return p().createElement(g,{handleClick:this._handleClick,logEntries:t,newMessages:i-s,source:this.model.source,translator:this.translator})}_flashHighlight(){this._showHighlighted();this.removeClass("jp-LogConsole-flash");requestAnimationFrame((()=>{this.addClass("jp-LogConsole-flash")}))}_showHighlighted(){this.addClass("jp-mod-selected")}_clearHighlight(){this.removeClass("jp-LogConsole-flash");this.removeClass("jp-mod-selected")}}(function(e){class t extends c.VDomModel{constructor(e){super();this.flashEnabledChanged=new m.Signal(this);this._flashEnabled=true;this._source=null;this._sourceVersion=new Map;this._loggerRegistry=e;this._loggerRegistry.registryChanged.connect(this._handleLogRegistryChange,this);this._handleLogRegistryChange()}get messages(){if(this._source===null){return 0}const e=this._loggerRegistry.getLogger(this._source);return e.length}get version(){if(this._source===null){return 0}const e=this._loggerRegistry.getLogger(this._source);return e.version}get source(){return this._source}set source(e){if(this._source===e){return}this._source=e;this.stateChanged.emit()}get versionDisplayed(){var e,t;if(this._source===null){return 0}return(t=(e=this._sourceVersion.get(this._source))===null||e===void 0?void 0:e.lastDisplayed)!==null&&t!==void 0?t:0}get versionNotified(){var e,t;if(this._source===null){return 0}return(t=(e=this._sourceVersion.get(this._source))===null||e===void 0?void 0:e.lastNotified)!==null&&t!==void 0?t:0}get flashEnabled(){return this._flashEnabled}set flashEnabled(e){if(this._flashEnabled===e){return}this._flashEnabled=e;this.flashEnabledChanged.emit();this.stateChanged.emit()}sourceDisplayed(e,t){if(e===null||t===null){return}const n=this._sourceVersion.get(e);let i=false;if(n.lastDisplayed<t){n.lastDisplayed=t;i=true}if(n.lastNotified<t){n.lastNotified=t;i=true}if(i&&e===this._source){this.stateChanged.emit()}}sourceNotified(e,t){if(e===null){return}const n=this._sourceVersion.get(e);if(n.lastNotified<t){n.lastNotified=t;if(e===this._source){this.stateChanged.emit()}}}_handleLogRegistryChange(){const e=this._loggerRegistry.getLoggers();for(const t of e){if(!this._sourceVersion.has(t.source)){t.contentChanged.connect(this._handleLogContentChange,this);this._sourceVersion.set(t.source,{lastDisplayed:0,lastNotified:0})}}}_handleLogContentChange({source:e},t){if(e===this._source){this.stateChanged.emit()}}}e.Model=t})(f||(f={}));const v="@jupyterlab/logconsole-extension:plugin";var _;(function(e){e.addCheckpoint="logconsole:add-checkpoint";e.clear="logconsole:clear";e.open="logconsole:open";e.setLevel="logconsole:set-level"})(_||(_={}));const b={activate:y,id:v,description:"Provides the logger registry.",provides:o.ILoggerRegistry,requires:[i.ILabShell,r.IRenderMimeRegistry,d.ITranslator],optional:[s.ICommandPalette,i.ILayoutRestorer,a.ISettingRegistry,l.IStatusBar],autoStart:true};function y(e,t,n,i,r,a,l,d){const h=i.load("jupyterlab");let u=null;let p=null;const m=new o.LoggerRegistry({defaultRendermime:n,maxLength:1e3});const g=new s.WidgetTracker({namespace:"logconsole"});if(a){void a.restore(g,{command:_.open,name:()=>"logconsole"})}const b=new f({loggerRegistry:m,handleClick:()=>{var t;if(!u){y({insertMode:"split-bottom",ref:(t=e.shell.currentWidget)===null||t===void 0?void 0:t.id})}else{e.shell.activateById(u.id)}},translator:i});const y=(n={})=>{var r,a;p=new o.LogConsolePanel(m,i);p.source=(a=(r=n.source)!==null&&r!==void 0?r:t.currentPath)!==null&&a!==void 0?a:null;u=new s.MainAreaWidget({content:p});u.addClass("jp-LogConsole");u.title.closable=true;u.title.icon=c.listIcon;u.title.label=h.__("Log Console");const l=new c.CommandToolbarButton({commands:e.commands,id:_.addCheckpoint});const d=new c.CommandToolbarButton({commands:e.commands,id:_.clear});const f=()=>{e.commands.notifyCommandChanged(_.addCheckpoint);e.commands.notifyCommandChanged(_.clear);e.commands.notifyCommandChanged(_.open);e.commands.notifyCommandChanged(_.setLevel)};u.toolbar.addItem("lab-log-console-add-checkpoint",l);u.toolbar.addItem("lab-log-console-clear",d);u.toolbar.addItem("level",new w(u.content,i));p.sourceChanged.connect((()=>{f()}));p.sourceDisplayed.connect(((e,{source:t,version:n})=>{b.model.sourceDisplayed(t,n)}));u.disposed.connect((()=>{u=null;p=null;f()}));e.shell.add(u,"down",{ref:n.ref,mode:n.insertMode,type:"Log Console"});void g.add(u);e.shell.activateById(u.id);u.update();f()};e.commands.addCommand(_.open,{label:h.__("Show Log Console"),execute:(e={})=>{if(u){u.dispose()}else{y(e)}},isToggled:()=>u!==null});e.commands.addCommand(_.addCheckpoint,{execute:()=>{var e;(e=p===null||p===void 0?void 0:p.logger)===null||e===void 0?void 0:e.checkpoint()},icon:c.addIcon,isEnabled:()=>!!p&&p.source!==null,label:h.__("Add Checkpoint")});e.commands.addCommand(_.clear,{execute:()=>{var e;(e=p===null||p===void 0?void 0:p.logger)===null||e===void 0?void 0:e.clear()},icon:c.clearIcon,isEnabled:()=>!!p&&p.source!==null,label:h.__("Clear Log")});function C(e){return e.length===0?e:e[0].toUpperCase()+e.slice(1)}e.commands.addCommand(_.setLevel,{execute:e=>{if(p===null||p===void 0?void 0:p.logger){p.logger.level=e.level}},isEnabled:()=>!!p&&p.source!==null,label:e=>e["level"]?h.__("Set Log Level to %1",C(e.level)):h.__("Set log level to `level`.")});if(r){r.addItem({command:_.open,category:h.__("Main Area")})}if(d){d.registerStatusItem("@jupyterlab/logconsole-extension:status",{item:b,align:"left",isActive:()=>{var e;return((e=b.model)===null||e===void 0?void 0:e.version)>0},activeStateChanged:b.model.stateChanged})}function x(e){if(p){p.source=e}b.model.source=e}void e.restored.then((()=>{var e;t.currentPathChanged.connect(((e,{newValue:t})=>x(t)));x((e=t.currentPath)!==null&&e!==void 0?e:null)}));if(l){const t=e=>{m.maxLength=e.get("maxLogEntries").composite;b.model.flashEnabled=e.get("flash").composite};Promise.all([l.load(v),e.restored]).then((([e])=>{t(e);e.changed.connect((e=>{t(e)}))})).catch((e=>{console.error(e.message)}))}return m}class w extends c.ReactWidget{constructor(e,t){super();this.handleChange=e=>{if(this._logConsole.logger){this._logConsole.logger.level=e.target.value}this.update()};this.handleKeyDown=e=>{if(e.keyCode===13){this._logConsole.activate()}};this._id=`level-${h.UUID.uuid4()}`;this.translator=t!==null&&t!==void 0?t:d.nullTranslator;this._trans=this.translator.load("jupyterlab");this.addClass("jp-LogConsole-toolbarLogLevel");this._logConsole=e;if(e.source){this.update()}e.sourceChanged.connect(this._updateSource,this)}_updateSource(e,{oldValue:t,newValue:n}){if(t!==null){const n=e.loggerRegistry.getLogger(t);n.stateChanged.disconnect(this.update,this)}if(n!==null){const t=e.loggerRegistry.getLogger(n);t.stateChanged.connect(this.update,this)}this.update()}render(){const e=this._logConsole.logger;return u.createElement(u.Fragment,null,u.createElement("label",{htmlFor:this._id,className:e===null?"jp-LogConsole-toolbarLogLevel-disabled":undefined},this._trans.__("Log Level:")),u.createElement(c.HTMLSelect,{id:this._id,className:"jp-LogConsole-toolbarLogLevelDropdown",onChange:this.handleChange,onKeyDown:this.handleKeyDown,value:e===null||e===void 0?void 0:e.level,"aria-label":this._trans.__("Log level"),disabled:e===null,options:e===null?[]:[[this._trans.__("Critical"),"Critical"],[this._trans.__("Error"),"Error"],[this._trans.__("Warning"),"Warning"],[this._trans.__("Info"),"Info"],[this._trans.__("Debug"),"Debug"]].map((e=>({label:e[0],value:e[1].toLowerCase()})))}))}}const C=b},92121:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(98328);var r=n(79536);var a=n(98896);var l=n(90516);var d=n(70161);var c=n(93379);var h=n.n(c);var u=n(7795);var p=n.n(u);var m=n(90569);var g=n.n(m);var f=n(3565);var v=n.n(f);var _=n(19216);var b=n.n(_);var y=n(44589);var w=n.n(y);var C=n(80392);var x={};x.styleTagTransform=w();x.setAttributes=v();x.insert=g().bind(null,"head");x.domAPI=p();x.insertStyleElement=b();var S=h()(C.Z,x);const k=C.Z&&C.Z.locals?C.Z.locals:undefined},28194:(e,t,n)=>{"use strict";n.r(t);n.d(t,{ILoggerRegistry:()=>p,LogConsolePanel:()=>w,LogOutputModel:()=>r,Logger:()=>d,LoggerOutputAreaModel:()=>l,LoggerRegistry:()=>h,ScrollingWidget:()=>y});var i=n(994);var s=n(33112);var o=n(71372);class r extends s.OutputModel{constructor(e){super(e);this.timestamp=new Date(e.value.timestamp);this.level=e.value.level}}class a extends i.OutputAreaModel.ContentFactory{createOutputModel(e){return new r(e)}}class l extends i.OutputAreaModel{constructor({maxLength:e,...t}){super(t);this.maxLength=e}add(e){super.add(e);this._applyMaxLength();return this.length}shouldCombine(e){const{value:t,lastModel:n}=e;const i=Math.trunc(n.timestamp.getTime()/1e3);const s=Math.trunc(t.timestamp/1e3);return i===s}get(e){return super.get(e)}get maxLength(){return this._maxLength}set maxLength(e){this._maxLength=e;this._applyMaxLength()}_applyMaxLength(){if(this.list.length>this._maxLength){this.list.removeRange(0,this.list.length-this._maxLength)}}}class d{constructor(e){this._isDisposed=false;this._contentChanged=new o.Signal(this);this._stateChanged=new o.Signal(this);this._rendermime=null;this._version=0;this._level="warning";this.source=e.source;this.outputAreaModel=new l({contentFactory:new a,maxLength:e.maxLength})}get maxLength(){return this.outputAreaModel.maxLength}set maxLength(e){this.outputAreaModel.maxLength=e}get level(){return this._level}set level(e){const t=this._level;if(t===e){return}this._level=e;this._log({output:{output_type:"display_data",data:{"text/plain":`Log level set to ${e}`}},level:"metadata"});this._stateChanged.emit({name:"level",oldValue:t,newValue:e})}get length(){return this.outputAreaModel.length}get contentChanged(){return this._contentChanged}get stateChanged(){return this._stateChanged}get rendermime(){return this._rendermime}set rendermime(e){if(e!==this._rendermime){const t=this._rendermime;const n=this._rendermime=e;this._stateChanged.emit({name:"rendermime",oldValue:t,newValue:n})}}get version(){return this._version}log(e){if(c.LogLevel[e.level]<c.LogLevel[this._level]){return}let t=null;switch(e.type){case"text":t={output_type:"display_data",data:{"text/plain":e.data}};break;case"html":t={output_type:"display_data",data:{"text/html":e.data}};break;case"output":t=e.data;break;default:break}if(t){this._log({output:t,level:e.level})}}clear(){this.outputAreaModel.clear(false);this._contentChanged.emit("clear")}checkpoint(){this._log({output:{output_type:"display_data",data:{"text/html":"<hr/>"}},level:"metadata"})}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this.clear();this._rendermime=null;o.Signal.clearData(this)}_log(e){this._version++;this.outputAreaModel.add({...e.output,timestamp:Date.now(),level:e.level});this._contentChanged.emit("append")}}var c;(function(e){let t;(function(e){e[e["debug"]=0]="debug";e[e["info"]=1]="info";e[e["warning"]=2]="warning";e[e["error"]=3]="error";e[e["critical"]=4]="critical";e[e["metadata"]=5]="metadata"})(t=e.LogLevel||(e.LogLevel={}))})(c||(c={}));class h{constructor(e){this._loggers=new Map;this._registryChanged=new o.Signal(this);this._isDisposed=false;this._defaultRendermime=e.defaultRendermime;this._maxLength=e.maxLength}getLogger(e){const t=this._loggers;let n=t.get(e);if(n){return n}n=new d({source:e,maxLength:this.maxLength});n.rendermime=this._defaultRendermime;t.set(e,n);this._registryChanged.emit("append");return n}getLoggers(){return Array.from(this._loggers.values())}get registryChanged(){return this._registryChanged}get maxLength(){return this._maxLength}set maxLength(e){this._maxLength=e;this._loggers.forEach((t=>{t.maxLength=e}))}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this._loggers.forEach((e=>e.dispose()));o.Signal.clearData(this)}}var u=n(5596);const p=new u.Token("@jupyterlab/logconsole:ILoggerRegistry","A service providing a logger infrastructure.");var m=n(36168);var g=n(85448);function f(e){return e.length===0?e:e[0].toUpperCase()+e.slice(1)}class v extends g.Widget{constructor(){super();this._timestampNode=document.createElement("div");this.node.append(this._timestampNode)}set timestamp(e){this._timestamp=e;this._timestampNode.innerHTML=this._timestamp.toLocaleTimeString();this.update()}set level(e){this._level=e;this.node.dataset.logLevel=e;this.update()}update(){if(this._level!==undefined&&this._timestamp!==undefined){this.node.title=`${this._timestamp.toLocaleString()}; ${f(this._level)} level`}}}class _ extends i.OutputArea{createOutputItem(e){const t=super.createOutputItem(e);if(t===null){return null}const n=t.widgets[0];n.timestamp=e.timestamp;n.level=e.level;return t}onInputRequest(e,t){return}}class b extends i.OutputArea.ContentFactory{createOutputPrompt(){return new v}}class y extends g.Widget{constructor({content:e,...t}){super(t);this._observer=null;this.addClass("jp-Scrolling");const n=this.layout=new g.PanelLayout;n.addWidget(e);this._content=e;this._sentinel=document.createElement("div");this.node.appendChild(this._sentinel)}get content(){return this._content}onAfterAttach(e){super.onAfterAttach(e);requestAnimationFrame((()=>{this._sentinel.scrollIntoView();this._scrollHeight=this.node.scrollHeight}));if(typeof IntersectionObserver!=="undefined"){this._observer=new IntersectionObserver((e=>{this._handleScroll(e)}),{root:this.node,threshold:1});this._observer.observe(this._sentinel)}}onBeforeDetach(e){if(this._observer){this._observer.disconnect()}}onAfterShow(e){if(this._tracking){this._sentinel.scrollIntoView()}}_handleScroll([e]){if(e.isIntersecting){this._tracking=true}else if(this.isVisible){const e=this.node.scrollHeight;if(e===this._scrollHeight){this._tracking=false}else{this._sentinel.scrollIntoView();this._scrollHeight=e;this._tracking=true}}}}class w extends g.StackedPanel{constructor(e,t){super();this._outputAreas=new Map;this._source=null;this._sourceChanged=new o.Signal(this);this._sourceDisplayed=new o.Signal(this);this._loggersWatched=new Set;this.translator=t||m.nullTranslator;this._trans=this.translator.load("jupyterlab");this._loggerRegistry=e;this.addClass("jp-LogConsolePanel");e.registryChanged.connect(((e,t)=>{this._bindLoggerSignals()}),this);this._bindLoggerSignals();this._placeholder=new g.Widget;this._placeholder.addClass("jp-LogConsoleListPlaceholder");this.addWidget(this._placeholder)}get loggerRegistry(){return this._loggerRegistry}get logger(){if(this.source===null){return null}return this.loggerRegistry.getLogger(this.source)}get source(){return this._source}set source(e){if(e===this._source){return}const t=this._source;const n=this._source=e;this._showOutputFromSource(n);this._handlePlaceholder();this._sourceChanged.emit({oldValue:t,newValue:n,name:"source"})}get sourceVersion(){const e=this.source;return e!==null?this._loggerRegistry.getLogger(e).version:null}get sourceChanged(){return this._sourceChanged}get sourceDisplayed(){return this._sourceDisplayed}onAfterAttach(e){super.onAfterAttach(e);this._updateOutputAreas();this._showOutputFromSource(this._source);this._handlePlaceholder()}onAfterShow(e){super.onAfterShow(e);if(this.source!==null){this._sourceDisplayed.emit({source:this.source,version:this.sourceVersion})}}_bindLoggerSignals(){const e=this._loggerRegistry.getLoggers();for(const t of e){if(this._loggersWatched.has(t.source)){continue}t.contentChanged.connect(((e,t)=>{this._updateOutputAreas();this._handlePlaceholder()}),this);t.stateChanged.connect(((e,t)=>{if(t.name!=="rendermime"){return}const n=`source:${e.source}`;const i=this._outputAreas.get(n);if(i){if(t.newValue){i.rendermime=t.newValue}else{i.dispose()}}}),this);this._loggersWatched.add(t.source)}}_showOutputFromSource(e){const t=e===null?"null source":`source:${e}`;this._outputAreas.forEach(((e,n)=>{var i,s;if(e.id===t){(i=e.parent)===null||i===void 0?void 0:i.show();if(e.isVisible){this._sourceDisplayed.emit({source:this.source,version:this.sourceVersion})}}else{(s=e.parent)===null||s===void 0?void 0:s.hide()}}));const n=e===null?this._trans.__("Log Console"):this._trans.__("Log: %1",e);this.title.label=n;this.title.caption=n}_handlePlaceholder(){if(this.source===null){this._placeholder.node.textContent=this._trans.__("No source selected.");this._placeholder.show()}else if(this._loggerRegistry.getLogger(this.source).length===0){this._placeholder.node.textContent=this._trans.__("No log messages.");this._placeholder.show()}else{this._placeholder.hide();this._placeholder.node.textContent=""}}_updateOutputAreas(){const e=new Set;const t=this._loggerRegistry.getLoggers();for(const i of t){const t=i.source;const n=`source:${t}`;e.add(n);if(!this._outputAreas.has(n)){const e=new _({rendermime:i.rendermime,contentFactory:new b,model:i.outputAreaModel});e.id=n;const s=new y({content:e});this.addWidget(s);this._outputAreas.set(n,e);const o=e=>{if(this.source===t&&e.isVisible){this._sourceDisplayed.emit({source:this.source,version:this.sourceVersion})}};e.outputLengthChanged.connect(o,this);o(e)}}const n=this._outputAreas.keys();for(const i of n){if(!e.has(i)){const e=this._outputAreas.get(i);e===null||e===void 0?void 0:e.dispose();this._outputAreas.delete(i)}}}}},70161:(e,t,n)=>{"use strict";var i=n(32902);var s=n(98896);var o=n(5333);var r=n(93379);var a=n.n(r);var l=n(7795);var d=n.n(l);var c=n(90569);var h=n.n(c);var u=n(3565);var p=n.n(u);var m=n(19216);var g=n.n(m);var f=n(44589);var v=n.n(f);var _=n(27888);var b={};b.styleTagTransform=v();b.setAttributes=p();b.insert=h().bind(null,"head");b.domAPI=d();b.insertStyleElement=g();var y=a()(_.Z,b);const w=_.Z&&_.Z.locals?_.Z.locals:undefined},40711:(e,t,n)=>{"use strict";n.r(t);n.d(t,{RunningLanguageServer:()=>k,default:()=>M});var i=n(75900);var s=n(7342);var o=n(51997);var r=n(36168);var a=n(52435);var l=n(71372);var d=n(5596);var c=n(95905);var h=n(28416);var u=n.n(h);const p="languageServers";const m="configuration";function g(e){const{[m]:t,...n}=e.schema;const{[m]:i,serverName:s,...o}=e.settings;const[r,a]=(0,h.useState)(s);const l=t=>{e.updateSetting.invoke(e.serverHash,{serverName:t.target.value}).catch(console.error);a(t.target.value)};const p={};Object.entries(i).forEach((([e,t])=>{const n={property:e,type:typeof t,value:t};p[d.UUID.uuid4()]=n}));const[g,v]=(0,h.useState)(p);const _={};Object.entries(n).forEach((([e,t])=>{if(e in o){_[e]=o[e]}else{_[e]=t["default"]}}));const[b,y]=(0,h.useState)(_);const w=(t,n,i)=>{let s=n;if(i==="number"){s=parseFloat(n)}const o={...b,[t]:s};e.updateSetting.invoke(e.serverHash,o).catch(console.error);y(o)};const C=()=>{const t=d.UUID.uuid4();const n={...g,[t]:{property:"",type:"string",value:""}};const i={};Object.values(n).forEach((e=>{i[e.property]=e.value}));e.updateSetting.invoke(e.serverHash,{[m]:i}).catch(console.error);v(n)};const x=t=>{const n={};Object.entries(g).forEach((([i,s])=>{if(i!==t){n[i]=s}const o={};Object.values(n).forEach((e=>{o[e.property]=e.value}));e.updateSetting.invoke(e.serverHash,{[m]:o}).catch(console.error);v(n)}))};const S=(t,n)=>{if(t in g){const i={...g,[t]:n};const s={};Object.values(i).forEach((e=>{s[e.property]=e.value}));v(i);e.updateSetting.invoke(e.serverHash,{[m]:s}).catch(console.error)}};const k=new c.Debouncer(S);return u().createElement("div",{className:"array-item"},u().createElement("div",{className:"form-group "},u().createElement("div",{className:"jp-FormGroup-content"},u().createElement("div",{className:"jp-objectFieldWrapper"},u().createElement("fieldset",null,u().createElement("div",{className:"form-group small-field"},u().createElement("div",{className:"jp-modifiedIndicator jp-errorIndicator"}),u().createElement("div",{className:"jp-FormGroup-content"},u().createElement("h3",{className:"jp-FormGroup-fieldLabel jp-FormGroup-contentItem"},e.trans.__("Server name:")),u().createElement("div",{className:"jp-inputFieldWrapper jp-FormGroup-contentItem"},u().createElement("input",{className:"form-control",type:"text",required:true,value:r,onChange:e=>{l(e)}})),u().createElement("div",{className:"validationErrors"},u().createElement("div",null,u().createElement("ul",{className:"error-detail bs-callout bs-callout-info"},u().createElement("li",{className:"text-danger"},e.trans.__("is a required property"))))))),Object.entries(n).map((([e,t],n)=>u().createElement("div",{key:`${n}-${e}`,className:"form-group small-field"},u().createElement("div",{className:"jp-FormGroup-content"},u().createElement("h3",{className:"jp-FormGroup-fieldLabel jp-FormGroup-contentItem"},t.title),u().createElement("div",{className:"jp-inputFieldWrapper jp-FormGroup-contentItem"},u().createElement("input",{className:"form-control",placeholder:"",type:t.type,value:b[e],onChange:n=>w(e,n.target.value,t.type)})),u().createElement("div",{className:"jp-FormGroup-description"},t.description),u().createElement("div",{className:"validationErrors"}))))),u().createElement("fieldset",null,u().createElement("legend",null,t["title"]),Object.entries(g).map((([e,t])=>u().createElement(f,{key:e,hash:e,property:t,removeProperty:x,setProperty:k}))),u().createElement("span",null,t["description"])))))),u().createElement("div",{className:"jp-ArrayOperations"},u().createElement("button",{className:"jp-mod-styled jp-mod-reject",onClick:C},e.trans.__("Add property")),u().createElement("button",{className:"jp-mod-styled jp-mod-warn jp-FormGroup-removeButton",onClick:()=>e.removeSetting(e.serverHash)},e.trans.__("Remove server"))))}function f(e){const[t,n]=(0,h.useState)({...e.property});const i={string:"text",number:"number",boolean:"checkbox"};const s=()=>{e.removeProperty(e.hash)};const o=i=>{const s={...t,property:i};e.setProperty.invoke(e.hash,s).catch(console.error);n(s)};const r=(i,s)=>{let o=i;if(s==="number"){o=parseFloat(i)}const r={...t,value:o};e.setProperty.invoke(e.hash,r).catch(console.error);n(r)};const l=i=>{let s;if(i==="boolean"){s=false}else if(i==="number"){s=0}else{s=""}const o={...t,type:i,value:s};n(o);e.setProperty.invoke(e.hash,o).catch(console.error)};return u().createElement("div",{key:e.hash,className:"form-group small-field"},u().createElement("div",{className:"jp-FormGroup-content jp-LSPExtension-FormGroup-content"},u().createElement("input",{className:"form-control",type:"text",required:true,placeholder:"Property name",value:t.property,onChange:e=>{o(e.target.value)}}),u().createElement("select",{className:"form-control",value:t.type,onChange:e=>l(e.target.value)},u().createElement("option",{value:"string"},"String"),u().createElement("option",{value:"number"},"Number"),u().createElement("option",{value:"boolean"},"Boolean")),u().createElement("input",{className:"form-control",type:i[t.type],required:false,placeholder:"Property value",value:t.type!=="boolean"?t.value:undefined,checked:t.type==="boolean"?t.value:undefined,onChange:t.type!=="boolean"?e=>r(e.target.value,t.type):e=>r(e.target.checked,t.type)}),u().createElement("button",{className:"jp-mod-minimal jp-Button",onClick:s},u().createElement(a.closeIcon.react,null))))}class v extends u().Component{constructor(e){super(e);this.removeSetting=e=>{if(e in this.state.items){const t={};for(const n in this.state.items){if(n!==e){t[n]=this.state.items[n]}}this.setState((e=>({...e,items:t})),(()=>{this.saveServerSetting()}))}};this.updateSetting=(e,t)=>{if(e in this.state.items){const n={};for(const i in this.state.items){if(i===e){n[i]={...this.state.items[i],...t}}else{n[i]=this.state.items[i]}}this.setState((e=>({...e,items:n})),(()=>{this.saveServerSetting()}))}};this.addServerSetting=()=>{let e=0;let t="newKey";while(Object.values(this.state.items).map((e=>e.serverName)).includes(t)){e+=1;t=`newKey-${e}`}this.setState((e=>({...e,items:{...e.items,[d.UUID.uuid4()]:{...this._defaultSetting,serverName:t}}})),(()=>{this.saveServerSetting()}))};this.saveServerSetting=()=>{const e={};Object.values(this.state.items).forEach((t=>{const{serverName:n,...i}=t;e[n]=i}));this._setting.set(p,e).catch(console.error)};this._setting=e.formContext.settings;this._trans=e.translator.load("jupyterlab");const t=this._setting.schema["definitions"];this._defaultSetting=t["languageServer"]["default"];this._schema=t["languageServer"]["properties"];const n=e.schema.title;const i=e.schema.description;const s=e.formContext.settings;const o=s.get(p).composite;let r={};if(o){Object.entries(o).forEach((([e,t])=>{if(t){const n=d.UUID.uuid4();r[n]={serverName:e,...t}}}))}this.state={title:n,desc:i,items:r};this._debouncedUpdateSetting=new c.Debouncer(this.updateSetting.bind(this))}render(){return u().createElement("div",null,u().createElement("fieldset",null,u().createElement("legend",null,this.state.title),u().createElement("p",{className:"field-description"},this.state.desc),u().createElement("div",{className:"field field-array field-array-of-object"},Object.entries(this.state.items).map((([e,t],n)=>u().createElement(g,{key:`${n}-${e}`,trans:this._trans,removeSetting:this.removeSetting,updateSetting:this._debouncedUpdateSetting,serverHash:e,settings:t,schema:this._schema})))),u().createElement("div",null,u().createElement("button",{style:{margin:2},className:"jp-mod-styled jp-mod-reject",onClick:this.addServerSetting},this._trans.__("Add server")))))}}function _(e,t){return u().createElement(v,{...e,translator:t})}const b={activate:x,id:"@jupyterlab/lsp-extension:plugin",description:"Provides the language server connection manager.",requires:[r.ITranslator],optional:[s.IRunningSessionManagers],provides:i.ILSPDocumentConnectionManager,autoStart:true};const y={id:"@jupyterlab/lsp-extension:feature",description:"Provides the language server feature manager.",activate:()=>new i.FeatureManager,provides:i.ILSPFeatureManager,autoStart:true};const w={activate:S,id:"@jupyterlab/lsp-extension:settings",description:"Provides the language server settings.",requires:[i.ILSPDocumentConnectionManager,o.ISettingRegistry,r.ITranslator],optional:[a.IFormRendererRegistry],autoStart:true};const C={id:i.ILSPCodeExtractorsManager.name,description:"Provides the code extractor manager.",activate:e=>{const t=new i.CodeExtractorsManager;const n=new i.TextForeignCodeExtractor({language:"markdown",isStandalone:false,file_extension:"md",cellType:["markdown"]});t.register(n,null);const s=new i.TextForeignCodeExtractor({language:"text",isStandalone:false,file_extension:"txt",cellType:["raw"]});t.register(s,null);return t},provides:i.ILSPCodeExtractorsManager,autoStart:true};function x(e,t,n){const s=new i.LanguageServerManager({settings:e.serviceManager.serverSettings});const o=new i.DocumentConnectionManager({languageServerManager:s});if(n){j(n,o,t)}return o}function S(e,t,n,i,s){const o="languageServers";const r=t.languageServerManager;const a=e=>{const n=e.composite;const i=n.languageServers||{};if(n.activate==="on"&&!r.isEnabled){r.enable().catch(console.error)}else if(n.activate==="off"&&r.isEnabled){r.disable();return}t.initialConfigurations=i;t.updateConfiguration(i);t.updateServerConfigurations(i);t.updateLogging(n.logAllCommunication,n.setTrace)};n.transform(b.id,{fetch:e=>{const t=e.schema.properties;const n={};r.sessions.forEach(((e,t)=>{n[t]={rank:50,configuration:{}}}));t[o]["default"]=n;return e},compose:e=>{const t=e.schema.properties;const n=e.data.user;const i=t[o]["default"];const s=n[o];let r={...i};if(s){r={...r,...s}}const a={[o]:r};Object.entries(t).forEach((([e,t])=>{if(e!==o){if(e in n){a[e]=n[e]}else{a[e]=t.default}}}));e.data.composite=a;return e}});r.sessionsChanged.connect((async()=>{await n.load(b.id,true)}));n.load(b.id).then((e=>{a(e);e.changed.connect((()=>{a(e)}));r.disable()})).catch((e=>{console.error(e.message)}));if(s){const e={fieldRenderer:e=>_(e,i)};s.addRenderer(`${b.id}.${o}`,e)}}class k{constructor(e,t){this._connection=new WeakSet([e]);this._manager=t;this._serverIdentifier=e.serverIdentifier;this._serverLanguage=e.serverLanguage}open(){}icon(){return a.pythonIcon}label(){var e,t;return`${(e=this._serverIdentifier)!==null&&e!==void 0?e:""} (${(t=this._serverLanguage)!==null&&t!==void 0?t:""})`}shutdown(){for(const[e,t]of this._manager.connections.entries()){if(this._connection.has(t)){const{uri:t}=this._manager.documents.get(e);this._manager.unregisterDocument(t)}}this._manager.disconnect(this._serverIdentifier)}}function j(e,t,n){const i=n.load("jupyterlab");const s=new l.Signal(t);t.connected.connect((()=>s.emit(t)));t.disconnected.connect((()=>s.emit(t)));t.closed.connect((()=>s.emit(t)));t.documentsChanged.connect((()=>s.emit(t)));let o=[];e.add({name:i.__("Language servers"),running:()=>{const e=new Set([...t.connections.values()]);o=[...e].map((e=>new k(e,t)));return o},shutdownAll:()=>{o.forEach((e=>{e.shutdown()}))},refreshRunning:()=>void 0,runningChanged:s,shutdownLabel:i.__("Shut Down"),shutdownAllLabel:i.__("Shut Down All"),shutdownAllConfirmationText:i.__("Are you sure you want to permanently shut down all running language servers?")})}const M=[b,y,w,C]},83417:(e,t,n)=>{"use strict";var i=n(34849);var s=n(90516);var o=n(51734);var r=n(90088);var a=n(93379);var l=n.n(a);var d=n(7795);var c=n.n(d);var h=n(90569);var u=n.n(h);var p=n(3565);var m=n.n(p);var g=n(19216);var f=n.n(g);var v=n(44589);var _=n.n(v);var b=n(2989);var y={};y.styleTagTransform=_();y.setAttributes=m();y.insert=u().bind(null,"head");y.domAPI=c();y.insertStyleElement=f();var w=l()(b.Z,y);const C=b.Z&&b.Z.locals?b.Z.locals:undefined},6796:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CodeExtractorsManager:()=>R,DefaultMap:()=>C,DocumentConnectionManager:()=>P,FeatureManager:()=>H,ILSPCodeExtractorsManager:()=>f,ILSPDocumentConnectionManager:()=>m,ILSPFeatureManager:()=>g,ILanguageServerManager:()=>p,LanguageServerManager:()=>V,Method:()=>v,ProtocolCoordinates:()=>F,TextForeignCodeExtractor:()=>z,UpdateManager:()=>J,VirtualDocument:()=>q,VirtualDocumentInfo:()=>$,WidgetLSPAdapter:()=>c,collectDocuments:()=>K,expandDottedPaths:()=>y,expandPath:()=>w,isEqual:()=>N,isWithinRange:()=>U,offsetAtPosition:()=>B,positionAtOffset:()=>O,sleep:()=>_,untilReady:()=>b});var i=n(38554);var s=n.n(i);var o=n(90848);var r=n(36168);var a=n(71372);const l=o.Dialog.createButton;const d={"text/x-rsrc":"r","text/x-r-source":"r","text/x-ipython":"python"};class c{constructor(e,t){this.widget=e;this.options=t;this._adapterConnected=new a.Signal(this);this._activeEditorChanged=new a.Signal(this);this._editorAdded=new a.Signal(this);this._editorRemoved=new a.Signal(this);this._disposed=new a.Signal(this);this._isDisposed=false;this._virtualDocument=null;this._connectionManager=t.connectionManager;this._isConnected=false;this._trans=(t.translator||r.nullTranslator).load("jupyterlab");this.widget.context.saveState.connect(this.onSaveState,this);this.connectionManager.closed.connect(this.onConnectionClosed,this);this.widget.disposed.connect(this.dispose,this)}get isDisposed(){return this._isDisposed}get hasMultipleEditors(){return this.editors.length>1}get widgetId(){return this.widget.id}get language(){if(d.hasOwnProperty(this.mimeType)){return d[this.mimeType]}else{let e=this.mimeType.split(";")[0];let[t,n]=e.split("/");if(t==="application"||t==="text"){if(n.startsWith("x-")){return n.substring(2)}else{return n}}else{return this.mimeType}}}get adapterConnected(){return this._adapterConnected}get activeEditorChanged(){return this._activeEditorChanged}get disposed(){return this._disposed}get editorAdded(){return this._editorAdded}get editorRemoved(){return this._editorRemoved}get isConnected(){return this._isConnected}get connectionManager(){return this._connectionManager}get trans(){return this._trans}get updateFinished(){return this._updateFinished}get virtualDocument(){return this._virtualDocument}onConnectionClosed(e,{virtualDocument:t}){if(t===this.virtualDocument){this.dispose()}}dispose(){if(this._isDisposed){return}this._isDisposed=true;this.disconnect();this._virtualDocument=null;this._disposed.emit();a.Signal.clearData(this)}disconnect(){var e,t;const n=(e=this.virtualDocument)===null||e===void 0?void 0:e.uri;const{model:i}=this.widget.context;if(n){this.connectionManager.unregisterDocument(n)}i.contentChanged.disconnect(this._onContentChanged,this);for(let{ceEditor:s}of this.editors){this._editorRemoved.emit({editor:s})}(t=this.virtualDocument)===null||t===void 0?void 0:t.dispose()}updateDocuments(){if(this._isDisposed){console.warn("Cannot update documents: adapter disposed");return Promise.reject("Cannot update documents: adapter disposed")}return this.virtualDocument.updateManager.updateDocuments(this.editors)}documentChanged(e,t,n=false){if(this._isDisposed){console.warn("Cannot swap document: adapter disposed");return}let i=this.connectionManager.connections.get(e.uri);if(!(i===null||i===void 0?void 0:i.isReady)){console.log("Skipping document update signal: connection not ready");return}i.sendFullTextChange(e.value,e.documentInfo)}reloadConnection(){if(this.virtualDocument===null){return}this.disconnect();this.initVirtual();this.connectDocument(this.virtualDocument,true).catch(console.warn)}onSaveState(e,t){if(this.virtualDocument===null){return}if(t==="completed"){const e=[this.virtualDocument];for(let t of e){let n=this.connectionManager.connections.get(t.uri);if(!n){continue}n.sendSaved(t.documentInfo);for(let i of t.foreignDocuments.values()){e.push(i)}}}}async onConnected(e){let{virtualDocument:t}=e;this._adapterConnected.emit(e);this._isConnected=true;try{await this.updateDocuments()}catch(n){console.warn("Could not update documents",n);return}this.documentChanged(t,t,true);e.connection.serverNotifications["$/logTrace"].connect(((n,i)=>{console.log(e.connection.serverIdentifier,"trace",t.uri,i)}));e.connection.serverNotifications["window/logMessage"].connect(((e,t)=>{console.log(e.serverIdentifier+": "+t.message)}));e.connection.serverNotifications["window/showMessage"].connect(((e,t)=>{void(0,o.showDialog)({title:this.trans.__("Message from ")+e.serverIdentifier,body:t.message})}));e.connection.serverRequests["window/showMessageRequest"].setHandler((async t=>{const n=t.actions;const i=n?n.map((e=>l({label:e.title}))):[l({label:this.trans.__("Dismiss")})];const s=await(0,o.showDialog)({title:this.trans.__("Message from ")+e.connection.serverIdentifier,body:t.message,buttons:i});const r=i.indexOf(s.button);if(r===-1){return null}if(n){return n[r]}return null}))}async connectDocument(e,t=false){e.foreignDocumentOpened.connect(this.onForeignDocumentOpened,this);const n=await this._connect(e).catch(console.error);if(n&&n.connection){e.changed.connect(this.documentChanged,this);if(t){n.connection.sendOpenWhenReady(e.documentInfo)}}}initVirtual(){var e;const{model:t}=this.widget.context;(e=this._virtualDocument)===null||e===void 0?void 0:e.dispose();this._virtualDocument=this.createVirtualDocument();t.contentChanged.connect(this._onContentChanged,this)}async onForeignDocumentOpened(e,t){const{foreignDocument:n}=t;await this.connectDocument(n,true);n.foreignDocumentClosed.connect(this._onForeignDocumentClosed,this)}_onForeignDocumentClosed(e,t){const{foreignDocument:n}=t;n.foreignDocumentClosed.disconnect(this._onForeignDocumentClosed,this);n.foreignDocumentOpened.disconnect(this.onForeignDocumentOpened,this);n.changed.disconnect(this.documentChanged,this)}async _connect(e){let t=e.language;let n={textDocument:{synchronization:{dynamicRegistration:true,willSave:false,didSave:true,willSaveWaitUntil:false}},workspace:{didChangeConfiguration:{dynamicRegistration:true}}};n=s()(n,this.options.featureManager.clientCapabilities());let i={capabilities:n,virtualDocument:e,language:t,hasLspSupportedFile:e.hasLspSupportedFile};let o=await this.connectionManager.connect(i);if(o){await this.onConnected({virtualDocument:e,connection:o});return{connection:o,virtualDocument:e}}else{return undefined}}async _onContentChanged(e){const t=this.updateDocuments();if(!t){console.warn("Could not update documents");return}this._updateFinished=t.catch(console.warn);await this.updateFinished}}var h=n(22873);var u=n(5596);var p;(function(e){e.URL_NS="lsp"})(p||(p={}));const m=new u.Token("@jupyterlab/lsp:ILSPDocumentConnectionManager","Provides the virtual documents and language server connections service.");const g=new u.Token("@jupyterlab/lsp:ILSPFeatureManager","Provides the language server feature manager. This token is required to register new client capabilities.");const f=new u.Token("@jupyterlab/lsp:ILSPCodeExtractorsManager","Provides the code extractor manager. This token is required in your extension to register code extractor allowing the creation of multiple virtual document from an opened document.");var v;(function(e){let t;(function(e){e["PUBLISH_DIAGNOSTICS"]="textDocument/publishDiagnostics";e["SHOW_MESSAGE"]="window/showMessage";e["LOG_TRACE"]="$/logTrace";e["LOG_MESSAGE"]="window/logMessage"})(t=e.ServerNotification||(e.ServerNotification={}));let n;(function(e){e["DID_CHANGE"]="textDocument/didChange";e["DID_CHANGE_CONFIGURATION"]="workspace/didChangeConfiguration";e["DID_OPEN"]="textDocument/didOpen";e["DID_SAVE"]="textDocument/didSave";e["INITIALIZED"]="initialized";e["SET_TRACE"]="$/setTrace"})(n=e.ClientNotification||(e.ClientNotification={}));let i;(function(e){e["REGISTER_CAPABILITY"]="client/registerCapability";e["SHOW_MESSAGE_REQUEST"]="window/showMessageRequest";e["UNREGISTER_CAPABILITY"]="client/unregisterCapability";e["WORKSPACE_CONFIGURATION"]="workspace/configuration"})(i=e.ServerRequest||(e.ServerRequest={}));let s;(function(e){e["COMPLETION"]="textDocument/completion";e["COMPLETION_ITEM_RESOLVE"]="completionItem/resolve";e["DEFINITION"]="textDocument/definition";e["DOCUMENT_HIGHLIGHT"]="textDocument/documentHighlight";e["DOCUMENT_SYMBOL"]="textDocument/documentSymbol";e["HOVER"]="textDocument/hover";e["IMPLEMENTATION"]="textDocument/implementation";e["INITIALIZE"]="initialize";e["REFERENCES"]="textDocument/references";e["RENAME"]="textDocument/rename";e["SIGNATURE_HELP"]="textDocument/signatureHelp";e["TYPE_DEFINITION"]="textDocument/typeDefinition"})(s=e.ClientRequest||(e.ClientRequest={}))})(v||(v={}));async function _(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}function b(e,t=35,n=50,i=(e=>e)){return(async()=>{let s=0;while(e()!==true){s+=1;if(t!==-1&&s>t){throw Error("Too many retrials")}n=i(n);await _(n)}return e})()}function y(e){const t=[];for(let n in e){const i=w(n.split("."),e[n]);t.push(i)}return s()({},...t)}const w=(e,t)=>{const n=Object.create(null);let i=n;e.forEach(((n,s)=>{i[n]=Object.create(null);if(s===e.length-1){i[n]=t}else{i=i[n]}}));return n};class C extends Map{constructor(e,t){super(t);this.defaultFactory=e}get(e){return this.getOrCreate(e)}getOrCreate(e,...t){if(this.has(e)){return super.get(e)}else{let n=this.defaultFactory(e,...t);this.set(e,n);return n}}}function x(e,t){const n=JSON.parse(JSON.stringify(e));const{method:i,registerOptions:s}=t;const o=i.substring(13)+"Provider";if(o){if(!s){n[o]=true}else{n[o]=JSON.parse(JSON.stringify(s))}}else{console.warn("Could not register server capability.",t);return null}return n}function S(e,t){const n=JSON.parse(JSON.stringify(e));const{method:i}=t;const s=i.substring(13)+"Provider";delete n[s];return n}var k=n(97608);class j{constructor(e){this.openedUris=new Map;this._isConnected=false;this._isInitialized=false;this._disposables=[];this._disposed=new a.Signal(this);this._isDisposed=false;this._rootUri=e.rootUri}get isConnected(){return this._isConnected}get isInitialized(){return this._isInitialized}get isReady(){return this._isConnected&&this._isInitialized}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}connect(e){this.socket=e;(0,k.listen)({webSocket:this.socket,logger:new k.ConsoleLogger,onConnection:e=>{e.listen();this._isConnected=true;this.connection=e;this.sendInitialize();const t=this.connection.onRequest("client/registerCapability",(e=>{e.registrations.forEach((e=>{try{this.serverCapabilities=x(this.serverCapabilities,e)}catch(t){console.error(t)}}))}));this._disposables.push(t);const n=this.connection.onRequest("client/unregisterCapability",(e=>{e.unregisterations.forEach((e=>{this.serverCapabilities=S(this.serverCapabilities,e)}))}));this._disposables.push(n);const i=this.connection.onClose((()=>{this._isConnected=false}));this._disposables.push(i)}})}close(){if(this.connection){this.connection.dispose()}this.openedUris.clear();this.socket.close()}sendInitialize(){if(!this._isConnected){return}this.openedUris.clear();const e=this.initializeParams();this.connection.sendRequest("initialize",e).then((e=>{this.onServerInitialized(e)}),(e=>{console.warn("LSP websocket connection initialization failure",e)}))}sendOpen(e){const t={textDocument:{uri:e.uri,languageId:e.languageId,text:e.text,version:e.version}};this.connection.sendNotification("textDocument/didOpen",t).catch(console.error);this.openedUris.set(e.uri,true);this.sendChange(e)}sendChange(e){if(!this.isReady){return}if(!this.openedUris.get(e.uri)){this.sendOpen(e);return}const t={textDocument:{uri:e.uri,version:e.version},contentChanges:[{text:e.text}]};this.connection.sendNotification("textDocument/didChange",t).catch(console.error);e.version++}sendSaved(e){if(!this.isReady){return}const t={textDocument:{uri:e.uri,version:e.version},text:e.text};this.connection.sendNotification("textDocument/didSave",t).catch(console.error)}sendConfigurationChange(e){if(!this.isReady){return}this.connection.sendNotification("workspace/didChangeConfiguration",e).catch(console.error)}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._disposables.forEach((e=>{e.dispose()}));this._disposed.emit();a.Signal.clearData(this)}onServerInitialized(e){this._isInitialized=true;this.serverCapabilities=e.capabilities;this.connection.sendNotification("initialized",{}).catch(console.error);this.connection.sendNotification("workspace/didChangeConfiguration",{settings:{}}).catch(console.error)}initializeParams(){return{capabilities:{},processId:null,rootUri:this._rootUri,workspaceFolders:null}}}class M{constructor(e,t,n){this.connection=e;this.method=t;this.emitter=n}request(e){this.emitter.log(D.clientRequested,{method:this.method,message:e});return this.connection.sendRequest(this.method,e).then((t=>{this.emitter.log(D.resultForClient,{method:this.method,message:e});return t}))}}class E{constructor(e,t,n){this.connection=e;this.method=t;this.emitter=n;this.connection.onRequest(t,this._handle.bind(this));this._handler=null}setHandler(e){this._handler=e}clearHandler(){this._handler=null}_handle(e){this.emitter.log(D.serverRequested,{method:this.method,message:e});if(!this._handler){return new Promise((()=>undefined))}return this._handler(e,this.emitter).then((e=>{this.emitter.log(D.responseForServer,{method:this.method,message:e});return e}))}}const I={TEXT_DOCUMENT_SYNC:"textDocumentSync",COMPLETION:"completionProvider",HOVER:"hoverProvider",SIGNATURE_HELP:"signatureHelpProvider",DECLARATION:"declarationProvider",DEFINITION:"definitionProvider",TYPE_DEFINITION:"typeDefinitionProvider",IMPLEMENTATION:"implementationProvider",REFERENCES:"referencesProvider",DOCUMENT_HIGHLIGHT:"documentHighlightProvider",DOCUMENT_SYMBOL:"documentSymbolProvider",CODE_ACTION:"codeActionProvider",CODE_LENS:"codeLensProvider",DOCUMENT_LINK:"documentLinkProvider",COLOR:"colorProvider",DOCUMENT_FORMATTING:"documentFormattingProvider",DOCUMENT_RANGE_FORMATTING:"documentRangeFormattingProvider",DOCUMENT_ON_TYPE_FORMATTING:"documentOnTypeFormattingProvider",RENAME:"renameProvider",FOLDING_RANGE:"foldingRangeProvider",EXECUTE_COMMAND:"executeCommandProvider",SELECTION_RANGE:"selectionRangeProvider",WORKSPACE_SYMBOL:"workspaceSymbolProvider",WORKSPACE:"workspace"};function T(e,t){const n={};for(let i of Object.values(e)){n[i]=t(i)}return n}var D;(function(e){e[e["clientNotifiedServer"]=0]="clientNotifiedServer";e[e["serverNotifiedClient"]=1]="serverNotifiedClient";e[e["serverRequested"]=2]="serverRequested";e[e["clientRequested"]=3]="clientRequested";e[e["resultForClient"]=4]="resultForClient";e[e["responseForServer"]=5]="responseForServer"})(D||(D={}));class L extends j{constructor(e){super(e);this._closingManually=false;this._closeSignal=new a.Signal(this);this._errorSignal=new a.Signal(this);this._serverInitialized=new a.Signal(this);this._options=e;this.logAllCommunication=false;this.serverIdentifier=e.serverIdentifier;this.serverLanguage=e.languageId;this.documentsToOpen=[];this.clientNotifications=this.constructNotificationHandlers(v.ClientNotification);this.serverNotifications=this.constructNotificationHandlers(v.ServerNotification)}get closeSignal(){return this._closeSignal}get errorSignal(){return this._errorSignal}get serverInitialized(){return this._serverInitialized}dispose(){if(this.isDisposed){return}Object.values(this.serverRequests).forEach((e=>e.clearHandler()));this.close();super.dispose()}log(e,t){if(this.logAllCommunication){console.log(e,t)}}sendOpenWhenReady(e){if(this.isReady){this.sendOpen(e)}else{this.documentsToOpen.push(e)}}sendSelectiveChange(e,t){this._sendChange([e],t)}sendFullTextChange(e,t){this._sendChange([{text:e}],t)}provides(e){return!!(this.serverCapabilities&&this.serverCapabilities[e])}close(){try{this._closingManually=true;super.close()}catch(e){this._closingManually=false}}connect(e){super.connect(e);b((()=>this.isConnected),-1).then((()=>{const e=this.connection.onClose((()=>{this._isConnected=false;this._closeSignal.emit(this._closingManually)}));this._disposables.push(e)})).catch((()=>{console.error("Could not connect onClose signal")}))}async getCompletionResolve(e){if(!this.isReady){return}return this.connection.sendRequest("completionItem/resolve",e)}constructNotificationHandlers(e){const t=()=>new a.Signal(this);return T(e,t)}constructClientRequestHandler(e){return T(e,(e=>new M(this.connection,e,this)))}constructServerRequestHandler(e){return T(e,(e=>new E(this.connection,e,this)))}initializeParams(){return{...super.initializeParams(),capabilities:this._options.capabilities,initializationOptions:null,processId:null,workspaceFolders:null}}onServerInitialized(e){this.afterInitialized();super.onServerInitialized(e);while(this.documentsToOpen.length){this.sendOpen(this.documentsToOpen.pop())}this._serverInitialized.emit(this.serverCapabilities)}afterInitialized(){const e=this.connection.onError((e=>this._errorSignal.emit(e)));this._disposables.push(e);for(const t of Object.values(v.ServerNotification)){const e=this.serverNotifications[t];const n=this.connection.onNotification(t,(n=>{this.log(D.serverNotifiedClient,{method:t,message:n});e.emit(n)}));this._disposables.push(n)}for(const t of Object.values(v.ClientNotification)){const e=this.clientNotifications[t];e.connect(((e,n)=>{this.log(D.clientNotifiedServer,{method:t,message:n});this.connection.sendNotification(t,n).catch(console.error)}))}this.clientRequests=this.constructClientRequestHandler(v.ClientRequest);this.serverRequests=this.constructServerRequestHandler(v.ServerRequest);this.serverRequests["client/registerCapability"].setHandler((async e=>{e.registrations.forEach((e=>{try{const t=x(this.serverCapabilities,e);if(t===null){console.error(`Failed to register server capability: ${e}`);return}this.serverCapabilities=t}catch(t){console.error(t)}}))}));this.serverRequests["client/unregisterCapability"].setHandler((async e=>{e.unregisterations.forEach((e=>{this.serverCapabilities=S(this.serverCapabilities,e)}))}));this.serverRequests["workspace/configuration"].setHandler((async e=>e.items.map((e=>null))))}_sendChange(e,t){if(!this.isReady){return}if(t.uri.length===0){return}if(!this.openedUris.get(t.uri)){this.sendOpen(t)}const n={textDocument:{uri:t.uri,version:t.version},contentChanges:e};this.connection.sendNotification("textDocument/didChange",n).catch(console.error);t.version++}}class P{constructor(e){this.onNewConnection=e=>{const t=(t,n)=>{console.error(n);let i=n.length&&n.length>=1?n[0]:new Error;if(i.message.indexOf("code = 1005")!==-1){console.error(`Connection failed for ${e}`);this._forEachDocumentOfConnection(e,(t=>{console.error("disconnecting "+t.uri);this._closed.emit({connection:e,virtualDocument:t});this._ignoredLanguages.add(t.language);console.error(`Cancelling further attempts to connect ${t.uri} and other documents for this language (no support from the server)`)}))}else if(i.message.indexOf("code = 1006")!==-1){console.error("Connection closed by the server")}else{console.error("Connection error:",n)}};e.errorSignal.connect(t);const n=()=>{this._forEachDocumentOfConnection(e,(t=>{this._initialized.emit({connection:e,virtualDocument:t})}));this.updateServerConfigurations(this.initialConfigurations)};e.serverInitialized.connect(n);const i=(t,n)=>{if(!n){console.error("Connection unexpectedly disconnected")}else{console.log("Connection closed");this._forEachDocumentOfConnection(e,(t=>{this._closed.emit({connection:e,virtualDocument:t})}))}};e.closeSignal.connect(i)};this._initialized=new a.Signal(this);this._connected=new a.Signal(this);this._disconnected=new a.Signal(this);this._closed=new a.Signal(this);this._documentsChanged=new a.Signal(this);this.connections=new Map;this.documents=new Map;this.adapters=new Map;this._ignoredLanguages=new Set;this.languageServerManager=e.languageServerManager;A.setLanguageServerManager(e.languageServerManager)}get initialized(){return this._initialized}get connected(){return this._connected}get disconnected(){return this._disconnected}get closed(){return this._closed}get documentsChanged(){return this._documentsChanged}get ready(){return A.getLanguageServerManager().ready}connectDocumentSignals(e){e.foreignDocumentOpened.connect(this.onForeignDocumentOpened,this);e.foreignDocumentClosed.connect(this.onForeignDocumentClosed,this);this.documents.set(e.uri,e);this._documentsChanged.emit(this.documents)}disconnectDocumentSignals(e,t=true){e.foreignDocumentOpened.disconnect(this.onForeignDocumentOpened,this);e.foreignDocumentClosed.disconnect(this.onForeignDocumentClosed,this);this.documents.delete(e.uri);for(const n of e.foreignDocuments.values()){this.disconnectDocumentSignals(n,false)}if(t){this._documentsChanged.emit(this.documents)}}onForeignDocumentOpened(e,t){}onForeignDocumentClosed(e,t){const{foreignDocument:n}=t;this.unregisterDocument(n.uri,false);this.disconnectDocumentSignals(n)}registerAdapter(e,t){this.adapters.set(e,t);t.disposed.connect((()=>{if(t.virtualDocument){this.documents.delete(t.virtualDocument.uri)}this.adapters.delete(e)}))}updateConfiguration(e){this.languageServerManager.setConfiguration(e)}updateServerConfigurations(e){let t;for(t in e){if(!e.hasOwnProperty(t)){continue}const n=e[t];const i=y(n.configuration||{});const s={settings:i};A.updateServerConfiguration(t,s)}}async retryToConnect(e,t,n=-1){let{virtualDocument:i}=e;if(this._ignoredLanguages.has(i.language)){return}let s=t*1e3;let o=false;while(n!==0&&!o){await this.connect(e).then((()=>{o=true})).catch((e=>{console.warn(e)}));console.log("will attempt to re-connect in "+s/1e3+" seconds");await _(s);s=s<5*1e3?s+500:s}}disconnect(e){A.disconnect(e)}async connect(e,t=30,n=5){let i=await this._connectSocket(e);let{virtualDocument:s}=e;if(!i){return}if(!i.isReady){try{await b((()=>i.isReady),Math.round(t*1e3/150),150)}catch(o){console.log(`Connection to ${s.uri} timed out after ${t} seconds, will continue retrying for another ${n} minutes`);try{await b((()=>i.isReady),60*n,1e3)}catch(r){console.log(`Connection to ${s.uri} timed out again after ${n} minutes, giving up`);return}}}this._connected.emit({connection:i,virtualDocument:s});return i}unregisterDocument(e,t=true){const n=this.connections.get(e);if(n){this.connections.delete(e);const i=new Set(this.connections.values());if(!i.has(n)){this.disconnect(n.serverIdentifier);n.dispose()}if(t){this._documentsChanged.emit(this.documents)}}}updateLogging(e,t){for(const n of this.connections.values()){n.logAllCommunication=e;if(t!==null){n.clientNotifications["$/setTrace"].emit({value:t})}}}async _connectSocket(e){let{language:t,capabilities:n,virtualDocument:i}=e;this.connectDocumentSignals(i);const s=P.solveUris(i,t);const o=this.languageServerManager.getMatchingServers({language:t});const r=o.length===0?null:o[0];if(!s){return}const a=await A.connection(t,r,s,this.onNewConnection,n);this.connections.set(i.uri,a);return a}_forEachDocumentOfConnection(e,t){for(const[n,i]of this.connections.entries()){if(e!==i){continue}t(this.documents.get(n))}}}(function(e){function t(e,t){var n;const i=A.getLanguageServerManager();const s=i.settings.wsUrl;const o=h.PageConfig.getOption("rootUri");const r=h.PageConfig.getOption("virtualDocumentsUri");const a={language:t};const l=i.getMatchingServers(a);const d=l.length===0?null:l[0];if(d===null){return}const c=i.getMatchingSpecs(a);const u=c.get(d);if(!u){console.warn(`Specification not available for server ${d}`)}const p=(n=u===null||u===void 0?void 0:u.requires_documents_on_disk)!==null&&n!==void 0?n:true;const m=!p;const g=e.hasLspSupportedFile||m?o:r;let f=h.URLExt.join(g,e.uri);if(!f.startsWith("file:///")&&f.startsWith("file://")){f=f.replace("file://","file:///");if(f.startsWith("file:///users/")&&g.startsWith("file:///Users/")){f=f.replace("file:///users/","file:///Users/")}}return{base:g,document:f,server:h.URLExt.join("ws://jupyter-lsp",t),socket:h.URLExt.join(s,"lsp","ws",d)}}e.solveUris=t})(P||(P={}));var A;(function(e){const t=new Map;let n;function i(){return n}e.getLanguageServerManager=i;function s(e){n=e}e.setLanguageServerManager=s;function o(e){const n=t.get(e);if(n){n.close();t.delete(e)}}e.disconnect=o;async function r(n,i,s,o,r){let a=t.get(i);if(!a){const{settings:a}=e.getLanguageServerManager();const l=new a.WebSocket(s.socket);const d=new L({languageId:n,serverUri:s.server,rootUri:s.base,serverIdentifier:i,capabilities:r});t.set(i,d);d.connect(l);o(d)}a=t.get(i);return a}e.connection=r;function a(e,n){const i=t.get(e);if(i){i.sendConfigurationChange(n)}}e.updateServerConfiguration=a})(A||(A={}));class R{constructor(){this._extractorMap=new Map;this._extractorMapAnyLanguage=new Map}getExtractors(e,t){var n,i;if(t){const i=this._extractorMap.get(e);if(!i){return[]}return(n=i.get(t))!==null&&n!==void 0?n:[]}else{return(i=this._extractorMapAnyLanguage.get(e))!==null&&i!==void 0?i:[]}}register(e,t){const n=e.cellType;if(t){n.forEach((n=>{if(!this._extractorMap.has(n)){this._extractorMap.set(n,new Map)}const i=this._extractorMap.get(n);const s=i.get(t);if(!s){i.set(t,[e])}else{s.push(e)}}))}else{n.forEach((t=>{if(!this._extractorMapAnyLanguage.has(t)){this._extractorMapAnyLanguage.set(t,[])}this._extractorMapAnyLanguage.get(t).push(e)}))}}}function N(e,t){return t&&e.line===t.line&&e.ch===t.ch}function O(e,t){let n=0;let i=0;for(let s of t){if(s.length+1<=e){e-=s.length+1;n+=1}else{i=e;break}}return{line:n,column:i}}function B(e,t,n=false){let i=n?0:1;let s=0;for(let o=0;o<t.length;o++){let n=t[o];if(e.line>o){s+=n.length+i}else{s+=e.column;break}}return s}var F;(function(e){function t(e,t){const{line:n,character:i}=e;return n>=t.start.line&&n<=t.end.line&&(n!=t.start.line||i>t.start.character)&&(n!=t.end.line||i<=t.end.character)}e.isWithinRange=t})(F||(F={}));class z{constructor(e){this.language=e.language;this.standalone=e.isStandalone;this.fileExtension=e.file_extension;this.cellType=e.cellType}hasForeignCode(e,t){return this.cellType.includes(t)}extractForeignCode(e){let t=e.split("\n");let n=new Array;let i=e;let s=O(0,t);let o=O(i.length,t);n.push({hostCode:"",foreignCode:i,range:{start:s,end:o},virtualShift:null});return n}}class H{constructor(){this.features=[];this._featuresRegistered=new a.Signal(this)}get featuresRegistered(){return this._featuresRegistered}register(e){if(this.features.some((t=>t.id===e.id))){console.warn(`Feature with id ${e.id} is already registered, skipping.`)}else{this.features.push(e);this._featuresRegistered.emit(e)}}clientCapabilities(){let e={};for(const t of this.features){if(!t.capabilities){continue}e=s()(e,t.capabilities)}return e}}var W=n(74513);class V{constructor(e){this._sessions=new Map;this._specs=new Map;this._warningsEmitted=new Set;this._ready=new u.PromiseDelegate;this._sessionsChanged=new a.Signal(this);this._isDisposed=false;this._enabled=true;this._settings=e.settings||W.ServerConnection.makeSettings();this._baseUrl=e.baseUrl||h.PageConfig.getBaseUrl();this._retries=e.retries||2;this._retriesInterval=e.retriesInterval||1e4;this._statusCode=-1;this._configuration={};this.fetchSessions().catch((e=>console.log(e)))}get isEnabled(){return this._enabled}get isDisposed(){return this._isDisposed}get settings(){return this._settings}get specs(){return this._specs}get statusUrl(){return h.URLExt.join(this._baseUrl,p.URL_NS,"status")}get sessionsChanged(){return this._sessionsChanged}get sessions(){return this._sessions}get ready(){return this._ready.promise}get statusCode(){return this._statusCode}async enable(){this._enabled=true;await this.fetchSessions()}disable(){this._enabled=false;this._sessions=new Map;this._sessionsChanged.emit(void 0)}dispose(){if(this._isDisposed){return}this._isDisposed=true;a.Signal.clearData(this)}setConfiguration(e){this._configuration=e}getMatchingServers(e){if(!e.language){console.error("Cannot match server by language: language not available; ensure that kernel and specs provide language and MIME type");return[]}const t=[];for(const[n,i]of this._sessions.entries()){if(this.isMatchingSpec(e,i.spec)){t.push(n)}}return t.sort(this.compareRanks.bind(this))}getMatchingSpecs(e){const t=new Map;for(const[n,i]of this._specs.entries()){if(this.isMatchingSpec(e,i)){t.set(n,i)}}return t}async fetchSessions(){if(!this._enabled){return}let e=await W.ServerConnection.makeRequest(this.statusUrl,{method:"GET"},this._settings);this._statusCode=e.status;if(!e.ok){if(this._retries>0){this._retries-=1;setTimeout(this.fetchSessions.bind(this),this._retriesInterval)}else{this._ready.resolve(undefined);console.log("Missing jupyter_lsp server extension, skipping.")}return}let t;try{const n=await e.json();t=n.sessions;try{this.version=n.version;this._specs=new Map(Object.entries(n.specs))}catch(i){console.warn(i)}}catch(i){console.warn(i);this._ready.resolve(undefined);return}for(let s of Object.keys(t)){let e=s;if(this._sessions.has(e)){Object.assign(this._sessions.get(e)||{},t[s])}else{this._sessions.set(e,t[s])}}const n=this._sessions.keys();for(const s in n){if(!t[s]){let e=s;this._sessions.delete(e)}}this._sessionsChanged.emit(void 0);this._ready.resolve(undefined)}isMatchingSpec(e,t){const n=e.language.toLocaleLowerCase();return t.languages.some((e=>e.toLocaleLowerCase()==n))}warnOnce(e){if(!this._warningsEmitted.has(e)){this._warningsEmitted.add(e);console.warn(e)}}compareRanks(e,t){var n,i,s,o;const r=50;const a=(i=(n=this._configuration[e])===null||n===void 0?void 0:n.rank)!==null&&i!==void 0?i:r;const l=(o=(s=this._configuration[t])===null||s===void 0?void 0:s.rank)!==null&&o!==void 0?o:r;if(a==l){this.warnOnce(`Two matching servers: ${e} and ${t} have the same rank; choose which one to use by changing the rank in Advanced Settings Editor`);return e.localeCompare(t)}return l-a}}function U(e,t){if(t.start.line===t.end.line){return e.line===t.start.line&&e.column>=t.start.column&&e.column<=t.end.column}return e.line===t.start.line&&e.column>=t.start.column&&e.line<t.end.line||e.line>t.start.line&&e.column<=t.end.column&&e.line===t.end.line||e.line>t.start.line&&e.line<t.end.line}class ${constructor(e){this.version=0;this._document=e}get text(){return this._document.value}get uri(){const e=P.solveUris(this._document,this.languageId);if(!e){return""}return e.document}get languageId(){return this._document.language}}class q{constructor(e){this.blankLinesBetweenCells=2;this._isDisposed=false;this._foreignDocumentClosed=new a.Signal(this);this._foreignDocumentOpened=new a.Signal(this);this._changed=new a.Signal(this);this.options=e;this.path=this.options.path;this.fileExtension=e.fileExtension;this.hasLspSupportedFile=e.hasLspSupportedFile;this.parent=e.parent;this.language=e.language;this.virtualLines=new Map;this.sourceLines=new Map;this.foreignDocuments=new Map;this._editorToSourceLine=new Map;this._foreignCodeExtractors=e.foreignCodeExtractors;this.standalone=e.standalone||false;this.instanceId=q.instancesCount;q.instancesCount+=1;this.unusedStandaloneDocuments=new C((()=>new Array));this._remainingLifetime=6;this.unusedDocuments=new Set;this.documentInfo=new $(this);this.updateManager=new J(this);this.updateManager.updateBegan.connect(this._updateBeganSlot,this);this.updateManager.blockAdded.connect(this._blockAddedSlot,this);this.updateManager.updateFinished.connect(this._updateFinishedSlot,this);this.clear()}static ceToCm(e){return{line:e.line,ch:e.column}}get isDisposed(){return this._isDisposed}get foreignDocumentClosed(){return this._foreignDocumentClosed}get foreignDocumentOpened(){return this._foreignDocumentOpened}get changed(){return this._changed}get virtualId(){return this.standalone?this.instanceId+"("+this.language+")":this.language}get ancestry(){if(!this.parent){return[this]}return this.parent.ancestry.concat([this])}get idPath(){if(!this.parent){return this.virtualId}return this.parent.idPath+"-"+this.virtualId}get uri(){const e=encodeURI(this.path);if(!this.parent){return e}return e+"."+this.idPath+"."+this.fileExtension}get value(){let e="\n".repeat(this.blankLinesBetweenCells);return this.lineBlocks.join(e)}get lastLine(){const e=this.lineBlocks[this.lineBlocks.length-1].split("\n");return e[e.length-1]}get root(){return this.parent?this.parent.root:this}dispose(){if(this._isDisposed){return}this._isDisposed=true;this.parent=null;this.closeAllForeignDocuments();this.updateManager.dispose();this.foreignDocuments.clear();this.sourceLines.clear();this.unusedDocuments.clear();this.unusedStandaloneDocuments.clear();this.virtualLines.clear();this.documentInfo=null;this.lineBlocks=null;a.Signal.clearData(this)}clear(){for(let e of this.foreignDocuments.values()){e.clear()}this.unusedStandaloneDocuments.clear();this.unusedDocuments=new Set;this.virtualLines.clear();this.sourceLines.clear();this.lastVirtualLine=0;this.lastSourceLine=0;this.lineBlocks=[]}documentAtSourcePosition(e){let t=this.sourceLines.get(e.line);if(!t){return this}let n={line:t.editorLine,column:e.ch};for(let[i,{virtualDocument:s}]of t.foreignDocumentsMap){if(U(n,i)){let e={line:n.line-i.start.line,ch:n.column-i.start.column};return s.documentAtSourcePosition(e)}}return this}isWithinForeign(e){let t=this.sourceLines.get(e.line);let n={line:t.editorLine,column:e.ch};for(let[i]of t.foreignDocumentsMap){if(U(n,i)){return true}}return false}transformFromEditorToRoot(e,t){if(!this._editorToSourceLine.has(e)){console.log("Editor not found in _editorToSourceLine map");return null}let n=this._editorToSourceLine.get(e);return{...t,line:t.line+n}}virtualPositionAtDocument(e){let t=this.sourceLines.get(e.line);if(t==null){throw new Error("Source line not mapped to virtual position")}let n=t.virtualLine;let i={line:t.editorLine,column:e.ch};for(let[s,o]of t.foreignDocumentsMap){const{virtualLine:e,virtualDocument:t}=o;if(U(i,s)){let n={line:i.line-s.start.line,ch:i.column-s.start.column};if(t.isWithinForeign(n)){return this.virtualPositionAtDocument(n)}else{n.line+=e;return n}}}return{ch:e.ch,line:n}}appendCodeBlock(e,t={line:0,column:0},n){let i=e.value;let s=e.ceEditor;if(this.isDisposed){console.warn("Cannot append code block: document disposed");return}let o=i.split("\n");let{lines:r,foreignDocumentsMap:a}=this.prepareCodeBlock(e,t);for(let l=0;l<r.length;l++){this.virtualLines.set(this.lastVirtualLine+l,{skipInspect:[],editor:s,sourceLine:this.lastSourceLine+l})}for(let l=0;l<o.length;l++){this.sourceLines.set(this.lastSourceLine+l,{editorLine:l,editorShift:{line:t.line-((n===null||n===void 0?void 0:n.line)||0),column:l===0?t.column-((n===null||n===void 0?void 0:n.column)||0):0},editor:s,foreignDocumentsMap:a,virtualLine:this.lastVirtualLine+l})}this.lastVirtualLine+=r.length;this.lineBlocks.push(r.join("\n")+"\n");for(let l=0;l<this.blankLinesBetweenCells;l++){this.virtualLines.set(this.lastVirtualLine+l,{skipInspect:[this.idPath],editor:s,sourceLine:null})}this.lastVirtualLine+=this.blankLinesBetweenCells;this.lastSourceLine+=o.length}prepareCodeBlock(e,t={line:0,column:0}){let{cellCodeKept:n,foreignDocumentsMap:i}=this.extractForeignCode(e,t);let s=n.split("\n");return{lines:s,foreignDocumentsMap:i}}extractForeignCode(e,t){let n=new Map;let i=e.value;const s=this._foreignCodeExtractors.getExtractors(e.type,null);const o=this._foreignCodeExtractors.getExtractors(e.type,this.language);for(let r of[...s,...o]){if(!r.hasForeignCode(i,e.type)){continue}let s=r.extractForeignCode(i);let o="";for(let i of s){if(i.foreignCode!==null){if(i.range===null){console.log("Failure in foreign code extraction: `range` is null but `foreign_code` is not!");continue}let s=this.chooseForeignDocument(r);n.set(i.range,{virtualLine:s.lastVirtualLine,virtualDocument:s,editor:e.ceEditor});let o={line:t.line+i.range.start.line,column:t.column+i.range.start.column};s.appendCodeBlock({value:i.foreignCode,ceEditor:e.ceEditor,type:"code"},o,i.virtualShift)}if(i.hostCode!=null){o+=i.hostCode}}i=o}return{cellCodeKept:i,foreignDocumentsMap:n}}closeForeign(e){this._foreignDocumentClosed.emit({foreignDocument:e,parentHost:this});this.foreignDocuments.delete(e.virtualId);e.closeAllForeignDocuments();e.foreignDocumentClosed.disconnect(this.forwardClosedSignal,this);e.foreignDocumentOpened.disconnect(this.forwardOpenedSignal,this);e.dispose()}closeAllForeignDocuments(){for(let e of this.foreignDocuments.values()){this.closeForeign(e)}}closeExpiredDocuments(){for(let e of this.unusedDocuments.values()){e.remainingLifetime-=1;if(e.remainingLifetime<=0){e.dispose()}}}transformSourceToEditor(e){let t=this.sourceLines.get(e.line);let n=t.editorLine;let i=t.editorShift;return{ch:e.ch+(n===0?i.column:0),line:n+i.line}}transformVirtualToEditor(e){let t=this.transformVirtualToSource(e);if(t==null){return null}return this.transformSourceToEditor(t)}transformVirtualToSource(e){const t=this.virtualLines.get(e.line).sourceLine;if(t==null){return null}return{ch:e.ch,line:t}}getEditorAtVirtualLine(e){let t=e.line;if(!this.virtualLines.has(t)){t-=1}return this.virtualLines.get(t).editor}getEditorAtSourceLine(e){return this.sourceLines.get(e.line).editor}maybeEmitChanged(){if(this.value!==this.previousValue){this._changed.emit(this)}this.previousValue=this.value;for(let e of this.foreignDocuments.values()){e.maybeEmitChanged()}}get remainingLifetime(){if(!this.parent){return Infinity}return this._remainingLifetime}set remainingLifetime(e){if(this.parent){this._remainingLifetime=e}}chooseForeignDocument(e){let t;let n=this.foreignDocuments.has(e.language);if(!e.standalone&&n){t=this.foreignDocuments.get(e.language)}else{t=this.openForeign(e.language,e.standalone,e.fileExtension)}return t}openForeign(e,t,n){let i=new q({...this.options,parent:this,standalone:t,fileExtension:n,language:e});const s={foreignDocument:i,parentHost:this};this._foreignDocumentOpened.emit(s);i.foreignDocumentClosed.connect(this.forwardClosedSignal,this);i.foreignDocumentOpened.connect(this.forwardOpenedSignal,this);this.foreignDocuments.set(i.virtualId,i);return i}forwardClosedSignal(e,t){this._foreignDocumentClosed.emit(t)}forwardOpenedSignal(e,t){this._foreignDocumentOpened.emit(t)}_updateBeganSlot(){this._editorToSourceLineNew=new Map}_blockAddedSlot(e,t){this._editorToSourceLineNew.set(t.block.ceEditor,t.virtualDocument.lastSourceLine)}_updateFinishedSlot(){this._editorToSourceLine=this._editorToSourceLineNew}}q.instancesCount=0;function K(e){let t=new Set;t.add(e);for(let n of e.foreignDocuments.values()){let e=K(n);e.forEach(t.add,t)}return t}class J{constructor(e){this.virtualDocument=e;this._isDisposed=false;this._updateDone=new Promise((e=>{e()}));this._isUpdateInProgress=false;this._updateLock=false;this._blockAdded=new a.Signal(this);this._documentUpdated=new a.Signal(this);this._updateBegan=new a.Signal(this);this._updateFinished=new a.Signal(this);this.documentUpdated.connect(this._onUpdated,this)}get updateDone(){return this._updateDone}get isDisposed(){return this._isDisposed}get blockAdded(){return this._blockAdded}get documentUpdated(){return this._documentUpdated}get updateBegan(){return this._updateBegan}get updateFinished(){return this._updateFinished}dispose(){if(this._isDisposed){return}this._isDisposed=true;this.documentUpdated.disconnect(this._onUpdated);a.Signal.clearData(this)}async withUpdateLock(e){await b((()=>this._canUpdate()),12,10).then((()=>{try{this._updateLock=true;e()}finally{this._updateLock=false}}))}async updateDocuments(e){let t=new Promise(((t,n)=>{b((()=>this._canUpdate()),10,5).then((()=>{if(this.isDisposed||!this.virtualDocument){t()}try{this._isUpdateInProgress=true;this._updateBegan.emit(e);this.virtualDocument.clear();for(let t of e){this._blockAdded.emit({block:t,virtualDocument:this.virtualDocument});this.virtualDocument.appendCodeBlock(t)}this._updateFinished.emit(e);if(this.virtualDocument){this._documentUpdated.emit(this.virtualDocument);this.virtualDocument.maybeEmitChanged()}t()}catch(i){console.warn("Documents update failed:",i);n(i)}finally{this._isUpdateInProgress=false}})).catch(console.error)}));this._updateDone=t;return t}_onUpdated(e,t){try{t.closeExpiredDocuments()}catch(n){console.warn("Failed to close expired documents")}}_canUpdate(){return!this.isDisposed&&!this._isUpdateInProgress&&!this._updateLock}}},51734:(e,t,n)=>{"use strict";var i=n(79536);var s=n(49914);var o=n(94683)},66147:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CommandIDs:()=>j,default:()=>R});var i=n(44906);var s=n.n(i);var o=n(90848);var r=n.n(o);var a=n(22873);var l=n.n(a);var d=n(46054);var c=n.n(d);var h=n(74513);var u=n.n(h);var p=n(51997);var m=n.n(p);var g=n(36168);var f=n.n(g);var v=n(52435);var _=n.n(v);var b=n(58740);var y=n.n(b);var w=n(5596);var C=n.n(w);var x=n(85448);var S=n.n(x);const k="@jupyterlab/mainmenu-extension:plugin";var j;(function(e){e.openEdit="editmenu:open";e.undo="editmenu:undo";e.redo="editmenu:redo";e.clearCurrent="editmenu:clear-current";e.clearAll="editmenu:clear-all";e.find="editmenu:find";e.goToLine="editmenu:go-to-line";e.openFile="filemenu:open";e.closeAndCleanup="filemenu:close-and-cleanup";e.createConsole="filemenu:create-console";e.shutdown="filemenu:shutdown";e.logout="filemenu:logout";e.openKernel="kernelmenu:open";e.interruptKernel="kernelmenu:interrupt";e.reconnectToKernel="kernelmenu:reconnect-to-kernel";e.restartKernel="kernelmenu:restart";e.restartKernelAndClear="kernelmenu:restart-and-clear";e.changeKernel="kernelmenu:change";e.shutdownKernel="kernelmenu:shutdown";e.shutdownAllKernels="kernelmenu:shutdownAll";e.openView="viewmenu:open";e.wordWrap="viewmenu:word-wrap";e.lineNumbering="viewmenu:line-numbering";e.matchBrackets="viewmenu:match-brackets";e.openRun="runmenu:open";e.run="runmenu:run";e.runAll="runmenu:run-all";e.restartAndRunAll="runmenu:restart-and-run-all";e.runAbove="runmenu:run-above";e.runBelow="runmenu:run-below";e.openTabs="tabsmenu:open";e.activateById="tabsmenu:activate-by-id";e.activatePreviouslyUsedTab="tabsmenu:activate-previously-used-tab";e.openSettings="settingsmenu:open";e.openHelp="helpmenu:open";e.getKernel="helpmenu:get-kernel";e.openFirst="mainmenu:open-first"})(j||(j={}));const M={id:k,description:"Adds and provides the application main menu.",requires:[i.IRouter,g.ITranslator],optional:[o.ICommandPalette,i.ILabShell,p.ISettingRegistry],provides:d.IMainMenu,activate:async(e,t,n,i,s,o)=>{const{commands:r}=e;const l=n.load("jupyterlab");const c=new d.MainMenu(r);c.id="jp-MainMenu";c.addClass("jp-scrollbar-tiny");if(o){await N.loadSettingsMenu(o,(e=>{c.addMenu(e,false,{rank:e.rank})}),(e=>d.MainMenu.generateMenu(r,e,l)),n);c.update()}const h=a.PageConfig.getOption("quitButton").toLowerCase();c.fileMenu.quitEntry=h==="true";E(e,c.editMenu,l);I(e,c.fileMenu,t,l);T(e,c.kernelMenu,l);L(e,c.runMenu,l);D(e,c.viewMenu,l);A(e,c.helpMenu,l);if(s){P(e,c.tabsMenu,s,l)}const u=e=>{c.activeMenu=e;c.openActiveMenu()};r.addCommand(j.openEdit,{label:l.__("Open Edit Menu"),execute:()=>u(c.editMenu)});r.addCommand(j.openFile,{label:l.__("Open File Menu"),execute:()=>u(c.fileMenu)});r.addCommand(j.openKernel,{label:l.__("Open Kernel Menu"),execute:()=>u(c.kernelMenu)});r.addCommand(j.openRun,{label:l.__("Open Run Menu"),execute:()=>u(c.runMenu)});r.addCommand(j.openView,{label:l.__("Open View Menu"),execute:()=>u(c.viewMenu)});r.addCommand(j.openSettings,{label:l.__("Open Settings Menu"),execute:()=>u(c.settingsMenu)});r.addCommand(j.openTabs,{label:l.__("Open Tabs Menu"),execute:()=>u(c.tabsMenu)});r.addCommand(j.openHelp,{label:l.__("Open Help Menu"),execute:()=>u(c.helpMenu)});r.addCommand(j.openFirst,{label:l.__("Open First Menu"),execute:()=>{c.activeIndex=0;c.openActiveMenu()}});if(i){i.addItem({command:j.shutdown,category:l.__("Main Area")});i.addItem({command:j.logout,category:l.__("Main Area")});i.addItem({command:j.shutdownAllKernels,category:l.__("Kernel Operations")});i.addItem({command:j.activatePreviouslyUsedTab,category:l.__("Main Area")})}e.shell.add(c,"menu",{rank:100});return c}};function E(e,t,n){const s=e.commands;s.addCommand(j.undo,(0,i.createSemanticCommand)(e,t.undoers.undo,{label:n.__("Undo")},n));s.addCommand(j.redo,(0,i.createSemanticCommand)(e,t.undoers.redo,{label:n.__("Redo")},n));s.addCommand(j.clearCurrent,(0,i.createSemanticCommand)(e,t.clearers.clearCurrent,{label:n.__("Clear")},n));s.addCommand(j.clearAll,(0,i.createSemanticCommand)(e,t.clearers.clearAll,{label:n.__("Clear All")},n));s.addCommand(j.goToLine,(0,i.createSemanticCommand)(e,t.goToLiners,{label:n.__("Go to Line")},n))}function I(e,t,n,s){const r=e.commands;r.addCommand(j.closeAndCleanup,{...(0,i.createSemanticCommand)(e,t.closeAndCleaners,{execute:"application:close",label:s.__("Close and Shut Down"),isEnabled:true},s),isEnabled:()=>!!e.shell.currentWidget&&!!e.shell.currentWidget.title.closable});r.addCommand(j.createConsole,(0,i.createSemanticCommand)(e,t.consoleCreators,{label:s.__("New Console for Activity")},s));r.addCommand(j.shutdown,{label:s.__("Shut Down"),caption:s.__("Shut down JupyterLab"),isVisible:()=>t.quitEntry,isEnabled:()=>t.quitEntry,execute:()=>(0,o.showDialog)({title:s.__("Shutdown confirmation"),body:s.__("Please confirm you want to shut down JupyterLab."),buttons:[o.Dialog.cancelButton(),o.Dialog.warnButton({label:s.__("Shut Down")})]}).then((async t=>{if(t.button.accept){const t=h.ServerConnection.makeSettings();const i=a.URLExt.join(t.baseUrl,"api/shutdown");try{await Promise.all([e.serviceManager.sessions.shutdownAll(),e.serviceManager.terminals.shutdownAll()])}catch(n){console.log(`Failed to shutdown sessions and terminals: ${n}`)}return h.ServerConnection.makeRequest(i,{method:"POST"},t).then((e=>{if(e.ok){const e=document.createElement("div");const t=document.createElement("p");t.textContent=s.__("You have shut down the Jupyter server. You can now close this tab.");const n=document.createElement("p");n.textContent=s.__("To use JupyterLab again, you will need to relaunch it.");e.appendChild(t);e.appendChild(n);void(0,o.showDialog)({title:s.__("Server stopped"),body:new x.Widget({node:e}),buttons:[]});window.close()}else{throw new h.ServerConnection.ResponseError(e)}})).catch((e=>{throw new h.ServerConnection.NetworkError(e)}))}}))});r.addCommand(j.logout,{label:s.__("Log Out"),caption:s.__("Log out of JupyterLab"),isVisible:()=>t.quitEntry,isEnabled:()=>t.quitEntry,execute:()=>{n.navigate("/logout",{hard:true})}})}function T(e,t,n){const s=e.commands;s.addCommand(j.interruptKernel,{...(0,i.createSemanticCommand)(e,t.kernelUsers.interruptKernel,{label:n.__("Interrupt Kernel"),caption:n.__("Interrupt the kernel")},n),icon:e=>e.toolbar?v.stopIcon:undefined});s.addCommand(j.reconnectToKernel,(0,i.createSemanticCommand)(e,t.kernelUsers.reconnectToKernel,{label:n.__("Reconnect to Kernel")},n));s.addCommand(j.restartKernel,{...(0,i.createSemanticCommand)(e,t.kernelUsers.restartKernel,{label:n.__("Restart Kernel"),caption:n.__("Restart the kernel")},n),icon:e=>e.toolbar?v.refreshIcon:undefined});s.addCommand(j.restartKernelAndClear,(0,i.createSemanticCommand)(e,[t.kernelUsers.restartKernel,t.kernelUsers.clearWidget],{label:n.__("Restart Kernel and Clear")},n));s.addCommand(j.changeKernel,(0,i.createSemanticCommand)(e,t.kernelUsers.changeKernel,{label:n.__("Change Kernel")},n));s.addCommand(j.shutdownKernel,(0,i.createSemanticCommand)(e,t.kernelUsers.shutdownKernel,{label:n.__("Shut Down Kernel"),caption:n.__("Shut down kernel")},n));s.addCommand(j.shutdownAllKernels,{label:n.__("Shut Down All Kernels"),isEnabled:()=>!e.serviceManager.sessions.running().next().done,execute:()=>(0,o.showDialog)({title:n.__("Shut Down All?"),body:n.__("Shut down all kernels?"),buttons:[o.Dialog.cancelButton({label:n.__("Dismiss")}),o.Dialog.warnButton({label:n.__("Shut Down All")})]}).then((t=>{if(t.button.accept){return e.serviceManager.sessions.shutdownAll()}}))})}function D(e,t,n){const s=e.commands;s.addCommand(j.lineNumbering,(0,i.createSemanticCommand)(e,t.editorViewers.toggleLineNumbers,{label:n.__("Show Line Numbers")},n));s.addCommand(j.matchBrackets,(0,i.createSemanticCommand)(e,t.editorViewers.toggleMatchBrackets,{label:n.__("Match Brackets")},n));s.addCommand(j.wordWrap,(0,i.createSemanticCommand)(e,t.editorViewers.toggleWordWrap,{label:n.__("Wrap Words")},n))}function L(e,t,n){const s=e.commands;s.addCommand(j.run,{...(0,i.createSemanticCommand)(e,t.codeRunners.run,{label:n.__("Run Selected"),caption:n.__("Run Selected")},n),icon:e=>e.toolbar?v.runIcon:undefined});s.addCommand(j.runAll,(0,i.createSemanticCommand)(e,t.codeRunners.runAll,{label:n.__("Run All"),caption:n.__("Run All")},n));s.addCommand(j.restartAndRunAll,{...(0,i.createSemanticCommand)(e,[t.codeRunners.restart,t.codeRunners.runAll],{label:n.__("Restart Kernel and Run All"),caption:n.__("Restart Kernel and Run All")},n),icon:e=>e.toolbar?v.fastForwardIcon:undefined})}function P(e,t,n,i){const s=e.commands;const o=[];let r;s.addCommand(j.activateById,{label:t=>{if(t.id===undefined){return i.__("Activate a widget by its `id`.")}const n=t["id"]||"";const s=(0,b.find)(e.shell.widgets("main"),(e=>e.id===n));return s&&s.title.label||""},isToggled:t=>{const n=t["id"]||"";return!!e.shell.currentWidget&&e.shell.currentWidget.id===n},execute:t=>e.shell.activateById(t["id"]||"")});let a="";s.addCommand(j.activatePreviouslyUsedTab,{label:i.__("Activate Previously Used Tab"),isEnabled:()=>!!a,execute:()=>s.execute(j.activateById,{id:a})});if(n){void e.restored.then((()=>{const i=()=>{if(r&&!r.isDisposed){r.dispose()}o.length=0;let n=false;for(const t of e.shell.widgets("main")){if(t.id===a){n=true}o.push({command:j.activateById,args:{id:t.id}})}r=t.addGroup(o,1);a=n?a:""};i();n.layoutModified.connect((()=>{i()}));n.currentChanged.connect(((e,t)=>{const n=t.oldValue;if(!n){return}a=n.id}))}))}}function A(e,t,n){e.commands.addCommand(j.getKernel,(0,i.createSemanticCommand)(e,t.getKernel,{label:n.__("Get Kernel"),isVisible:false},n))}const R=M;var N;(function(e){async function t(e){const t=await(0,o.showDialog)({title:e.__("Information"),body:e.__("Menu customization has changed. You will need to reload JupyterLab to see the changes."),buttons:[o.Dialog.cancelButton(),o.Dialog.okButton({label:e.__("Reload")})]});if(t.button.accept){location.reload()}}async function n(e,n,i,s){var r;const a=s.load("jupyterlab");let l=null;let d={};function c(t){var n,i;d={};const s=Object.keys(e.plugins).map((t=>{var n,i;const s=(i=(n=e.plugins[t].schema["jupyter.lab.menus"])===null||n===void 0?void 0:n.main)!==null&&i!==void 0?i:[];d[t]=s;return s})).concat([(i=(n=t["jupyter.lab.menus"])===null||n===void 0?void 0:n.main)!==null&&i!==void 0?i:[]]).reduceRight(((e,t)=>p.SettingRegistry.reconcileMenus(e,t,true)),t.properties.menus.default);t.properties.menus.default=p.SettingRegistry.reconcileMenus(s,t.properties.menus.default,true).sort(((e,t)=>{var n,i;return((n=e.rank)!==null&&n!==void 0?n:Infinity)-((i=t.rank)!==null&&i!==void 0?i:Infinity)}))}e.transform(k,{compose:e=>{var t,n,i,s;if(!l){l=w.JSONExt.deepCopy(e.schema);c(l)}const o=(i=(n=(t=l.properties)===null||t===void 0?void 0:t.menus)===null||n===void 0?void 0:n.default)!==null&&i!==void 0?i:[];const r={...e.data.user,menus:(s=e.data.user.menus)!==null&&s!==void 0?s:[]};const a={...e.data.composite,menus:p.SettingRegistry.reconcileMenus(o,r.menus)};e.data={composite:a,user:r};return e},fetch:e=>{if(!l){l=w.JSONExt.deepCopy(e.schema);c(l)}return{data:e.data,id:e.id,raw:e.raw,schema:l,version:e.version}}});const h=await e.load(k);const u=(r=w.JSONExt.deepCopy(h.composite.menus))!==null&&r!==void 0?r:[];const m=new Array;o.MenuFactory.createMenus(u.filter((e=>!e.disabled)).map((e=>{var t;return{...e,items:p.SettingRegistry.filterDisabledItems((t=e.items)!==null&&t!==void 0?t:[])}})),i).forEach((e=>{m.push(e);n(e)}));h.changed.connect((()=>{var e;const n=(e=h.composite.menus)!==null&&e!==void 0?e:[];if(!w.JSONExt.deepEqual(u,n)){void t(a)}}));e.pluginChanged.connect((async(s,r)=>{var l,c,h;if(r!==k){const s=(l=d[r])!==null&&l!==void 0?l:[];const g=(h=(c=e.plugins[r].schema["jupyter.lab.menus"])===null||c===void 0?void 0:c.main)!==null&&h!==void 0?h:[];if(!w.JSONExt.deepEqual(s,g)){if(d[r]){await t(a)}else{d[r]=w.JSONExt.deepCopy(g);const e=p.SettingRegistry.reconcileMenus(g,u,false,false).filter((e=>!e.disabled)).map((e=>{var t;return{...e,items:p.SettingRegistry.filterDisabledItems((t=e.items)!==null&&t!==void 0?t:[])}}));o.MenuFactory.updateMenus(m,e,i).forEach((e=>{n(e)}))}}}}))}e.loadSettingsMenu=n})(N||(N={}))},83344:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(90516);var a=n(74518)},97630:(e,t,n)=>{"use strict";n.r(t);n.d(t,{EditMenu:()=>a,FileMenu:()=>l,HelpMenu:()=>d,IMainMenu:()=>_,KernelMenu:()=>c,MainMenu:()=>g,RunMenu:()=>h,SettingsMenu:()=>u,TabsMenu:()=>p,ViewMenu:()=>m});var i=n(52435);var s=n(58740);var o=n(85448);var r=n(90848);class a extends i.RankedMenu{constructor(e){super(e);this.undoers={redo:new r.SemanticCommand,undo:new r.SemanticCommand};this.clearers={clearAll:new r.SemanticCommand,clearCurrent:new r.SemanticCommand};this.goToLiners=new r.SemanticCommand}}class l extends i.RankedMenu{constructor(e){super(e);this.quitEntry=false;this.closeAndCleaners=new r.SemanticCommand;this.consoleCreators=new r.SemanticCommand}get newMenu(){var e,t;if(!this._newMenu){this._newMenu=(t=(e=(0,s.find)(this.items,(e=>{var t;return((t=e.submenu)===null||t===void 0?void 0:t.id)==="jp-mainmenu-file-new"})))===null||e===void 0?void 0:e.submenu)!==null&&t!==void 0?t:new i.RankedMenu({commands:this.commands})}return this._newMenu}dispose(){var e;(e=this._newMenu)===null||e===void 0?void 0:e.dispose();super.dispose()}}class d extends i.RankedMenu{constructor(e){super(e);this.getKernel=new r.SemanticCommand}}class c extends i.RankedMenu{constructor(e){super(e);this.kernelUsers={changeKernel:new r.SemanticCommand,clearWidget:new r.SemanticCommand,interruptKernel:new r.SemanticCommand,reconnectToKernel:new r.SemanticCommand,restartKernel:new r.SemanticCommand,shutdownKernel:new r.SemanticCommand}}}class h extends i.RankedMenu{constructor(e){super(e);this.codeRunners={restart:new r.SemanticCommand,run:new r.SemanticCommand,runAll:new r.SemanticCommand}}}class u extends i.RankedMenu{constructor(e){super(e)}}class p extends i.RankedMenu{constructor(e){super(e)}}class m extends i.RankedMenu{constructor(e){super(e);this.editorViewers={toggleLineNumbers:new r.SemanticCommand,toggleMatchBrackets:new r.SemanticCommand,toggleWordWrap:new r.SemanticCommand}}}class g extends o.MenuBar{constructor(e){let t={forceItemsPosition:{forceX:false,forceY:true}};super(t);this._items=[];this._commands=e}get editMenu(){if(!this._editMenu){this._editMenu=new a({commands:this._commands,rank:2,renderer:i.MenuSvg.defaultRenderer})}return this._editMenu}get fileMenu(){if(!this._fileMenu){this._fileMenu=new l({commands:this._commands,rank:1,renderer:i.MenuSvg.defaultRenderer})}return this._fileMenu}get helpMenu(){if(!this._helpMenu){this._helpMenu=new d({commands:this._commands,rank:1e3,renderer:i.MenuSvg.defaultRenderer})}return this._helpMenu}get kernelMenu(){if(!this._kernelMenu){this._kernelMenu=new c({commands:this._commands,rank:5,renderer:i.MenuSvg.defaultRenderer})}return this._kernelMenu}get runMenu(){if(!this._runMenu){this._runMenu=new h({commands:this._commands,rank:4,renderer:i.MenuSvg.defaultRenderer})}return this._runMenu}get settingsMenu(){if(!this._settingsMenu){this._settingsMenu=new u({commands:this._commands,rank:999,renderer:i.MenuSvg.defaultRenderer})}return this._settingsMenu}get viewMenu(){if(!this._viewMenu){this._viewMenu=new m({commands:this._commands,rank:3,renderer:i.MenuSvg.defaultRenderer})}return this._viewMenu}get tabsMenu(){if(!this._tabsMenu){this._tabsMenu=new p({commands:this._commands,rank:500,renderer:i.MenuSvg.defaultRenderer})}return this._tabsMenu}addMenu(e,t=true,n={}){if(s.ArrayExt.firstIndexOf(this.menus,e)>-1){return}i.MenuSvg.overrideDefaultRenderer(e);const o="rank"in n?n.rank:"rank"in e?e.rank:i.IRankedMenu.DEFAULT_RANK;const r={menu:e,rank:o};const g=s.ArrayExt.upperBound(this._items,r,f.itemCmp);e.disposed.connect(this._onMenuDisposed,this);s.ArrayExt.insert(this._items,g,r);this.insertMenu(g,e);switch(e.id){case"jp-mainmenu-file":if(!this._fileMenu&&e instanceof l){this._fileMenu=e}break;case"jp-mainmenu-edit":if(!this._editMenu&&e instanceof a){this._editMenu=e}break;case"jp-mainmenu-view":if(!this._viewMenu&&e instanceof m){this._viewMenu=e}break;case"jp-mainmenu-run":if(!this._runMenu&&e instanceof h){this._runMenu=e}break;case"jp-mainmenu-kernel":if(!this._kernelMenu&&e instanceof c){this._kernelMenu=e}break;case"jp-mainmenu-tabs":if(!this._tabsMenu&&e instanceof p){this._tabsMenu=e}break;case"jp-mainmenu-settings":if(!this._settingsMenu&&e instanceof u){this._settingsMenu=e}break;case"jp-mainmenu-help":if(!this._helpMenu&&e instanceof d){this._helpMenu=e}break}}dispose(){var e,t,n,i,s,o,r,a;(e=this._editMenu)===null||e===void 0?void 0:e.dispose();(t=this._fileMenu)===null||t===void 0?void 0:t.dispose();(n=this._helpMenu)===null||n===void 0?void 0:n.dispose();(i=this._kernelMenu)===null||i===void 0?void 0:i.dispose();(s=this._runMenu)===null||s===void 0?void 0:s.dispose();(o=this._settingsMenu)===null||o===void 0?void 0:o.dispose();(r=this._viewMenu)===null||r===void 0?void 0:r.dispose();(a=this._tabsMenu)===null||a===void 0?void 0:a.dispose();super.dispose()}static generateMenu(e,t,n){let s;const{id:o,label:r,rank:g}=t;switch(o){case"jp-mainmenu-file":s=new l({commands:e,rank:g,renderer:i.MenuSvg.defaultRenderer});break;case"jp-mainmenu-edit":s=new a({commands:e,rank:g,renderer:i.MenuSvg.defaultRenderer});break;case"jp-mainmenu-view":s=new m({commands:e,rank:g,renderer:i.MenuSvg.defaultRenderer});break;case"jp-mainmenu-run":s=new h({commands:e,rank:g,renderer:i.MenuSvg.defaultRenderer});break;case"jp-mainmenu-kernel":s=new c({commands:e,rank:g,renderer:i.MenuSvg.defaultRenderer});break;case"jp-mainmenu-tabs":s=new p({commands:e,rank:g,renderer:i.MenuSvg.defaultRenderer});break;case"jp-mainmenu-settings":s=new u({commands:e,rank:g,renderer:i.MenuSvg.defaultRenderer});break;case"jp-mainmenu-help":s=new d({commands:e,rank:g,renderer:i.MenuSvg.defaultRenderer});break;default:s=new i.RankedMenu({commands:e,rank:g,renderer:i.MenuSvg.defaultRenderer})}if(r){s.title.label=n._p("menu",r)}return s}_onMenuDisposed(e){this.removeMenu(e);const t=s.ArrayExt.findFirstIndex(this._items,(t=>t.menu===e));if(t!==-1){s.ArrayExt.removeAt(this._items,t)}}}var f;(function(e){function t(e,t){return e.rank-t.rank}e.itemCmp=t})(f||(f={}));var v=n(5596);const _=new v.Token("@jupyterlab/mainmenu:IMainMenu",`A service for the main menu bar for the application.\n  Use this if you want to add your own menu items or provide implementations for standardized menu items for specific activities.`)},74518:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536)},32824:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>x});var i=n(44906);var s=n.n(i);var o=n(90848);var r=n.n(o);var a=n(22873);var l=n.n(a);var d=n(48961);var c=n.n(d);var h=n(33112);var u=n.n(h);var p=n(51997);var m=n.n(p);var g=n(85147);var f=n.n(g);var v=n(36168);var _=n.n(v);var b;(function(e){e.markdownPreview="markdownviewer:open";e.markdownEditor="markdownviewer:edit"})(b||(b={}));const y="Markdown Preview";const w={activate:C,id:"@jupyterlab/markdownviewer-extension:plugin",description:"Adds markdown file viewer and provides its tracker.",provides:d.IMarkdownViewerTracker,requires:[h.IRenderMimeRegistry,v.ITranslator],optional:[i.ILayoutRestorer,p.ISettingRegistry,g.ITableOfContentsRegistry],autoStart:true};function C(e,t,n,i,s,r){const l=n.load("jupyterlab");const{commands:c,docRegistry:u}=e;t.addFactory(h.markdownRendererFactory);const p="markdownviewer-widget";const m=new o.WidgetTracker({namespace:p});let g={...d.MarkdownViewer.defaultConfig};function f(e){Object.keys(g).forEach((t=>{var n;e.setOption(t,(n=g[t])!==null&&n!==void 0?n:null)}))}if(s){const e=e=>{g=e.composite;m.forEach((e=>{f(e.content)}))};s.load(w.id).then((t=>{t.changed.connect((()=>{e(t)}));e(t)})).catch((e=>{console.error(e.message)}))}const v=new d.MarkdownViewerFactory({rendermime:t,name:y,label:l.__("Markdown Preview"),primaryFileType:u.getFileType("markdown"),fileTypes:["markdown"],defaultRendered:["markdown"]});v.widgetCreated.connect(((e,t)=>{t.context.pathChanged.connect((()=>{void m.save(t)}));f(t.content);void m.add(t)}));u.addWidgetFactory(v);if(i){void i.restore(m,{command:"docmanager:open",args:e=>({path:e.context.path,factory:y}),name:e=>e.context.path})}c.addCommand(b.markdownPreview,{label:l.__("Markdown Preview"),execute:e=>{const t=e["path"];if(typeof t!=="string"){return}return c.execute("docmanager:open",{path:t,factory:y,options:e["options"]})}});c.addCommand(b.markdownEditor,{execute:()=>{const e=m.currentWidget;if(!e){return}const t=e.context.path;return c.execute("docmanager:open",{path:t,factory:"Editor",options:{mode:"split-right"}})},isVisible:()=>{const e=m.currentWidget;return e&&a.PathExt.extname(e.context.path)===".md"||false},label:l.__("Show Markdown Editor")});if(r){r.add(new d.MarkdownViewerTableOfContentsFactory(m,t.markdownParser))}return m}const x=w},52109:(e,t,n)=>{"use strict";var i=n(79536);var s=n(98896);var o=n(90516);var r=n(99434);var a=n(32902);var l=n(94683);var d=n(93379);var c=n.n(d);var h=n(7795);var u=n.n(h);var p=n(90569);var m=n.n(p);var g=n(3565);var f=n.n(g);var v=n(19216);var _=n.n(v);var b=n(44589);var y=n.n(b);var w=n(36964);var C={};C.styleTagTransform=y();C.setAttributes=f();C.insert=m().bind(null,"head");C.domAPI=u();C.insertStyleElement=_();var x=c()(w.Z,C);const S=w.Z&&w.Z.locals?w.Z.locals:undefined},74459:(e,t,n)=>{"use strict";n.r(t);n.d(t,{IMarkdownViewerTracker:()=>a,MarkdownDocument:()=>_,MarkdownViewer:()=>v,MarkdownViewerFactory:()=>b,MarkdownViewerTableOfContentsFactory:()=>o,MarkdownViewerTableOfContentsModel:()=>s});var i=n(85147);class s extends i.TableOfContentsModel{constructor(e,t,n){super(e,n);this.parser=t}get documentType(){return"markdown-viewer"}get isAlwaysActive(){return true}get supportedOptions(){return["maximalDepth","numberingH1","numberHeaders"]}getHeadings(){const e=this.widget.context.model.toString();const t=i.TableOfContentsUtils.filterHeadings(i.TableOfContentsUtils.Markdown.getHeadings(e),{...this.configuration,baseNumbering:1});return Promise.resolve(t)}}class o extends i.TableOfContentsFactory{constructor(e,t){super(e);this.parser=t}_createNew(e,t){const n=new s(e,this.parser,t);let o=new WeakMap;const r=(t,n)=>{if(n){const t=o.get(n);if(t){const n=e.content.node.getBoundingClientRect();const i=t.getBoundingClientRect();if(i.top>n.bottom||i.bottom<n.top){t.scrollIntoView({block:"center"})}}}};const a=()=>{if(!this.parser){return}i.TableOfContentsUtils.clearNumbering(e.content.node);o=new WeakMap;n.headings.forEach((async t=>{var n;const s=await i.TableOfContentsUtils.Markdown.getHeadingId(this.parser,t.raw,t.level);if(!s){return}const r=`h${t.level}[id="${s}"]`;o.set(t,i.TableOfContentsUtils.addPrefix(e.content.node,r,(n=t.prefix)!==null&&n!==void 0?n:""))}))};void e.content.ready.then((()=>{a();e.content.rendered.connect(a);n.activeHeadingChanged.connect(r);n.headingsChanged.connect(a);e.disposed.connect((()=>{e.content.rendered.disconnect(a);n.activeHeadingChanged.disconnect(r);n.headingsChanged.disconnect(a)}))}));return n}}var r=n(5596);const a=new r.Token("@jupyterlab/markdownviewer:IMarkdownViewerTracker",`A widget tracker for markdown\n  document viewers. Use this if you want to iterate over and interact with rendered markdown documents.`);var l=n(90848);var d=n(22873);var c=n(35788);var h=n(33112);var u=n(36168);var p=n(71372);var m=n(85448);const g="jp-MarkdownViewer";const f="text/markdown";class v extends m.Widget{constructor(e){super();this._config={...v.defaultConfig};this._fragment="";this._ready=new r.PromiseDelegate;this._isRendering=false;this._renderRequested=false;this._rendered=new p.Signal(this);this.context=e.context;this.translator=e.translator||u.nullTranslator;this._trans=this.translator.load("jupyterlab");this.renderer=e.renderer;this.node.tabIndex=0;this.addClass(g);const t=this.layout=new m.StackedLayout;t.addWidget(this.renderer);void this.context.ready.then((async()=>{await this._render();this._monitor=new d.ActivityMonitor({signal:this.context.model.contentChanged,timeout:this._config.renderTimeout});this._monitor.activityStopped.connect(this.update,this);this._ready.resolve(undefined)}))}get ready(){return this._ready.promise}get rendered(){return this._rendered}setFragment(e){this._fragment=e;this.update()}setOption(e,t){if(this._config[e]===t){return}this._config[e]=t;const{style:n}=this.renderer.node;switch(e){case"fontFamily":n.setProperty("font-family",t);break;case"fontSize":n.setProperty("font-size",t?t+"px":null);break;case"hideFrontMatter":this.update();break;case"lineHeight":n.setProperty("line-height",t?t.toString():null);break;case"lineWidth":{const e=t?`calc(50% - ${t/2}ch)`:null;n.setProperty("padding-left",e);n.setProperty("padding-right",e);break}case"renderTimeout":if(this._monitor){this._monitor.timeout=t}break;default:break}}dispose(){if(this.isDisposed){return}if(this._monitor){this._monitor.dispose()}this._monitor=null;super.dispose()}onUpdateRequest(e){if(this.context.isReady&&!this.isDisposed){void this._render();this._fragment=""}}onActivateRequest(e){this.node.focus()}async _render(){if(this.isDisposed){return}if(this._isRendering){this._renderRequested=true;return}this._renderRequested=false;const{context:e}=this;const{model:t}=e;const n=t.toString();const i={};i[f]=this._config.hideFrontMatter?y.removeFrontMatter(n):n;const s=new h.MimeModel({data:i,metadata:{fragment:this._fragment}});try{this._isRendering=true;await this.renderer.renderModel(s);this._isRendering=false;if(this._renderRequested){return this._render()}else{this._rendered.emit()}}catch(o){requestAnimationFrame((()=>{this.dispose()}));void(0,l.showErrorMessage)(this._trans.__("Renderer Failure: %1",e.path),o)}}}(function(e){e.defaultConfig={fontFamily:null,fontSize:null,lineHeight:null,lineWidth:null,hideFrontMatter:true,renderTimeout:1e3}})(v||(v={}));class _ extends c.DocumentWidget{setFragment(e){this.content.setFragment(e)}}class b extends c.ABCWidgetFactory{constructor(e){super(y.createRegistryOptions(e));this._fileType=e.primaryFileType;this._rendermime=e.rendermime}createNewWidget(e){var t,n,i,s,o;const r=this._rendermime.clone({resolver:e.urlResolver});const a=r.createRenderer(f);const l=new v({context:e,renderer:a});l.title.icon=(t=this._fileType)===null||t===void 0?void 0:t.icon;l.title.iconClass=(i=(n=this._fileType)===null||n===void 0?void 0:n.iconClass)!==null&&i!==void 0?i:"";l.title.iconLabel=(o=(s=this._fileType)===null||s===void 0?void 0:s.iconLabel)!==null&&o!==void 0?o:"";l.title.caption=this.label;const d=new _({content:l,context:e});return d}}var y;(function(e){function t(e){return{...e,readOnly:true}}e.createRegistryOptions=t;function n(e){const t=/^---\n[^]*?\n(---|...)\n/;const n=e.match(t);if(!n){return e}const{length:i}=n[0];return e.slice(i)}e.removeFrontMatter=n})(y||(y={}))},5999:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>c});var i=n(96912);var s=n.n(i);var o=n(33112);var r=n.n(o);var a=n(96953);var l=n.n(a);const d={id:"@jupyterlab/markedparser-extension:plugin",description:"Provides the Markdown parser.",autoStart:true,provides:o.IMarkdownParser,requires:[i.IEditorLanguageRegistry],activate:(e,t)=>{h.initializeMarked(t);return{render:e=>new Promise(((t,n)=>{(0,a.marked)(e,((e,i)=>{if(e){n(e)}else{t(i)}}))}))}}};const c=d;var h;(function(e){let t=false;function n(e){if(t){return}else{t=true}a.marked.setOptions({gfm:true,sanitize:false,langPrefix:`language-`,highlight:(t,n,i)=>{const s=(e,t)=>{if(i){i(e,t)}return t};if(!n){return s(null,t)}const o=document.createElement("div");try{e.highlight(t,e.findBest(n),o).then((()=>s(null,o.innerHTML))).catch((e=>s(e,t)))}catch(r){console.error(`Failed to highlight ${n} code`,r);return s(r,t)}}})}e.initializeMarked=n})(h||(h={}))},96986:(e,t,n)=>{"use strict";var i=n(98896);var s=n(90516);var o=n(37935)},85792:(e,t,n)=>{"use strict";n.r(t);n.d(t,{MathJaxTypesetter:()=>r,default:()=>l});var i=n(33112);var s=n.n(i);var o;(function(e){e.copy="mathjax:clipboard";e.scale="mathjax:scale"})(o||(o={}));class r{constructor(){this._initialized=false}async _ensureInitialized(){if(this._initialized){return}await Promise.all([n.e(3871),n.e(6686),n.e(5746)]).then(n.t.bind(n,5746,23));const{mathjax:e}=await n.e(786).then(n.bind(n,90786));const{CHTML:t}=await Promise.all([n.e(3871),n.e(2953),n.e(9230),n.e(7508)]).then(n.t.bind(n,37508,23));const{TeX:i}=await Promise.all([n.e(3871),n.e(6686),n.e(7775),n.e(6560)]).then(n.t.bind(n,36560,23));const{TeXFont:s}=await Promise.all([n.e(9230),n.e(6059)]).then(n.t.bind(n,59230,23));const{AllPackages:o}=await Promise.all([n.e(3871),n.e(6686),n.e(7775),n.e(9826)]).then(n.bind(n,89826));const{SafeHandler:r}=await n.e(3724).then(n.t.bind(n,63724,23));const{HTMLHandler:a}=await Promise.all([n.e(3871),n.e(2953),n.e(1448),n.e(8512)]).then(n.t.bind(n,18512,23));const{browserAdaptor:l}=await n.e(3520).then(n.bind(n,53520));const{AssistiveMmlHandler:d}=await Promise.all([n.e(3871),n.e(2953),n.e(1448),n.e(8678)]).then(n.t.bind(n,8678,23));e.handlers.register(d(r(new a(l()))));class c extends s{constructor(){super(...arguments);this.defaultFonts={}}}const h=new t({font:new c});const u=new i({packages:o.concat("require"),inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:true,processEnvironments:true});this._mathDocument=e.document(window.document,{InputJax:u,OutputJax:h});this._initialized=true}async mathDocument(){await this._ensureInitialized();return this._mathDocument}async typeset(e){try{await this._ensureInitialized()}catch(t){console.error(t);return}this._mathDocument.options.elements=[e];this._mathDocument.clear().render();delete this._mathDocument.options.elements}}const a={id:"@jupyterlab/mathjax-extension:plugin",description:"Provides the LaTeX mathematical expression interpreter.",provides:i.ILatexTypesetter,activate:e=>{const t=new r;e.commands.addCommand(o.copy,{execute:async()=>{const e=await t.mathDocument();const n=e.outputJax;await navigator.clipboard.writeText(n.math.math)},label:"MathJax Copy Latex"});e.commands.addCommand(o.scale,{execute:async e=>{const n=await t.mathDocument();const i=e["scale"]||1;n.outputJax.options.scale=i;n.rerender()},label:e=>"Mathjax Scale "+(e["scale"]?`x${e["scale"]}`:"Reset")});return t},autoStart:true};const l=a},63008:(e,t,n)=>{"use strict";var i=n(98896);var s=n(90516);var o=n(93379);var r=n.n(o);var a=n(7795);var l=n.n(a);var d=n(90569);var c=n.n(d);var h=n(3565);var u=n.n(h);var p=n(19216);var m=n.n(p);var g=n(44589);var f=n.n(g);var v=n(48683);var _={};_.styleTagTransform=f();_.setAttributes=u();_.insert=c().bind(null,"head");_.domAPI=l();_.insertStyleElement=m();var b=r()(v.Z,_);const y=v.Z&&v.Z.locals?v.Z.locals:undefined},3873:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>_});var i=n(74202);var s=n.n(i);var o=n(51997);var r=n.n(o);var a=n(36168);var l=n.n(a);var d=n(52435);var c=n.n(d);var h=n(5596);var u=n.n(h);var p=n(59447);var m=n.n(p);const g="@jupyterlab/metadataform-extension:metadataforms";var f;(function(e){async function t(e,t,n,i,s){var o;let r;let a={};function l(e){a={};e.properties.metadataforms.default=Object.keys(t.plugins).map((e=>{var n;const i=(n=t.plugins[e].schema["jupyter.lab.metadataforms"])!==null&&n!==void 0?n:[];i.forEach((t=>{t._origin=e}));a[e]=i;return i})).concat([e["jupyter.lab.metadataforms"]]).reduce(((e,t)=>{t.forEach((t=>{const n=e.find((e=>e.id===t.id));if(n){for(let[e,i]of Object.entries(t.metadataSchema.properties)){n.metadataSchema.properties[e]=i}if(t.metadataSchema.required){if(!n.metadataSchema.required){n.metadataSchema.required=t.metadataSchema.required}else{n.metadataSchema.required.concat(t.metadataSchema.required)}}if(t.metadataSchema.allOf){if(!n.metadataSchema.allOf){n.metadataSchema.allOf=t.metadataSchema.allOf}else{n.metadataSchema.allOf.concat(t.metadataSchema.allOf)}}if(t.uiSchema){if(!n.uiSchema)n.uiSchema={};for(let[e,i]of Object.entries(t.uiSchema)){n.uiSchema[e]=i}}if(t.metadataOptions){if(!n.metadataOptions)n.metadataOptions={};for(let[e,i]of Object.entries(t.metadataOptions)){n.metadataOptions[e]=i}}}else{e.push(t)}}));return e}),[])}t.transform(g,{compose:e=>{var t,n,i,s;if(!r){r=h.JSONExt.deepCopy(e.schema);l(r)}const o=(i=(n=(t=r.properties)===null||t===void 0?void 0:t.metadataforms)===null||n===void 0?void 0:n.default)!==null&&i!==void 0?i:[];const a={metadataforms:(s=e.data.user.metadataforms)!==null&&s!==void 0?s:[]};const d={metadataforms:o.concat(a.metadataforms)};e.data={composite:d,user:a};return e},fetch:e=>{if(!r){r=h.JSONExt.deepCopy(e.schema);l(r)}return{data:e.data,id:e.id,raw:e.raw,schema:r,version:e.version}}});r=null;const d=await t.load(g);const c=new p.MetadataFormProvider;for(let u of d.composite.metadataforms){let e={};let t=h.JSONExt.deepCopy(u.metadataSchema);let r={};if(u.uiSchema){r=h.JSONExt.deepCopy(u.uiSchema)}for(let[n,i]of Object.entries(t.properties)){if(i.default){if(!e[n])e[n]={};e[n].default=i.default}}if(u.metadataOptions){for(let[t,n]of Object.entries(u.metadataOptions)){if(n.cellTypes){if(!e[t])e[t]={};e[t].cellTypes=n.cellTypes}if(n.metadataLevel){if(!e[t])e[t]={};e[t].level=n.metadataLevel}if(n.writeDefault!==undefined){if(!e[t])e[t]={};e[t].writeDefault=n.writeDefault}if(n.customRenderer){const e=s.getRenderer(n.customRenderer);if(e!==undefined){if(!r[t])r[t]={};if(e.fieldRenderer){r[t]["ui:field"]=e.fieldRenderer}else{r[t]["ui:widget"]=e.widgetRenderer}}}}}n.addSection({sectionName:u.id,rank:u.rank,label:(o=u.label)!==null&&o!==void 0?o:u.id});const a=new p.MetadataFormWidget({metadataSchema:t,metaInformation:e,uiSchema:r,pluginId:u._origin,translator:i,showModified:u.showModified});n.addItem({section:u.id,tool:a});c.add(u.id,a)}return c}e.loadSettingsMetadataForm=t})(f||(f={}));const v={id:g,description:"Provides the metadata form registry.",autoStart:true,requires:[i.INotebookTools,a.ITranslator,d.IFormRendererRegistry,o.ISettingRegistry],provides:p.IMetadataFormProvider,activate:async(e,t,n,i,s)=>await f.loadSettingsMetadataForm(e,s,t,n,i)};const _=v},39721:(e,t,n)=>{"use strict";var i=n(34849);var s=n(90516);var o=n(88164);var r=n(66458)},82996:(e,t,n)=>{"use strict";n.r(t);n.d(t,{FormWidget:()=>d,IMetadataFormProvider:()=>_,MetadataFormProvider:()=>v,MetadataFormWidget:()=>g});var i=n(90848);var s=n(52435);var o=n(13802);var r=n.n(o);var a=n(28416);var l=n.n(a);class d extends i.ReactWidget{constructor(e){super();this.addClass("jp-FormWidget");this._props=e}render(){const e={defaultFormData:this._props.settings.default(),updateMetadata:this._props.metadataFormWidget.updateMetadata};return l().createElement(s.FormComponent,{validator:r(),schema:this._props.properties,formData:this._props.formData,formContext:e,uiSchema:this._props.uiSchema,liveValidate:true,idPrefix:`jp-MetadataForm-${this._props.pluginId}`,onChange:e=>{this._props.metadataFormWidget.updateMetadata(e.formData||{})},compact:true,showModifiedFromDefault:this._props.showModified,translator:this._props.translator})}}var c=n(74202);var h=n(51997);var u=n(36168);var p=n(5596);var m=n(85448);class g extends c.NotebookTools.Tool{constructor(e){super();this.updateMetadata=(e,t)=>{var n,i,s,o,r,a,l,d;if(this.notebookTools==undefined)return;const c=this.notebookTools.activeNotebookPanel;const h=this.notebookTools.activeCell;if(h==null)return;this._updatingMetadata=true;const u={};const p={};for(let[m,g]of Object.entries(e)){if(!this.metadataKeys.includes(m))continue;if(((n=this._metaInformation[m])===null||n===void 0?void 0:n.level)==="notebook"&&this._notebookModelNull)continue;if(((i=this._metaInformation[m])===null||i===void 0?void 0:i.cellTypes)&&!((o=(s=this._metaInformation[m])===null||s===void 0?void 0:s.cellTypes)===null||o===void 0?void 0:o.includes(h.model.type))){continue}let e;let t;if(((r=this._metaInformation[m])===null||r===void 0?void 0:r.level)==="notebook"){e=c.model.metadata;t=p}else{e=h.model.metadata;t=u}let v=m.replace(/^\/+/,"").replace(/\/+$/,"").split("/");let _=v[0];if(_==undefined)continue;let b=g!==undefined&&(((l=(a=this._metaInformation[m])===null||a===void 0?void 0:a.writeDefault)!==null&&l!==void 0?l:true)||g!==((d=this._metaInformation[m])===null||d===void 0?void 0:d.default));if(v.length==1){if(b)t[_]=g;else t[_]=undefined;continue}let y=v.slice(1,-1);let w=v[v.length-1];if(!(_ in t)){t[_]=e[_]}if(t[_]===undefined)t[_]={};let C=t[_];let x=true;for(let n of y){if(!(n in C)){if(!b){x=false;break}else C[n]={}}C=C[n]}if(x){if(!b)delete C[w];else C[w]=g}if(!b){t[_]=f.deleteEmptyNested(t[_],v.slice(1));if(!Object.keys(t[_]).length)t[_]=undefined}}for(let[m,g]of Object.entries(u)){if(g===undefined)h.model.deleteMetadata(m);else h.model.setMetadata(m,g)}if(!this._notebookModelNull){for(let[e,t]of Object.entries(p)){if(t===undefined)c.model.deleteMetadata(e);else c.model.setMetadata(e,t)}}this._updatingMetadata=false;if(t){this._update()}};this._notebookModelNull=false;this._metadataSchema=e.metadataSchema;this._metaInformation=e.metaInformation;this._uiSchema=e.uiSchema||{};this._pluginId=e.pluginId;this._showModified=e.showModified||false;this.translator=e.translator||u.nullTranslator;this._trans=this.translator.load("jupyterlab");this._updatingMetadata=false;const t=this.layout=new m.SingletonLayout;const n=document.createElement("div");const i=document.createElement("div");i.textContent=this._trans.__("No metadata.");i.className="jp-MetadataForm-placeholderContent";n.appendChild(i);this._placeholder=new m.Widget({node:n});this._placeholder.addClass("jp-MetadataForm-placeholder");t.widget=this._placeholder}get form(){return this._form}get metadataKeys(){var e;const t=[];for(let n of Object.keys(this._metadataSchema.properties)){t.push(n)}(e=this._metadataSchema.allOf)===null||e===void 0?void 0:e.forEach((e=>{if(e.then!==undefined){if(e.then.properties!==undefined){let n=e.then.properties;for(let e of Object.keys(n)){if(!t.includes(e))t.push(e)}}}if(e.else!==undefined){if(e.else.properties!==undefined){let n=e.else.properties;for(let e of Object.keys(n)){if(!t.includes(e))t.push(e)}}}}));return t}getProperties(e){return p.JSONExt.deepCopy(this._metadataSchema.properties[e])||null}setProperties(e,t){Object.entries(t).forEach((([t,n])=>{this._metadataSchema.properties[e][t]=n}))}setContent(e){const t=this.layout;if(t.widget){t.widget.removeClass("jp-MetadataForm-content");t.removeWidget(t.widget)}if(!e){e=this._placeholder}e.addClass("jp-MetadataForm-content");t.widget=e}buildWidget(e){this._form=new d(e);this._form.addClass("jp-MetadataForm");this.setContent(this._form)}onAfterShow(e){this._update()}onActiveCellChanged(e){if(this.isVisible)this._update()}onActiveCellMetadataChanged(e){if(!this._updatingMetadata&&this.isVisible)this._update()}onActiveNotebookPanelChanged(e){const t=this.notebookTools.activeNotebookPanel;this._notebookModelNull=t===null||t.model===null;if(!this._updatingMetadata&&this.isVisible)this._update()}onActiveNotebookPanelMetadataChanged(e){if(!this._updatingMetadata&&this.isVisible)this._update()}_update(){var e,t,n,i,s;const o=this.notebookTools.activeNotebookPanel;const r=this.notebookTools.activeCell;if(r==undefined)return;const a=p.JSONExt.deepCopy(this._metadataSchema);const l={};for(let d of Object.keys(this._metadataSchema.properties||p.JSONExt.emptyObject)){if(((e=this._metaInformation[d])===null||e===void 0?void 0:e.level)==="notebook"&&this._notebookModelNull){delete a.properties[d];continue}if(((t=this._metaInformation[d])===null||t===void 0?void 0:t.cellTypes)&&!((i=(n=this._metaInformation[d])===null||n===void 0?void 0:n.cellTypes)===null||i===void 0?void 0:i.includes(r.model.type))){delete a.properties[d];continue}let c;let h=d.replace(/^\/+/,"").replace(/\/+$/,"").split("/");if(((s=this._metaInformation[d])===null||s===void 0?void 0:s.level)==="notebook"){c=o.model.metadata}else{c=r.model.metadata}let u=true;for(let e of h){if(e in c)c=c[e];else{u=false;break}}if(u)l[d]=c}this.buildWidget({properties:a,settings:new h.BaseSettings({schema:this._metadataSchema}),uiSchema:this._uiSchema,translator:this.translator||null,formData:l,metadataFormWidget:this,showModified:this._showModified,pluginId:this._pluginId})}}var f;(function(e){function t(e,n){let i=n.shift();if(i!==undefined&&i in e){if(Object.keys(e[i]).length)e[i]=t(e[i],n);if(!Object.keys(e[i]).length)delete e[i]}return e}e.deleteEmptyNested=t})(f||(f={}));class v{constructor(){this._items={}}add(e,t){if(!this._items[e]){this._items[e]=t}else{console.warn(`A MetadataformWidget is already registered with id ${e}`)}}get(e){if(this._items[e]){return this._items[e]}else{console.warn(`There is no MetadataformWidget registered with id ${e}`)}}}const _=new p.Token("@jupyterlab/metadataform:IMetadataFormProvider",`A service to register new metadata editor widgets.`)},66458:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(79536);var r=n(88164);var a=n(93379);var l=n.n(a);var d=n(7795);var c=n.n(d);var h=n(90569);var u=n.n(h);var p=n(3565);var m=n.n(p);var g=n(19216);var f=n.n(g);var v=n(44589);var _=n.n(v);var b=n(71741);var y={};y.styleTagTransform=_();y.setAttributes=m();y.insert=u().bind(null,"head");y.domAPI=c();y.insertStyleElement=f();var w=l()(b.Z,y);const C=b.Z&&b.Z.locals?b.Z.locals:undefined},42302:(e,t,n)=>{"use strict";n.r(t);n.d(t,{MAJOR_VERSION:()=>o,MINOR_VERSION:()=>r,isCode:()=>c,isDisplayData:()=>u,isDisplayUpdate:()=>p,isError:()=>g,isExecuteResult:()=>h,isMarkdown:()=>d,isRaw:()=>l,isStream:()=>m,validateMimeValue:()=>a});var i=n(5596);var s=n.n(i);const o=4;const r=4;function a(e,t){const n=/^application\/.+\+json$/;const s=e==="application/json"||n.test(e);const o=e=>Object.prototype.toString.call(e)==="[object String]";if(Array.isArray(t)){if(s){return false}let e=true;t.forEach((t=>{if(!o(t)){e=false}}));return e}if(o(t)){return!s}if(!s){return false}return i.JSONExt.isObject(t)}function l(e){return e.cell_type==="raw"}function d(e){return e.cell_type==="markdown"}function c(e){return e.cell_type==="code"}function h(e){return e.output_type==="execute_result"}function u(e){return e.output_type==="display_data"}function p(e){return e.output_type==="update_display_data"}function m(e){return e.output_type==="stream"}function g(e){return e.output_type==="error"}},38091:(e,t,n)=>{"use strict";n.r(t);n.d(t,{commandEditItem:()=>ne,default:()=>ye,executionIndicator:()=>ie,exportPlugin:()=>se,notebookTrustItem:()=>oe});var i=n(44906);var s=n(90848);var o=n(279);var r=n(47391);var a=n(22873);var l=n(96912);var d=n(83408);var c=n(1071);var h=n(7891);var u=n(15645);var p=n(30796);var m=n(9036);var g=n(75900);var f=n(46054);var v=n(59447);var _=n(74202);var b=n(28291);var y=n(33112);var w=n(51997);var C=n(9682);var x=n(88478);var S=n(85147);var k=n(36168);var j=n(52435);var M=n(58740);var E=n(5596);var I=n(26512);var T=n(28821);var D=n(85448);var L=n(47215);var P=n(74513);const A={activate:R,id:"@jupyterlab/notebook-extension:log-output",description:"Adds cell outputs log to the application logger.",requires:[_.INotebookTracker],optional:[L.ILoggerRegistry],autoStart:true};function R(e,t,n){if(!n){return}function i(e){function t(t,i,s){if(P.KernelMessage.isDisplayDataMsg(t)||P.KernelMessage.isStreamMsg(t)||P.KernelMessage.isErrorMsg(t)||P.KernelMessage.isExecuteResultMsg(t)){const o=n.getLogger(e.context.path);o.rendermime=e.content.rendermime;const r={...t.content,output_type:t.header.msg_type};let a=i;if(P.KernelMessage.isErrorMsg(t)||P.KernelMessage.isStreamMsg(t)&&t.content.name==="stderr"){a=s}o.log({type:"output",data:r,level:a})}}e.context.sessionContext.iopubMessage.connect(((e,n)=>t(n,"info","info")));e.context.sessionContext.unhandledMessage.connect(((e,n)=>t(n,"warning","error")))}t.forEach((e=>i(e)));t.widgetAdded.connect(((e,t)=>i(t)))}var N=n(28416);var O=n.n(N);var B=n(95905);const F="jp-ActiveCellTool";const z="jp-ActiveCellTool-Content";const H="jp-ActiveCellTool-CellContent";class W extends _.NotebookTools.Tool{constructor(e){super();const{languages:t}=e;this._tracker=e.tracker;this.addClass(F);this.layout=new D.PanelLayout;this._inputPrompt=new o.InputPrompt;this.layout.addWidget(this._inputPrompt);const n=document.createElement("div");n.classList.add(z);const i=n.appendChild(document.createElement("div"));const s=i.appendChild(document.createElement("pre"));i.className=H;this._editorEl=s;this.layout.addWidget(new D.Widget({node:n}));const r=async()=>{var e,n;this._editorEl.innerHTML="";if(((e=this._cellModel)===null||e===void 0?void 0:e.type)==="code"){this._inputPrompt.executionCount=`${(n=this._cellModel.executionCount)!==null&&n!==void 0?n:""}`;this._inputPrompt.show()}else{this._inputPrompt.executionCount=null;this._inputPrompt.hide()}if(this._cellModel){await t.highlight(this._cellModel.sharedModel.getSource().split("\n")[0],t.findByMIME(this._cellModel.mimeType),this._editorEl)}};this._refreshDebouncer=new B.Debouncer(r,150)}render(e){var t,n;const i=this._tracker.activeCell;if(i)this._cellModel=(i===null||i===void 0?void 0:i.model)||null;((t=this._cellModel)===null||t===void 0?void 0:t.sharedModel).changed.connect(this.refresh,this);(n=this._cellModel)===null||n===void 0?void 0:n.mimeTypeChanged.connect(this.refresh,this);this.refresh().then((()=>undefined)).catch((()=>undefined));return O().createElement("div",{ref:e=>e===null||e===void 0?void 0:e.appendChild(this.node)})}async refresh(){await this._refreshDebouncer.invoke()}}var V=n(9154);const U="jp-CellMetadataEditor";const $="jp-NotebookMetadataEditor";class q extends _.NotebookTools.MetadataEditorTool{constructor(e){super(e);this._tracker=e.tracker;this.editor.editorHostNode.addEventListener("blur",this.editor,true);this.editor.editorHostNode.addEventListener("click",this.editor,true);this.editor.headerNode.addEventListener("click",this.editor)}_onSourceChanged(){var e;if(this.editor.source){(e=this._tracker.activeCell)===null||e===void 0?void 0:e.model.sharedModel.setMetadata(this.editor.source.toJSON())}}render(e){var t;const n=this._tracker.activeCell;this.editor.source=n?new V.ObservableJSON({values:n.model.metadata}):null;(t=this.editor.source)===null||t===void 0?void 0:t.changed.connect(this._onSourceChanged,this);return O().createElement("div",{className:U},O().createElement("div",{ref:e=>e===null||e===void 0?void 0:e.appendChild(this.node)}))}}class K extends _.NotebookTools.MetadataEditorTool{constructor(e){super(e);this._tracker=e.tracker;this.editor.editorHostNode.addEventListener("blur",this.editor,true);this.editor.editorHostNode.addEventListener("click",this.editor,true);this.editor.headerNode.addEventListener("click",this.editor)}_onSourceChanged(){var e,t;if(this.editor.source){(t=(e=this._tracker.currentWidget)===null||e===void 0?void 0:e.model)===null||t===void 0?void 0:t.sharedModel.setMetadata(this.editor.source.toJSON())}}render(e){var t,n;const i=this._tracker.currentWidget;this.editor.source=i?new V.ObservableJSON({values:(t=i.model)===null||t===void 0?void 0:t.metadata}):null;(n=this.editor.source)===null||n===void 0?void 0:n.changed.connect(this._onSourceChanged,this);return O().createElement("div",{className:$},O().createElement("div",{ref:e=>e===null||e===void 0?void 0:e.appendChild(this.node)}))}}var J;(function(e){e.createNew="notebook:create-new";e.interrupt="notebook:interrupt-kernel";e.restart="notebook:restart-kernel";e.restartClear="notebook:restart-clear-output";e.restartAndRunToSelected="notebook:restart-and-run-to-selected";e.restartRunAll="notebook:restart-run-all";e.reconnectToKernel="notebook:reconnect-to-kernel";e.changeKernel="notebook:change-kernel";e.getKernel="notebook:get-kernel";e.createConsole="notebook:create-console";e.createOutputView="notebook:create-output-view";e.clearAllOutputs="notebook:clear-all-cell-outputs";e.shutdown="notebook:shutdown-kernel";e.closeAndShutdown="notebook:close-and-shutdown";e.trust="notebook:trust";e.exportToFormat="notebook:export-to-format";e.run="notebook:run-cell";e.runAndAdvance="notebook:run-cell-and-select-next";e.runAndInsert="notebook:run-cell-and-insert-below";e.runInConsole="notebook:run-in-console";e.runAll="notebook:run-all-cells";e.runAllAbove="notebook:run-all-above";e.runAllBelow="notebook:run-all-below";e.renderAllMarkdown="notebook:render-all-markdown";e.toCode="notebook:change-cell-to-code";e.toMarkdown="notebook:change-cell-to-markdown";e.toRaw="notebook:change-cell-to-raw";e.cut="notebook:cut-cell";e.copy="notebook:copy-cell";e.pasteAbove="notebook:paste-cell-above";e.pasteBelow="notebook:paste-cell-below";e.duplicateBelow="notebook:duplicate-below";e.pasteAndReplace="notebook:paste-and-replace-cell";e.moveUp="notebook:move-cell-up";e.moveDown="notebook:move-cell-down";e.clearOutputs="notebook:clear-cell-output";e.deleteCell="notebook:delete-cell";e.insertAbove="notebook:insert-cell-above";e.insertBelow="notebook:insert-cell-below";e.selectAbove="notebook:move-cursor-up";e.selectBelow="notebook:move-cursor-down";e.selectHeadingAboveOrCollapse="notebook:move-cursor-heading-above-or-collapse";e.selectHeadingBelowOrExpand="notebook:move-cursor-heading-below-or-expand";e.insertHeadingAbove="notebook:insert-heading-above";e.insertHeadingBelow="notebook:insert-heading-below";e.extendAbove="notebook:extend-marked-cells-above";e.extendTop="notebook:extend-marked-cells-top";e.extendBelow="notebook:extend-marked-cells-below";e.extendBottom="notebook:extend-marked-cells-bottom";e.selectAll="notebook:select-all";e.deselectAll="notebook:deselect-all";e.editMode="notebook:enter-edit-mode";e.merge="notebook:merge-cells";e.mergeAbove="notebook:merge-cell-above";e.mergeBelow="notebook:merge-cell-below";e.split="notebook:split-cell-at-cursor";e.commandMode="notebook:enter-command-mode";e.toggleAllLines="notebook:toggle-all-cell-line-numbers";e.undoCellAction="notebook:undo-cell-action";e.redoCellAction="notebook:redo-cell-action";e.redo="notebook:redo";e.undo="notebook:undo";e.markdown1="notebook:change-cell-to-heading-1";e.markdown2="notebook:change-cell-to-heading-2";e.markdown3="notebook:change-cell-to-heading-3";e.markdown4="notebook:change-cell-to-heading-4";e.markdown5="notebook:change-cell-to-heading-5";e.markdown6="notebook:change-cell-to-heading-6";e.hideCode="notebook:hide-cell-code";e.showCode="notebook:show-cell-code";e.hideAllCode="notebook:hide-all-cell-code";e.showAllCode="notebook:show-all-cell-code";e.hideOutput="notebook:hide-cell-outputs";e.showOutput="notebook:show-cell-outputs";e.hideAllOutputs="notebook:hide-all-cell-outputs";e.showAllOutputs="notebook:show-all-cell-outputs";e.toggleRenderSideBySideCurrentNotebook="notebook:toggle-render-side-by-side-current";e.setSideBySideRatio="notebook:set-side-by-side-ratio";e.enableOutputScrolling="notebook:enable-output-scrolling";e.disableOutputScrolling="notebook:disable-output-scrolling";e.selectLastRunCell="notebook:select-last-run-cell";e.replaceSelection="notebook:replace-selection";e.autoClosingBrackets="notebook:toggle-autoclosing-brackets";e.toggleCollapseCmd="notebook:toggle-heading-collapse";e.collapseAllCmd="notebook:collapse-all-headings";e.expandAllCmd="notebook:expand-all-headings";e.copyToClipboard="notebook:copy-to-clipboard";e.invokeCompleter="completer:invoke-notebook";e.selectCompleter="completer:select-notebook";e.tocRunCells="toc:run-cells"})(J||(J={}));const Z="Notebook";const G=["notebook","python","custom"];const Y="@jupyterlab/notebook-extension:panel";const X="jp-NotebookExtension-sideBySideMargins";const Q={id:"@jupyterlab/notebook-extension:tracker",description:"Provides the notebook widget tracker.",provides:_.INotebookTracker,requires:[_.INotebookWidgetFactory,l.IEditorExtensionRegistry],optional:[s.ICommandPalette,p.IDefaultFileBrowser,m.ILauncher,i.ILayoutRestorer,f.IMainMenu,i.IRouter,w.ISettingRegistry,s.ISessionContextDialogs,k.ITranslator,j.IFormRendererRegistry],activate:je,autoStart:true};const ee={id:"@jupyterlab/notebook-extension:factory",description:"Provides the notebook cell factory.",provides:_.NotebookPanel.IContentFactory,requires:[r.IEditorServices],autoStart:true,activate:(e,t)=>{const n=t.factoryService.newInlineEditor;return new _.NotebookPanel.ContentFactory({editorFactory:n})}};const te={activate:we,provides:_.INotebookTools,id:"@jupyterlab/notebook-extension:tools",description:"Provides the notebook tools.",autoStart:true,requires:[_.INotebookTracker,r.IEditorServices,l.IEditorLanguageRegistry,C.IStateDB,k.ITranslator],optional:[b.IPropertyInspectorProvider]};const ne={id:"@jupyterlab/notebook-extension:mode-status",description:"Adds a notebook mode status widget.",autoStart:true,requires:[_.INotebookTracker,k.ITranslator],optional:[x.IStatusBar],activate:(e,t,n,i)=>{if(!i){return}const{shell:s}=e;const o=new _.CommandEditStatus(n);t.currentChanged.connect((()=>{const e=t.currentWidget;o.model.notebook=e&&e.content}));i.registerStatusItem("@jupyterlab/notebook-extension:mode-status",{item:o,align:"right",rank:4,isActive:()=>!!s.currentWidget&&!!t.currentWidget&&s.currentWidget===t.currentWidget})}};const ie={id:"@jupyterlab/notebook-extension:execution-indicator",description:"Adds a notebook execution status widget.",autoStart:true,requires:[_.INotebookTracker,i.ILabShell,k.ITranslator],optional:[x.IStatusBar,w.ISettingRegistry],activate:(e,t,n,i,s,o)=>{let r;let a;let l;const d=e=>{var o,d;let{showOnToolBar:c,showProgress:h}=e;if(!c){if(!s){return}if(!(r===null||r===void 0?void 0:r.model)){r=new _.ExecutionIndicator(i);a=(e,n)=>{const{newValue:i}=n;if(i&&t.has(i)){const e=i;r.model.attachNotebook({content:e.content,context:e.sessionContext})}};l=s.registerStatusItem("@jupyterlab/notebook-extension:execution-indicator",{item:r,align:"left",rank:3,isActive:()=>{const e=n.currentWidget;return!!e&&t.has(e)}});r.model.attachNotebook({content:(o=t.currentWidget)===null||o===void 0?void 0:o.content,context:(d=t.currentWidget)===null||d===void 0?void 0:d.sessionContext});n.currentChanged.connect(a);r.disposed.connect((()=>{n.currentChanged.disconnect(a)}))}r.model.displayOption={showOnToolBar:c,showProgress:h}}else{if(l){n.currentChanged.disconnect(a);l.dispose()}}};if(o){const t=o.load(Q.id);Promise.all([t,e.restored]).then((([e])=>{d(_.ExecutionIndicator.getSettingValue(e));e.changed.connect((e=>d(_.ExecutionIndicator.getSettingValue(e))))})).catch((e=>{console.error(e.message)}))}}};const se={id:"@jupyterlab/notebook-extension:export",description:"Adds the export notebook commands.",autoStart:true,requires:[k.ITranslator,_.INotebookTracker],optional:[f.IMainMenu,s.ICommandPalette],activate:(e,t,n,i,s)=>{var o;const r=t.load("jupyterlab");const{commands:l,shell:d}=e;const c=e.serviceManager;const h=()=>Pe.isEnabled(d,n);l.addCommand(J.exportToFormat,{label:e=>{if(e.label===undefined){return r.__("Save and Export Notebook to the given `format`.")}const t=e["label"];return e["isPalette"]?r.__("Save and Export Notebook: %1",t):t},execute:e=>{const t=Ie(n,d,e);if(!t){return}const i=a.PageConfig.getNBConvertURL({format:e["format"],download:true,path:t.context.path});const{context:s}=t;if(s.model.dirty&&!s.model.readOnly){return s.save().then((()=>{window.open(i,"_blank","noopener")}))}return new Promise((e=>{window.open(i,"_blank","noopener");e(undefined)}))},isEnabled:h});let u;if(i){u=(o=i.fileMenu.items.find((e=>{var t;return e.type==="submenu"&&((t=e.submenu)===null||t===void 0?void 0:t.id)==="jp-mainmenu-file-notebookexport"})))===null||o===void 0?void 0:o.submenu}let p=false;const m=async()=>{if(p){return}n.widgetAdded.disconnect(m);p=true;const e=await c.nbconvert.getExportFormats(false);if(!e){return}const i=Pe.getFormatLabels(t);const o=Object.keys(e);o.forEach((function(e){const t=r.__(e[0].toUpperCase()+e.substr(1));const n=i[e]?i[e]:t;let o={format:e,label:n,isPalette:false};if(G.indexOf(e)===-1){if(u){u.addItem({command:J.exportToFormat,args:o})}if(s){o={format:e,label:n,isPalette:true};const t=r.__("Notebook Operations");s.addItem({command:J.exportToFormat,category:t,args:o})}}}))};n.widgetAdded.connect(m)}};const oe={id:"@jupyterlab/notebook-extension:trust-status",description:"Adds the notebook trusted status widget.",autoStart:true,requires:[_.INotebookTracker,k.ITranslator],optional:[x.IStatusBar],activate:(e,t,n,i)=>{if(!i){return}const{shell:s}=e;const o=new _.NotebookTrustStatus(n);t.currentChanged.connect((()=>{const e=t.currentWidget;o.model.notebook=e&&e.content}));i.registerStatusItem("@jupyterlab/notebook-extension:trust-status",{item:o,align:"right",rank:3,isActive:()=>!!s.currentWidget&&!!t.currentWidget&&s.currentWidget===t.currentWidget})}};const re={id:"@jupyterlab/notebook-extension:widget-factory",description:"Provides the notebook widget factory.",provides:_.INotebookWidgetFactory,requires:[_.NotebookPanel.IContentFactory,r.IEditorServices,y.IRenderMimeRegistry,s.IToolbarWidgetRegistry],optional:[w.ISettingRegistry,s.ISessionContextDialogs,k.ITranslator],activate:Ce,autoStart:true};const ae={id:"@jupyterlab/notebook-extension:cloned-outputs",description:"Adds the clone output feature.",requires:[c.IDocumentManager,_.INotebookTracker,k.ITranslator],optional:[i.ILayoutRestorer],activate:xe,autoStart:true};const le={id:"@jupyterlab/notebook-extension:code-console",description:"Adds the notebook code consoles features.",requires:[_.INotebookTracker,k.ITranslator],activate:Se,autoStart:true};const de={id:"@jupyterlab/notebook-extension:copy-output",description:"Adds the copy cell outputs feature.",activate:ke,requires:[k.ITranslator,_.INotebookTracker],autoStart:true};const ce={id:"@jupyterlab/notebook-extension:kernel-status",description:"Adds the notebook kernel status.",activate:(e,t,n)=>{const i=e=>{let n=null;if(e&&t.has(e)){return e.sessionContext}return n};n.addSessionProvider(i)},requires:[_.INotebookTracker,s.IKernelStatusModel],autoStart:true};const he={id:"@jupyterlab/notebook-extension:cursor-position",description:"Adds the notebook cursor position status.",activate:(e,t,n)=>{let i=null;const s=async e=>{let s=null;if(e!==i){i===null||i===void 0?void 0:i.content.activeCellChanged.disconnect(n.update);i=null;if(e&&t.has(e)){e.content.activeCellChanged.connect(n.update);const t=e.content.activeCell;s=null;if(t){await t.ready;s=t.editor}i=e}}else if(e){const t=e.content.activeCell;s=null;if(t){await t.ready;s=t.editor}}return s};n.addEditorProvider(s)},requires:[_.INotebookTracker,r.IPositionModel],autoStart:true};const ue={id:"@jupyterlab/notebook-extension:completer",description:"Adds the code completion capability to notebooks.",requires:[_.INotebookTracker],optional:[d.ICompletionProviderManager,k.ITranslator,s.ISanitizer],activate:Me,autoStart:true};const pe={id:"@jupyterlab/notebook-extension:search",description:"Adds search capability to notebooks.",requires:[u.ISearchProviderRegistry],autoStart:true,activate:(e,t)=>{t.add("jp-notebookSearchProvider",_.NotebookSearchProvider)}};const me={id:"@jupyterlab/notebook-extension:toc",description:"Adds table of content capability to the notebooks",requires:[_.INotebookTracker,S.ITableOfContentsRegistry,s.ISanitizer],optional:[y.IMarkdownParser],autoStart:true,activate:(e,t,n,i,s)=>{n.add(new _.NotebookToCFactory(t,s,i))}};const ge={id:"@jupyterlab/notebook-extension:language-server",description:"Adds language server capability to the notebooks.",requires:[_.INotebookTracker,g.ILSPDocumentConnectionManager,g.ILSPFeatureManager,g.ILSPCodeExtractorsManager],activate:Ee,autoStart:true};const fe={id:"@jupyterlab/notebook-extension:update-raw-mimetype",description:"Adds metadata form editor for raw cell mimetype.",autoStart:true,requires:[_.INotebookTracker,v.IMetadataFormProvider,k.ITranslator],activate:(e,t,n,i)=>{const s=i.load("jupyterlab");let o=false;async function r(){if(o){return}if(!n.get("commonToolsSection")){return}const a=n.get("commonToolsSection").getProperties("/raw_mimetype");if(!a){return}t.widgetAdded.disconnect(r);o=true;const l=e.serviceManager;const d=await l.nbconvert.getExportFormats(false);if(!d){return}const c=Object.keys(d);const h=Pe.getFormatLabels(i);c.forEach((function(e){var t;const n=((t=a.oneOf)===null||t===void 0?void 0:t.filter((t=>t.const===e)).length)>0;if(!n){const t=s.__(e[0].toUpperCase()+e.substr(1));const n=h[e]?h[e]:t;const i=d[e].output_mimetype;a.oneOf.push({const:i,title:n})}}));n.get("commonToolsSection").setProperties("/raw_mimetype",a)}t.widgetAdded.connect(r)}};const ve={id:"@jupyterlab/notebook-extension:metadata-editor",description:"Adds metadata form for full metadata editor.",autoStart:true,requires:[_.INotebookTracker,r.IEditorServices,j.IFormRendererRegistry],optional:[k.ITranslator],activate:(e,t,n,i,s)=>{const o=e=>n.factoryService.newInlineEditor(e);const r={fieldRenderer:e=>new q({editorFactory:o,tracker:t,label:"Cell metadata",translator:s}).render(e)};i.addRenderer("@jupyterlab/notebook-extension:metadata-editor.cell-metadata",r);const a={fieldRenderer:e=>new K({editorFactory:o,tracker:t,label:"Notebook metadata",translator:s}).render(e)};i.addRenderer("@jupyterlab/notebook-extension:metadata-editor.notebook-metadata",a)}};const _e={id:"@jupyterlab/notebook-extension:active-cell-tool",description:"Adds active cell field in the metadata editor tab.",autoStart:true,requires:[_.INotebookTracker,j.IFormRendererRegistry,l.IEditorLanguageRegistry],activate:(e,t,n,i)=>{const s={fieldRenderer:e=>new W({tracker:t,languages:i}).render(e)};n.addRenderer("@jupyterlab/notebook-extension:active-cell-tool.renderer",s)}};const be=[ee,Q,ie,se,te,ne,oe,re,A,ae,le,de,ce,he,ue,pe,me,ge,fe,ve,_e];const ye=be;function we(e,t,n,i,s,o,r){const a=o.load("jupyterlab");const l="notebook-tools";const d=new _.NotebookTools({tracker:t,translator:o});const c=(e,t)=>{switch(t.type){case"activate-request":void s.save(l,{open:true});break;case"after-hide":case"close-request":void s.remove(l);break;default:break}return true};d.title.icon=j.buildIcon;d.title.caption=a.__("Notebook Tools");d.id=l;T.MessageLoop.installMessageHook(d,c);if(r){t.widgetAdded.connect(((e,t)=>{const n=r.register(t);n.render(d)}))}return d}function Ce(e,t,n,i,o,r,l,d){const c=d!==null&&d!==void 0?d:k.nullTranslator;const u=l!==null&&l!==void 0?l:new s.SessionContextDialogs({translator:c});const p=a.PageConfig.getOption("notebookStartsKernel");const m=p===""||p.toLowerCase()==="true";const{commands:g}=e;let f;o.addFactory(Z,"save",(e=>h.ToolbarItems.createSaveButton(g,e.context.fileChanged)));o.addFactory(Z,"cellType",(e=>_.ToolbarItems.createCellTypeItem(e,c)));o.addFactory(Z,"kernelName",(e=>s.Toolbar.createKernelNameItem(e.sessionContext,u,c)));o.addFactory(Z,"executionProgress",(e=>{const t=r===null||r===void 0?void 0:r.load(Q.id);const n=_.ExecutionIndicator.createExecutionIndicatorItem(e,c,t);void(t===null||t===void 0?void 0:t.then((t=>{e.disposed.connect((()=>{t.dispose()}))})));return n}));if(r){f=(0,s.createToolbarFactory)(o,r,Z,Y,c)}const v=c.load("jupyterlab");const b=new _.NotebookWidgetFactory({name:Z,label:v.__("Notebook"),fileTypes:["notebook"],modelName:"notebook",defaultFor:["notebook"],preferKernel:m,canStartKernel:true,rendermime:i,contentFactory:t,editorConfig:_.StaticNotebook.defaultEditorConfig,notebookConfig:_.StaticNotebook.defaultNotebookConfig,mimeTypeService:n.mimeTypeService,toolbarFactory:f,translator:c});e.docRegistry.addWidgetFactory(b);return b}function xe(e,t,n,i,o){const r=i.load("jupyterlab");const a=new s.WidgetTracker({namespace:"cloned-outputs"});if(o){void o.restore(a,{command:J.createOutputView,args:e=>({path:e.content.path,index:e.content.index}),name:e=>`${e.content.path}:${e.content.index}`,when:n.restored})}const{commands:l,shell:d}=e;const c=()=>Pe.isEnabledAndSingleSelected(d,n);l.addCommand(J.createOutputView,{label:r.__("Create New View for Cell Output"),execute:async e=>{var o;let r;let l;const d=e.path;let c=e.index;if(d&&c!==undefined&&c!==null){l=t.findWidget(d,Z);if(!l){return}}else{l=n.currentWidget;if(!l){return}r=l.content.activeCell;c=l.content.activeCellIndex}const h=new Pe.ClonedOutputArea({notebook:l,cell:r,index:c,translator:i});const u=new s.MainAreaWidget({content:h});l.context.addSibling(u,{ref:l.id,mode:"split-bottom",type:"Cloned Output"});const p=()=>{void a.save(u)};l.context.pathChanged.connect(p);(o=l.context.model)===null||o===void 0?void 0:o.cells.changed.connect(p);void a.add(u);l.content.disposed.connect((()=>{var e;l.context.pathChanged.disconnect(p);(e=l.context.model)===null||e===void 0?void 0:e.cells.changed.disconnect(p);u.dispose()}))},isEnabled:c})}function Se(e,t,n){const i=n.load("jupyterlab");const{commands:s,shell:o}=e;const r=()=>Pe.isEnabled(o,t);s.addCommand(J.createConsole,{label:i.__("New Console for Notebook"),execute:e=>{const n=t.currentWidget;if(!n){return}return Pe.createConsole(s,n,e["activate"])},isEnabled:r});s.addCommand(J.runInConsole,{label:i.__("Run Selected Text or Current Line in Console"),execute:async e=>{var n,i;const o=t.currentWidget;if(!o){return}const{context:r,content:a}=o;const l=a.activeCell;const d=l===null||l===void 0?void 0:l.model.metadata;const c=r.path;if(!l||l.model.type!=="code"){return}let h;const u=l.editor;if(!u){return}const p=u.getSelection();const{start:m,end:g}=p;const f=m.column!==g.column||m.line!==g.line;if(f){const e=u.getOffsetAt(p.start);const t=u.getOffsetAt(p.end);h=u.model.sharedModel.getSource().substring(e,t)}else{const e=u.getCursorPosition();const t=u.model.sharedModel.getSource().split("\n");let s=p.start.line;while(s<u.lineCount&&!t[s].replace(/\s/g,"").length){s+=1}let r=s>0;let a=0;let l=a+1;while(true){h=t.slice(a,l).join("\n");const d=await((i=(n=o.context.sessionContext.session)===null||n===void 0?void 0:n.kernel)===null||i===void 0?void 0:i.requestIsComplete({code:h+"\n\n"}));if((d===null||d===void 0?void 0:d.content.status)==="complete"){if(s<l){while(l<u.lineCount&&!t[l].replace(/\s/g,"").length){l+=1}u.setCursorPosition({line:l,column:e.column});break}else{a=l;l=a+1}}else if(l<u.lineCount){l+=1}else if(r){a=s;l=s+1;r=false}else{h=t[s];while(s+1<u.lineCount&&!t[s+1].replace(/\s/g,"").length){s+=1}u.setCursorPosition({line:s+1,column:e.column});break}}}if(!h){return}await s.execute("console:open",{activate:false,insertMode:"split-bottom",path:c});await s.execute("console:inject",{activate:false,code:h,path:c,metadata:d})},isEnabled:r})}function ke(e,t,n){const i=t.load("jupyterlab");function s(e){const t=window.getSelection();if(t==null){return}const n=[];for(let s=0;s<t.rangeCount;++s){n[s]=t.getRangeAt(s).cloneRange()}const i=document.createRange();i.selectNodeContents(e);t.removeAllRanges();t.addRange(i);document.execCommand("copy");t.removeAllRanges();n.forEach((e=>t.addRange(e)))}e.commands.addCommand(J.copyToClipboard,{label:i.__("Copy Output to Clipboard"),execute:e=>{var t;const i=(t=n.currentWidget)===null||t===void 0?void 0:t.content.activeCell;if(i==null){return}const o=i.outputArea.outputTracker.currentWidget;if(o==null){return}const r=o.node.getElementsByClassName("jp-OutputArea-output");if(r.length>0){const e=r[0];s(e)}}});e.contextMenu.addItem({command:J.copyToClipboard,selector:".jp-OutputArea-child",rank:0})}function je(e,t,n,i,o,r,a,l,d,c,h,u,p){const m=u!==null&&u!==void 0?u:k.nullTranslator;const g=h!==null&&h!==void 0?h:new s.SessionContextDialogs({translator:m});const f=m.load("jupyterlab");const v=e.serviceManager;const{commands:b,shell:y}=e;const w=new _.NotebookTracker({namespace:"notebook"});function C(e,t){if(t.hash&&w.currentWidget){w.currentWidget.setFragment(t.hash)}}d===null||d===void 0?void 0:d.routed.connect(C);const x=()=>Pe.isEnabled(y,w);const S=e=>document.documentElement.style.setProperty("--jp-side-by-side-output-size",`${e}fr`);const M=c?c.load(Q.id):Promise.reject(new Error(`No setting registry for ${Q.id}`));M.then((e=>{R(e);e.changed.connect((()=>{R(e)}));const t=(t,n)=>{const{newValue:i,oldValue:s}=n;const o=i.autoStartDefault;if(typeof o==="boolean"&&o!==s.autoStartDefault){if(o!==e.get("autoStartDefaultKernel").composite)e.set("autoStartDefaultKernel",o).catch((t=>{console.error(`Failed to set ${e.id}.autoStartDefaultKernel`)}))}};const i=new WeakSet;const o=e=>{const n=e.context.sessionContext;if(!n.isDisposed&&!i.has(n)){i.add(n);n.kernelPreferenceChanged.connect(t);n.disposed.connect((()=>{n.kernelPreferenceChanged.disconnect(t)}))}};w.forEach(o);w.widgetAdded.connect(((e,t)=>{o(t)}));b.addCommand(J.autoClosingBrackets,{execute:t=>{var n;const i=e.get("codeCellConfig").composite;const s=e.get("markdownCellConfig").composite;const o=e.get("rawCellConfig").composite;const r=i.autoClosingBrackets||s.autoClosingBrackets||o.autoClosingBrackets;const a=!!((n=t["force"])!==null&&n!==void 0?n:!r);[i.autoClosingBrackets,s.autoClosingBrackets,o.autoClosingBrackets]=[a,a,a];void e.set("codeCellConfig",i);void e.set("markdownCellConfig",s);void e.set("rawCellConfig",o)},label:f.__("Auto Close Brackets for All Notebook Cell Types"),isToggled:()=>["codeCellConfig","markdownCellConfig","rawCellConfig"].some((t=>{var i;return((i=e.get(t).composite.autoClosingBrackets)!==null&&i!==void 0?i:n.baseConfiguration["autoClosingBrackets"])===true}))});b.addCommand(J.setSideBySideRatio,{label:f.__("Set side-by-side ratio"),execute:t=>{s.InputDialog.getNumber({title:f.__("Width of the output in side-by-side mode"),value:e.get("sideBySideOutputRatio").composite}).then((t=>{S(t.value);if(t.value){void e.set("sideBySideOutputRatio",t.value)}})).catch(console.error)}})})).catch((e=>{console.warn(e.message);A({editorConfig:t.editorConfig,notebookConfig:t.notebookConfig,kernelShutdown:t.shutdownOnClose,autoStartDefault:t.autoStartDefault})}));if(p){const e=p.getRenderer("@jupyterlab/codemirror-extension:plugin.defaultConfig");if(e){p.addRenderer("@jupyterlab/notebook-extension:tracker.codeCellConfig",e);p.addRenderer("@jupyterlab/notebook-extension:tracker.markdownCellConfig",e);p.addRenderer("@jupyterlab/notebook-extension:tracker.rawCellConfig",e)}}if(a){void a.restore(w,{command:"docmanager:open",args:e=>({path:e.context.path,factory:Z}),name:e=>e.context.path,when:v.ready})}const T=e.docRegistry;const D=new _.NotebookModelFactory({disableDocumentWideUndoRedo:t.notebookConfig.disableDocumentWideUndoRedo,collaborative:true});T.addModelFactory(D);Te(e,w,m,g,x);if(i){De(i,m)}let L=0;const P=e.docRegistry.getFileType("notebook");t.widgetCreated.connect(((e,t)=>{var n,i;t.id=t.id||`notebook-${++L}`;t.title.icon=P===null||P===void 0?void 0:P.icon;t.title.iconClass=(n=P===null||P===void 0?void 0:P.iconClass)!==null&&n!==void 0?n:"";t.title.iconLabel=(i=P===null||P===void 0?void 0:P.iconLabel)!==null&&i!==void 0?i:"";t.context.pathChanged.connect((()=>{void w.save(t)}));void w.add(t)}));function A(e){w.forEach((t=>{t.setConfig(e)}))}function R(e){const n={..._.StaticNotebook.defaultEditorConfig.code,...e.get("codeCellConfig").composite};const i={..._.StaticNotebook.defaultEditorConfig.markdown,...e.get("markdownCellConfig").composite};const s={..._.StaticNotebook.defaultEditorConfig.raw,...e.get("rawCellConfig").composite};t.editorConfig={code:n,markdown:i,raw:s};t.notebookConfig={showHiddenCellsButton:e.get("showHiddenCellsButton").composite,scrollPastEnd:e.get("scrollPastEnd").composite,defaultCell:e.get("defaultCell").composite,recordTiming:e.get("recordTiming").composite,overscanCount:e.get("overscanCount").composite,inputHistoryScope:e.get("inputHistoryScope").composite,maxNumberOutputs:e.get("maxNumberOutputs").composite,showEditorForReadOnlyMarkdown:e.get("showEditorForReadOnlyMarkdown").composite,disableDocumentWideUndoRedo:!e.get("documentWideUndoRedo").composite,renderingLayout:e.get("renderingLayout").composite,sideBySideLeftMarginOverride:e.get("sideBySideLeftMarginOverride").composite,sideBySideRightMarginOverride:e.get("sideBySideRightMarginOverride").composite,sideBySideOutputRatio:e.get("sideBySideOutputRatio").composite,windowingMode:e.get("windowingMode").composite};S(t.notebookConfig.sideBySideOutputRatio);const o=`.jp-mod-sideBySide.jp-Notebook .jp-Notebook-cell {\n      margin-left: ${t.notebookConfig.sideBySideLeftMarginOverride} !important;\n      margin-right: ${t.notebookConfig.sideBySideRightMarginOverride} !important;`;const r=document.getElementById(X);if(r){r.innerText=o}else{document.head.insertAdjacentHTML("beforeend",`<style id="${X}">${o}}</style>`)}t.autoStartDefault=e.get("autoStartDefaultKernel").composite;t.shutdownOnClose=e.get("kernelShutdown").composite;D.disableDocumentWideUndoRedo=!e.get("documentWideUndoRedo").composite;A({editorConfig:t.editorConfig,notebookConfig:t.notebookConfig,kernelShutdown:t.shutdownOnClose,autoStartDefault:t.autoStartDefault})}if(l){Le(l,x)}const N=async(e,t,n)=>{const i=await b.execute("docmanager:new-untitled",{path:e,type:"notebook"});if(i!==undefined){const e=await b.execute("docmanager:open",{path:i.path,factory:Z,kernel:{id:t,name:n}});e.isUntitled=true;return e}};b.addCommand(J.createNew,{label:e=>{var t,n,i;const s=e["kernelName"]||"";if(e["isLauncher"]&&e["kernelName"]&&v.kernelspecs){return(i=(n=(t=v.kernelspecs.specs)===null||t===void 0?void 0:t.kernelspecs[s])===null||n===void 0?void 0:n.display_name)!==null&&i!==void 0?i:""}if(e["isPalette"]||e["isContextMenu"]){return f.__("New Notebook")}return f.__("Notebook")},caption:f.__("Create a new notebook"),icon:e=>e["isPalette"]?undefined:j.notebookIcon,execute:e=>{var t;const n=e["cwd"]||((t=o===null||o===void 0?void 0:o.model.path)!==null&&t!==void 0?t:"");const i=e["kernelId"]||"";const s=e["kernelName"]||"";return N(n,i,s)}});if(r){void v.ready.then((()=>{let e=null;const t=()=>{if(e){e.dispose();e=null}const t=v.kernelspecs.specs;if(!t){return}e=new I.DisposableSet;for(const n in t.kernelspecs){const i=n===t.default?0:Infinity;const s=t.kernelspecs[n];const o=s.resources["logo-svg"]||s.resources["logo-64x64"];e.add(r.add({command:J.createNew,args:{isLauncher:true,kernelName:n},category:f.__("Notebook"),rank:i,kernelIconUrl:o,metadata:{kernel:E.JSONExt.deepCopy(s.metadata||{})}}))}};t();v.kernelspecs.specsChanged.connect(t)}))}return w}function Me(e,t,n,i,o){if(!n){return}const r=(i!==null&&i!==void 0?i:k.nullTranslator).load("jupyterlab");const a=o!==null&&o!==void 0?o:new s.Sanitizer;e.commands.addCommand(J.invokeCompleter,{label:r.__("Display the completion helper."),execute:e=>{var i;const s=t.currentWidget;if(s&&((i=s.content.activeCell)===null||i===void 0?void 0:i.model.type)==="code"){n.invoke(s.id)}}});e.commands.addCommand(J.selectCompleter,{label:r.__("Select the completion suggestion."),execute:()=>{const e=t.currentWidget&&t.currentWidget.id;if(e){return n.select(e)}}});e.commands.addKeyBinding({command:J.selectCompleter,keys:["Enter"],selector:".jp-Notebook .jp-mod-completer-active"});const l=async(e,t)=>{var i,s;const o={editor:(s=(i=t.content.activeCell)===null||i===void 0?void 0:i.editor)!==null&&s!==void 0?s:null,session:t.sessionContext.session,widget:t,sanitizer:a};await n.updateCompleter(o);t.content.activeCellChanged.connect(((e,i)=>{i===null||i===void 0?void 0:i.ready.then((()=>{const e={editor:i.editor,session:t.sessionContext.session,widget:t,sanitizer:a};return n.updateCompleter(e)})).catch(console.error)}));t.sessionContext.sessionChanged.connect((()=>{var e;(e=t.content.activeCell)===null||e===void 0?void 0:e.ready.then((()=>{var e,i;const s={editor:(i=(e=t.content.activeCell)===null||e===void 0?void 0:e.editor)!==null&&i!==void 0?i:null,session:t.sessionContext.session,widget:t};return n.updateCompleter(s)})).catch(console.error)}))};t.widgetAdded.connect(l);n.activeProvidersChanged.connect((()=>{t.forEach((e=>{l(undefined,e).catch((e=>console.error(e)))}))}))}function Ee(e,t,n,i,s){t.widgetAdded.connect((async(e,t)=>{const o=new _.NotebookAdapter(t,{connectionManager:n,featureManager:i,foreignCodeExtractorsManager:s});n.registerAdapter(t.context.path,o)}))}function Ie(e,t,n){const i=e.currentWidget;const s=n["activate"]!==false;if(s&&i){t.activateById(i.id)}return i}function Te(e,t,n,i,r){const a=n.load("jupyterlab");const{commands:l,shell:d}=e;const c=()=>Pe.isEnabledAndSingleSelected(d,t);const h=e=>{var t,n;for(const i of e.widgets){if(i instanceof o.MarkdownCell&&i.headingCollapsed){_.NotebookActions.setHeadingCollapse(i,true,e)}if(i.model.id===((n=(t=e.activeCell)===null||t===void 0?void 0:t.model)===null||n===void 0?void 0:n.id)){_.NotebookActions.expandParent(i,e)}}};const u=()=>Pe.isEnabledAndHeadingSelected(d,t);t.currentChanged.connect(((e,t)=>{var n,i;if(!((i=(n=t===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.model)===null||i===void 0?void 0:i.cells)){return}t.content.model.cells.changed.connect(((e,n)=>{h(t.content)}));t.content.activeCellChanged.connect(((e,t)=>{_.NotebookActions.expandParent(t,e)}))}));t.selectionChanged.connect((()=>{l.notifyCommandChanged(J.duplicateBelow);l.notifyCommandChanged(J.deleteCell);l.notifyCommandChanged(J.copy);l.notifyCommandChanged(J.cut);l.notifyCommandChanged(J.pasteBelow);l.notifyCommandChanged(J.pasteAbove);l.notifyCommandChanged(J.pasteAndReplace);l.notifyCommandChanged(J.moveUp);l.notifyCommandChanged(J.moveDown);l.notifyCommandChanged(J.run);l.notifyCommandChanged(J.runAll);l.notifyCommandChanged(J.runAndAdvance);l.notifyCommandChanged(J.runAndInsert)}));t.activeCellChanged.connect((()=>{l.notifyCommandChanged(J.moveUp);l.notifyCommandChanged(J.moveDown)}));l.addCommand(J.runAndAdvance,{label:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Run Selected Cell","Run Selected Cells",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},caption:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Run this cell and advance","Run these %1 cells and advance",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},execute:e=>{const s=Ie(t,d,e);if(s){const{context:e,content:t}=s;return _.NotebookActions.runAndAdvance(t,e.sessionContext,i,n)}},isEnabled:r});l.addCommand(J.run,{label:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Run Selected Cell and Do not Advance","Run Selected Cells and Do not Advance",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},execute:e=>{const s=Ie(t,d,e);if(s){const{context:e,content:t}=s;return _.NotebookActions.run(t,e.sessionContext,i,n)}},isEnabled:r});l.addCommand(J.runAndInsert,{label:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Run Selected Cell and Insert Below","Run Selected Cells and Insert Below",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},execute:e=>{const s=Ie(t,d,e);if(s){const{context:e,content:t}=s;return _.NotebookActions.runAndInsert(t,e.sessionContext,i,n)}},isEnabled:r});l.addCommand(J.runAll,{label:a.__("Run All Cells"),caption:a.__("Run all cells"),execute:e=>{const s=Ie(t,d,e);if(s){const{context:e,content:t}=s;return _.NotebookActions.runAll(t,e.sessionContext,i,n)}},isEnabled:r});l.addCommand(J.runAllAbove,{label:a.__("Run All Above Selected Cell"),execute:e=>{const s=Ie(t,d,e);if(s){const{context:e,content:t}=s;return _.NotebookActions.runAllAbove(t,e.sessionContext,i,n)}},isEnabled:()=>c()&&t.currentWidget.content.activeCellIndex!==0});l.addCommand(J.runAllBelow,{label:a.__("Run Selected Cell and All Below"),execute:e=>{const s=Ie(t,d,e);if(s){const{context:e,content:t}=s;return _.NotebookActions.runAllBelow(t,e.sessionContext,i,n)}},isEnabled:()=>c()&&t.currentWidget.content.activeCellIndex!==t.currentWidget.content.widgets.length-1});l.addCommand(J.renderAllMarkdown,{label:a.__("Render All Markdown Cells"),execute:e=>{const n=Ie(t,d,e);if(n){const{content:e}=n;return _.NotebookActions.renderAllMarkdown(e)}},isEnabled:r});l.addCommand(J.restart,{label:a.__("Restart Kernel"),caption:a.__("Restart the kernel"),execute:e=>{const n=Ie(t,d,e);if(n){return i.restart(n.sessionContext)}},isEnabled:r});l.addCommand(J.shutdown,{label:a.__("Shut Down Kernel"),execute:e=>{const n=Ie(t,d,e);if(!n){return}return n.context.sessionContext.shutdown()},isEnabled:r});l.addCommand(J.closeAndShutdown,{label:a.__("Close and Shut Down Notebook"),execute:e=>{const n=Ie(t,d,e);if(!n){return}const i=n.title.label;return(0,s.showDialog)({title:a.__("Shut down the notebook?"),body:a.__('Are you sure you want to close "%1"?',i),buttons:[s.Dialog.cancelButton(),s.Dialog.warnButton()]}).then((e=>{if(e.button.accept){return l.execute(J.shutdown,{activate:false}).then((()=>{n.dispose()}))}}))},isEnabled:r});l.addCommand(J.trust,{label:()=>a.__("Trust Notebook"),execute:e=>{const n=Ie(t,d,e);if(n){const{context:e,content:t}=n;return _.NotebookActions.trust(t).then((()=>e.save()))}},isEnabled:r});l.addCommand(J.restartClear,{label:a.__("Restart Kernel and Clear Outputs of All Cells"),caption:a.__("Restart the kernel and clear all outputs of all cells"),execute:async()=>{const e=await l.execute(J.restart,{activate:false});if(e){await l.execute(J.clearAllOutputs)}},isEnabled:r});l.addCommand(J.restartAndRunToSelected,{label:a.__("Restart Kernel and Run up to Selected Cell"),execute:async()=>{const e=await l.execute(J.restart,{activate:false});if(e){const e=await l.execute(J.runAllAbove,{activate:false});if(e){return l.execute(J.run)}}},isEnabled:c});l.addCommand(J.restartRunAll,{label:a.__("Restart Kernel and Run All Cells"),caption:a.__("Restart the kernel and run all cells"),execute:async()=>{const e=await l.execute(J.restart,{activate:false});if(e){await l.execute(J.runAll)}},isEnabled:r,icon:j.fastForwardIcon});l.addCommand(J.clearAllOutputs,{label:a.__("Clear Outputs of All Cells"),caption:a.__("Clear all outputs of all cells"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.clearAllOutputs(n.content)}},isEnabled:r});l.addCommand(J.clearOutputs,{label:a.__("Clear Cell Output"),caption:a.__("Clear outputs for the selected cells"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.clearOutputs(n.content)}},isEnabled:r});l.addCommand(J.interrupt,{label:a.__("Interrupt Kernel"),caption:a.__("Interrupt the kernel"),execute:e=>{var n;const i=Ie(t,d,e);if(!i){return}const s=(n=i.context.sessionContext.session)===null||n===void 0?void 0:n.kernel;if(s){return s.interrupt()}},isEnabled:r});l.addCommand(J.toCode,{label:a.__("Change to Code Cell Type"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.changeCellType(n.content,"code")}},isEnabled:r});l.addCommand(J.toMarkdown,{label:a.__("Change to Markdown Cell Type"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.changeCellType(n.content,"markdown")}},isEnabled:r});l.addCommand(J.toRaw,{label:a.__("Change to Raw Cell Type"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.changeCellType(n.content,"raw")}},isEnabled:r});l.addCommand(J.cut,{label:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Cut Cell","Cut Cells",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},caption:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Cut this cell","Cut these %1 cells",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.cut(n.content)}},icon:e=>e.toolbar?j.cutIcon:undefined,isEnabled:r});l.addCommand(J.copy,{label:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Copy Cell","Copy Cells",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},caption:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Copy this cell","Copy these %1 cells",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.copy(n.content)}},icon:e=>e.toolbar?j.copyIcon:undefined,isEnabled:r});l.addCommand(J.pasteBelow,{label:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Paste Cell Below","Paste Cells Below",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},caption:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Paste this cell from the clipboard","Paste these %1 cells from the clipboard",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.paste(n.content,"below")}},icon:e=>e.toolbar?j.pasteIcon:undefined,isEnabled:r});l.addCommand(J.pasteAbove,{label:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Paste Cell Above","Paste Cells Above",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},caption:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Paste this cell from the clipboard","Paste these %1 cells from the clipboard",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.paste(n.content,"above")}},isEnabled:r});l.addCommand(J.duplicateBelow,{label:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Duplicate Cell Below","Duplicate Cells Below",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},caption:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Create a duplicate of this cell below","Create duplicates of %1 cells below",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},execute:e=>{const n=Ie(t,d,e);if(n){_.NotebookActions.duplicate(n.content,"belowSelected")}},icon:e=>e.toolbar?j.duplicateIcon:undefined,isEnabled:r});l.addCommand(J.pasteAndReplace,{label:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Paste Cell and Replace","Paste Cells and Replace",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.paste(n.content,"replace")}},isEnabled:r});l.addCommand(J.deleteCell,{label:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Delete Cell","Delete Cells",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},caption:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Delete this cell","Delete these %1 cells",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.deleteCells(n.content)}},isEnabled:r});l.addCommand(J.split,{label:a.__("Split Cell"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.splitCell(n.content)}},isEnabled:r});l.addCommand(J.merge,{label:a.__("Merge Selected Cells"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.mergeCells(n.content)}},isEnabled:r});l.addCommand(J.mergeAbove,{label:a.__("Merge Cell Above"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.mergeCells(n.content,true)}},isEnabled:r});l.addCommand(J.mergeBelow,{label:a.__("Merge Cell Below"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.mergeCells(n.content,false)}},isEnabled:r});l.addCommand(J.insertAbove,{label:a.__("Insert Cell Above"),caption:a.__("Insert a cell above"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.insertAbove(n.content)}},icon:e=>e.toolbar?j.addAboveIcon:undefined,isEnabled:r});l.addCommand(J.insertBelow,{label:a.__("Insert Cell Below"),caption:a.__("Insert a cell below"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.insertBelow(n.content)}},icon:e=>e.toolbar?j.addBelowIcon:undefined,isEnabled:r});l.addCommand(J.selectAbove,{label:a.__("Select Cell Above"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.selectAbove(n.content)}},isEnabled:r});l.addCommand(J.selectBelow,{label:a.__("Select Cell Below"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.selectBelow(n.content)}},isEnabled:r});l.addCommand(J.insertHeadingAbove,{label:a.__("Insert Heading Above Current Heading"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.insertSameLevelHeadingAbove(n.content)}},isEnabled:r});l.addCommand(J.insertHeadingBelow,{label:a.__("Insert Heading Below Current Heading"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.insertSameLevelHeadingBelow(n.content)}},isEnabled:r});l.addCommand(J.selectHeadingAboveOrCollapse,{label:a.__("Select Heading Above or Collapse Heading"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.selectHeadingAboveOrCollapseHeading(n.content)}},isEnabled:r});l.addCommand(J.selectHeadingBelowOrExpand,{label:a.__("Select Heading Below or Expand Heading"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.selectHeadingBelowOrExpandHeading(n.content)}},isEnabled:r});l.addCommand(J.extendAbove,{label:a.__("Extend Selection Above"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.extendSelectionAbove(n.content)}},isEnabled:r});l.addCommand(J.extendTop,{label:a.__("Extend Selection to Top"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.extendSelectionAbove(n.content,true)}},isEnabled:r});l.addCommand(J.extendBelow,{label:a.__("Extend Selection Below"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.extendSelectionBelow(n.content)}},isEnabled:r});l.addCommand(J.extendBottom,{label:a.__("Extend Selection to Bottom"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.extendSelectionBelow(n.content,true)}},isEnabled:r});l.addCommand(J.selectAll,{label:a.__("Select All Cells"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.selectAll(n.content)}},isEnabled:r});l.addCommand(J.deselectAll,{label:a.__("Deselect All Cells"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.deselectAll(n.content)}},isEnabled:r});l.addCommand(J.moveUp,{label:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Move Cell Up","Move Cells Up",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},caption:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Move this cell up","Move these %1 cells up",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},execute:e=>{const n=Ie(t,d,e);if(n){_.NotebookActions.moveUp(n.content);Pe.raiseSilentNotification(a.__("Notebook cell shifted up successfully"),n.node)}},isEnabled:e=>{const n=Ie(t,d,{...e,activate:false});if(!n){return false}return n.content.activeCellIndex>=1},icon:e=>e.toolbar?j.moveUpIcon:undefined});l.addCommand(J.moveDown,{label:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Move Cell Down","Move Cells Down",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},caption:e=>{var n;const i=Ie(t,d,{...e,activate:false});return a._n("Move this cell down","Move these %1 cells down",(n=i===null||i===void 0?void 0:i.content.selectedCells.length)!==null&&n!==void 0?n:1)},execute:e=>{const n=Ie(t,d,e);if(n){_.NotebookActions.moveDown(n.content);Pe.raiseSilentNotification(a.__("Notebook cell shifted down successfully"),n.node)}},isEnabled:e=>{const n=Ie(t,d,{...e,activate:false});if(!n||!n.content.model){return false}const i=n.content.model.cells.length;return n.content.activeCellIndex<i-1},icon:e=>e.toolbar?j.moveDownIcon:undefined});l.addCommand(J.toggleAllLines,{label:a.__("Show Line Numbers"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.toggleAllLineNumbers(n.content)}},isEnabled:r,isToggled:e=>{const n=Ie(t,d,{...e,activate:false});if(n){const e=n.content.editorConfig;return!!(e.code.lineNumbers&&e.markdown.lineNumbers&&e.raw.lineNumbers)}else{return false}}});l.addCommand(J.commandMode,{label:a.__("Enter Command Mode"),execute:e=>{const n=Ie(t,d,e);if(n){n.content.mode="command"}},isEnabled:r});l.addCommand(J.editMode,{label:a.__("Enter Edit Mode"),execute:e=>{const n=Ie(t,d,e);if(n){n.content.mode="edit"}},isEnabled:r});l.addCommand(J.undoCellAction,{label:a.__("Undo Cell Operation"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.undo(n.content)}},isEnabled:r});l.addCommand(J.redoCellAction,{label:a.__("Redo Cell Operation"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.redo(n.content)}},isEnabled:r});l.addCommand(J.redo,{label:a.__("Redo"),execute:e=>{var n;const i=Ie(t,d,e);if(i){const e=i.content.activeCell;if(e){e.inputHidden=false;return(n=e.editor)===null||n===void 0?void 0:n.redo()}}}});l.addCommand(J.undo,{label:a.__("Undo"),execute:e=>{var n;const i=Ie(t,d,e);if(i){const e=i.content.activeCell;if(e){e.inputHidden=false;return(n=e.editor)===null||n===void 0?void 0:n.undo()}}}});l.addCommand(J.changeKernel,{label:a.__("Change Kernel"),execute:e=>{const n=Ie(t,d,e);if(n){return i.selectKernel(n.context.sessionContext)}},isEnabled:r});l.addCommand(J.getKernel,{label:a.__("Get Kernel"),execute:e=>{var n;const i=Ie(t,d,{activate:false,...e});if(i){return(n=i.sessionContext.session)===null||n===void 0?void 0:n.kernel}},isEnabled:r});l.addCommand(J.reconnectToKernel,{label:a.__("Reconnect to Kernel"),execute:e=>{var n;const i=Ie(t,d,e);if(!i){return}const s=(n=i.context.sessionContext.session)===null||n===void 0?void 0:n.kernel;if(s){return s.reconnect()}},isEnabled:r});l.addCommand(J.markdown1,{label:a.__("Change to Heading 1"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.setMarkdownHeader(n.content,1)}},isEnabled:r});l.addCommand(J.markdown2,{label:a.__("Change to Heading 2"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.setMarkdownHeader(n.content,2)}},isEnabled:r});l.addCommand(J.markdown3,{label:a.__("Change to Heading 3"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.setMarkdownHeader(n.content,3)}},isEnabled:r});l.addCommand(J.markdown4,{label:a.__("Change to Heading 4"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.setMarkdownHeader(n.content,4)}},isEnabled:r});l.addCommand(J.markdown5,{label:a.__("Change to Heading 5"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.setMarkdownHeader(n.content,5)}},isEnabled:r});l.addCommand(J.markdown6,{label:a.__("Change to Heading 6"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.setMarkdownHeader(n.content,6)}},isEnabled:r});l.addCommand(J.hideCode,{label:a.__("Collapse Selected Code"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.hideCode(n.content)}},isEnabled:r});l.addCommand(J.showCode,{label:a.__("Expand Selected Code"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.showCode(n.content)}},isEnabled:r});l.addCommand(J.hideAllCode,{label:a.__("Collapse All Code"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.hideAllCode(n.content)}},isEnabled:r});l.addCommand(J.showAllCode,{label:a.__("Expand All Code"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.showAllCode(n.content)}},isEnabled:r});l.addCommand(J.hideOutput,{label:a.__("Collapse Selected Outputs"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.hideOutput(n.content)}},isEnabled:r});l.addCommand(J.showOutput,{label:a.__("Expand Selected Outputs"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.showOutput(n.content)}},isEnabled:r});l.addCommand(J.hideAllOutputs,{label:a.__("Collapse All Outputs"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.hideAllOutputs(n.content)}},isEnabled:r});l.addCommand(J.toggleRenderSideBySideCurrentNotebook,{label:a.__("Render Side-by-Side"),execute:e=>{const n=Ie(t,d,e);if(n){if(n.content.renderingLayout==="side-by-side"){return _.NotebookActions.renderDefault(n.content)}return _.NotebookActions.renderSideBySide(n.content)}},isEnabled:r,isToggled:e=>{const n=Ie(t,d,{...e,activate:false});if(n){return n.content.renderingLayout==="side-by-side"}else{return false}}});l.addCommand(J.showAllOutputs,{label:a.__("Expand All Outputs"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.showAllOutputs(n.content)}},isEnabled:r});l.addCommand(J.enableOutputScrolling,{label:a.__("Enable Scrolling for Outputs"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.enableOutputScrolling(n.content)}},isEnabled:r});l.addCommand(J.disableOutputScrolling,{label:a.__("Disable Scrolling for Outputs"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.disableOutputScrolling(n.content)}},isEnabled:r});l.addCommand(J.selectLastRunCell,{label:a.__("Select current running or last run cell"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.selectLastRunCell(n.content)}},isEnabled:r});l.addCommand(J.replaceSelection,{label:a.__("Replace Selection in Notebook Cell"),execute:e=>{const n=Ie(t,d,e);const i=e["text"]||"";if(n){return _.NotebookActions.replaceSelection(n.content,i)}},isEnabled:r});l.addCommand(J.toggleCollapseCmd,{label:a.__("Toggle Collapse Notebook Heading"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.toggleCurrentHeadingCollapse(n.content)}},isEnabled:u});l.addCommand(J.collapseAllCmd,{label:a.__("Collapse All Headings"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.collapseAllHeadings(n.content)}}});l.addCommand(J.expandAllCmd,{label:a.__("Expand All Headings"),execute:e=>{const n=Ie(t,d,e);if(n){return _.NotebookActions.expandAllHeadings(n.content)}}});l.addCommand(J.tocRunCells,{label:a.__("Select and Run Cell(s) for this Heading"),execute:e=>{const s=Ie(t,d,{activate:false,...e});if(s===null){return}const r=s.content.activeCell;let a=s.content.activeCellIndex;if(r instanceof o.MarkdownCell){const e=s.content.widgets;const t=r.headingInfo.level;for(let n=s.content.activeCellIndex+1;n<e.length;n++){const i=e[n];if(i instanceof o.MarkdownCell&&i.headingInfo.level>=0&&i.headingInfo.level<=t){break}a=n}}s.content.extendContiguousSelectionTo(a);void _.NotebookActions.run(s.content,s.sessionContext,i,n)}})}function De(e,t){const n=t.load("jupyterlab");let i=n.__("Notebook Operations");[J.interrupt,J.restart,J.restartClear,J.restartRunAll,J.runAll,J.renderAllMarkdown,J.runAllAbove,J.runAllBelow,J.restartAndRunToSelected,J.selectAll,J.deselectAll,J.clearAllOutputs,J.toggleAllLines,J.editMode,J.commandMode,J.changeKernel,J.reconnectToKernel,J.createConsole,J.closeAndShutdown,J.trust,J.toggleCollapseCmd,J.collapseAllCmd,J.expandAllCmd].forEach((t=>{e.addItem({command:t,category:i})}));e.addItem({command:J.createNew,category:i,args:{isPalette:true}});i=n.__("Notebook Cell Operations");[J.run,J.runAndAdvance,J.runAndInsert,J.runInConsole,J.clearOutputs,J.toCode,J.toMarkdown,J.toRaw,J.cut,J.copy,J.pasteBelow,J.pasteAbove,J.pasteAndReplace,J.deleteCell,J.split,J.merge,J.mergeAbove,J.mergeBelow,J.insertAbove,J.insertBelow,J.selectAbove,J.selectBelow,J.selectHeadingAboveOrCollapse,J.selectHeadingBelowOrExpand,J.insertHeadingAbove,J.insertHeadingBelow,J.extendAbove,J.extendTop,J.extendBelow,J.extendBottom,J.moveDown,J.moveUp,J.undoCellAction,J.redoCellAction,J.markdown1,J.markdown2,J.markdown3,J.markdown4,J.markdown5,J.markdown6,J.hideCode,J.showCode,J.hideAllCode,J.showAllCode,J.hideOutput,J.showOutput,J.hideAllOutputs,J.showAllOutputs,J.toggleRenderSideBySideCurrentNotebook,J.setSideBySideRatio,J.enableOutputScrolling,J.disableOutputScrolling].forEach((t=>{e.addItem({command:t,category:i})}))}function Le(e,t){e.editMenu.undoers.redo.add({id:J.redo,isEnabled:t});e.editMenu.undoers.undo.add({id:J.undo,isEnabled:t});e.editMenu.clearers.clearAll.add({id:J.clearAllOutputs,isEnabled:t});e.editMenu.clearers.clearCurrent.add({id:J.clearOutputs,isEnabled:t});e.fileMenu.consoleCreators.add({id:J.createConsole,isEnabled:t});e.fileMenu.closeAndCleaners.add({id:J.closeAndShutdown,isEnabled:t});e.kernelMenu.kernelUsers.changeKernel.add({id:J.changeKernel,isEnabled:t});e.kernelMenu.kernelUsers.clearWidget.add({id:J.clearAllOutputs,isEnabled:t});e.kernelMenu.kernelUsers.interruptKernel.add({id:J.interrupt,isEnabled:t});e.kernelMenu.kernelUsers.reconnectToKernel.add({id:J.reconnectToKernel,isEnabled:t});e.kernelMenu.kernelUsers.restartKernel.add({id:J.restart,isEnabled:t});e.kernelMenu.kernelUsers.shutdownKernel.add({id:J.shutdown,isEnabled:t});e.viewMenu.editorViewers.toggleLineNumbers.add({id:J.toggleAllLines,isEnabled:t});e.runMenu.codeRunners.restart.add({id:J.restart,isEnabled:t});e.runMenu.codeRunners.run.add({id:J.runAndAdvance,isEnabled:t});e.runMenu.codeRunners.runAll.add({id:J.runAll,isEnabled:t});e.helpMenu.getKernel.add({id:J.getKernel,isEnabled:t})}var Pe;(function(e){function t(e,t,n){const i={path:t.context.path,preferredLanguage:t.context.model.defaultKernelLanguage,activate:n,ref:t.id,insertMode:"split-bottom",type:"Linked Console"};return e.execute("console:create",i)}e.createConsole=t;function n(e,t){return t.currentWidget!==null&&t.currentWidget===e.currentWidget}e.isEnabled=n;function i(t,n){if(!e.isEnabled(t,n)){return false}const{content:i}=n.currentWidget;const s=i.activeCellIndex;for(let e=0;e<i.widgets.length;++e){if(i.isSelected(i.widgets[e])&&e!==s){return false}}return true}e.isEnabledAndSingleSelected=i;function s(t,n){if(!e.isEnabled(t,n)){return false}const{content:i}=n.currentWidget;const s=i.activeCellIndex;if(!(i.activeCell instanceof o.MarkdownCell)){return false}for(let e=0;e<i.widgets.length;++e){if(i.isSelected(i.widgets[e])&&e!==s){return false}}return true}e.isEnabledAndHeadingSelected=s;function r(e){e=e||k.nullTranslator;const t=e.load("jupyterlab");return{html:t.__("HTML"),latex:t.__("LaTeX"),markdown:t.__("Markdown"),pdf:t.__("PDF"),rst:t.__("ReStructured Text"),script:t.__("Executable Script"),slides:t.__("Reveal.js Slides")}}e.getFormatLabels=r;function a(e,t){const n=`sr-message-container-${t.id}`;const i=document.getElementById(n)||document.createElement("div");if(i.getAttribute("id")!==n){i.classList.add("sr-only");i.setAttribute("id",n);i.setAttribute("role","alert");i.hidden=true;t.appendChild(i)}i.innerText=e}e.raiseSilentNotification=a;class l extends D.Panel{constructor(e){super();this._cell=null;const t=(e.translator||k.nullTranslator).load("jupyterlab");this._notebook=e.notebook;this._index=e.index!==undefined?e.index:-1;this._cell=e.cell||null;this.id=`LinkedOutputView-${E.UUID.uuid4()}`;this.title.label="Output View";this.title.icon=j.notebookIcon;this.title.caption=this._notebook.title.label?t.__("For Notebook: %1",this._notebook.title.label):t.__("For Notebook:");this.addClass("jp-LinkedOutputView");void this._notebook.context.ready.then((()=>{if(!this._cell){this._cell=this._notebook.content.widgets[this._index]}if(!this._cell||this._cell.model.type!=="code"){this.dispose();return}const e=this._cell.cloneOutputArea();this.addWidget(e)}))}get index(){return this._cell?M.ArrayExt.findFirstIndex(this._notebook.content.widgets,(e=>e===this._cell)):this._index}get path(){return this._notebook.context.path}}e.ClonedOutputArea=l})(Pe||(Pe={}))},55337:(e,t,n)=>{"use strict";var i=n(32902);var s=n(34849);var o=n(98328);var r=n(79536);var a=n(49914);var l=n(98896);var d=n(94683);var c=n(90516);var h=n(38613);var u=n(37935);var p=n(82401);var m=n(59240);var g=n(99434);var f=n(5956);var v=n(64431);var _=n(38710);var b=n(52812);var y=n(70161);var w=n(51734);var C=n(74518);var x=n(88164);var S=n(66458);var k=n(9469)},17525:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CellList:()=>f,CellTypeSwitcher:()=>w,CommandEditStatus:()=>D,ExecutionIndicator:()=>k,ExecutionIndicatorComponent:()=>S,INotebookTools:()=>Re,INotebookTracker:()=>Ne,INotebookWidgetFactory:()=>Ae,KernelError:()=>p,Notebook:()=>Ce,NotebookActions:()=>m,NotebookAdapter:()=>P,NotebookModel:()=>E,NotebookModelFactory:()=>I,NotebookPanel:()=>Me,NotebookSearchProvider:()=>Ie,NotebookToCFactory:()=>Le,NotebookToCModel:()=>De,NotebookTools:()=>F,NotebookTracker:()=>Oe,NotebookTrustStatus:()=>He,NotebookViewModel:()=>Z,NotebookWidgetFactory:()=>We,NotebookWindowedLayout:()=>G,RunningStatus:()=>Te,StaticNotebook:()=>we,ToolbarItems:()=>y,getIdForHeading:()=>Pe});var i=n(90848);var s=n(279);var o=n(22873);var r=n(36168);var a=n(58740);var l=n(5596);var d=n(71372);var c=n(28416);var h=n.n(c);const u="application/vnd.jupyter.cells";class p extends Error{constructor(e){const t=e;const n=t.ename;const i=t.evalue;super(`KernelReplyNotOK: ${n} ${i}`);this.errorName=n;this.errorValue=i;this.traceback=t.traceback;Object.setPrototypeOf(this,p.prototype)}}class m{static get executed(){return g.executed}static get executionScheduled(){return g.executionScheduled}static get selectionExecuted(){return g.selectionExecuted}constructor(){}}(function(e){function t(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.mode="edit";e.deselectAll();const n=e.model;const i=e.activeCellIndex;const s=e.widgets[i];const o=s.editor;if(!o){return}const r=o.getSelections();const a=s.model.sharedModel.getSource();const l=[0];let d=-1;let c=-1;for(let p=0;p<r.length;p++){d=o.getOffsetAt(r[p].start);c=o.getOffsetAt(r[p].end);if(d<c){l.push(d);l.push(c)}else if(c<d){l.push(c);l.push(d)}else{l.push(d)}}l.push(a.length);const h=l.slice(0,-1).map(((e,t)=>{const{cell_type:n,metadata:i}=s.model.sharedModel.toJSON();return{cell_type:n,metadata:i,source:a.slice(e,l[t+1]).replace(/^\n+/,"").replace(/\n+$/,"")}}));n.sharedModel.transact((()=>{n.sharedModel.deleteCell(i);n.sharedModel.insertCells(i,h)}));const u=d!==c?2:1;e.activeCellIndex=i+h.length-u;e.scrollToItem(e.activeCellIndex).then((()=>{var t;(t=e.activeCell)===null||t===void 0?void 0:t.editor.focus()})).catch((e=>{}));g.handleState(e,t)}e.splitCell=t;function n(e,t=false){if(!e.model||!e.activeCell){return}const n=g.getState(e);const i=[];const o=[];const r=e.model;const a=r.cells;const l=e.activeCell;const d=e.activeCellIndex;const c={};e.widgets.forEach(((t,n)=>{if(e.isSelectedOrActive(t)){i.push(t.model.sharedModel.getSource());if(n!==d){o.push(n)}const e=t.model;if((0,s.isRawCellModel)(e)||(0,s.isMarkdownCellModel)(e)){for(const t of e.attachments.keys){c[t]=e.attachments.get(t).toJSON()}}}}));if(i.length===1){if(t===true){if(d===0){return}const e=a.get(d-1);i.unshift(e.sharedModel.getSource());o.push(d-1)}else if(t===false){if(d===a.length-1){return}const e=a.get(d+1);i.push(e.sharedModel.getSource());o.push(d+1)}}e.deselectAll();const h=l.model.sharedModel;const{cell_type:u,metadata:p}=h.toJSON();if(h.cell_type==="code"){p.trusted=true}const m={cell_type:u,metadata:p,source:i.join("\n\n"),attachments:h.cell_type==="markdown"||h.cell_type==="raw"?c:undefined};r.sharedModel.transact((()=>{r.sharedModel.deleteCell(d);r.sharedModel.insertCell(d,m);o.sort(((e,t)=>t-e)).forEach((e=>{r.sharedModel.deleteCell(e)}))}));if(l instanceof s.MarkdownCell){e.activeCell.rendered=false}g.handleState(e,n)}e.mergeCells=n;function d(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);g.deleteCells(e);g.handleState(e,t,true)}e.deleteCells=d;function h(e){if(!e.model){return}const t=g.getState(e);const n=e.model;const i=e.activeCell?e.activeCellIndex:0;n.sharedModel.insertCell(i,{cell_type:e.notebookConfig.defaultCell,metadata:e.notebookConfig.defaultCell==="code"?{trusted:true}:{}});e.activeCellIndex=i;e.deselectAll();g.handleState(e,t,true)}e.insertAbove=h;function p(e){if(!e.model){return}const t=g.getState(e);const n=e.model;const i=e.activeCell?e.activeCellIndex+1:0;n.sharedModel.insertCell(i,{cell_type:e.notebookConfig.defaultCell,metadata:e.notebookConfig.defaultCell==="code"?{trusted:true}:{}});e.activeCellIndex=i;e.deselectAll();g.handleState(e,t,true)}e.insertBelow=p;function m(e,t){if(!e.model||!e.activeCell){return}const n=g.getState(e);const i=e.widgets.findIndex((t=>e.isSelectedOrActive(t)));let s=e.widgets.slice(i+1).findIndex((t=>!e.isSelectedOrActive(t)));if(s>=0){s+=i+1}else{s=e.model.cells.length}if(t>0){e.moveCell(i,s,s-i)}else{e.moveCell(i,i+t,s-i)}g.handleState(e,n,true)}function f(e){m(e,1)}e.moveDown=f;function v(e){m(e,-1)}e.moveUp=v;function _(e,t){if(!e.model||!e.activeCell){return}const n=g.getState(e);g.changeCellType(e,t);g.handleState(e,n)}e.changeCellType=_;function b(e,t,n,i){if(!e.model||!e.activeCell){return Promise.resolve(false)}const s=g.getState(e);const o=g.runSelected(e,t,n,i);g.handleRunState(e,s,false);return o}e.run=b;async function y(e,t,n,i){var s;if(!e.model||!e.activeCell){return Promise.resolve(false)}const r=g.getState(e);const a=g.runSelected(e,t,n,i);const l=e.model;if(e.activeCellIndex===e.widgets.length-1){l.sharedModel.insertCell(e.widgets.length,{cell_type:e.notebookConfig.defaultCell,metadata:e.notebookConfig.defaultCell==="code"?{trusted:true}:{}});e.activeCellIndex++;if(((s=e.activeCell)===null||s===void 0?void 0:s.inViewport)===false){await(0,o.signalToPromise)(e.activeCell.inViewportChanged,200).catch((()=>{}))}e.mode="edit"}else{e.activeCellIndex++}g.handleState(e,r,true);return a}e.runAndAdvance=y;async function w(e,t,n,i){var s;if(!e.model||!e.activeCell){return Promise.resolve(false)}const r=g.getState(e);const a=g.runSelected(e,t,n,i);const l=e.model;l.sharedModel.insertCell(e.activeCellIndex+1,{cell_type:e.notebookConfig.defaultCell,metadata:e.notebookConfig.defaultCell==="code"?{trusted:true}:{}});e.activeCellIndex++;if(((s=e.activeCell)===null||s===void 0?void 0:s.inViewport)===false){await(0,o.signalToPromise)(e.activeCell.inViewportChanged,200).catch((()=>{}))}e.mode="edit";g.handleState(e,r,true);return a}e.runAndInsert=w;function C(e,t,n,i){if(!e.model||!e.activeCell){return Promise.resolve(false)}const s=g.getState(e);e.widgets.forEach((t=>{e.select(t)}));const o=g.runSelected(e,t,n,i);g.handleRunState(e,s,true);return o}e.runAll=C;function x(e){if(!e.model||!e.activeCell){return Promise.resolve(false)}const t=e.activeCellIndex;const n=g.getState(e);e.widgets.forEach(((t,n)=>{if(t.model.type==="markdown"){e.select(t);e.activeCellIndex=n}}));if(e.activeCell.model.type!=="markdown"){return Promise.resolve(true)}const i=g.runSelected(e);e.activeCellIndex=t;g.handleRunState(e,n,true);return i}e.renderAllMarkdown=x;function S(e,t,n,i){const{activeCell:s,activeCellIndex:o,model:r}=e;if(!r||!s||o<1){return Promise.resolve(false)}const a=g.getState(e);e.activeCellIndex--;e.deselectAll();for(let d=0;d<e.activeCellIndex;++d){e.select(e.widgets[d])}const l=g.runSelected(e,t,n,i);e.activeCellIndex++;g.handleRunState(e,a,true);return l}e.runAllAbove=S;function k(e,t,n,i){if(!e.model||!e.activeCell){return Promise.resolve(false)}const s=g.getState(e);e.deselectAll();for(let r=e.activeCellIndex;r<e.widgets.length;++r){e.select(e.widgets[r])}const o=g.runSelected(e,t,n,i);g.handleRunState(e,s,true);return o}e.runAllBelow=k;function j(e,t){var n,i,s;if(!e.model||!((n=e.activeCell)===null||n===void 0?void 0:n.editor)){return}(s=(i=e.activeCell.editor).replaceSelection)===null||s===void 0?void 0:s.call(i,t)}e.replaceSelection=j;function M(e){if(!e.model||!e.activeCell){return}if(e.activeCellIndex===0){return}let t=e.activeCellIndex-1;while(t>=0){const n=e.widgets[t];if(!n.inputHidden&&!n.isHidden){break}t-=1}const n=g.getState(e);e.activeCellIndex=t;e.deselectAll();g.handleState(e,n,true)}e.selectAbove=M;function E(e){if(!e.model||!e.activeCell){return}let t=e.widgets.length-1;while(e.widgets[t].isHidden||e.widgets[t].inputHidden){t-=1}if(e.activeCellIndex===t){const t=e.layout.footer;t===null||t===void 0?void 0:t.node.focus();return}let n=e.activeCellIndex+1;while(n<t){let t=e.widgets[n];if(!t.inputHidden&&!t.isHidden){break}n+=1}const i=g.getState(e);e.activeCellIndex=n;e.deselectAll();g.handleState(e,i,true)}e.selectBelow=E;async function I(e){if(!e.model||!e.activeCell){return}let t=g.Headings.determineHeadingLevel(e.activeCell,e);if(t==-1){await g.Headings.insertHeadingAboveCellIndex(0,1,e)}else{await g.Headings.insertHeadingAboveCellIndex(e.activeCellIndex,t,e)}}e.insertSameLevelHeadingAbove=I;async function T(e){if(!e.model||!e.activeCell){return}let t=g.Headings.determineHeadingLevel(e.activeCell,e);t=t>-1?t:1;let n=g.Headings.findLowerEqualLevelHeadingBelow(e.activeCell,e,true);await g.Headings.insertHeadingAboveCellIndex(n==-1?e.model.cells.length:n,t,e)}e.insertSameLevelHeadingBelow=T;function D(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);let n=ge(e.activeCell);if(n.isHeading&&!n.collapsed){ue(e.activeCell,true,e)}else{let t=g.Headings.findLowerEqualLevelParentHeadingAbove(e.activeCell,e,true);if(t>-1){e.activeCellIndex=t}}e.deselectAll();g.handleState(e,t,true)}e.selectHeadingAboveOrCollapseHeading=D;function L(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);let n=ge(e.activeCell);if(n.isHeading&&n.collapsed){ue(e.activeCell,false,e)}else{let t=g.Headings.findHeadingBelow(e.activeCell,e,true);if(t>-1){e.activeCellIndex=t}}e.deselectAll();g.handleState(e,t,true)}e.selectHeadingBelowOrExpandHeading=L;function P(e,t=false){if(!e.model||!e.activeCell){return}if(e.activeCellIndex===0){return}const n=g.getState(e);e.mode="command";if(t){e.extendContiguousSelectionTo(0)}else{e.extendContiguousSelectionTo(e.activeCellIndex-1)}g.handleState(e,n,true)}e.extendSelectionAbove=P;function A(e,t=false){if(!e.model||!e.activeCell){return}if(e.activeCellIndex===e.widgets.length-1){return}const n=g.getState(e);e.mode="command";if(t){e.extendContiguousSelectionTo(e.widgets.length-1)}else{e.extendContiguousSelectionTo(e.activeCellIndex+1)}g.handleState(e,n,true)}e.extendSelectionBelow=A;function R(e){if(!e.model||!e.activeCell){return}e.widgets.forEach((t=>{e.select(t)}))}e.selectAll=R;function N(e){if(!e.model||!e.activeCell){return}e.deselectAll()}e.deselectAll=N;function O(e){g.copyOrCut(e,false)}e.copy=O;function B(e){g.copyOrCut(e,true)}e.cut=B;function F(e,t="below"){const n=i.Clipboard.getInstance();if(!n.hasData(u)){return}const s=n.getData(u);H(e,t,s,true)}e.paste=F;function z(e,t="below"){const n=g.selectedCells(e);if(!n||n.length===0){return}H(e,t,n,false)}e.duplicate=z;function H(e,t="below",n,i=false){if(!e.model||!e.activeCell){return}const s=g.getState(e);const o=e.model;e.mode="command";let r=0;const a=e.activeCellIndex;o.sharedModel.transact((()=>{switch(t){case"below":r=e.activeCellIndex+1;break;case"belowSelected":e.widgets.forEach(((t,n)=>{if(e.isSelectedOrActive(t)){r=n+1}}));break;case"above":r=e.activeCellIndex;break;case"replace":{const t=[];e.widgets.forEach(((n,i)=>{const s=n.model.sharedModel.getMetadata("deletable")!==false;if(e.isSelectedOrActive(n)&&s){t.push(i)}}));if(t.length>0){t.reverse().forEach((e=>{o.sharedModel.deleteCell(e)}))}r=t[0];break}default:break}o.sharedModel.insertCells(r,n.map((t=>{t.id=t.cell_type==="code"&&e.lastClipboardInteraction==="cut"&&typeof t.id==="string"?t.id:undefined;return t})))}));e.activeCellIndex=a+n.length;e.deselectAll();if(i){e.lastClipboardInteraction="paste"}g.handleState(e,s,true)}function W(e){if(!e.model){return}const t=g.getState(e);e.mode="command";e.model.sharedModel.undo();e.deselectAll();g.handleState(e,t)}e.undo=W;function V(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.mode="command";e.model.sharedModel.redo();e.deselectAll();g.handleState(e,t)}e.redo=V;function U(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);const n=e.editorConfig;const i=!(n.code.lineNumbers&&n.markdown.lineNumbers&&n.raw.lineNumbers);const s={code:{...n.code,lineNumbers:i},markdown:{...n.markdown,lineNumbers:i},raw:{...n.raw,lineNumbers:i}};e.editorConfig=s;g.handleState(e,t)}e.toggleAllLineNumbers=U;function $(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);let n=-1;for(const i of e.model.cells){const t=e.widgets[++n];if(e.isSelectedOrActive(t)&&i.type==="code"){i.sharedModel.transact((()=>{i.clearExecution();t.outputHidden=false}),false)}}g.handleState(e,t,true)}e.clearOutputs=$;function q(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);let n=-1;for(const i of e.model.cells){const t=e.widgets[++n];if(i.type==="code"){i.sharedModel.transact((()=>{i.clearExecution();t.outputHidden=false}),false)}}g.handleState(e,t,true)}e.clearAllOutputs=q;function K(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((t=>{if(e.isSelectedOrActive(t)&&t.model.type==="code"){t.inputHidden=true}}));g.handleState(e,t)}e.hideCode=K;function J(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((t=>{if(e.isSelectedOrActive(t)&&t.model.type==="code"){t.inputHidden=false}}));g.handleState(e,t)}e.showCode=J;function Z(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((e=>{if(e.model.type==="code"){e.inputHidden=true}}));g.handleState(e,t)}e.hideAllCode=Z;function G(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((e=>{if(e.model.type==="code"){e.inputHidden=false}}));g.handleState(e,t)}e.showAllCode=G;function Y(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((t=>{if(e.isSelectedOrActive(t)&&t.model.type==="code"){t.outputHidden=true}}));g.handleState(e,t,true)}e.hideOutput=Y;function X(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((t=>{if(e.isSelectedOrActive(t)&&t.model.type==="code"){t.outputHidden=false}}));g.handleState(e,t)}e.showOutput=X;function Q(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((e=>{if(e.model.type==="code"){e.outputHidden=true}}));g.handleState(e,t,true)}e.hideAllOutputs=Q;function ee(e){e.renderingLayout="side-by-side"}e.renderSideBySide=ee;function te(e){e.renderingLayout="default"}e.renderDefault=te;function ne(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((e=>{if(e.model.type==="code"){e.outputHidden=false}}));g.handleState(e,t)}e.showAllOutputs=ne;function ie(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((t=>{if(e.isSelectedOrActive(t)&&t.model.type==="code"){t.outputsScrolled=true}}));g.handleState(e,t,true)}e.enableOutputScrolling=ie;function se(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((t=>{if(e.isSelectedOrActive(t)&&t.model.type==="code"){t.outputsScrolled=false}}));g.handleState(e,t)}e.disableOutputScrolling=se;function oe(e){let t=null;let n=null;e.widgets.forEach(((e,i)=>{if(e.model.type==="code"){const s=e.model.getMetadata("execution");if(s&&l.JSONExt.isObject(s)&&s["iopub.status.busy"]!==undefined){const e=s["iopub.status.busy"].toString();if(e){const s=new Date(e);if(!t||s>=t){t=s;n=i}}}}}));if(n!==null){e.activeCellIndex=n}}e.selectLastRunCell=oe;function re(e,t){if(!e.model||!e.activeCell){return}const n=g.getState(e);const i=e.model.cells;t=Math.min(Math.max(t,1),6);e.widgets.forEach(((n,s)=>{if(e.isSelectedOrActive(n)){g.setMarkdownHeader(i.get(s),t)}}));g.changeCellType(e,"markdown");g.handleState(e,n)}e.setMarkdownHeader=re;function ae(t){for(const n of t.widgets){if(e.getHeadingInfo(n).isHeading){e.setHeadingCollapse(n,true,t);e.setCellCollapse(n,true)}}}e.collapseAllHeadings=ae;function le(t){for(const n of t.widgets){if(e.getHeadingInfo(n).isHeading){e.setHeadingCollapse(n,false,t);e.setCellCollapse(n,false)}}}e.expandAllHeadings=le;function de(e,t){const n=(0,a.findIndex)(t.widgets,((t,n)=>e.model.id===t.model.id));if(n===-1){return}if(n>=t.widgets.length){return}let i=ge(t.widgets[n]);for(let s=n-1;s>=0;s--){if(s<t.widgets.length){let e=ge(t.widgets[s]);if(e.isHeading&&e.headingLevel<i.headingLevel){return t.widgets[s]}}}return}function ce(e,t){let n=de(e,t);if(!n){return}if(!ge(n).collapsed&&!n.isHidden){return}if(n.isHidden){ce(n,t)}if(ge(n).collapsed){ue(n,false,t)}}e.expandParent=ce;function he(e,t){let n=(0,a.findIndex)(t.widgets,((t,n)=>e.model.id===t.model.id));if(n===-1){return-1}let i=ge(e);for(n=n+1;n<t.widgets.length;n++){let e=ge(t.widgets[n]);if(e.isHeading&&e.headingLevel<=i.headingLevel){return n}}return t.widgets.length}e.findNextParentHeading=he;function ue(t,n,i){const o=(0,a.findIndex)(i.widgets,((e,n)=>t.model.id===e.model.id));if(o===-1){return-1}if(!i.widgets.length){return o+1}let r=e.getHeadingInfo(t);if(t.isHidden||!(t instanceof s.MarkdownCell)||!r.isHeading){return o+1}let l=false;let d=0;let c;for(c=o+1;c<i.widgets.length;c++){let t=i.widgets[c];let s=e.getHeadingInfo(t);if(s.isHeading&&s.headingLevel<=r.headingLevel){c-=1;break}if(l&&s.isHeading&&s.headingLevel<=d){l=false}if(n||l){t.setHidden(true);continue}if(s.collapsed&&s.isHeading){l=true;d=s.headingLevel}t.setHidden(false)}if(c===i.widgets.length){t.numberChildNodes=c-o-1}else{t.numberChildNodes=c-o}e.setCellCollapse(t,n);return c+1}e.setHeadingCollapse=ue;function pe(t){if(!t.activeCell||t.activeCellIndex===undefined){return}let n=e.getHeadingInfo(t.activeCell);if(n.isHeading){e.setHeadingCollapse(t.activeCell,!n.collapsed,t)}t.scrollToItem(t.activeCellIndex).catch((e=>{}))}e.toggleCurrentHeadingCollapse=pe;function me(e,t){if(e instanceof s.MarkdownCell){e.headingCollapsed=t}else{e.setHidden(t)}}e.setCellCollapse=me;function ge(e){if(!(e instanceof s.MarkdownCell)){return{isHeading:false,headingLevel:7}}let t=e.headingInfo.level;let n=e.headingCollapsed;return{isHeading:t>0,headingLevel:t,collapsed:n}}e.getHeadingInfo=ge;function fe(e,t){t=t||r.nullTranslator;const n=t.load("jupyterlab");if(!e.model){return Promise.resolve()}const s=(0,a.every)(e.model.cells,(e=>e.trusted));const o=c.createElement("p",null,n.__("A trusted Jupyter notebook may execute hidden malicious code when you open it."),c.createElement("br",null),n.__('Selecting "Trust" will re-render this notebook in a trusted state.'),c.createElement("br",null),n.__("For more information, see")," ",c.createElement("a",{href:"https://jupyter-server.readthedocs.io/en/stable/operators/security.html",target:"_blank",rel:"noopener noreferrer"},n.__("the Jupyter security documentation")),".");if(s){return(0,i.showDialog)({body:n.__("Notebook is already trusted"),buttons:[i.Dialog.okButton()]}).then((()=>undefined))}return(0,i.showDialog)({body:o,title:n.__("Trust this notebook?"),buttons:[i.Dialog.cancelButton(),i.Dialog.warnButton({label:n.__("Trust"),ariaLabel:n.__("Confirm Trusting this notebook")})]}).then((t=>{if(t.button.accept){if(e.model){for(const t of e.model.cells){t.trusted=true}}}}))}e.trust=fe})(m||(m={}));var g;(function(e){e.executed=new d.Signal({});e.executionScheduled=new d.Signal({});e.selectionExecuted=new d.Signal({});function t(e){var t,n;return{wasFocused:e.node.contains(document.activeElement),activeCellId:(n=(t=e.activeCell)===null||t===void 0?void 0:t.model.id)!==null&&n!==void 0?n:null}}e.getState=t;function n(e,t,n=false){const{activeCell:i,activeCellIndex:s}=e;if(t.wasFocused||e.mode==="edit"){e.activate()}if(n&&i){e.scrollToItem(s,"smart",.05).catch((e=>{}))}}e.handleState=n;function l(e,t,n=false){var i;if(t.wasFocused||e.mode==="edit"){e.activate()}if(n&&t.activeCellId){const n=e.widgets.findIndex((e=>e.model.id===t.activeCellId));if((i=e.widgets[n])===null||i===void 0?void 0:i.inputArea){e.scrollToItem(n).catch((e=>{}))}}}e.handleRunState=l;function c(t,n,i,s){t.mode="command";let o=t.activeCellIndex;const r=t.widgets.filter(((e,n)=>{const i=t.isSelectedOrActive(e);if(i){o=n}return i}));t.activeCellIndex=o;t.deselectAll();return Promise.all(r.map((e=>h(t,e,n,i,s)))).then((n=>{if(t.isDisposed){return false}e.selectionExecuted.emit({notebook:t,lastCell:t.widgets[o]});t.update();return n.every((e=>e))})).catch((n=>{if(n.message.startsWith("KernelReplyNotOK")){r.map((e=>{if(e.model.type==="code"&&e.model.executionCount==null){e.setPrompt("")}}))}else{throw n}e.selectionExecuted.emit({notebook:t,lastCell:t.widgets[o]});t.update();return false}))}e.runSelected=c;async function h(t,n,o,a,l){var d,c,h;l=l||r.nullTranslator;const u=l.load("jupyterlab");switch(n.model.type){case"markdown":n.rendered=true;n.inputHidden=false;e.executed.emit({notebook:t,cell:n,success:true});break;case"code":if(o){if(o.isTerminating){await(0,i.showDialog)({title:u.__("Kernel Terminating"),body:u.__("The kernel for %1 appears to be terminating. You can not run any cell for now.",(d=o.session)===null||d===void 0?void 0:d.path),buttons:[i.Dialog.okButton()]});break}if(o.pendingInput){await(0,i.showDialog)({title:u.__("Cell not executed due to pending input"),body:u.__("The cell has not been executed to avoid kernel deadlock as there is another pending input! Submit your pending input and try again."),buttons:[i.Dialog.okButton()]});return false}if(o.hasNoKernel){const e=await o.startKernel();if(e&&a){await a.selectKernel(o)}}if(o.hasNoKernel){n.model.sharedModel.transact((()=>{n.model.clearExecution()}));return true}const r=(h=(c=t.model)===null||c===void 0?void 0:c.deletedCells)!==null&&h!==void 0?h:[];e.executionScheduled.emit({notebook:t,cell:n});let l=false;try{const e=await s.CodeCell.execute(n,o,{deletedCells:r,recordTiming:t.notebookConfig.recordTiming});r.splice(0,r.length);l=(()=>{if(n.isDisposed){return false}if(!e){return true}if(e.content.status==="ok"){const i=e.content;if(i.payload&&i.payload.length){g(i,t,n)}return true}else{throw new p(e.content)}})()}catch(m){if(n.isDisposed||m.message.startsWith("Canceled")){l=false}else{e.executed.emit({notebook:t,cell:n,success:false,error:m});throw m}}if(l){e.executed.emit({notebook:t,cell:n,success:true})}return l}n.model.sharedModel.transact((()=>{n.model.clearExecution()}),false);break;default:break}return Promise.resolve(true)}function g(e,t,n){var i;const s=(i=e.payload)===null||i===void 0?void 0:i.filter((e=>e.source==="set_next_input"))[0];if(!s){return}const o=s.text;const r=s.replace;if(r){n.model.sharedModel.setSource(o);return}const l=t.model.sharedModel;const d=t.model.cells;const c=(0,a.findIndex)(d,(e=>e===n.model));if(c===-1){l.insertCell(l.cells.length,{cell_type:"code",source:o,metadata:{trusted:false}})}else{l.insertCell(c+1,{cell_type:"code",source:o,metadata:{trusted:false}})}}function f(e){return e.widgets.filter((t=>e.isSelectedOrActive(t))).map((e=>e.model.toJSON())).map((e=>{if(e.metadata.deletable!==undefined){delete e.metadata.deletable}return e}))}e.selectedCells=f;function v(s,o){if(!s.model||!s.activeCell){return}const r=t(s);const a=i.Clipboard.getInstance();s.mode="command";a.clear();const l=e.selectedCells(s);a.setData(u,l);if(o){b(s)}else{s.deselectAll()}if(o){s.lastClipboardInteraction="cut"}else{s.lastClipboardInteraction="copy"}n(s,r)}e.copyOrCut=v;function _(e,t){const n=e.model.sharedModel;e.widgets.forEach(((i,s)=>{if(!e.isSelectedOrActive(i)){return}if(i.model.type!==t){const e=i.model.toJSON();n.transact((()=>{n.deleteCell(s);if(t==="code"){e.metadata.trusted=true}else{e.metadata.trusted=undefined}const i=n.insertCell(s,{cell_type:t,source:e.source,metadata:e.metadata});if(e.attachments&&["markdown","raw"].includes(t)){i.attachments=e.attachments}}))}if(t==="markdown"){i=e.widgets[s];i.rendered=false}}));e.deselectAll()}e.changeCellType=_;function b(e){const t=e.model;const n=t.sharedModel;const i=[];e.mode="command";e.widgets.forEach(((t,n)=>{var s;const o=t.model.getMetadata("deletable")!==false;if(e.isSelectedOrActive(t)&&o){i.push(n);(s=e.model)===null||s===void 0?void 0:s.deletedCells.push(t.model.id)}}));if(i.length>0){n.transact((()=>{i.reverse().forEach((e=>{n.deleteCell(e)}));if(n.cells.length==i.length){n.insertCell(0,{cell_type:e.notebookConfig.defaultCell,metadata:e.notebookConfig.defaultCell==="code"?{trusted:true}:{}})}}));e.activeCellIndex=i[0]-i.length+1}e.deselectAll()}e.deleteCells=b;function y(e,t){let n=e.sharedModel.getSource();const i=/^(#+\s*)|^(\s*)/;const s=Array(t+1).join("#")+" ";const o=i.exec(n);if(o){n=n.slice(o[0].length)}e.sharedModel.setSource(s+n)}e.setMarkdownHeader=y;let w;(function(t){function n(e,t,n=false,i=false){let s=t.widgets.indexOf(e)-(n?1:0);while(s>=0){let e=m.getHeadingInfo(t.widgets[s]);if(e.isHeading){return i?s:t.widgets[s]}s--}return i?-1:null}t.findParentHeading=n;function i(t,n,i=false){let s=e.Headings.determineHeadingLevel(t,n);if(s==-1){s=1}let o=n.widgets.indexOf(t)-1;while(o>=0){let e=n.widgets[o];let t=m.getHeadingInfo(e);if(t.isHeading&&t.headingLevel<=s){return i?o:e}o--}return i?-1:null}t.findLowerEqualLevelParentHeadingAbove=i;function s(t,n,i=false){let s=e.Headings.determineHeadingLevel(t,n);if(s==-1){s=1}let o=n.widgets.indexOf(t)+1;while(o<n.widgets.length){let e=n.widgets[o];let t=m.getHeadingInfo(e);if(t.isHeading&&t.headingLevel<=s){return i?o:e}o++}return i?-1:null}t.findLowerEqualLevelHeadingBelow=s;function r(e,t,n=false){let i=t.widgets.indexOf(e)+1;while(i<t.widgets.length){let e=t.widgets[i];let s=m.getHeadingInfo(e);if(s.isHeading){return n?i:e}i++}return n?-1:null}t.findHeadingBelow=r;function a(e,t){let i=m.getHeadingInfo(e);if(i.isHeading){return i.headingLevel}else{let i=n(e,t,true);if(i==null){return-1}return m.getHeadingInfo(i).headingLevel}}t.determineHeadingLevel=a;async function l(t,n,i){var s;n=Math.min(Math.max(n,1),6);const r=e.getState(i);const a=i.model;const l=a.sharedModel;l.insertCell(t,{cell_type:"markdown",source:"#".repeat(n)+" "});i.activeCellIndex=t;if(((s=i.activeCell)===null||s===void 0?void 0:s.inViewport)===false){await(0,o.signalToPromise)(i.activeCell.inViewportChanged,200).catch((()=>{}))}i.deselectAll();e.handleState(i,r,true);i.mode="edit";i.widgets[t].setHidden(false)}t.insertHeadingAboveCellIndex=l})(w=e.Headings||(e.Headings={}))})(g||(g={}));class f{constructor(e){this.model=e;this._cellMap=new WeakMap;this._changed=new d.Signal(this);this._isDisposed=false;this._insertCells(0,this.model.cells);this.model.changed.connect(this._onSharedModelChanged,this)}get changed(){return this._changed}get isDisposed(){return this._isDisposed}get length(){return this.model.cells.length}*[Symbol.iterator](){for(const e of this.model.cells){yield this._cellMap.get(e)}}dispose(){var e;if(this._isDisposed){return}this._isDisposed=true;for(const t of this.model.cells){(e=this._cellMap.get(t))===null||e===void 0?void 0:e.dispose()}d.Signal.clearData(this)}get(e){return this._cellMap.get(this.model.cells[e])}_insertCells(e,t){t.forEach((e=>{let t;switch(e.cell_type){case"code":{t=new s.CodeCellModel({sharedModel:e});break}case"markdown":{t=new s.MarkdownCellModel({sharedModel:e});break}default:{t=new s.RawCellModel({sharedModel:e})}}this._cellMap.set(e,t);e.disposed.connect((()=>{t.dispose();this._cellMap.delete(e)}))}));return this.length}_onSharedModelChanged(e,t){var n;let i=0;const s=new Array;(n=t.cellsChange)===null||n===void 0?void 0:n.forEach((e=>{if(e.insert!=null){this._insertCells(i,e.insert);s.push({type:"add",newIndex:i,newValues:e.insert.map((e=>this._cellMap.get(e))),oldIndex:-2,oldValues:[]});i+=e.insert.length}else if(e.delete!=null){s.push({type:"remove",newIndex:-1,newValues:[],oldIndex:i,oldValues:new Array(e.delete).fill(undefined)})}else if(e.retain!=null){i+=e.retain}}));s.forEach((e=>this._changed.emit(e)))}}var v=n(52435);const _="jp-Notebook-toolbarCellType";const b="jp-Notebook-toolbarCellTypeDropdown";var y;(function(e){function t(e,t){const n=(t||r.nullTranslator).load("jupyterlab");function s(){if(e.context.model.readOnly){return(0,i.showDialog)({title:n.__("Cannot Save"),body:n.__("Document is read-only"),buttons:[i.Dialog.okButton()]})}void e.context.save().then((()=>{if(!e.isDisposed){return e.context.createCheckpoint()}}))}return(0,v.addToolbarButtonClass)(v.ReactWidget.create(c.createElement(v.UseSignal,{signal:e.context.fileChanged},(()=>c.createElement(v.ToolbarButtonComponent,{icon:v.saveIcon,onClick:s,tooltip:n.__("Save the notebook contents and create checkpoint"),enabled:!!(e&&e.context&&e.context.contentsModel&&e.context.contentsModel.writable)})))))}e.createSaveButton=t;function n(e,t){const n=(t||r.nullTranslator).load("jupyterlab");return new v.ToolbarButton({icon:v.addIcon,onClick:()=>{m.insertBelow(e.content)},tooltip:n.__("Insert a cell below")})}e.createInsertButton=n;function s(e,t){const n=(t||r.nullTranslator).load("jupyterlab");return new v.ToolbarButton({icon:v.cutIcon,onClick:()=>{m.cut(e.content)},tooltip:n.__("Cut the selected cells")})}e.createCutButton=s;function o(e,t){const n=(t||r.nullTranslator).load("jupyterlab");return new v.ToolbarButton({icon:v.copyIcon,onClick:()=>{m.copy(e.content)},tooltip:n.__("Copy the selected cells")})}e.createCopyButton=o;function a(e,t){const n=(t||r.nullTranslator).load("jupyterlab");return new v.ToolbarButton({icon:v.pasteIcon,onClick:()=>{m.paste(e.content)},tooltip:n.__("Paste cells from the clipboard")})}e.createPasteButton=a;function l(e,t,n){const i=(n!==null&&n!==void 0?n:r.nullTranslator).load("jupyterlab");return new v.ToolbarButton({icon:v.runIcon,onClick:()=>{void m.runAndAdvance(e.content,e.sessionContext,t,n)},tooltip:i.__("Run the selected cells and advance")})}e.createRunButton=l;function d(e,t,n){const s=(n!==null&&n!==void 0?n:r.nullTranslator).load("jupyterlab");return new v.ToolbarButton({icon:v.fastForwardIcon,onClick:()=>{const s=t!==null&&t!==void 0?t:new i.SessionContextDialogs({translator:n});void s.restart(e.sessionContext).then((t=>{if(t){void m.runAll(e.content,e.sessionContext,s,n)}return t}))},tooltip:s.__("Restart the kernel, then re-run the whole notebook")})}e.createRestartRunAllButton=d;function h(e,t){return new w(e.content,t)}e.createCellTypeItem=h;function u(e,r,c){return[{name:"save",widget:t(e,c)},{name:"insert",widget:n(e,c)},{name:"cut",widget:s(e,c)},{name:"copy",widget:o(e,c)},{name:"paste",widget:a(e,c)},{name:"run",widget:l(e,r,c)},{name:"interrupt",widget:i.Toolbar.createInterruptButton(e.sessionContext,c)},{name:"restart",widget:i.Toolbar.createRestartButton(e.sessionContext,r,c)},{name:"restart-and-run",widget:d(e,r,c)},{name:"cellType",widget:h(e,c)},{name:"spacer",widget:v.Toolbar.createSpacerItem()},{name:"kernelName",widget:i.Toolbar.createKernelNameItem(e.sessionContext,r,c)}]}e.getDefaultItems=u})(y||(y={}));class w extends v.ReactWidget{constructor(e,t){super();this.handleChange=e=>{if(e.target.value!=="-"){m.changeCellType(this._notebook,e.target.value);this._notebook.activate()}};this.handleKeyDown=e=>{if(e.keyCode===13){this._notebook.activate()}};this._trans=(t||r.nullTranslator).load("jupyterlab");this.addClass(_);this._notebook=e;if(e.model){this.update()}e.activeCellChanged.connect(this.update,this);e.selectionChanged.connect(this.update,this)}render(){let e="-";if(this._notebook.activeCell){e=this._notebook.activeCell.model.type}for(const t of this._notebook.widgets){if(this._notebook.isSelectedOrActive(t)){if(t.model.type!==e){e="-";break}}}return c.createElement(v.HTMLSelect,{className:b,onChange:this.handleChange,onKeyDown:this.handleKeyDown,value:e,"aria-label":this._trans.__("Cell type"),title:this._trans.__("Select the cell type")},c.createElement("option",{value:"-"},"-"),c.createElement("option",{value:"code"},this._trans.__("Code")),c.createElement("option",{value:"markdown"},this._trans.__("Markdown")),c.createElement("option",{value:"raw"},this._trans.__("Raw")))}}var C=n(88478);var x=n(74513);function S(e){const t=e.translator||r.nullTranslator;const n=(0,i.translateKernelStatuses)(t);const s=t.load("jupyterlab");const o=e.state;const a=e.displayOption.showOnToolBar;const l=e.displayOption.showProgress;const d=a?"down":"up";const c=h().createElement("div",null);if(!o){return c}const u=o.kernelStatus;const p={alignSelf:"normal",height:"24px"};const m=o.totalTime;const g=o.scheduledCellNumber||0;const f=o.scheduledCell.size||0;const _=g-f;let b=100*_/g;let y=l?"":"hidden";if(!l&&b<100){b=0}const w=e=>h().createElement(C.ProgressCircle,{progress:e,width:16,height:24,label:s.__("Kernel status")});const x=e=>s.__("Kernel status: %1",e);const S=(e,t,i)=>h().createElement("div",{className:"jp-Notebook-ExecutionIndicator",title:l?"":x(n[e]),"data-status":e},t,h().createElement("div",{className:`jp-Notebook-ExecutionIndicator-tooltip ${d} ${y}`},h().createElement("span",null," ",x(n[e])," "),i));if(o.kernelStatus==="connecting"||o.kernelStatus==="disconnected"||o.kernelStatus==="unknown"){return S(u,h().createElement(v.offlineBoltIcon.react,{...p}),[])}if(o.kernelStatus==="starting"||o.kernelStatus==="terminating"||o.kernelStatus==="restarting"||o.kernelStatus==="initializing"){return S(u,h().createElement(v.circleIcon.react,{...p}),[])}if(o.executionStatus==="busy"){return S("busy",w(b),[h().createElement("span",{key:0},s.__(`Executed ${_}/${g} cells`)),h().createElement("span",{key:1},s._n("Elapsed time: %1 second","Elapsed time: %1 seconds",m))])}else{const e=o.kernelStatus==="busy"?0:100;const t=o.kernelStatus==="busy"||m===0?[]:[h().createElement("span",{key:0},s._n("Executed %1 cell","Executed %1 cells",g)),h().createElement("span",{key:1},s._n("Elapsed time: %1 second","Elapsed time: %1 seconds",m))];return S(o.kernelStatus,w(e),t)}}class k extends v.VDomRenderer{constructor(e,t=true){super(new k.Model);this.translator=e||r.nullTranslator;this.addClass("jp-mod-highlighted")}render(){if(this.model===null||!this.model.renderFlag){return h().createElement("div",null)}else{const e=this.model.currentNotebook;if(!e){return h().createElement(S,{displayOption:this.model.displayOption,state:undefined,translator:this.translator})}return h().createElement(S,{displayOption:this.model.displayOption,state:this.model.executionState(e),translator:this.translator})}}}(function(e){class t extends v.VDomModel{constructor(){super();this._notebookExecutionProgress=new WeakMap;this._displayOption={showOnToolBar:true,showProgress:true};this._renderFlag=true}attachNotebook(e){var t,n,i,s;if(e&&e.content&&e.context){const o=e.content;const r=e.context;this._currentNotebook=o;if(!this._notebookExecutionProgress.has(o)){this._notebookExecutionProgress.set(o,{executionStatus:"idle",kernelStatus:"idle",totalTime:0,interval:0,timeout:0,scheduledCell:new Set,scheduledCellNumber:0,needReset:true});const e=this._notebookExecutionProgress.get(o);const a=t=>{if(e){e.kernelStatus=t.kernelDisplayStatus}this.stateChanged.emit(void 0)};r.statusChanged.connect(a,this);const l=t=>{if(e){e.kernelStatus=t.kernelDisplayStatus}this.stateChanged.emit(void 0)};r.connectionStatusChanged.connect(l,this);r.disposed.connect((e=>{e.connectionStatusChanged.disconnect(l,this);e.statusChanged.disconnect(a,this)}));const d=(e,t)=>{const n=t.msg;const i=n.header.msg_id;if(n.header.msg_type==="execute_request"){this._cellScheduledCallback(o,i)}else if(x.KernelMessage.isStatusMsg(n)&&n.content.execution_state==="idle"){const e=n.parent_header.msg_id;this._cellExecutedCallback(o,e)}else if(x.KernelMessage.isStatusMsg(n)&&n.content.execution_state==="restarting"){this._restartHandler(o)}else if(n.header.msg_type==="execute_input"){this._startTimer(o)}};(n=(t=r.session)===null||t===void 0?void 0:t.kernel)===null||n===void 0?void 0:n.anyMessage.connect(d);(s=(i=r.session)===null||i===void 0?void 0:i.kernel)===null||s===void 0?void 0:s.disposed.connect((e=>e.anyMessage.disconnect(d)));const c=(t,n)=>{if(e){this._resetTime(e);this.stateChanged.emit(void 0);if(n.newValue){n.newValue.anyMessage.connect(d)}}};r.kernelChanged.connect(c);r.disposed.connect((e=>e.kernelChanged.disconnect(c)))}}}get currentNotebook(){return this._currentNotebook}get displayOption(){return this._displayOption}set displayOption(e){this._displayOption=e}executionState(e){return this._notebookExecutionProgress.get(e)}_scheduleSwitchToIdle(e){window.setTimeout((()=>{e.executionStatus="idle";clearInterval(e.interval);this.stateChanged.emit(void 0)}),150);e.timeout=window.setTimeout((()=>{e.needReset=true}),1e3)}_cellExecutedCallback(e,t){const n=this._notebookExecutionProgress.get(e);if(n&&n.scheduledCell.has(t)){n.scheduledCell.delete(t);if(n.scheduledCell.size===0){this._scheduleSwitchToIdle(n)}}}_restartHandler(e){const t=this._notebookExecutionProgress.get(e);if(t){t.scheduledCell.clear();this._scheduleSwitchToIdle(t)}}_startTimer(e){const t=this._notebookExecutionProgress.get(e);if(!t){return}if(t.scheduledCell.size>0){if(t.executionStatus!=="busy"){t.executionStatus="busy";clearTimeout(t.timeout);this.stateChanged.emit(void 0);t.interval=window.setInterval((()=>{this._tick(t)}),1e3)}}else{this._resetTime(t)}}_cellScheduledCallback(e,t){const n=this._notebookExecutionProgress.get(e);if(n&&!n.scheduledCell.has(t)){if(n.needReset){this._resetTime(n)}n.scheduledCell.add(t);n.scheduledCellNumber+=1}}_tick(e){e.totalTime+=1;this.stateChanged.emit(void 0)}_resetTime(e){e.totalTime=0;e.scheduledCellNumber=0;e.executionStatus="idle";e.scheduledCell=new Set;clearTimeout(e.timeout);clearInterval(e.interval);e.needReset=false}get renderFlag(){return this._renderFlag}updateRenderOption(e){if(this.displayOption.showOnToolBar){if(!e.showOnToolBar){this._renderFlag=false}else{this._renderFlag=true}}this.displayOption.showProgress=e.showProgress;this.stateChanged.emit(void 0)}}e.Model=t;function n(t,n,s){const o=new e(n);o.model.displayOption={showOnToolBar:true,showProgress:true};o.model.attachNotebook({content:t.content,context:t.sessionContext});if(s){s.then((e=>{const t=e=>{o.model.updateRenderOption(i(e))};e.changed.connect(t);t(e);o.disposed.connect((()=>{e.changed.disconnect(t)}))})).catch((e=>{console.error(e.message)}))}return o}e.createExecutionIndicatorItem=n;function i(e){let t=true;let n=true;const i=e.get("kernelStatus").composite;if(i){t=!i.showOnStatusBar;n=i.showProgress}return{showOnToolBar:t,showProgress:n}}e.getSettingValue=i})(k||(k={}));var j=n(12012);var M=n(87519);class E{constructor(e={}){var t,n;this.standaloneModel=false;this._dirty=false;this._readOnly=false;this._contentChanged=new d.Signal(this);this._stateChanged=new d.Signal(this);this._isDisposed=false;this._metadataChanged=new d.Signal(this);this.standaloneModel=typeof e.sharedModel==="undefined";if(e.sharedModel){this.sharedModel=e.sharedModel}else{this.sharedModel=M.YNotebook.create({disableDocumentWideUndoRedo:(t=e.disableDocumentWideUndoRedo)!==null&&t!==void 0?t:true,data:{nbformat:j.MAJOR_VERSION,nbformat_minor:j.MINOR_VERSION,metadata:{kernelspec:{name:"",display_name:""},language_info:{name:(n=e.languagePreference)!==null&&n!==void 0?n:""}}}})}this._cells=new f(this.sharedModel);this._trans=(e.translator||r.nullTranslator).load("jupyterlab");this._deletedCells=[];this._collaborationEnabled=!!(e===null||e===void 0?void 0:e.collaborationEnabled);this._cells.changed.connect(this._onCellsChanged,this);this.sharedModel.changed.connect(this._onStateChanged,this);this.sharedModel.metadataChanged.connect(this._onMetadataChanged,this)}get contentChanged(){return this._contentChanged}get metadataChanged(){return this._metadataChanged}get stateChanged(){return this._stateChanged}get cells(){return this._cells}get dirty(){return this._dirty}set dirty(e){const t=this._dirty;if(e===t){return}this._dirty=e;this.triggerStateChange({name:"dirty",oldValue:t,newValue:e})}get readOnly(){return this._readOnly}set readOnly(e){if(e===this._readOnly){return}const t=this._readOnly;this._readOnly=e;this.triggerStateChange({name:"readOnly",oldValue:t,newValue:e})}get metadata(){return this.sharedModel.metadata}get nbformat(){return this.sharedModel.nbformat}get nbformatMinor(){return this.sharedModel.nbformat_minor}get defaultKernelName(){var e;const t=this.getMetadata("kernelspec");return(e=t===null||t===void 0?void 0:t.name)!==null&&e!==void 0?e:""}get deletedCells(){return this._deletedCells}get defaultKernelLanguage(){var e;const t=this.getMetadata("language_info");return(e=t===null||t===void 0?void 0:t.name)!==null&&e!==void 0?e:""}get collaborative(){return this._collaborationEnabled}dispose(){if(this.isDisposed){return}this._isDisposed=true;const e=this.cells;this._cells=null;e.dispose();if(this.standaloneModel){this.sharedModel.dispose()}d.Signal.clearData(this)}deleteMetadata(e){return this.sharedModel.deleteMetadata(e)}getMetadata(e){return this.sharedModel.getMetadata(e)}setMetadata(e,t){if(typeof t==="undefined"){this.sharedModel.deleteMetadata(e)}else{this.sharedModel.setMetadata(e,t)}}toString(){return JSON.stringify(this.toJSON())}fromString(e){this.fromJSON(JSON.parse(e))}toJSON(){this._ensureMetadata();return this.sharedModel.toJSON()}fromJSON(e){var t,n;const s=l.JSONExt.deepCopy(e);const o=e.metadata.orig_nbformat;s.nbformat=Math.max(e.nbformat,j.MAJOR_VERSION);if(s.nbformat!==e.nbformat||s.nbformat_minor<j.MINOR_VERSION){s.nbformat_minor=j.MINOR_VERSION}if(o!==undefined&&s.nbformat!==o){const e=s.nbformat>o;let t;if(e){t=this._trans.__(`This notebook has been converted from an older notebook format (v%1)\nto the current notebook format (v%2).\nThe next time you save this notebook, the current notebook format (v%2) will be used.\n'Older versions of Jupyter may not be able to read the new format.' To preserve the original format version,\nclose